var ej=Object.defineProperty;var h=(s,e)=>ej(s,"name",{value:e,configurable:!0});import{_ as he,O as tj,b as nj,o as ij,f as UA,d as oj,B as sj,e as rj}from"./index.5728258e.js";import{u as aj}from"./useControlled.5451ba2e.js";function lj(s,e){let t;return e.length===0?t=s:t=s.replace(/\{(\d+)\}/g,function(n,i){const o=i[0];return typeof e[o]<"u"?e[o]:n}),t}h(lj,"_format$1");function p(s,e,...t){return lj(e,t)}h(p,"localize");var py;const Rv="en";let Pw=!1,Ow=!1,Pv=!1,DP=!1,aD=!1,lD=!1,Fb,Ov=Rv,dj,ml;const tn=typeof self=="object"?self:typeof global=="object"?global:{};let gi;typeof tn.vscode<"u"&&typeof tn.vscode.process<"u"?gi=tn.vscode.process:typeof process<"u"&&(gi=process);const cj=typeof((py=gi?.versions)===null||py===void 0?void 0:py.electron)=="string",hj=cj&&gi?.type==="renderer";if(typeof navigator=="object"&&!hj)ml=navigator.userAgent,Pw=ml.indexOf("Windows")>=0,Ow=ml.indexOf("Macintosh")>=0,lD=(ml.indexOf("Macintosh")>=0||ml.indexOf("iPad")>=0||ml.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Pv=ml.indexOf("Linux")>=0,aD=!0,Fb=navigator.language,Ov=Fb;else if(typeof gi=="object"){Pw=gi.platform==="win32",Ow=gi.platform==="darwin",Pv=gi.platform==="linux",Pv&&!!gi.env.SNAP&&gi.env.SNAP_REVISION,gi.env.CI||gi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Fb=Rv,Ov=Rv;const s=gi.env.VSCODE_NLS_CONFIG;if(s)try{const e=JSON.parse(s),t=e.availableLanguages["*"];Fb=e.locale,Ov=t||Rv,dj=e._translationsConfigFile}catch{}DP=!0}else console.error("Unable to resolve platform.");const Vn=Pw,Ke=Ow,ni=Pv,Zs=DP,kd=aD,uj=aD&&typeof tn.importScripts=="function",tr=lD,Hr=ml,fj=Ov,IP=(()=>{if(typeof tn.postMessage=="function"&&!tn.importScripts){let s=[];tn.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=s.length;n<i;n++){const o=s[n];if(o.id===t.data.vscodeScheduleAsyncWork){s.splice(n,1),o.callback();return}}});let e=0;return t=>{const n=++e;s.push({id:n,callback:t}),tn.postMessage({vscodeScheduleAsyncWork:n},"*")}}return s=>setTimeout(s)})(),Bo=Ow||lD?2:Pw?1:3;let jA=!0,GA=!1;function NP(){if(!GA){GA=!0;const s=new Uint8Array(2);s[0]=1,s[1]=2,jA=new Uint16Array(s.buffer)[0]===(2<<8)+1}return jA}h(NP,"isLittleEndian");const AP=!!(Hr&&Hr.indexOf("Chrome")>=0),gj=!!(Hr&&Hr.indexOf("Firefox")>=0),pj=!!(!AP&&Hr&&Hr.indexOf("Safari")>=0),mj=!!(Hr&&Hr.indexOf("Edg/")>=0);Hr&&Hr.indexOf("Android")>=0;const MP="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function _j(s=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of MP)s.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}h(_j,"createWordRegExp");const dD=_j();function RP(s){let e=dD;if(s&&s instanceof RegExp)if(s.global)e=s;else{let t="g";s.ignoreCase&&(t+="i"),s.multiline&&(t+="m"),s.unicode&&(t+="u"),e=new RegExp(s.source,t)}return e.lastIndex=0,e}h(RP,"ensureValidWordDefinition");const bj={maxLen:1e3,windowSize:15,timeBudget:150};function am(s,e,t,n,i=bj){if(t.length>i.maxLen){let d=s-i.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,s+i.maxLen/2),am(s,e,t,n,i)}const o=Date.now(),r=s-1-n;let a=-1,l=null;for(let d=1;!(Date.now()-o>=i.timeBudget);d++){const c=r-i.windowSize*d;e.lastIndex=Math.max(0,c);const u=vj(e,t,r,a);if(!u&&l||(l=u,c<=0))break;a=c}if(l){const d={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,d}return null}h(am,"getWordAtText");function vj(s,e,t,n){let i;for(;i=s.exec(e);){const o=i.index||0;if(o<=t&&s.lastIndex>=t)return i;if(n>0&&o>n)return null}return null}h(vj,"_findRegexMatchEnclosingPosition");function Ro(s,e=0){return s[s.length-(1+e)]}h(Ro,"tail");function wj(s){if(s.length===0)throw new Error("Invalid tail call");return[s.slice(0,s.length-1),s[s.length-1]]}h(wj,"tail2");function xo(s,e,t=(n,i)=>n===i){if(s===e)return!0;if(!s||!e||s.length!==e.length)return!1;for(let n=0,i=s.length;n<i;n++)if(!t(s[n],e[n]))return!1;return!0}h(xo,"equals$1");function cD(s,e,t){let n=0,i=s.length-1;for(;n<=i;){const o=(n+i)/2|0,r=t(s[o],e);if(r<0)n=o+1;else if(r>0)i=o-1;else return o}return-(n+1)}h(cD,"binarySearch");function PP(s,e){let t=0,n=s.length;if(n===0)return 0;for(;t<n;){const i=Math.floor((t+n)/2);e(s[i])?n=i:t=i+1}return t}h(PP,"findFirstInSorted");function cx(s,e,t){if(s=s|0,s>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],i=[],o=[],r=[];for(let a of e){const l=t(a,n);l<0?i.push(a):l>0?o.push(a):r.push(a)}return s<i.length?cx(s,i,t):s<i.length+r.length?r[0]:cx(s-(i.length+r.length),o,t)}h(cx,"quickSelect");function $A(s,e){const t=[];let n;for(const i of s.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}h($A,"groupBy");function Mh(s){return s.filter(e=>!!e)}h(Mh,"coalesce");function OP(s){return!Array.isArray(s)||s.length===0}h(OP,"isFalsyOrEmpty");function io(s){return Array.isArray(s)&&s.length>0}h(io,"isNonEmptyArray");function Yl(s,e=t=>t){const t=new Set;return s.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}h(Yl,"distinct");function Cj(s,e){const t=yj(s,e);if(t!==-1)return s[t]}h(Cj,"findLast");function yj(s,e){for(let t=s.length-1;t>=0;t--){const n=s[t];if(e(n))return t}return-1}h(yj,"lastIndex");function FP(s,e){return s.length>0?s[0]:e}h(FP,"firstOrDefault");function hD(s){return[].concat(...s)}h(hD,"flatten");function fi(s,e){let t=typeof e=="number"?s:0;typeof e=="number"?t=s:(t=0,e=s);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}h(fi,"range");function a0(s,e,t){const n=s.slice(0,e),i=s.slice(e);return n.concat(t,i)}h(a0,"arrayInsert");function my(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.unshift(e))}h(my,"pushToStart");function Wb(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.push(e))}h(Wb,"pushToEnd");function uD(s){return Array.isArray(s)?s:[s]}h(uD,"asArray");function Sj(s,e,t){const n=WP(s,e),i=s.length,o=t.length;s.length=i+o;for(let r=i-1;r>=n;r--)s[r+o]=s[r];for(let r=0;r<o;r++)s[r+n]=t[r]}h(Sj,"insertInto");function qA(s,e,t,n){const i=WP(s,e),o=s.splice(i,t);return Sj(s,i,n),o}h(qA,"splice$1");function WP(s,e){return e<0?Math.max(e+s.length,0):Math.min(e,s.length)}h(WP,"getActualStartIndex");function Fv(s,e){return(t,n)=>e(s(t),s(n))}h(Fv,"compareBy");const xj=h((s,e)=>s-e,"numberComparator");function VP(s,e){if(s.length===0)return;let t=s[0];for(let n=1;n<s.length;n++){const i=s[n];e(i,t)>0&&(t=i)}return t}h(VP,"findMaxBy");function Tj(s,e){if(s.length===0)return;let t=s[0];for(let n=1;n<s.length;n++){const i=s[n];e(i,t)>=0&&(t=i)}return t}h(Tj,"findLastMaxBy");function Lj(s,e){return VP(s,(t,n)=>-e(t,n))}h(Lj,"findMinBy");class jc{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}h(jc,"ArrayQueue");function BP(s){return Array.isArray(s)}h(BP,"isArray");function Yo(s){return typeof s=="string"}h(Yo,"isString$1");function Wi(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&!(s instanceof RegExp)&&!(s instanceof Date)}h(Wi,"isObject");function Gc(s){return typeof s=="number"&&!isNaN(s)}h(Gc,"isNumber$1");function YA(s){return!!s&&typeof s[Symbol.iterator]=="function"}h(YA,"isIterable");function HP(s){return s===!0||s===!1}h(HP,"isBoolean");function Ji(s){return typeof s>"u"}h(Ji,"isUndefined");function kj(s){return!_o(s)}h(kj,"isDefined");function _o(s){return Ji(s)||s===null}h(_o,"isUndefinedOrNull");function bt(s,e){if(!s)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}h(bt,"assertType");function Vb(s){if(_o(s))throw new Error("Assertion Failed: argument is undefined or null");return s}h(Vb,"assertIsDefined");function Fw(s){return typeof s=="function"}h(Fw,"isFunction");function Ej(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++)Dj(s[n],e[n])}h(Ej,"validateConstraints");function Dj(s,e){if(Yo(e)){if(typeof s!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Fw(e)){try{if(s instanceof e)return}catch{}if(!_o(s)&&s.constructor===e||e.length===1&&e.call(void 0,s)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}h(Dj,"validateConstraint");function Ij(s){let e=[],t=Object.getPrototypeOf(s);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}h(Ij,"getAllPropertyNames");function fD(s){const e=[];for(const t of Ij(s))typeof s[t]=="function"&&e.push(t);return e}h(fD,"getAllMethodNames");function Nj(s,e){const t=h(i=>function(){const o=Array.prototype.slice.call(arguments,0);return e(i,o)},"createProxyMethod");let n={};for(const i of s)n[i]=t(i);return n}h(Nj,"createProxyObject$1");function Qi(s){return s===null?void 0:s}h(Qi,"withNullAsUndefined");function gD(s,e="Unreachable"){throw new Error(e)}h(gD,"assertNever");function ba(s){if(!s||typeof s!="object"||s instanceof RegExp)return s;const e=Array.isArray(s)?[]:{};return Object.keys(s).forEach(t=>{s[t]&&typeof s[t]=="object"?e[t]=ba(s[t]):e[t]=s[t]}),e}h(ba,"deepClone");function Aj(s){if(!s||typeof s!="object")return s;const e=[s];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(zP.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&e.push(i)}}return s}h(Aj,"deepFreeze");const zP=Object.prototype.hasOwnProperty;function Mj(s,e){return hx(s,e,new Set)}h(Mj,"cloneAndChange");function hx(s,e,t){if(_o(s))return s;const n=e(s);if(typeof n<"u")return n;if(BP(s)){const i=[];for(const o of s)i.push(hx(o,e,t));return i}if(Wi(s)){if(t.has(s))throw new Error("Cannot clone recursive data-structure");t.add(s);const i={};for(let o in s)zP.call(s,o)&&(i[o]=hx(s[o],e,t));return t.delete(s),i}return s}h(hx,"_cloneAndChange");function $r(s,e,t=!0){return Wi(s)?(Wi(e)&&Object.keys(e).forEach(n=>{n in s?t&&(Wi(s[n])&&Wi(e[n])?$r(s[n],e[n],t):s[n]=e[n]):s[n]=e[n]}),s):e}h($r,"mixin");function Go(s,e){if(s===e)return!0;if(s==null||e===null||e===void 0||typeof s!=typeof e||typeof s!="object"||Array.isArray(s)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(s)){if(s.length!==e.length)return!1;for(t=0;t<s.length;t++)if(!Go(s[t],e[t]))return!1}else{const i=[];for(n in s)i.push(n);i.sort();const o=[];for(n in e)o.push(n);if(o.sort(),!Go(i,o))return!1;for(t=0;t<i.length;t++)if(!Go(s[i[t]],e[i[t]]))return!1}return!0}h(Go,"equals");function mr(s,e,t){const n=e(s);return typeof n>"u"?t:n}h(mr,"getOrDefault");const ri={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},_l=8;class pD{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}h(pD,"ConfigurationChangedEvent");class mD{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}h(mD,"ComputeOptionsMemory");class bn{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return l0(e,t)}compute(e,t,n){return n}}h(bn,"BaseEditorOption");class Vu{constructor(e,t){this.newValue=e,this.didChange=t}}h(Vu,"ApplyUpdateResult");function l0(s,e){if(typeof s!="object"||typeof e!="object"||!s||!e)return new Vu(e,s!==e);if(Array.isArray(s)||Array.isArray(e)){const n=Array.isArray(s)&&Array.isArray(e)&&xo(s,e);return new Vu(e,n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const i=l0(s[n],e[n]);i.didChange&&(s[n]=i.newValue,t=!0)}return new Vu(s,t)}h(l0,"applyUpdate");class Rh{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return l0(e,t)}validate(e){return this.defaultValue}}h(Rh,"ComputedEditorOption");class Ed{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return l0(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}h(Ed,"SimpleEditorOption");function we(s,e){return typeof s>"u"?e:s==="false"?!1:Boolean(s)}h(we,"boolean");class Ye extends Ed{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n);super(e,t,n,i)}validate(e){return we(e,this.defaultValue)}}h(Ye,"EditorBooleanOption");function ux(s,e,t,n){if(typeof s>"u")return e;let i=parseInt(s,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}h(ux,"clampedInt");class Tt extends Ed{constructor(e,t,n,i,o,r=void 0){typeof r<"u"&&(r.type="integer",r.default=n,r.minimum=i,r.maximum=o);super(e,t,n,r);this.minimum=i,this.maximum=o}static clampedInt(e,t,n,i){return ux(e,t,n,i)}validate(e){return Tt.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}h(Tt,"EditorIntOption");class js extends Ed{constructor(e,t,n,i,o){typeof o<"u"&&(o.type="number",o.default=n);super(e,t,n,o);this.validationFn=i}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(js.float(e,this.defaultValue))}}h(js,"EditorFloatOption");class Mi extends Ed{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n);super(e,t,n,i)}validate(e){return Mi.string(e,this.defaultValue)}}h(Mi,"EditorStringOption");function Pi(s,e,t){return typeof s!="string"||t.indexOf(s)===-1?e:s}h(Pi,"stringSet");class hn extends Ed{constructor(e,t,n,i,o=void 0){typeof o<"u"&&(o.type="string",o.enum=i,o.default=n);super(e,t,n,o);this._allowedValues=i}validate(e){return Pi(e,this.defaultValue,this._allowedValues)}}h(hn,"EditorStringEnumOption");class wu extends bn{constructor(e,t,n,i,o,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=i);super(e,t,n,a);this._allowedValues=o,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}h(wu,"EditorEnumOption");function Rj(s){switch(s){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}h(Rj,"_autoIndentFromString");class KP extends bn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),p("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),p("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:p("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}h(KP,"EditorAccessibilitySupport");class UP extends bn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:we(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:we(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}h(UP,"EditorComments");function Pj(s){switch(s){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}h(Pj,"_cursorBlinkingStyleFromString");var Fn;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(Fn||(Fn={}));function Oj(s){switch(s){case"line":return Fn.Line;case"block":return Fn.Block;case"underline":return Fn.Underline;case"line-thin":return Fn.LineThin;case"block-outline":return Fn.BlockOutline;case"underline-thin":return Fn.UnderlineThin}}h(Oj,"_cursorStyleFromString");class jP extends Rh{constructor(){super(128)}compute(e,t,n){const i=["monaco-editor"];return t.get(33)&&i.push(t.get(33)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(66)==="default"?i.push("mouse-default"):t.get(66)==="copy"&&i.push("mouse-copy"),t.get(100)&&i.push("showUnused"),t.get(126)&&i.push("showDeprecated"),i.join(" ")}}h(jP,"EditorClassName");class GP extends Ye{constructor(){super(32,"emptySelectionClipboard",!0,{description:p("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}h(GP,"EditorEmptySelectionClipboard");class $P extends bn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),p("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),p("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:p("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),p("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),p("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:p("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Ke},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:p("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:we(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Pi(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Pi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:we(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:we(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:we(t.loop,this.defaultValue.loop)}}}h($P,"EditorFind");class Yi extends bn{constructor(){super(45,"fontLigatures",Yi.OFF,{anyOf:[{type:"boolean",description:p("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:p("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:p("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Yi.OFF:e==="true"?Yi.ON:e:Boolean(e)?Yi.ON:Yi.OFF}}h(Yi,"EditorFontLigatures");Yi.OFF='"liga" off, "calt" off';Yi.ON='"liga" on, "calt" on';class qP extends Rh{constructor(){super(44)}compute(e,t,n){return e.fontInfo}}h(qP,"EditorFontInfo");class YP extends Ed{constructor(){super(46,"fontSize",di.fontSize,{type:"number",minimum:6,maximum:100,default:di.fontSize,description:p("fontSize","Controls the font size in pixels.")})}validate(e){const t=js.float(e,this.defaultValue);return t===0?di.fontSize:js.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}h(YP,"EditorFontSize");class Vs extends bn{constructor(){super(47,"fontWeight",di.fontWeight,{anyOf:[{type:"number",minimum:Vs.MINIMUM_VALUE,maximum:Vs.MAXIMUM_VALUE,errorMessage:p("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Vs.SUGGESTION_VALUES}],default:di.fontWeight,description:p("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Tt.clampedInt(e,di.fontWeight,Vs.MINIMUM_VALUE,Vs.MAXIMUM_VALUE))}}h(Vs,"EditorFontWeight");Vs.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Vs.MINIMUM_VALUE=1;Vs.MAXIMUM_VALUE=1e3;class XP extends bn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),p("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),p("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(51,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:p("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:p("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:p("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:p("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:p("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:p("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:p("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:p("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:p("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,o,r;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Pi(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Pi(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Pi(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(i=a.multipleDeclarations)!==null&&i!==void 0?i:Pi(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(o=a.multipleImplementations)!==null&&o!==void 0?o:Pi(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(r=a.multipleReferences)!==null&&r!==void 0?r:Pi(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Mi.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Mi.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Mi.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Mi.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Mi.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}h(XP,"EditorGoToLocation");class ZP extends bn{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(53,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:p("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:we(t.enabled,this.defaultValue.enabled),delay:Tt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:we(t.sticky,this.defaultValue.sticky),above:we(t.above,this.defaultValue.above)}}}h(ZP,"EditorHover");class Tc extends Rh{constructor(){super(131)}compute(e,t,n){return Tc.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,i=(e.viewLineCount+n)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/i);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:i,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let f=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const g=e.minimap.maxColumn,m=e.minimap.size,b=e.minimap.side,v=e.verticalScrollbarWidth,C=e.viewLineCount,w=e.remainingWidth,y=e.isViewportWrapping,S=u?2:3;let L=Math.floor(o*i);const E=L/o;let x=!1,k=!1,N=S*f,V=f/o,F=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:Le,extraLinesBeyondLastLine:Fe,desiredRatio:Ht,minimapLineCount:yt}=Tc.computeContainedMinimapLineCount({viewLineCount:C,scrollBeyondLastLine:c,height:i,lineHeight:l,pixelRatio:o});if(C/yt>1)x=!0,k=!0,f=1,N=1,V=f/o;else{let pe=!1,_t=f+1;if(m==="fit"){const ji=Math.ceil((C+Fe)*N);y&&a&&w<=t.stableFitRemainingWidth?(pe=!0,_t=t.stableFitMaxMinimapScale):pe=ji>L}if(m==="fill"||pe){x=!0;const ji=f;N=Math.min(l*o,Math.max(1,Math.floor(1/Ht))),y&&a&&w<=t.stableFitRemainingWidth&&(_t=t.stableFitMaxMinimapScale),f=Math.min(_t,Math.max(1,Math.floor(N/S))),f>ji&&(F=Math.min(2,f/ji)),V=f/o/F,L=Math.ceil(Math.max(Le,C+Fe)*N),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=f):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const G=Math.floor(g*V),$=Math.min(G,Math.max(0,Math.floor((w-v-2)*V/(d+V)))+_l);let ue=Math.floor(o*$);const de=ue/o;ue=Math.floor(ue*F);const ye=u?1:2,Ee=b==="left"?0:n-$-v;return{renderMinimap:ye,minimapLeft:Ee,minimapWidth:$,minimapHeightIsEditorHeight:x,minimapIsSampling:k,minimapScale:f,minimapLineHeight:N,minimapCanvasInnerWidth:ue,minimapCanvasInnerHeight:L,minimapCanvasOuterWidth:de,minimapCanvasOuterHeight:E}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,o=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,d=t.pixelRatio,c=t.viewLineCount,u=e.get(123),f=u==="inherit"?e.get(122):u,g=f==="inherit"?e.get(118):f,m=e.get(121),b=e.get(2),v=t.isDominatedByLongLines,C=e.get(50),w=e.get(60).renderType!==0,y=e.get(61),S=e.get(94),L=e.get(65),E=e.get(92),x=E.verticalScrollbarSize,k=E.verticalHasArrows,N=E.arrowSize,V=E.horizontalScrollbarSize,F=e.get(58),G=e.get(37);let $;if(typeof F=="string"&&/^\d+(\.\d+)?ch$/.test(F)){const gr=parseFloat(F.substr(0,F.length-2));$=Tt.clampedInt(gr*a,0,0,1e3)}else $=Tt.clampedInt(F,0,0,1e3);G&&($+=16);let ue=0;if(w){const gr=Math.max(r,y);ue=Math.round(gr*l)}let de=0;C&&(de=o);let ye=0,Ee=ye+de,Le=Ee+ue,Fe=Le+$;const Ht=n-de-ue-$;let yt=!1,me=!1,pe=-1;b!==2&&(f==="inherit"&&v?(yt=!0,me=!0):g==="on"||g==="bounded"?me=!0:g==="wordWrapColumn"&&(pe=m));const _t=Tc._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:S,minimap:L,verticalScrollbarWidth:x,viewLineCount:c,remainingWidth:Ht,isViewportWrapping:me},t.memory||new mD);_t.renderMinimap!==0&&_t.minimapLeft===0&&(ye+=_t.minimapWidth,Ee+=_t.minimapWidth,Le+=_t.minimapWidth,Fe+=_t.minimapWidth);const ji=Ht-_t.minimapWidth,Ti=Math.max(1,Math.floor((ji-x-2)/a)),Ss=k?N:0;return me&&(pe=Math.max(1,Ti),g==="bounded"&&(pe=Math.min(pe,m))),{width:n,height:i,glyphMarginLeft:ye,glyphMarginWidth:de,lineNumbersLeft:Ee,lineNumbersWidth:ue,decorationsLeft:Le,decorationsWidth:$,contentLeft:Fe,contentWidth:ji,minimap:_t,viewportColumn:Ti,isWordWrapMinified:yt,isViewportWrapping:me,wrappingColumn:pe,verticalScrollbarWidth:x,horizontalScrollbarHeight:V,overviewRuler:{top:Ss,width:x,height:i-2*Ss,right:0}}}}h(Tc,"EditorLayoutInfoComputer");class JP extends bn{constructor(){const e={enabled:!0};super(57,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:p("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:we(e.enabled,this.defaultValue.enabled)}}}h(JP,"EditorLightbulb");class QP extends bn{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(127,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:p("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:we(t.enabled,this.defaultValue.enabled),fontSize:Tt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Mi.string(t.fontFamily,this.defaultValue.fontFamily)}}}h(QP,"EditorInlayHints");class eO extends js{constructor(){super(59,"lineHeight",di.lineHeight,e=>js.clamp(e,0,150),{markdownDescription:p("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}h(eO,"EditorLineHeight");class tO extends bn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(65,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),p("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),p("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:p("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:we(t.enabled,this.defaultValue.enabled),size:Pi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Pi(t.side,this.defaultValue.side,["right","left"]),showSlider:Pi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:we(t.renderCharacters,this.defaultValue.renderCharacters),scale:Tt.clampedInt(t.scale,1,1,3),maxColumn:Tt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}h(tO,"EditorMinimap");function Fj(s){return s==="ctrlCmd"?Ke?"metaKey":"ctrlKey":"altKey"}h(Fj,"_multiCursorModifierFromString");class nO extends bn{constructor(){super(75,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Tt.clampedInt(t.top,0,0,1e3),bottom:Tt.clampedInt(t.bottom,0,0,1e3)}}}h(nO,"EditorPadding");class iO extends bn{constructor(){const e={enabled:!0,cycle:!1};super(76,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:we(t.enabled,this.defaultValue.enabled),cycle:we(t.cycle,this.defaultValue.cycle)}}}h(iO,"EditorParameterHints");class oO extends Rh{constructor(){super(129)}compute(e,t,n){return e.pixelRatio}}h(oO,"EditorPixelRatio");class sO extends bn{constructor(){const e={other:!0,comments:!1,strings:!1};super(79,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:p("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:p("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:p("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:p("quickSuggestions","Controls whether suggestions should automatically show up while typing.")});this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:we(t.other,this.defaultValue.other),comments:we(t.comments,this.defaultValue.comments),strings:we(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}h(sO,"EditorQuickSuggestions");class rO extends bn{constructor(){super(60,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p("lineNumbers.off","Line numbers are not rendered."),p("lineNumbers.on","Line numbers are rendered as absolute number."),p("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),p("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:p("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}h(rO,"EditorRenderLineNumbersOption");function Ww(s){const e=s.get(87);return e==="editable"?s.get(81):e!=="on"}h(Ww,"filterValidationDecorations");class aO extends bn{constructor(){const e=[],t={type:"number",description:p("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(91,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:p("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(let n of e)if(typeof n=="number")t.push({column:Tt.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:Tt.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}h(aO,"EditorRulers");function XA(s,e){if(typeof s!="string")return e;switch(s){case"hidden":return 2;case"visible":return 3;default:return 1}}h(XA,"_scrollbarVisibilityFromString");class lO extends bn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(92,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),p("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),p("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),p("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),p("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=Tt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Tt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Tt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:XA(t.vertical,this.defaultValue.vertical),horizontal:XA(t.horizontal,this.defaultValue.horizontal),useShadows:we(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:we(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:we(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:we(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:we(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Tt.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Tt.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:we(t.scrollByPage,this.defaultValue.scrollByPage)}}}h(lO,"EditorScrollbar$1");const po="inUntrustedWorkspace",Ri={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class dO extends bn{constructor(){const e={nonBasicASCII:po,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:po,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(113,"unicodeHighlight",e,{[Ri.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,po],default:e.nonBasicASCII,description:p("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Ri.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Ri.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Ri.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,po],default:e.includeComments,description:p("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[Ri.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,po],default:e.includeStrings,description:p("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[Ri.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Ri.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&(Go(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0)),t.allowedLocales&&(Go(e.allowedLocales,t.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:t.allowedLocales}),n=!0));const i=super.applyUpdate(e,t);return n?new Vu(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Pp(t.nonBasicASCII,po,[!0,!1,po]),invisibleCharacters:we(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:we(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Pp(t.includeComments,po,[!0,!1,po]),includeStrings:Pp(t.includeStrings,po,[!0,!1,po]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,o]of Object.entries(e))o===!0&&(n[i]=!0);return n}}h(dO,"UnicodeHighlight");class cO extends bn{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(55,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:we(t.enabled,this.defaultValue.enabled),mode:Pi(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}h(cO,"InlineEditorSuggest");class hO extends bn{constructor(){const e={enabled:ri.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:p("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:we(e.enabled,this.defaultValue.enabled)}}}h(hO,"BracketPairColorization");class uO extends bn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairs.true","Enables bracket pair guides."),p("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),p("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:p("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),p("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),p("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:p("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:p("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Pp(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Pp(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:we(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:we(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:we(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}h(uO,"GuideOptions");function Pp(s,e,t){const n=t.indexOf(s);return n===-1?e:t[n]}h(Pp,"primitiveSet");class fO extends bn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(106,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),p("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:p("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Pi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:we(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:we(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:we(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:we(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:we(t.showIcons,this.defaultValue.showIcons),showStatusBar:we(t.showStatusBar,this.defaultValue.showStatusBar),preview:we(t.preview,this.defaultValue.preview),previewMode:Pi(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:we(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:we(t.showMethods,this.defaultValue.showMethods),showFunctions:we(t.showFunctions,this.defaultValue.showFunctions),showConstructors:we(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:we(t.showDeprecated,this.defaultValue.showDeprecated),showFields:we(t.showFields,this.defaultValue.showFields),showVariables:we(t.showVariables,this.defaultValue.showVariables),showClasses:we(t.showClasses,this.defaultValue.showClasses),showStructs:we(t.showStructs,this.defaultValue.showStructs),showInterfaces:we(t.showInterfaces,this.defaultValue.showInterfaces),showModules:we(t.showModules,this.defaultValue.showModules),showProperties:we(t.showProperties,this.defaultValue.showProperties),showEvents:we(t.showEvents,this.defaultValue.showEvents),showOperators:we(t.showOperators,this.defaultValue.showOperators),showUnits:we(t.showUnits,this.defaultValue.showUnits),showValues:we(t.showValues,this.defaultValue.showValues),showConstants:we(t.showConstants,this.defaultValue.showConstants),showEnums:we(t.showEnums,this.defaultValue.showEnums),showEnumMembers:we(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:we(t.showKeywords,this.defaultValue.showKeywords),showWords:we(t.showWords,this.defaultValue.showWords),showColors:we(t.showColors,this.defaultValue.showColors),showFiles:we(t.showFiles,this.defaultValue.showFiles),showReferences:we(t.showReferences,this.defaultValue.showReferences),showFolders:we(t.showFolders,this.defaultValue.showFolders),showTypeParameters:we(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:we(t.showSnippets,this.defaultValue.showSnippets),showUsers:we(t.showUsers,this.defaultValue.showUsers),showIssues:we(t.showIssues,this.defaultValue.showIssues)}}}h(fO,"EditorSuggest");class gO extends bn{constructor(){super(102,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:we(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}h(gO,"SmartSelect");class pO extends Rh{constructor(){super(130)}compute(e,t,n){return t.get(81)?!0:e.tabFocusMode}}h(pO,"EditorTabFocusMode");function Wj(s){switch(s){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}h(Wj,"_wrappingIndentFromString");class mO extends Rh{constructor(){super(132)}compute(e,t,n){const i=t.get(131);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}h(mO,"EditorWrappingInfoComputer");const Vj="Consolas, 'Courier New', monospace",Bj="Menlo, Monaco, 'Courier New', monospace",Hj="'Droid Sans Mono', 'monospace', monospace",di={fontFamily:Ke?Bj:ni?Hj:Vj,fontWeight:"normal",fontSize:Ke?12:14,lineHeight:0,letterSpacing:0},Du=[];function ee(s){return Du[s.id]=s,s}h(ee,"register$1");const cr={acceptSuggestionOnCommitCharacter:ee(new Ye(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:ee(new hn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:p("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:ee(new KP),accessibilityPageSize:ee(new Tt(3,"accessibilityPageSize",10,1,1073741824,{description:p("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:ee(new Mi(4,"ariaLabel",p("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:ee(new hn(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),p("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:p("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:ee(new hn(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:ee(new hn(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:ee(new hn(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),p("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:p("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:ee(new wu(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Rj,{enumDescriptions:[p("editor.autoIndent.none","The editor will not insert indentation automatically."),p("editor.autoIndent.keep","The editor will keep the current line's indentation."),p("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),p("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),p("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:p("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:ee(new Ye(10,"automaticLayout",!1)),autoSurround:ee(new hn(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),p("editor.autoSurround.quotes","Surround with quotes but not brackets."),p("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:p("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:ee(new hO),bracketPairGuides:ee(new uO),stickyTabStops:ee(new Ye(104,"stickyTabStops",!1,{description:p("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:ee(new Ye(14,"codeLens",!0,{description:p("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:ee(new Mi(15,"codeLensFontFamily","",{description:p("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:ee(new Tt(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:ee(new Ye(17,"colorDecorators",!0,{description:p("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:ee(new Ye(18,"columnSelection",!1,{description:p("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:ee(new UP),contextmenu:ee(new Ye(20,"contextmenu",!0)),copyWithSyntaxHighlighting:ee(new Ye(21,"copyWithSyntaxHighlighting",!0,{description:p("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:ee(new wu(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Pj,{description:p("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:ee(new Ye(23,"cursorSmoothCaretAnimation",!1,{description:p("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:ee(new wu(24,"cursorStyle",Fn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Oj,{description:p("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:ee(new Tt(25,"cursorSurroundingLines",0,0,1073741824,{description:p("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:ee(new hn(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),p("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:p("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:ee(new Tt(27,"cursorWidth",0,0,1073741824,{markdownDescription:p("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:ee(new Ye(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:ee(new Ye(29,"disableMonospaceOptimizations",!1)),domReadOnly:ee(new Ye(30,"domReadOnly",!1)),dragAndDrop:ee(new Ye(31,"dragAndDrop",!0,{description:p("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:ee(new GP),extraEditorClassName:ee(new Mi(33,"extraEditorClassName","")),fastScrollSensitivity:ee(new js(34,"fastScrollSensitivity",5,s=>s<=0?5:s,{markdownDescription:p("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:ee(new $P),fixedOverflowWidgets:ee(new Ye(36,"fixedOverflowWidgets",!1)),folding:ee(new Ye(37,"folding",!0,{description:p("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:ee(new hn(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),p("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:p("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:ee(new Ye(39,"foldingHighlight",!0,{description:p("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:ee(new Ye(40,"foldingImportsByDefault",!1,{description:p("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:ee(new Tt(41,"foldingMaximumRegions",5e3,10,65e3,{description:p("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:ee(new Ye(42,"unfoldOnClickAfterEndOfLine",!1,{description:p("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:ee(new Mi(43,"fontFamily",di.fontFamily,{description:p("fontFamily","Controls the font family.")})),fontInfo:ee(new qP),fontLigatures2:ee(new Yi),fontSize:ee(new YP),fontWeight:ee(new Vs),formatOnPaste:ee(new Ye(48,"formatOnPaste",!1,{description:p("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:ee(new Ye(49,"formatOnType",!1,{description:p("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:ee(new Ye(50,"glyphMargin",!0,{description:p("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:ee(new XP),hideCursorInOverviewRuler:ee(new Ye(52,"hideCursorInOverviewRuler",!1,{description:p("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:ee(new ZP),inDiffEditor:ee(new Ye(54,"inDiffEditor",!1)),letterSpacing:ee(new js(56,"letterSpacing",di.letterSpacing,s=>js.clamp(s,-5,20),{description:p("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:ee(new JP),lineDecorationsWidth:ee(new Ed(58,"lineDecorationsWidth",10)),lineHeight:ee(new eO),lineNumbers:ee(new rO),lineNumbersMinChars:ee(new Tt(61,"lineNumbersMinChars",5,1,300)),linkedEditing:ee(new Ye(62,"linkedEditing",!1,{description:p("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:ee(new Ye(63,"links",!0,{description:p("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:ee(new hn(64,"matchBrackets","always",["always","near","never"],{description:p("matchBrackets","Highlight matching brackets.")})),minimap:ee(new tO),mouseStyle:ee(new hn(66,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:ee(new js(67,"mouseWheelScrollSensitivity",1,s=>s===0?1:s,{markdownDescription:p("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:ee(new Ye(68,"mouseWheelZoom",!1,{markdownDescription:p("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:ee(new Ye(69,"multiCursorMergeOverlapping",!0,{description:p("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:ee(new wu(70,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],Fj,{markdownEnumDescriptions:[p("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:p({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:ee(new hn(71,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p("multiCursorPaste.spread","Each cursor pastes a single line of the text."),p("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:p("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:ee(new Ye(72,"occurrencesHighlight",!0,{description:p("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:ee(new Ye(73,"overviewRulerBorder",!0,{description:p("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:ee(new Tt(74,"overviewRulerLanes",3,0,3)),padding:ee(new nO),parameterHints:ee(new iO),peekWidgetDefaultFocus:ee(new hn(77,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),p("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:p("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:ee(new Ye(78,"definitionLinkOpensInPeek",!1,{description:p("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:ee(new sO),quickSuggestionsDelay:ee(new Tt(80,"quickSuggestionsDelay",10,0,1073741824,{description:p("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:ee(new Ye(81,"readOnly",!1)),renameOnType:ee(new Ye(82,"renameOnType",!1,{description:p("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:p("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:ee(new Ye(83,"renderControlCharacters",!0,{description:p("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:ee(new Ye(84,"renderFinalNewline",!0,{description:p("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:ee(new hn(85,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:p("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:ee(new Ye(86,"renderLineHighlightOnlyWhenFocus",!1,{description:p("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:ee(new hn(87,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:ee(new hn(88,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),p("renderWhitespace.selection","Render whitespace characters only on selected text."),p("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:p("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:ee(new Tt(89,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:ee(new Ye(90,"roundedSelection",!0,{description:p("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:ee(new aO),scrollbar:ee(new lO),scrollBeyondLastColumn:ee(new Tt(93,"scrollBeyondLastColumn",5,0,1073741824,{description:p("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:ee(new Ye(94,"scrollBeyondLastLine",!0,{description:p("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:ee(new Ye(95,"scrollPredominantAxis",!0,{description:p("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:ee(new Ye(96,"selectionClipboard",!0,{description:p("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:ni})),selectionHighlight:ee(new Ye(97,"selectionHighlight",!0,{description:p("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:ee(new Ye(98,"selectOnLineNumbers",!0)),showFoldingControls:ee(new hn(99,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[p("showFoldingControls.always","Always show the folding controls."),p("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:p("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:ee(new Ye(100,"showUnused",!0,{description:p("showUnused","Controls fading out of unused code.")})),showDeprecated:ee(new Ye(126,"showDeprecated",!0,{description:p("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:ee(new QP),snippetSuggestions:ee(new hn(101,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),p("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),p("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),p("snippetSuggestions.none","Do not show snippet suggestions.")],description:p("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:ee(new gO),smoothScrolling:ee(new Ye(103,"smoothScrolling",!1,{description:p("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:ee(new Tt(105,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:ee(new fO),inlineSuggest:ee(new cO),suggestFontSize:ee(new Tt(107,"suggestFontSize",0,0,1e3,{markdownDescription:p("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:ee(new Tt(108,"suggestLineHeight",0,0,1e3,{markdownDescription:p("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:ee(new Ye(109,"suggestOnTriggerCharacters",!0,{description:p("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:ee(new hn(110,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p("suggestSelection.first","Always select the first suggestion."),p("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),p("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:p("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:ee(new hn(111,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),p("tabCompletion.off","Disable tab completions."),p("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:p("tabCompletion","Enables tab completions.")})),tabIndex:ee(new Tt(112,"tabIndex",0,-1,1073741824)),unicodeHighlight:ee(new dO),unusualLineTerminators:ee(new hn(114,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),p("unusualLineTerminators.off","Unusual line terminators are ignored."),p("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:p("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:ee(new Ye(115,"useShadowDOM",!0)),useTabStops:ee(new Ye(116,"useTabStops",!0,{description:p("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:ee(new Mi(117,"wordSeparators",MP,{description:p("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:ee(new hn(118,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),p({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:p({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:ee(new Mi(119,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:ee(new Mi(120,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:ee(new Tt(121,"wordWrapColumn",80,1,1073741824,{markdownDescription:p({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:ee(new hn(122,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:ee(new hn(123,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:ee(new wu(124,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],Wj,{enumDescriptions:[p("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),p("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),p("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),p("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:p("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:ee(new hn(125,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[p("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),p("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:p("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:ee(new jP),pixelRatio:ee(new oO),tabFocusMode:ee(new pO),layoutInfo:ee(new Tc),wrappingInfo:ee(new mO)};class _O{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}h(_O,"ErrorHandler");const bO=new _O;function Ne(s){qr(s)||bO.onUnexpectedError(s)}h(Ne,"onUnexpectedError");function Nn(s){qr(s)||bO.onUnexpectedExternalError(s)}h(Nn,"onUnexpectedExternalError");function ZA(s){if(s instanceof Error){let{name:e,message:t}=s;const n=s.stacktrace||s.stack;return{$isError:!0,name:e,message:t,stack:n}}return s}h(ZA,"transformErrorForSerialization");const Vw="Canceled";function qr(s){return s instanceof Dd?!0:s instanceof Error&&s.name===Vw&&s.message===Vw}h(qr,"isCancellationError");class Dd extends Error{constructor(){super(Vw);this.name=this.message}}h(Dd,"CancellationError");function _D(){const s=new Error(Vw);return s.name=s.message,s}h(_D,"canceled");function Js(s){return s?new Error(`Illegal argument: ${s}`):new Error("Illegal argument")}h(Js,"illegalArgument");function zj(s){return s?new Error(`Illegal state: ${s}`):new Error("Illegal state")}h(zj,"illegalState");class vO extends Error{constructor(e){super("NotSupported");e&&(this.message=e)}}h(vO,"NotSupportedError");function Ka(s){const e=this;let t=!1,n;return function(){return t||(t=!0,n=s.apply(e,arguments)),n}}h(Ka,"once$1");var Qe;(function(s){function e(w){return w&&typeof w=="object"&&typeof w[Symbol.iterator]=="function"}h(e,"is"),s.is=e;const t=Object.freeze([]);function n(){return t}h(n,"empty"),s.empty=n;function*i(w){yield w}h(i,"single"),s.single=i;function o(w){return w||t}h(o,"from"),s.from=o;function r(w){return!w||w[Symbol.iterator]().next().done===!0}h(r,"isEmpty"),s.isEmpty=r;function a(w){return w[Symbol.iterator]().next().value}h(a,"first"),s.first=a;function l(w,y){for(const S of w)if(y(S))return!0;return!1}h(l,"some"),s.some=l;function d(w,y){for(const S of w)if(y(S))return S}h(d,"find"),s.find=d;function*c(w,y){for(const S of w)y(S)&&(yield S)}h(c,"filter"),s.filter=c;function*u(w,y){let S=0;for(const L of w)yield y(L,S++)}h(u,"map"),s.map=u;function*f(...w){for(const y of w)for(const S of y)yield S}h(f,"concat"),s.concat=f;function*g(w){for(const y of w)for(const S of y)yield S}h(g,"concatNested"),s.concatNested=g;function m(w,y,S){let L=S;for(const E of w)L=y(L,E);return L}h(m,"reduce"),s.reduce=m;function*b(w,y,S=w.length){for(y<0&&(y+=w.length),S<0?S+=w.length:S>w.length&&(S=w.length);y<S;y++)yield w[y]}h(b,"slice"),s.slice=b;function v(w,y=Number.POSITIVE_INFINITY){const S=[];if(y===0)return[S,w];const L=w[Symbol.iterator]();for(let E=0;E<y;E++){const x=L.next();if(x.done)return[S,s.empty()];S.push(x.value)}return[S,{[Symbol.iterator](){return L}}]}h(v,"consume"),s.consume=v;function C(w,y,S=(L,E)=>L===E){const L=w[Symbol.iterator](),E=y[Symbol.iterator]();for(;;){const x=L.next(),k=E.next();if(x.done!==k.done)return!1;if(x.done)return!0;if(!S(x.value,k.value))return!1}}h(C,"equals"),s.equals=C})(Qe||(Qe={}));class wO extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`);this.errors=e}}h(wO,"MultiDisposeError");function bD(s){return typeof s.dispose=="function"&&s.dispose.length===0}h(bD,"isDisposable");function et(s){if(Qe.is(s)){let e=[];for(const t of s)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new wO(e);return Array.isArray(s)?[]:s}else if(s)return s.dispose(),s}h(et,"dispose");function Ma(...s){return He(()=>et(s))}h(Ma,"combinedDisposable");function He(s){return{dispose:Ka(()=>{s()})}}h(He,"toDisposable");class Q{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{et(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Q.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}h(Q,"DisposableStore");Q.DISABLE_DISPOSED_WARNING=!1;class z{constructor(){this._store=new Q,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}h(z,"Disposable");z.None=Object.freeze({dispose(){}});class hi{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}h(hi,"MutableDisposable");class CO{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1}set(e){let t=e;return this.unset=()=>t=void 0,this.isset=()=>t!==void 0,this.dispose=()=>{t&&(t(),t=void 0)},this}}h(CO,"SafeDisposable");class yO{constructor(e){this.object=e}dispose(){}}h(yO,"ImmortalReference");class zt{constructor(e){this.element=e,this.next=zt.Undefined,this.prev=zt.Undefined}}h(zt,"Node$2");zt.Undefined=new zt(void 0);class eo{constructor(){this._first=zt.Undefined,this._last=zt.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===zt.Undefined}clear(){let e=this._first;for(;e!==zt.Undefined;){const t=e.next;e.prev=zt.Undefined,e.next=zt.Undefined,e=t}this._first=zt.Undefined,this._last=zt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new zt(e);if(this._first===zt.Undefined)this._first=n,this._last=n;else if(t){const o=this._last;this._last=n,n.prev=o,o.next=n}else{const o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==zt.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==zt.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==zt.Undefined&&e.next!==zt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===zt.Undefined&&e.next===zt.Undefined?(this._first=zt.Undefined,this._last=zt.Undefined):e.next===zt.Undefined?(this._last=this._last.prev,this._last.next=zt.Undefined):e.prev===zt.Undefined&&(this._first=this._first.next,this._first.prev=zt.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==zt.Undefined;)yield e.element,e=e.next}}h(eo,"LinkedList");const Kj=tn.performance&&typeof tn.performance.now=="function";class wi{constructor(e){this._highResolution=Kj&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new wi(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?tn.performance.now():Date.now()}}h(wi,"StopWatch");var fe;(function(s){s.None=()=>z.None;function e(S){return(L,E=null,x)=>{let k=!1,N;return N=S(V=>{if(!k)return N?N.dispose():k=!0,L.call(E,V)},null,x),k&&N.dispose(),N}}h(e,"once"),s.once=e;function t(S,L,E){return l((x,k=null,N)=>S(V=>x.call(k,L(V)),null,N),E)}h(t,"map"),s.map=t;function n(S,L,E){return l((x,k=null,N)=>S(V=>{L(V),x.call(k,V)},null,N),E)}h(n,"forEach"),s.forEach=n;function i(S,L,E){return l((x,k=null,N)=>S(V=>L(V)&&x.call(k,V),null,N),E)}h(i,"filter"),s.filter=i;function o(S){return S}h(o,"signal"),s.signal=o;function r(...S){return(L,E=null,x)=>Ma(...S.map(k=>k(N=>L.call(E,N),null,x)))}h(r,"any"),s.any=r;function a(S,L,E,x){let k=E;return t(S,N=>(k=L(k,N),k),x)}h(a,"reduce"),s.reduce=a;function l(S,L){let E;const x={onFirstListenerAdd(){E=S(k.fire,k)},onLastListenerRemove(){E.dispose()}},k=new P(x);return L&&L.add(k),k.event}h(l,"snapshot");function d(S,L,E=100,x=!1,k,N){let V,F,G,$=0;const ue={leakWarningThreshold:k,onFirstListenerAdd(){V=S(ye=>{$++,F=L(F,ye),x&&!G&&(de.fire(F),F=void 0),clearTimeout(G),G=setTimeout(()=>{const Ee=F;F=void 0,G=void 0,(!x||$>1)&&de.fire(Ee),$=0},E)})},onLastListenerRemove(){V.dispose()}},de=new P(ue);return N&&N.add(de),de.event}h(d,"debounce"),s.debounce=d;function c(S,L=(x,k)=>x===k,E){let x=!0,k;return i(S,N=>{const V=x||!L(N,k);return x=!1,k=N,V},E)}h(c,"latch"),s.latch=c;function u(S,L,E){return[s.filter(S,L,E),s.filter(S,x=>!L(x),E)]}h(u,"split"),s.split=u;function f(S,L=!1,E=[]){let x=E.slice(),k=S(F=>{x?x.push(F):V.fire(F)});const N=h(()=>{x&&x.forEach(F=>V.fire(F)),x=null},"flush"),V=new P({onFirstListenerAdd(){k||(k=S(F=>V.fire(F)))},onFirstListenerDidAdd(){x&&(L?setTimeout(N):N())},onLastListenerRemove(){k&&k.dispose(),k=null}});return V.event}h(f,"buffer"),s.buffer=f;class g{constructor(L){this.event=L}map(L){return new g(t(this.event,L))}forEach(L){return new g(n(this.event,L))}filter(L){return new g(i(this.event,L))}reduce(L,E){return new g(a(this.event,L,E))}latch(){return new g(c(this.event))}debounce(L,E=100,x=!1,k){return new g(d(this.event,L,E,x,k))}on(L,E,x){return this.event(L,E,x)}once(L,E,x){return e(this.event)(L,E,x)}}h(g,"ChainableEvent");function m(S){return new g(S)}h(m,"chain"),s.chain=m;function b(S,L,E=x=>x){const x=h((...F)=>V.fire(E(...F)),"fn"),k=h(()=>S.on(L,x),"onFirstListenerAdd"),N=h(()=>S.removeListener(L,x),"onLastListenerRemove"),V=new P({onFirstListenerAdd:k,onLastListenerRemove:N});return V.event}h(b,"fromNodeEventEmitter"),s.fromNodeEventEmitter=b;function v(S,L,E=x=>x){const x=h((...F)=>V.fire(E(...F)),"fn"),k=h(()=>S.addEventListener(L,x),"onFirstListenerAdd"),N=h(()=>S.removeEventListener(L,x),"onLastListenerRemove"),V=new P({onFirstListenerAdd:k,onLastListenerRemove:N});return V.event}h(v,"fromDOMEventEmitter"),s.fromDOMEventEmitter=v;function C(S){return new Promise(L=>e(S)(L))}h(C,"toPromise"),s.toPromise=C;function w(S,L){return L(void 0),S(E=>L(E))}h(w,"runAndSubscribe"),s.runAndSubscribe=w;function y(S,L){let E=null;function x(N){E?.dispose(),E=new Q,L(N,E)}h(x,"run"),x(void 0);const k=S(N=>x(N));return He(()=>{k.dispose(),E?.dispose()})}h(y,"runAndSubscribeWithStore"),s.runAndSubscribeWithStore=y})(fe||(fe={}));class b_{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${b_._idPool++}`}start(e){this._stopWatch=new wi(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}h(b_,"EventProfiling");b_._idPool=0;class d0{constructor(e){this.value=e}static create(){var e;return new d0((e=new Error().stack)!==null&&e!==void 0?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}h(d0,"Stacktrace");class SO{constructor(e,t,n){this.callback=e,this.callbackThis=t,this.stack=n,this.subscription=new CO}invoke(e){this.callback.call(this.callbackThis,e)}}h(SO,"Listener");class P{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new b_(this._options._profName):void 0}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)===null||e===void 0||e.clear(),(n=(t=this._options)===null||t===void 0?void 0:t.onLastListenerRemove)===null||n===void 0||n.call(t),(i=this._leakageMon)===null||i===void 0||i.dispose())}get event(){return this._event||(this._event=(e,t,n)=>{var i,o,r;this._listeners||(this._listeners=new eo);const a=this._listeners.isEmpty();a&&((i=this._options)===null||i===void 0?void 0:i.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this);let l,d;this._leakageMon&&this._listeners.size>=30&&(d=d0.create(),l=this._leakageMon.check(d,this._listeners.size+1));const c=new SO(e,t,d),u=this._listeners.push(c);a&&((o=this._options)===null||o===void 0?void 0:o.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),!((r=this._options)===null||r===void 0)&&r.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const f=c.subscription.set(()=>{l&&l(),this._disposed||(u(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof Q?n.add(f):Array.isArray(n)&&n.push(f),f}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new eo);for(let i of this._listeners)this._deliveryQueue.push([i,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[i,o]=this._deliveryQueue.shift();try{i.invoke(o)}catch(r){Ne(r)}}(n=this._perfMon)===null||n===void 0||n.stop()}}}h(P,"Emitter$1");class lm extends P{constructor(e){super(e);this._isPaused=0,this._eventQueue=new eo,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}h(lm,"PauseableEmitter");class xO extends lm{constructor(e){var t;super(e);this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}h(xO,"DebounceEmitter");class c0{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e(o=>{const r=this.buffers[this.buffers.length-1];r?r.push(()=>t.call(n,o)):t.call(n,o)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(i=>i()),n}}h(c0,"EventBufferer");class fx{constructor(){this.listening=!1,this.inputEvent=fe.None,this.inputEventListener=z.None,this.emitter=new P({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}h(fx,"Relay");const TO=Object.freeze(function(s,e){const t=setTimeout(s.bind(e),0);return{dispose(){clearTimeout(t)}}});var je;(function(s){function e(t){return t===s.None||t===s.Cancelled||t instanceof Op?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}h(e,"isCancellationToken"),s.isCancellationToken=e,s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:fe.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:TO})})(je||(je={}));class Op{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?TO:(this._emitter||(this._emitter=new P),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}h(Op,"MutableToken");class Bn{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Op),this._token}cancel(){this._token?this._token instanceof Op&&this._token.cancel():this._token=je.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Op&&this._token.dispose():this._token=je.None}}h(Bn,"CancellationTokenSource$1");class h0{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}h(h0,"KeyCodeStrMap");const Wv=new h0,gx=new h0,px=new h0,LO=new Array(230),Uj={},jj=[],Gj=Object.create(null),$j=Object.create(null),vD=[],mx=[];for(let s=0;s<=193;s++)vD[s]=-1;for(let s=0;s<=127;s++)mx[s]=-1;(function(){const s="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",s,s],[0,1,1,"Hyper",0,s,0,s,s,s],[0,1,2,"Super",0,s,0,s,s,s],[0,1,3,"Fn",0,s,0,s,s,s],[0,1,4,"FnLock",0,s,0,s,s,s],[0,1,5,"Suspend",0,s,0,s,s,s],[0,1,6,"Resume",0,s,0,s,s,s],[0,1,7,"Turbo",0,s,0,s,s,s],[0,1,8,"Sleep",0,s,0,"VK_SLEEP",s,s],[0,1,9,"WakeUp",0,s,0,s,s,s],[31,0,10,"KeyA",31,"A",65,"VK_A",s,s],[32,0,11,"KeyB",32,"B",66,"VK_B",s,s],[33,0,12,"KeyC",33,"C",67,"VK_C",s,s],[34,0,13,"KeyD",34,"D",68,"VK_D",s,s],[35,0,14,"KeyE",35,"E",69,"VK_E",s,s],[36,0,15,"KeyF",36,"F",70,"VK_F",s,s],[37,0,16,"KeyG",37,"G",71,"VK_G",s,s],[38,0,17,"KeyH",38,"H",72,"VK_H",s,s],[39,0,18,"KeyI",39,"I",73,"VK_I",s,s],[40,0,19,"KeyJ",40,"J",74,"VK_J",s,s],[41,0,20,"KeyK",41,"K",75,"VK_K",s,s],[42,0,21,"KeyL",42,"L",76,"VK_L",s,s],[43,0,22,"KeyM",43,"M",77,"VK_M",s,s],[44,0,23,"KeyN",44,"N",78,"VK_N",s,s],[45,0,24,"KeyO",45,"O",79,"VK_O",s,s],[46,0,25,"KeyP",46,"P",80,"VK_P",s,s],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",s,s],[48,0,27,"KeyR",48,"R",82,"VK_R",s,s],[49,0,28,"KeyS",49,"S",83,"VK_S",s,s],[50,0,29,"KeyT",50,"T",84,"VK_T",s,s],[51,0,30,"KeyU",51,"U",85,"VK_U",s,s],[52,0,31,"KeyV",52,"V",86,"VK_V",s,s],[53,0,32,"KeyW",53,"W",87,"VK_W",s,s],[54,0,33,"KeyX",54,"X",88,"VK_X",s,s],[55,0,34,"KeyY",55,"Y",89,"VK_Y",s,s],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",s,s],[22,0,36,"Digit1",22,"1",49,"VK_1",s,s],[23,0,37,"Digit2",23,"2",50,"VK_2",s,s],[24,0,38,"Digit3",24,"3",51,"VK_3",s,s],[25,0,39,"Digit4",25,"4",52,"VK_4",s,s],[26,0,40,"Digit5",26,"5",53,"VK_5",s,s],[27,0,41,"Digit6",27,"6",54,"VK_6",s,s],[28,0,42,"Digit7",28,"7",55,"VK_7",s,s],[29,0,43,"Digit8",29,"8",56,"VK_8",s,s],[30,0,44,"Digit9",30,"9",57,"VK_9",s,s],[21,0,45,"Digit0",21,"0",48,"VK_0",s,s],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",s,s],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",s,s],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",s,s],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",s,s],[10,1,50,"Space",10,"Space",32,"VK_SPACE",s,s],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,s,0,s,s,s],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",s,s],[59,1,64,"F1",59,"F1",112,"VK_F1",s,s],[60,1,65,"F2",60,"F2",113,"VK_F2",s,s],[61,1,66,"F3",61,"F3",114,"VK_F3",s,s],[62,1,67,"F4",62,"F4",115,"VK_F4",s,s],[63,1,68,"F5",63,"F5",116,"VK_F5",s,s],[64,1,69,"F6",64,"F6",117,"VK_F6",s,s],[65,1,70,"F7",65,"F7",118,"VK_F7",s,s],[66,1,71,"F8",66,"F8",119,"VK_F8",s,s],[67,1,72,"F9",67,"F9",120,"VK_F9",s,s],[68,1,73,"F10",68,"F10",121,"VK_F10",s,s],[69,1,74,"F11",69,"F11",122,"VK_F11",s,s],[70,1,75,"F12",70,"F12",123,"VK_F12",s,s],[0,1,76,"PrintScreen",0,s,0,s,s,s],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",s,s],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",s,s],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",s,s],[14,1,80,"Home",14,"Home",36,"VK_HOME",s,s],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",s,s],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",s,s],[13,1,83,"End",13,"End",35,"VK_END",s,s],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",s,s],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",s],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",s],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",s],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",s],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",s,s],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",s,s],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",s,s],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",s,s],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",s,s],[3,1,94,"NumpadEnter",3,s,0,s,s,s],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",s,s],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",s,s],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",s,s],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",s,s],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",s,s],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",s,s],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",s,s],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",s,s],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",s,s],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",s,s],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",s,s],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",s,s],[58,1,107,"ContextMenu",58,"ContextMenu",93,s,s,s],[0,1,108,"Power",0,s,0,s,s,s],[0,1,109,"NumpadEqual",0,s,0,s,s,s],[71,1,110,"F13",71,"F13",124,"VK_F13",s,s],[72,1,111,"F14",72,"F14",125,"VK_F14",s,s],[73,1,112,"F15",73,"F15",126,"VK_F15",s,s],[74,1,113,"F16",74,"F16",127,"VK_F16",s,s],[75,1,114,"F17",75,"F17",128,"VK_F17",s,s],[76,1,115,"F18",76,"F18",129,"VK_F18",s,s],[77,1,116,"F19",77,"F19",130,"VK_F19",s,s],[0,1,117,"F20",0,s,0,"VK_F20",s,s],[0,1,118,"F21",0,s,0,"VK_F21",s,s],[0,1,119,"F22",0,s,0,"VK_F22",s,s],[0,1,120,"F23",0,s,0,"VK_F23",s,s],[0,1,121,"F24",0,s,0,"VK_F24",s,s],[0,1,122,"Open",0,s,0,s,s,s],[0,1,123,"Help",0,s,0,s,s,s],[0,1,124,"Select",0,s,0,s,s,s],[0,1,125,"Again",0,s,0,s,s,s],[0,1,126,"Undo",0,s,0,s,s,s],[0,1,127,"Cut",0,s,0,s,s,s],[0,1,128,"Copy",0,s,0,s,s,s],[0,1,129,"Paste",0,s,0,s,s,s],[0,1,130,"Find",0,s,0,s,s,s],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",s,s],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",s,s],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",s,s],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",s,s],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",s,s],[0,1,136,"KanaMode",0,s,0,s,s,s],[0,0,137,"IntlYen",0,s,0,s,s,s],[0,1,138,"Convert",0,s,0,s,s,s],[0,1,139,"NonConvert",0,s,0,s,s,s],[0,1,140,"Lang1",0,s,0,s,s,s],[0,1,141,"Lang2",0,s,0,s,s,s],[0,1,142,"Lang3",0,s,0,s,s,s],[0,1,143,"Lang4",0,s,0,s,s,s],[0,1,144,"Lang5",0,s,0,s,s,s],[0,1,145,"Abort",0,s,0,s,s,s],[0,1,146,"Props",0,s,0,s,s,s],[0,1,147,"NumpadParenLeft",0,s,0,s,s,s],[0,1,148,"NumpadParenRight",0,s,0,s,s,s],[0,1,149,"NumpadBackspace",0,s,0,s,s,s],[0,1,150,"NumpadMemoryStore",0,s,0,s,s,s],[0,1,151,"NumpadMemoryRecall",0,s,0,s,s,s],[0,1,152,"NumpadMemoryClear",0,s,0,s,s,s],[0,1,153,"NumpadMemoryAdd",0,s,0,s,s,s],[0,1,154,"NumpadMemorySubtract",0,s,0,s,s,s],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",s,s],[0,1,156,"NumpadClearEntry",0,s,0,s,s,s],[5,1,0,s,5,"Ctrl",17,"VK_CONTROL",s,s],[4,1,0,s,4,"Shift",16,"VK_SHIFT",s,s],[6,1,0,s,6,"Alt",18,"VK_MENU",s,s],[57,1,0,s,57,"Meta",0,"VK_COMMAND",s,s],[5,1,157,"ControlLeft",5,s,0,"VK_LCONTROL",s,s],[4,1,158,"ShiftLeft",4,s,0,"VK_LSHIFT",s,s],[6,1,159,"AltLeft",6,s,0,"VK_LMENU",s,s],[57,1,160,"MetaLeft",57,s,0,"VK_LWIN",s,s],[5,1,161,"ControlRight",5,s,0,"VK_RCONTROL",s,s],[4,1,162,"ShiftRight",4,s,0,"VK_RSHIFT",s,s],[6,1,163,"AltRight",6,s,0,"VK_RMENU",s,s],[57,1,164,"MetaRight",57,s,0,"VK_RWIN",s,s],[0,1,165,"BrightnessUp",0,s,0,s,s,s],[0,1,166,"BrightnessDown",0,s,0,s,s,s],[0,1,167,"MediaPlay",0,s,0,s,s,s],[0,1,168,"MediaRecord",0,s,0,s,s,s],[0,1,169,"MediaFastForward",0,s,0,s,s,s],[0,1,170,"MediaRewind",0,s,0,s,s,s],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",s,s],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",s,s],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",s,s],[0,1,174,"Eject",0,s,0,s,s,s],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",s,s],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",s,s],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",s,s],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",s,s],[0,1,179,"LaunchApp1",0,s,0,"VK_MEDIA_LAUNCH_APP1",s,s],[0,1,180,"SelectTask",0,s,0,s,s,s],[0,1,181,"LaunchScreenSaver",0,s,0,s,s,s],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",s,s],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",s,s],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",s,s],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",s,s],[0,1,186,"BrowserStop",0,s,0,"VK_BROWSER_STOP",s,s],[0,1,187,"BrowserRefresh",0,s,0,"VK_BROWSER_REFRESH",s,s],[0,1,188,"BrowserFavorites",0,s,0,"VK_BROWSER_FAVORITES",s,s],[0,1,189,"ZoomToggle",0,s,0,s,s,s],[0,1,190,"MailReply",0,s,0,s,s,s],[0,1,191,"MailForward",0,s,0,s,s,s],[0,1,192,"MailSend",0,s,0,s,s,s],[109,1,0,s,109,"KeyInComposition",229,s,s,s],[111,1,0,s,111,"ABNT_C2",194,"VK_ABNT_C2",s,s],[91,1,0,s,91,"OEM_8",223,"VK_OEM_8",s,s],[0,1,0,s,0,s,0,"VK_KANA",s,s],[0,1,0,s,0,s,0,"VK_HANGUL",s,s],[0,1,0,s,0,s,0,"VK_JUNJA",s,s],[0,1,0,s,0,s,0,"VK_FINAL",s,s],[0,1,0,s,0,s,0,"VK_HANJA",s,s],[0,1,0,s,0,s,0,"VK_KANJI",s,s],[0,1,0,s,0,s,0,"VK_CONVERT",s,s],[0,1,0,s,0,s,0,"VK_NONCONVERT",s,s],[0,1,0,s,0,s,0,"VK_ACCEPT",s,s],[0,1,0,s,0,s,0,"VK_MODECHANGE",s,s],[0,1,0,s,0,s,0,"VK_SELECT",s,s],[0,1,0,s,0,s,0,"VK_PRINT",s,s],[0,1,0,s,0,s,0,"VK_EXECUTE",s,s],[0,1,0,s,0,s,0,"VK_SNAPSHOT",s,s],[0,1,0,s,0,s,0,"VK_HELP",s,s],[0,1,0,s,0,s,0,"VK_APPS",s,s],[0,1,0,s,0,s,0,"VK_PROCESSKEY",s,s],[0,1,0,s,0,s,0,"VK_PACKET",s,s],[0,1,0,s,0,s,0,"VK_DBE_SBCSCHAR",s,s],[0,1,0,s,0,s,0,"VK_DBE_DBCSCHAR",s,s],[0,1,0,s,0,s,0,"VK_ATTN",s,s],[0,1,0,s,0,s,0,"VK_CRSEL",s,s],[0,1,0,s,0,s,0,"VK_EXSEL",s,s],[0,1,0,s,0,s,0,"VK_EREOF",s,s],[0,1,0,s,0,s,0,"VK_PLAY",s,s],[0,1,0,s,0,s,0,"VK_ZOOM",s,s],[0,1,0,s,0,s,0,"VK_NONAME",s,s],[0,1,0,s,0,s,0,"VK_PA1",s,s],[0,1,0,s,0,s,0,"VK_OEM_CLEAR",s,s]];let t=[],n=[];for(const i of e){const[o,r,a,l,d,c,u,f,g,m]=i;if(n[a]||(n[a]=!0,jj[a]=l,Gj[l]=a,$j[l.toLowerCase()]=a,r&&(vD[a]=d,d!==0&&d!==3&&d!==5&&d!==4&&d!==6&&d!==57&&(mx[d]=a))),!t[d]){if(t[d]=!0,!c)throw new Error(`String representation missing for key code ${d} around scan code ${l}`);Wv.define(d,c),gx.define(d,g||c),px.define(d,m||g||c)}u&&(LO[u]=d),f&&(Uj[f]=d)}mx[3]=46})();var fc;(function(s){function e(a){return Wv.keyCodeToStr(a)}h(e,"toString"),s.toString=e;function t(a){return Wv.strToKeyCode(a)}h(t,"fromString"),s.fromString=t;function n(a){return gx.keyCodeToStr(a)}h(n,"toUserSettingsUS"),s.toUserSettingsUS=n;function i(a){return px.keyCodeToStr(a)}h(i,"toUserSettingsGeneral"),s.toUserSettingsGeneral=i;function o(a){return gx.strToKeyCode(a)||px.strToKeyCode(a)}h(o,"fromUserSettings"),s.fromUserSettings=o;function r(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Wv.keyCodeToStr(a)}h(r,"toElectronAccelerator"),s.toElectronAccelerator=r})(fc||(fc={}));function An(s,e){const t=(e&65535)<<16>>>0;return(s|t)>>>0}h(An,"KeyChord");let Bu;if(typeof tn.vscode<"u"&&typeof tn.vscode.process<"u"){const s=tn.vscode.process;Bu={get platform(){return s.platform},get arch(){return s.arch},get env(){return s.env},cwd(){return s.cwd()}}}else typeof process<"u"?Bu={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Bu={get platform(){return Vn?"win32":Ke?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const _x=Bu.cwd,qj=Bu.env,Ph=Bu.platform,Yj=65,Xj=97,Zj=90,Jj=122,Rl=46,si=47,go=92,dl=58,Qj=63;class wD extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const o=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${o} ${i} of type ${t}`;r+=`. Received type ${typeof n}`;super(r);this.code="ERR_INVALID_ARG_TYPE"}}h(wD,"ErrorInvalidArgType");function En(s,e){if(typeof s!="string")throw new wD(e,"string",s)}h(En,"validateString");function at(s){return s===si||s===go}h(at,"isPathSeparator$1");function bx(s){return s===si}h(bx,"isPosixPathSeparator");function cl(s){return s>=Yj&&s<=Zj||s>=Xj&&s<=Jj}h(cl,"isWindowsDeviceRoot");function Bw(s,e,t,n){let i="",o=0,r=-1,a=0,l=0;for(let d=0;d<=s.length;++d){if(d<s.length)l=s.charCodeAt(d);else{if(n(l))break;l=si}if(n(l)){if(!(r===d-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Rl||i.charCodeAt(i.length-2)!==Rl){if(i.length>2){const c=i.lastIndexOf(t);c===-1?(i="",o=0):(i=i.slice(0,c),o=i.length-1-i.lastIndexOf(t)),r=d,a=0;continue}else if(i.length!==0){i="",o=0,r=d,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${s.slice(r+1,d)}`:i=s.slice(r+1,d),o=d-r-1;r=d,a=0}else l===Rl&&a!==-1?++a:a=-1}return i}h(Bw,"normalizeString");function kO(s,e){if(e===null||typeof e!="object")throw new wD("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${s}${n}`:n}h(kO,"_format");const to={resolve(...s){let e="",t="",n=!1;for(let i=s.length-1;i>=-1;i--){let o;if(i>=0){if(o=s[i],En(o,"path"),o.length===0)continue}else e.length===0?o=_x():(o=qj[`=${e}`]||_x(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===go)&&(o=`${e}\\`));const r=o.length;let a=0,l="",d=!1;const c=o.charCodeAt(0);if(r===1)at(c)&&(a=1,d=!0);else if(at(c))if(d=!0,at(o.charCodeAt(1))){let u=2,f=u;for(;u<r&&!at(o.charCodeAt(u));)u++;if(u<r&&u!==f){const g=o.slice(f,u);for(f=u;u<r&&at(o.charCodeAt(u));)u++;if(u<r&&u!==f){for(f=u;u<r&&!at(o.charCodeAt(u));)u++;(u===r||u!==f)&&(l=`\\\\${g}\\${o.slice(f,u)}`,a=u)}}}else a=1;else cl(c)&&o.charCodeAt(1)===dl&&(l=o.slice(0,2),a=2,r>2&&at(o.charCodeAt(2))&&(d=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=Bw(t,!n,"\\",at),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(s){En(s,"path");const e=s.length;if(e===0)return".";let t=0,n,i=!1;const o=s.charCodeAt(0);if(e===1)return bx(o)?"\\":s;if(at(o))if(i=!0,at(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!at(s.charCodeAt(a));)a++;if(a<e&&a!==l){const d=s.slice(l,a);for(l=a;a<e&&at(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!at(s.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${s.slice(l)}\\`;a!==l&&(n=`\\\\${d}\\${s.slice(l,a)}`,t=a)}}}else t=1;else cl(o)&&s.charCodeAt(1)===dl&&(n=s.slice(0,2),t=2,e>2&&at(s.charCodeAt(2))&&(i=!0,t=3));let r=t<e?Bw(s.slice(t),!i,"\\",at):"";return r.length===0&&!i&&(r="."),r.length>0&&at(s.charCodeAt(e-1))&&(r+="\\"),n===void 0?i?`\\${r}`:r:i?`${n}\\${r}`:`${n}${r}`},isAbsolute(s){En(s,"path");const e=s.length;if(e===0)return!1;const t=s.charCodeAt(0);return at(t)||e>2&&cl(t)&&s.charCodeAt(1)===dl&&at(s.charCodeAt(2))},join(...s){if(s.length===0)return".";let e,t;for(let o=0;o<s.length;++o){const r=s[o];En(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&at(t.charCodeAt(0))){++i;const o=t.length;o>1&&at(t.charCodeAt(1))&&(++i,o>2&&(at(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&at(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return to.normalize(e)},relative(s,e){if(En(s,"from"),En(e,"to"),s===e)return"";const t=to.resolve(s),n=to.resolve(e);if(t===n||(s=t.toLowerCase(),e=n.toLowerCase(),s===e))return"";let i=0;for(;i<s.length&&s.charCodeAt(i)===go;)i++;let o=s.length;for(;o-1>i&&s.charCodeAt(o-1)===go;)o--;const r=o-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===go;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===go;)l--;const d=l-a,c=r<d?r:d;let u=-1,f=0;for(;f<c;f++){const m=s.charCodeAt(i+f);if(m!==e.charCodeAt(a+f))break;m===go&&(u=f)}if(f!==c){if(u===-1)return n}else{if(d>c){if(e.charCodeAt(a+f)===go)return n.slice(a+f+1);if(f===2)return n.slice(a+f)}r>c&&(s.charCodeAt(i+f)===go?u=f:f===2&&(u=3)),u===-1&&(u=0)}let g="";for(f=i+u+1;f<=o;++f)(f===o||s.charCodeAt(f)===go)&&(g+=g.length===0?"..":"\\..");return a+=u,g.length>0?`${g}${n.slice(a,l)}`:(n.charCodeAt(a)===go&&++a,n.slice(a,l))},toNamespacedPath(s){if(typeof s!="string")return s;if(s.length===0)return"";const e=to.resolve(s);if(e.length<=2)return s;if(e.charCodeAt(0)===go){if(e.charCodeAt(1)===go){const t=e.charCodeAt(2);if(t!==Qj&&t!==Rl)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(cl(e.charCodeAt(0))&&e.charCodeAt(1)===dl&&e.charCodeAt(2)===go)return`\\\\?\\${e}`;return s},dirname(s){En(s,"path");const e=s.length;if(e===0)return".";let t=-1,n=0;const i=s.charCodeAt(0);if(e===1)return at(i)?s:".";if(at(i)){if(t=n=1,at(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!at(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&at(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!at(s.charCodeAt(a));)a++;if(a===e)return s;a!==l&&(t=n=a+1)}}}}else cl(i)&&s.charCodeAt(1)===dl&&(t=e>2&&at(s.charCodeAt(2))?3:2,n=t);let o=-1,r=!0;for(let a=e-1;a>=n;--a)if(at(s.charCodeAt(a))){if(!r){o=a;break}}else r=!1;if(o===-1){if(t===-1)return".";o=t}return s.slice(0,o)},basename(s,e){e!==void 0&&En(e,"ext"),En(s,"path");let t=0,n=-1,i=!0,o;if(s.length>=2&&cl(s.charCodeAt(0))&&s.charCodeAt(1)===dl&&(t=2),e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let r=e.length-1,a=-1;for(o=s.length-1;o>=t;--o){const l=s.charCodeAt(o);if(at(l)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=o):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=s.length),s.slice(t,n)}for(o=s.length-1;o>=t;--o)if(at(s.charCodeAt(o))){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":s.slice(t,n)},extname(s){En(s,"path");let e=0,t=-1,n=0,i=-1,o=!0,r=0;s.length>=2&&s.charCodeAt(1)===dl&&cl(s.charCodeAt(0))&&(e=n=2);for(let a=s.length-1;a>=e;--a){const l=s.charCodeAt(a);if(at(l)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===Rl?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===n+1?"":s.slice(t,i)},format:kO.bind(null,"\\"),parse(s){En(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.length;let n=0,i=s.charCodeAt(0);if(t===1)return at(i)?(e.root=e.dir=s,e):(e.base=e.name=s,e);if(at(i)){if(n=1,at(s.charCodeAt(1))){let u=2,f=u;for(;u<t&&!at(s.charCodeAt(u));)u++;if(u<t&&u!==f){for(f=u;u<t&&at(s.charCodeAt(u));)u++;if(u<t&&u!==f){for(f=u;u<t&&!at(s.charCodeAt(u));)u++;u===t?n=u:u!==f&&(n=u+1)}}}}else if(cl(i)&&s.charCodeAt(1)===dl){if(t<=2)return e.root=e.dir=s,e;if(n=2,at(s.charCodeAt(2))){if(t===3)return e.root=e.dir=s,e;n=3}}n>0&&(e.root=s.slice(0,n));let o=-1,r=n,a=-1,l=!0,d=s.length-1,c=0;for(;d>=n;--d){if(i=s.charCodeAt(d),at(i)){if(!l){r=d+1;break}continue}a===-1&&(l=!1,a=d+1),i===Rl?o===-1?o=d:c!==1&&(c=1):o!==-1&&(c=-1)}return a!==-1&&(o===-1||c===0||c===1&&o===a-1&&o===r+1?e.base=e.name=s.slice(r,a):(e.name=s.slice(r,o),e.base=s.slice(r,a),e.ext=s.slice(o,a))),r>0&&r!==n?e.dir=s.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},an={resolve(...s){let e="",t=!1;for(let n=s.length-1;n>=-1&&!t;n--){const i=n>=0?s[n]:_x();En(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===si)}return e=Bw(e,!t,"/",bx),t?`/${e}`:e.length>0?e:"."},normalize(s){if(En(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===si,t=s.charCodeAt(s.length-1)===si;return s=Bw(s,!e,"/",bx),s.length===0?e?"/":t?"./":".":(t&&(s+="/"),e?`/${s}`:s)},isAbsolute(s){return En(s,"path"),s.length>0&&s.charCodeAt(0)===si},join(...s){if(s.length===0)return".";let e;for(let t=0;t<s.length;++t){const n=s[t];En(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":an.normalize(e)},relative(s,e){if(En(s,"from"),En(e,"to"),s===e||(s=an.resolve(s),e=an.resolve(e),s===e))return"";const t=1,n=s.length,i=n-t,o=1,r=e.length-o,a=i<r?i:r;let l=-1,d=0;for(;d<a;d++){const u=s.charCodeAt(t+d);if(u!==e.charCodeAt(o+d))break;u===si&&(l=d)}if(d===a)if(r>a){if(e.charCodeAt(o+d)===si)return e.slice(o+d+1);if(d===0)return e.slice(o+d)}else i>a&&(s.charCodeAt(t+d)===si?l=d:d===0&&(l=0));let c="";for(d=t+l+1;d<=n;++d)(d===n||s.charCodeAt(d)===si)&&(c+=c.length===0?"..":"/..");return`${c}${e.slice(o+l)}`},toNamespacedPath(s){return s},dirname(s){if(En(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===si;let t=-1,n=!0;for(let i=s.length-1;i>=1;--i)if(s.charCodeAt(i)===si){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":s.slice(0,t)},basename(s,e){e!==void 0&&En(e,"ext"),En(s,"path");let t=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let r=e.length-1,a=-1;for(o=s.length-1;o>=0;--o){const l=s.charCodeAt(o);if(l===si){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=o):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=s.length),s.slice(t,n)}for(o=s.length-1;o>=0;--o)if(s.charCodeAt(o)===si){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":s.slice(t,n)},extname(s){En(s,"path");let e=-1,t=0,n=-1,i=!0,o=0;for(let r=s.length-1;r>=0;--r){const a=s.charCodeAt(r);if(a===si){if(!i){t=r+1;break}continue}n===-1&&(i=!1,n=r+1),a===Rl?e===-1?e=r:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":s.slice(e,n)},format:kO.bind(null,"/"),parse(s){En(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.charCodeAt(0)===si;let n;t?(e.root="/",n=1):n=0;let i=-1,o=0,r=-1,a=!0,l=s.length-1,d=0;for(;l>=n;--l){const c=s.charCodeAt(l);if(c===si){if(!a){o=l+1;break}continue}r===-1&&(a=!1,r=l+1),c===Rl?i===-1?i=l:d!==1&&(d=1):i!==-1&&(d=-1)}if(r!==-1){const c=o===0&&t?1:o;i===-1||d===0||d===1&&i===r-1&&i===o+1?e.base=e.name=s.slice(c,r):(e.name=s.slice(c,i),e.base=s.slice(c,r),e.ext=s.slice(i,r))}return o>0?e.dir=s.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};an.win32=to.win32=to;an.posix=to.posix=an;const CD=Ph==="win32"?to.normalize:an.normalize,eG=Ph==="win32"?to.resolve:an.resolve,tG=Ph==="win32"?to.relative:an.relative,EO=Ph==="win32"?to.dirname:an.dirname,Lc=Ph==="win32"?to.basename:an.basename,nG=Ph==="win32"?to.extname:an.extname,Pr=Ph==="win32"?to.sep:an.sep,iG=/^\w[\w\d+.-]*$/,oG=/^\//,sG=/^\/\//;function JA(s,e){if(!s.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${s.authority}", path: "${s.path}", query: "${s.query}", fragment: "${s.fragment}"}`);if(s.scheme&&!iG.test(s.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(s.path){if(s.authority){if(!oG.test(s.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(sG.test(s.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}h(JA,"_validateUri");function rG(s,e){return!s&&!e?"file":s}h(rG,"_schemeFix");function aG(s,e){switch(s){case"https":case"http":case"file":e?e[0]!==Rs&&(e=Rs+e):e=Rs;break}return e}h(aG,"_referenceResolution");const Jt="",Rs="/",lG=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ce{constructor(e,t,n,i,o,r=!1){typeof e=="object"?(this.scheme=e.scheme||Jt,this.authority=e.authority||Jt,this.path=e.path||Jt,this.query=e.query||Jt,this.fragment=e.fragment||Jt):(this.scheme=rG(e,r),this.authority=t||Jt,this.path=aG(this.scheme,n||Jt),this.query=i||Jt,this.fragment=o||Jt,JA(this,r))}static isUri(e){return e instanceof Ce?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return Hw(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:o,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=Jt),n===void 0?n=this.authority:n===null&&(n=Jt),i===void 0?i=this.path:i===null&&(i=Jt),o===void 0?o=this.query:o===null&&(o=Jt),r===void 0?r=this.fragment:r===null&&(r=Jt),t===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&r===this.fragment?this:new Gd(t,n,i,o,r)}static parse(e,t=!1){const n=lG.exec(e);return n?new Gd(n[2]||Jt,Bb(n[4]||Jt),Bb(n[5]||Jt),Bb(n[7]||Jt),Bb(n[9]||Jt),t):new Gd(Jt,Jt,Jt,Jt,Jt)}static file(e){let t=Jt;if(Vn&&(e=e.replace(/\\/g,Rs)),e[0]===Rs&&e[1]===Rs){const n=e.indexOf(Rs,2);n===-1?(t=e.substring(2),e=Rs):(t=e.substring(2,n),e=e.substring(n)||Rs)}return new Gd("file",t,e,Jt,Jt)}static from(e){const t=new Gd(e.scheme,e.authority,e.path,e.query,e.fragment);return JA(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Vn&&e.scheme==="file"?n=Ce.file(to.join(Hw(e,!0),...t)).path:n=an.join(e.path,...t),e.with({path:n})}toString(e=!1){return vx(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Ce)return e;{const t=new Gd(e);return t._formatted=e.external,t._fsPath=e._sep===DO?e.fsPath:null,t}}else return e}}h(Ce,"URI");const DO=Vn?1:void 0;class Gd extends Ce{constructor(){super(...arguments);this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Hw(this,!1)),this._fsPath}toString(e=!1){return e?vx(this,!0):(this._formatted||(this._formatted=vx(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=DO),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}h(Gd,"Uri$1");const IO={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function QA(s,e){let t,n=-1;for(let i=0;i<s.length;i++){const o=s.charCodeAt(i);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47)n!==-1&&(t+=encodeURIComponent(s.substring(n,i)),n=-1),t!==void 0&&(t+=s.charAt(i));else{t===void 0&&(t=s.substr(0,i));const r=IO[o];r!==void 0?(n!==-1&&(t+=encodeURIComponent(s.substring(n,i)),n=-1),t+=r):n===-1&&(n=i)}}return n!==-1&&(t+=encodeURIComponent(s.substring(n))),t!==void 0?t:s}h(QA,"encodeURIComponentFast");function dG(s){let e;for(let t=0;t<s.length;t++){const n=s.charCodeAt(t);n===35||n===63?(e===void 0&&(e=s.substr(0,t)),e+=IO[n]):e!==void 0&&(e+=s[t])}return e!==void 0?e:s}h(dG,"encodeURIComponentMinimal");function Hw(s,e){let t;return s.authority&&s.path.length>1&&s.scheme==="file"?t=`//${s.authority}${s.path}`:s.path.charCodeAt(0)===47&&(s.path.charCodeAt(1)>=65&&s.path.charCodeAt(1)<=90||s.path.charCodeAt(1)>=97&&s.path.charCodeAt(1)<=122)&&s.path.charCodeAt(2)===58?e?t=s.path.substr(1):t=s.path[1].toLowerCase()+s.path.substr(2):t=s.path,Vn&&(t=t.replace(/\//g,"\\")),t}h(Hw,"uriToFsPath");function vx(s,e){const t=e?dG:QA;let n="",{scheme:i,authority:o,path:r,query:a,fragment:l}=s;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Rs,n+=Rs),o){let d=o.indexOf("@");if(d!==-1){const c=o.substr(0,d);o=o.substr(d+1),d=c.indexOf(":"),d===-1?n+=t(c,!1):(n+=t(c.substr(0,d),!1),n+=":",n+=t(c.substr(d+1),!1)),n+="@"}o=o.toLowerCase(),d=o.indexOf(":"),d===-1?n+=t(o,!1):(n+=t(o.substr(0,d),!1),n+=o.substr(d))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const d=r.charCodeAt(1);d>=65&&d<=90&&(r=`/${String.fromCharCode(d+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const d=r.charCodeAt(0);d>=65&&d<=90&&(r=`${String.fromCharCode(d+32)}:${r.substr(2)}`)}n+=t(r,!0)}return a&&(n+="?",n+=t(a,!1)),l&&(n+="#",n+=e?l:QA(l,!1)),n}h(vx,"_asFormatted");function NO(s){try{return decodeURIComponent(s)}catch{return s.length>3?s.substr(0,3)+NO(s.substr(3)):s}}h(NO,"decodeURIComponentGraceful");const eM=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Bb(s){return s.match(eM)?s.replace(eM,e=>NO(e)):s}h(Bb,"percentDecode");class W{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new W(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return W.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return W.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return W.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){const o=e.column|0,r=t.column|0;return o-r}return n-i}clone(){return new W(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new W(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}h(W,"Position$1");class T{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return T.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return T.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return T.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return T.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return T.plusRange(this,e)}static plusRange(e,t){let n,i,o,r;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new T(n,i,o,r)}intersectRanges(e){return T.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,c=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),o>d?(o=d,r=c):o===d&&(r=Math.min(r,c)),n>o||n===o&&i>r?null:new T(n,i,o,r)}equalsRange(e){return T.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return T.getEndPosition(this)}static getEndPosition(e){return new W(e.endLineNumber,e.endColumn)}getStartPosition(){return T.getStartPosition(this)}static getStartPosition(e){return new W(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new T(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new T(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return T.collapseToStart(this)}static collapseToStart(e){return new T(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new T(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,r=t.startLineNumber|0;if(o===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const d=e.endLineNumber|0,c=t.endLineNumber|0;if(d===c){const u=e.endColumn|0,f=t.endColumn|0;return u-f}return d-c}return a-l}return o-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}h(T,"Range$2");class oe extends T{constructor(e,t,n,i){super(e,t,n,i);this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return oe.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new oe(this.startLineNumber,this.startColumn,e,t):new oe(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new W(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new W(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new oe(e,t,this.endLineNumber,this.endColumn):new oe(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new oe(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new oe(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new oe(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new oe(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,o){return o===0?new oe(e,t,n,i):new oe(n,i,e,t)}}h(oe,"Selection$1");var wx=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class AO{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new P,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),He(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerFactory(e,t){var n;(n=this._factories.get(e))===null||n===void 0||n.dispose();const i=new MO(this,e,t);return this._factories.set(e,i),He(()=>{const o=this._factories.get(e);!o||o!==i||(this._factories.delete(e),o.dispose())})}getOrCreate(e){return wx(this,void 0,void 0,function*(){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(yield n.resolve(),this.get(e))})}get(e){return this._map.get(e)||null}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}h(AO,"TokenizationRegistry$1");class MO extends z{constructor(e,t,n){super();this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return wx(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return wx(this,void 0,void 0,function*(){const e=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}h(MO,"TokenizationSupportFactoryData");function cG(s){return s?s.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}h(cG,"getCodiconAriaLabel");class _{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,_._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return _._allCodicons}}h(_,"Codicon");_._allCodicons=[];_.add=new _("add",{fontCharacter:"\\ea60"});_.plus=new _("plus",_.add.definition);_.gistNew=new _("gist-new",_.add.definition);_.repoCreate=new _("repo-create",_.add.definition);_.lightbulb=new _("lightbulb",{fontCharacter:"\\ea61"});_.lightBulb=new _("light-bulb",{fontCharacter:"\\ea61"});_.repo=new _("repo",{fontCharacter:"\\ea62"});_.repoDelete=new _("repo-delete",{fontCharacter:"\\ea62"});_.gistFork=new _("gist-fork",{fontCharacter:"\\ea63"});_.repoForked=new _("repo-forked",{fontCharacter:"\\ea63"});_.gitPullRequest=new _("git-pull-request",{fontCharacter:"\\ea64"});_.gitPullRequestAbandoned=new _("git-pull-request-abandoned",{fontCharacter:"\\ea64"});_.recordKeys=new _("record-keys",{fontCharacter:"\\ea65"});_.keyboard=new _("keyboard",{fontCharacter:"\\ea65"});_.tag=new _("tag",{fontCharacter:"\\ea66"});_.tagAdd=new _("tag-add",{fontCharacter:"\\ea66"});_.tagRemove=new _("tag-remove",{fontCharacter:"\\ea66"});_.person=new _("person",{fontCharacter:"\\ea67"});_.personFollow=new _("person-follow",{fontCharacter:"\\ea67"});_.personOutline=new _("person-outline",{fontCharacter:"\\ea67"});_.personFilled=new _("person-filled",{fontCharacter:"\\ea67"});_.gitBranch=new _("git-branch",{fontCharacter:"\\ea68"});_.gitBranchCreate=new _("git-branch-create",{fontCharacter:"\\ea68"});_.gitBranchDelete=new _("git-branch-delete",{fontCharacter:"\\ea68"});_.sourceControl=new _("source-control",{fontCharacter:"\\ea68"});_.mirror=new _("mirror",{fontCharacter:"\\ea69"});_.mirrorPublic=new _("mirror-public",{fontCharacter:"\\ea69"});_.star=new _("star",{fontCharacter:"\\ea6a"});_.starAdd=new _("star-add",{fontCharacter:"\\ea6a"});_.starDelete=new _("star-delete",{fontCharacter:"\\ea6a"});_.starEmpty=new _("star-empty",{fontCharacter:"\\ea6a"});_.comment=new _("comment",{fontCharacter:"\\ea6b"});_.commentAdd=new _("comment-add",{fontCharacter:"\\ea6b"});_.alert=new _("alert",{fontCharacter:"\\ea6c"});_.warning=new _("warning",{fontCharacter:"\\ea6c"});_.search=new _("search",{fontCharacter:"\\ea6d"});_.searchSave=new _("search-save",{fontCharacter:"\\ea6d"});_.logOut=new _("log-out",{fontCharacter:"\\ea6e"});_.signOut=new _("sign-out",{fontCharacter:"\\ea6e"});_.logIn=new _("log-in",{fontCharacter:"\\ea6f"});_.signIn=new _("sign-in",{fontCharacter:"\\ea6f"});_.eye=new _("eye",{fontCharacter:"\\ea70"});_.eyeUnwatch=new _("eye-unwatch",{fontCharacter:"\\ea70"});_.eyeWatch=new _("eye-watch",{fontCharacter:"\\ea70"});_.circleFilled=new _("circle-filled",{fontCharacter:"\\ea71"});_.primitiveDot=new _("primitive-dot",{fontCharacter:"\\ea71"});_.closeDirty=new _("close-dirty",{fontCharacter:"\\ea71"});_.debugBreakpoint=new _("debug-breakpoint",{fontCharacter:"\\ea71"});_.debugBreakpointDisabled=new _("debug-breakpoint-disabled",{fontCharacter:"\\ea71"});_.debugHint=new _("debug-hint",{fontCharacter:"\\ea71"});_.primitiveSquare=new _("primitive-square",{fontCharacter:"\\ea72"});_.edit=new _("edit",{fontCharacter:"\\ea73"});_.pencil=new _("pencil",{fontCharacter:"\\ea73"});_.info=new _("info",{fontCharacter:"\\ea74"});_.issueOpened=new _("issue-opened",{fontCharacter:"\\ea74"});_.gistPrivate=new _("gist-private",{fontCharacter:"\\ea75"});_.gitForkPrivate=new _("git-fork-private",{fontCharacter:"\\ea75"});_.lock=new _("lock",{fontCharacter:"\\ea75"});_.mirrorPrivate=new _("mirror-private",{fontCharacter:"\\ea75"});_.close=new _("close",{fontCharacter:"\\ea76"});_.removeClose=new _("remove-close",{fontCharacter:"\\ea76"});_.x=new _("x",{fontCharacter:"\\ea76"});_.repoSync=new _("repo-sync",{fontCharacter:"\\ea77"});_.sync=new _("sync",{fontCharacter:"\\ea77"});_.clone=new _("clone",{fontCharacter:"\\ea78"});_.desktopDownload=new _("desktop-download",{fontCharacter:"\\ea78"});_.beaker=new _("beaker",{fontCharacter:"\\ea79"});_.microscope=new _("microscope",{fontCharacter:"\\ea79"});_.vm=new _("vm",{fontCharacter:"\\ea7a"});_.deviceDesktop=new _("device-desktop",{fontCharacter:"\\ea7a"});_.file=new _("file",{fontCharacter:"\\ea7b"});_.fileText=new _("file-text",{fontCharacter:"\\ea7b"});_.more=new _("more",{fontCharacter:"\\ea7c"});_.ellipsis=new _("ellipsis",{fontCharacter:"\\ea7c"});_.kebabHorizontal=new _("kebab-horizontal",{fontCharacter:"\\ea7c"});_.mailReply=new _("mail-reply",{fontCharacter:"\\ea7d"});_.reply=new _("reply",{fontCharacter:"\\ea7d"});_.organization=new _("organization",{fontCharacter:"\\ea7e"});_.organizationFilled=new _("organization-filled",{fontCharacter:"\\ea7e"});_.organizationOutline=new _("organization-outline",{fontCharacter:"\\ea7e"});_.newFile=new _("new-file",{fontCharacter:"\\ea7f"});_.fileAdd=new _("file-add",{fontCharacter:"\\ea7f"});_.newFolder=new _("new-folder",{fontCharacter:"\\ea80"});_.fileDirectoryCreate=new _("file-directory-create",{fontCharacter:"\\ea80"});_.trash=new _("trash",{fontCharacter:"\\ea81"});_.trashcan=new _("trashcan",{fontCharacter:"\\ea81"});_.history=new _("history",{fontCharacter:"\\ea82"});_.clock=new _("clock",{fontCharacter:"\\ea82"});_.folder=new _("folder",{fontCharacter:"\\ea83"});_.fileDirectory=new _("file-directory",{fontCharacter:"\\ea83"});_.symbolFolder=new _("symbol-folder",{fontCharacter:"\\ea83"});_.logoGithub=new _("logo-github",{fontCharacter:"\\ea84"});_.markGithub=new _("mark-github",{fontCharacter:"\\ea84"});_.github=new _("github",{fontCharacter:"\\ea84"});_.terminal=new _("terminal",{fontCharacter:"\\ea85"});_.console=new _("console",{fontCharacter:"\\ea85"});_.repl=new _("repl",{fontCharacter:"\\ea85"});_.zap=new _("zap",{fontCharacter:"\\ea86"});_.symbolEvent=new _("symbol-event",{fontCharacter:"\\ea86"});_.error=new _("error",{fontCharacter:"\\ea87"});_.stop=new _("stop",{fontCharacter:"\\ea87"});_.variable=new _("variable",{fontCharacter:"\\ea88"});_.symbolVariable=new _("symbol-variable",{fontCharacter:"\\ea88"});_.array=new _("array",{fontCharacter:"\\ea8a"});_.symbolArray=new _("symbol-array",{fontCharacter:"\\ea8a"});_.symbolModule=new _("symbol-module",{fontCharacter:"\\ea8b"});_.symbolPackage=new _("symbol-package",{fontCharacter:"\\ea8b"});_.symbolNamespace=new _("symbol-namespace",{fontCharacter:"\\ea8b"});_.symbolObject=new _("symbol-object",{fontCharacter:"\\ea8b"});_.symbolMethod=new _("symbol-method",{fontCharacter:"\\ea8c"});_.symbolFunction=new _("symbol-function",{fontCharacter:"\\ea8c"});_.symbolConstructor=new _("symbol-constructor",{fontCharacter:"\\ea8c"});_.symbolBoolean=new _("symbol-boolean",{fontCharacter:"\\ea8f"});_.symbolNull=new _("symbol-null",{fontCharacter:"\\ea8f"});_.symbolNumeric=new _("symbol-numeric",{fontCharacter:"\\ea90"});_.symbolNumber=new _("symbol-number",{fontCharacter:"\\ea90"});_.symbolStructure=new _("symbol-structure",{fontCharacter:"\\ea91"});_.symbolStruct=new _("symbol-struct",{fontCharacter:"\\ea91"});_.symbolParameter=new _("symbol-parameter",{fontCharacter:"\\ea92"});_.symbolTypeParameter=new _("symbol-type-parameter",{fontCharacter:"\\ea92"});_.symbolKey=new _("symbol-key",{fontCharacter:"\\ea93"});_.symbolText=new _("symbol-text",{fontCharacter:"\\ea93"});_.symbolReference=new _("symbol-reference",{fontCharacter:"\\ea94"});_.goToFile=new _("go-to-file",{fontCharacter:"\\ea94"});_.symbolEnum=new _("symbol-enum",{fontCharacter:"\\ea95"});_.symbolValue=new _("symbol-value",{fontCharacter:"\\ea95"});_.symbolRuler=new _("symbol-ruler",{fontCharacter:"\\ea96"});_.symbolUnit=new _("symbol-unit",{fontCharacter:"\\ea96"});_.activateBreakpoints=new _("activate-breakpoints",{fontCharacter:"\\ea97"});_.archive=new _("archive",{fontCharacter:"\\ea98"});_.arrowBoth=new _("arrow-both",{fontCharacter:"\\ea99"});_.arrowDown=new _("arrow-down",{fontCharacter:"\\ea9a"});_.arrowLeft=new _("arrow-left",{fontCharacter:"\\ea9b"});_.arrowRight=new _("arrow-right",{fontCharacter:"\\ea9c"});_.arrowSmallDown=new _("arrow-small-down",{fontCharacter:"\\ea9d"});_.arrowSmallLeft=new _("arrow-small-left",{fontCharacter:"\\ea9e"});_.arrowSmallRight=new _("arrow-small-right",{fontCharacter:"\\ea9f"});_.arrowSmallUp=new _("arrow-small-up",{fontCharacter:"\\eaa0"});_.arrowUp=new _("arrow-up",{fontCharacter:"\\eaa1"});_.bell=new _("bell",{fontCharacter:"\\eaa2"});_.bold=new _("bold",{fontCharacter:"\\eaa3"});_.book=new _("book",{fontCharacter:"\\eaa4"});_.bookmark=new _("bookmark",{fontCharacter:"\\eaa5"});_.debugBreakpointConditionalUnverified=new _("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"});_.debugBreakpointConditional=new _("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"});_.debugBreakpointConditionalDisabled=new _("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"});_.debugBreakpointDataUnverified=new _("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"});_.debugBreakpointData=new _("debug-breakpoint-data",{fontCharacter:"\\eaa9"});_.debugBreakpointDataDisabled=new _("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"});_.debugBreakpointLogUnverified=new _("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"});_.debugBreakpointLog=new _("debug-breakpoint-log",{fontCharacter:"\\eaab"});_.debugBreakpointLogDisabled=new _("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"});_.briefcase=new _("briefcase",{fontCharacter:"\\eaac"});_.broadcast=new _("broadcast",{fontCharacter:"\\eaad"});_.browser=new _("browser",{fontCharacter:"\\eaae"});_.bug=new _("bug",{fontCharacter:"\\eaaf"});_.calendar=new _("calendar",{fontCharacter:"\\eab0"});_.caseSensitive=new _("case-sensitive",{fontCharacter:"\\eab1"});_.check=new _("check",{fontCharacter:"\\eab2"});_.checklist=new _("checklist",{fontCharacter:"\\eab3"});_.chevronDown=new _("chevron-down",{fontCharacter:"\\eab4"});_.dropDownButton=new _("drop-down-button",_.chevronDown.definition);_.chevronLeft=new _("chevron-left",{fontCharacter:"\\eab5"});_.chevronRight=new _("chevron-right",{fontCharacter:"\\eab6"});_.chevronUp=new _("chevron-up",{fontCharacter:"\\eab7"});_.chromeClose=new _("chrome-close",{fontCharacter:"\\eab8"});_.chromeMaximize=new _("chrome-maximize",{fontCharacter:"\\eab9"});_.chromeMinimize=new _("chrome-minimize",{fontCharacter:"\\eaba"});_.chromeRestore=new _("chrome-restore",{fontCharacter:"\\eabb"});_.circleOutline=new _("circle-outline",{fontCharacter:"\\eabc"});_.debugBreakpointUnverified=new _("debug-breakpoint-unverified",{fontCharacter:"\\eabc"});_.circleSlash=new _("circle-slash",{fontCharacter:"\\eabd"});_.circuitBoard=new _("circuit-board",{fontCharacter:"\\eabe"});_.clearAll=new _("clear-all",{fontCharacter:"\\eabf"});_.clippy=new _("clippy",{fontCharacter:"\\eac0"});_.closeAll=new _("close-all",{fontCharacter:"\\eac1"});_.cloudDownload=new _("cloud-download",{fontCharacter:"\\eac2"});_.cloudUpload=new _("cloud-upload",{fontCharacter:"\\eac3"});_.code=new _("code",{fontCharacter:"\\eac4"});_.collapseAll=new _("collapse-all",{fontCharacter:"\\eac5"});_.colorMode=new _("color-mode",{fontCharacter:"\\eac6"});_.commentDiscussion=new _("comment-discussion",{fontCharacter:"\\eac7"});_.compareChanges=new _("compare-changes",{fontCharacter:"\\eafd"});_.creditCard=new _("credit-card",{fontCharacter:"\\eac9"});_.dash=new _("dash",{fontCharacter:"\\eacc"});_.dashboard=new _("dashboard",{fontCharacter:"\\eacd"});_.database=new _("database",{fontCharacter:"\\eace"});_.debugContinue=new _("debug-continue",{fontCharacter:"\\eacf"});_.debugDisconnect=new _("debug-disconnect",{fontCharacter:"\\ead0"});_.debugPause=new _("debug-pause",{fontCharacter:"\\ead1"});_.debugRestart=new _("debug-restart",{fontCharacter:"\\ead2"});_.debugStart=new _("debug-start",{fontCharacter:"\\ead3"});_.debugStepInto=new _("debug-step-into",{fontCharacter:"\\ead4"});_.debugStepOut=new _("debug-step-out",{fontCharacter:"\\ead5"});_.debugStepOver=new _("debug-step-over",{fontCharacter:"\\ead6"});_.debugStop=new _("debug-stop",{fontCharacter:"\\ead7"});_.debug=new _("debug",{fontCharacter:"\\ead8"});_.deviceCameraVideo=new _("device-camera-video",{fontCharacter:"\\ead9"});_.deviceCamera=new _("device-camera",{fontCharacter:"\\eada"});_.deviceMobile=new _("device-mobile",{fontCharacter:"\\eadb"});_.diffAdded=new _("diff-added",{fontCharacter:"\\eadc"});_.diffIgnored=new _("diff-ignored",{fontCharacter:"\\eadd"});_.diffModified=new _("diff-modified",{fontCharacter:"\\eade"});_.diffRemoved=new _("diff-removed",{fontCharacter:"\\eadf"});_.diffRenamed=new _("diff-renamed",{fontCharacter:"\\eae0"});_.diff=new _("diff",{fontCharacter:"\\eae1"});_.discard=new _("discard",{fontCharacter:"\\eae2"});_.editorLayout=new _("editor-layout",{fontCharacter:"\\eae3"});_.emptyWindow=new _("empty-window",{fontCharacter:"\\eae4"});_.exclude=new _("exclude",{fontCharacter:"\\eae5"});_.extensions=new _("extensions",{fontCharacter:"\\eae6"});_.eyeClosed=new _("eye-closed",{fontCharacter:"\\eae7"});_.fileBinary=new _("file-binary",{fontCharacter:"\\eae8"});_.fileCode=new _("file-code",{fontCharacter:"\\eae9"});_.fileMedia=new _("file-media",{fontCharacter:"\\eaea"});_.filePdf=new _("file-pdf",{fontCharacter:"\\eaeb"});_.fileSubmodule=new _("file-submodule",{fontCharacter:"\\eaec"});_.fileSymlinkDirectory=new _("file-symlink-directory",{fontCharacter:"\\eaed"});_.fileSymlinkFile=new _("file-symlink-file",{fontCharacter:"\\eaee"});_.fileZip=new _("file-zip",{fontCharacter:"\\eaef"});_.files=new _("files",{fontCharacter:"\\eaf0"});_.filter=new _("filter",{fontCharacter:"\\eaf1"});_.flame=new _("flame",{fontCharacter:"\\eaf2"});_.foldDown=new _("fold-down",{fontCharacter:"\\eaf3"});_.foldUp=new _("fold-up",{fontCharacter:"\\eaf4"});_.fold=new _("fold",{fontCharacter:"\\eaf5"});_.folderActive=new _("folder-active",{fontCharacter:"\\eaf6"});_.folderOpened=new _("folder-opened",{fontCharacter:"\\eaf7"});_.gear=new _("gear",{fontCharacter:"\\eaf8"});_.gift=new _("gift",{fontCharacter:"\\eaf9"});_.gistSecret=new _("gist-secret",{fontCharacter:"\\eafa"});_.gist=new _("gist",{fontCharacter:"\\eafb"});_.gitCommit=new _("git-commit",{fontCharacter:"\\eafc"});_.gitCompare=new _("git-compare",{fontCharacter:"\\eafd"});_.gitMerge=new _("git-merge",{fontCharacter:"\\eafe"});_.githubAction=new _("github-action",{fontCharacter:"\\eaff"});_.githubAlt=new _("github-alt",{fontCharacter:"\\eb00"});_.globe=new _("globe",{fontCharacter:"\\eb01"});_.grabber=new _("grabber",{fontCharacter:"\\eb02"});_.graph=new _("graph",{fontCharacter:"\\eb03"});_.gripper=new _("gripper",{fontCharacter:"\\eb04"});_.heart=new _("heart",{fontCharacter:"\\eb05"});_.home=new _("home",{fontCharacter:"\\eb06"});_.horizontalRule=new _("horizontal-rule",{fontCharacter:"\\eb07"});_.hubot=new _("hubot",{fontCharacter:"\\eb08"});_.inbox=new _("inbox",{fontCharacter:"\\eb09"});_.issueClosed=new _("issue-closed",{fontCharacter:"\\eba4"});_.issueReopened=new _("issue-reopened",{fontCharacter:"\\eb0b"});_.issues=new _("issues",{fontCharacter:"\\eb0c"});_.italic=new _("italic",{fontCharacter:"\\eb0d"});_.jersey=new _("jersey",{fontCharacter:"\\eb0e"});_.json=new _("json",{fontCharacter:"\\eb0f"});_.kebabVertical=new _("kebab-vertical",{fontCharacter:"\\eb10"});_.key=new _("key",{fontCharacter:"\\eb11"});_.law=new _("law",{fontCharacter:"\\eb12"});_.lightbulbAutofix=new _("lightbulb-autofix",{fontCharacter:"\\eb13"});_.linkExternal=new _("link-external",{fontCharacter:"\\eb14"});_.link=new _("link",{fontCharacter:"\\eb15"});_.listOrdered=new _("list-ordered",{fontCharacter:"\\eb16"});_.listUnordered=new _("list-unordered",{fontCharacter:"\\eb17"});_.liveShare=new _("live-share",{fontCharacter:"\\eb18"});_.loading=new _("loading",{fontCharacter:"\\eb19"});_.location=new _("location",{fontCharacter:"\\eb1a"});_.mailRead=new _("mail-read",{fontCharacter:"\\eb1b"});_.mail=new _("mail",{fontCharacter:"\\eb1c"});_.markdown=new _("markdown",{fontCharacter:"\\eb1d"});_.megaphone=new _("megaphone",{fontCharacter:"\\eb1e"});_.mention=new _("mention",{fontCharacter:"\\eb1f"});_.milestone=new _("milestone",{fontCharacter:"\\eb20"});_.mortarBoard=new _("mortar-board",{fontCharacter:"\\eb21"});_.move=new _("move",{fontCharacter:"\\eb22"});_.multipleWindows=new _("multiple-windows",{fontCharacter:"\\eb23"});_.mute=new _("mute",{fontCharacter:"\\eb24"});_.noNewline=new _("no-newline",{fontCharacter:"\\eb25"});_.note=new _("note",{fontCharacter:"\\eb26"});_.octoface=new _("octoface",{fontCharacter:"\\eb27"});_.openPreview=new _("open-preview",{fontCharacter:"\\eb28"});_.package_=new _("package",{fontCharacter:"\\eb29"});_.paintcan=new _("paintcan",{fontCharacter:"\\eb2a"});_.pin=new _("pin",{fontCharacter:"\\eb2b"});_.play=new _("play",{fontCharacter:"\\eb2c"});_.run=new _("run",{fontCharacter:"\\eb2c"});_.plug=new _("plug",{fontCharacter:"\\eb2d"});_.preserveCase=new _("preserve-case",{fontCharacter:"\\eb2e"});_.preview=new _("preview",{fontCharacter:"\\eb2f"});_.project=new _("project",{fontCharacter:"\\eb30"});_.pulse=new _("pulse",{fontCharacter:"\\eb31"});_.question=new _("question",{fontCharacter:"\\eb32"});_.quote=new _("quote",{fontCharacter:"\\eb33"});_.radioTower=new _("radio-tower",{fontCharacter:"\\eb34"});_.reactions=new _("reactions",{fontCharacter:"\\eb35"});_.references=new _("references",{fontCharacter:"\\eb36"});_.refresh=new _("refresh",{fontCharacter:"\\eb37"});_.regex=new _("regex",{fontCharacter:"\\eb38"});_.remoteExplorer=new _("remote-explorer",{fontCharacter:"\\eb39"});_.remote=new _("remote",{fontCharacter:"\\eb3a"});_.remove=new _("remove",{fontCharacter:"\\eb3b"});_.replaceAll=new _("replace-all",{fontCharacter:"\\eb3c"});_.replace=new _("replace",{fontCharacter:"\\eb3d"});_.repoClone=new _("repo-clone",{fontCharacter:"\\eb3e"});_.repoForcePush=new _("repo-force-push",{fontCharacter:"\\eb3f"});_.repoPull=new _("repo-pull",{fontCharacter:"\\eb40"});_.repoPush=new _("repo-push",{fontCharacter:"\\eb41"});_.report=new _("report",{fontCharacter:"\\eb42"});_.requestChanges=new _("request-changes",{fontCharacter:"\\eb43"});_.rocket=new _("rocket",{fontCharacter:"\\eb44"});_.rootFolderOpened=new _("root-folder-opened",{fontCharacter:"\\eb45"});_.rootFolder=new _("root-folder",{fontCharacter:"\\eb46"});_.rss=new _("rss",{fontCharacter:"\\eb47"});_.ruby=new _("ruby",{fontCharacter:"\\eb48"});_.saveAll=new _("save-all",{fontCharacter:"\\eb49"});_.saveAs=new _("save-as",{fontCharacter:"\\eb4a"});_.save=new _("save",{fontCharacter:"\\eb4b"});_.screenFull=new _("screen-full",{fontCharacter:"\\eb4c"});_.screenNormal=new _("screen-normal",{fontCharacter:"\\eb4d"});_.searchStop=new _("search-stop",{fontCharacter:"\\eb4e"});_.server=new _("server",{fontCharacter:"\\eb50"});_.settingsGear=new _("settings-gear",{fontCharacter:"\\eb51"});_.settings=new _("settings",{fontCharacter:"\\eb52"});_.shield=new _("shield",{fontCharacter:"\\eb53"});_.smiley=new _("smiley",{fontCharacter:"\\eb54"});_.sortPrecedence=new _("sort-precedence",{fontCharacter:"\\eb55"});_.splitHorizontal=new _("split-horizontal",{fontCharacter:"\\eb56"});_.splitVertical=new _("split-vertical",{fontCharacter:"\\eb57"});_.squirrel=new _("squirrel",{fontCharacter:"\\eb58"});_.starFull=new _("star-full",{fontCharacter:"\\eb59"});_.starHalf=new _("star-half",{fontCharacter:"\\eb5a"});_.symbolClass=new _("symbol-class",{fontCharacter:"\\eb5b"});_.symbolColor=new _("symbol-color",{fontCharacter:"\\eb5c"});_.symbolCustomColor=new _("symbol-customcolor",{fontCharacter:"\\eb5c"});_.symbolConstant=new _("symbol-constant",{fontCharacter:"\\eb5d"});_.symbolEnumMember=new _("symbol-enum-member",{fontCharacter:"\\eb5e"});_.symbolField=new _("symbol-field",{fontCharacter:"\\eb5f"});_.symbolFile=new _("symbol-file",{fontCharacter:"\\eb60"});_.symbolInterface=new _("symbol-interface",{fontCharacter:"\\eb61"});_.symbolKeyword=new _("symbol-keyword",{fontCharacter:"\\eb62"});_.symbolMisc=new _("symbol-misc",{fontCharacter:"\\eb63"});_.symbolOperator=new _("symbol-operator",{fontCharacter:"\\eb64"});_.symbolProperty=new _("symbol-property",{fontCharacter:"\\eb65"});_.wrench=new _("wrench",{fontCharacter:"\\eb65"});_.wrenchSubaction=new _("wrench-subaction",{fontCharacter:"\\eb65"});_.symbolSnippet=new _("symbol-snippet",{fontCharacter:"\\eb66"});_.tasklist=new _("tasklist",{fontCharacter:"\\eb67"});_.telescope=new _("telescope",{fontCharacter:"\\eb68"});_.textSize=new _("text-size",{fontCharacter:"\\eb69"});_.threeBars=new _("three-bars",{fontCharacter:"\\eb6a"});_.thumbsdown=new _("thumbsdown",{fontCharacter:"\\eb6b"});_.thumbsup=new _("thumbsup",{fontCharacter:"\\eb6c"});_.tools=new _("tools",{fontCharacter:"\\eb6d"});_.triangleDown=new _("triangle-down",{fontCharacter:"\\eb6e"});_.triangleLeft=new _("triangle-left",{fontCharacter:"\\eb6f"});_.triangleRight=new _("triangle-right",{fontCharacter:"\\eb70"});_.triangleUp=new _("triangle-up",{fontCharacter:"\\eb71"});_.twitter=new _("twitter",{fontCharacter:"\\eb72"});_.unfold=new _("unfold",{fontCharacter:"\\eb73"});_.unlock=new _("unlock",{fontCharacter:"\\eb74"});_.unmute=new _("unmute",{fontCharacter:"\\eb75"});_.unverified=new _("unverified",{fontCharacter:"\\eb76"});_.verified=new _("verified",{fontCharacter:"\\eb77"});_.versions=new _("versions",{fontCharacter:"\\eb78"});_.vmActive=new _("vm-active",{fontCharacter:"\\eb79"});_.vmOutline=new _("vm-outline",{fontCharacter:"\\eb7a"});_.vmRunning=new _("vm-running",{fontCharacter:"\\eb7b"});_.watch=new _("watch",{fontCharacter:"\\eb7c"});_.whitespace=new _("whitespace",{fontCharacter:"\\eb7d"});_.wholeWord=new _("whole-word",{fontCharacter:"\\eb7e"});_.window=new _("window",{fontCharacter:"\\eb7f"});_.wordWrap=new _("word-wrap",{fontCharacter:"\\eb80"});_.zoomIn=new _("zoom-in",{fontCharacter:"\\eb81"});_.zoomOut=new _("zoom-out",{fontCharacter:"\\eb82"});_.listFilter=new _("list-filter",{fontCharacter:"\\eb83"});_.listFlat=new _("list-flat",{fontCharacter:"\\eb84"});_.listSelection=new _("list-selection",{fontCharacter:"\\eb85"});_.selection=new _("selection",{fontCharacter:"\\eb85"});_.listTree=new _("list-tree",{fontCharacter:"\\eb86"});_.debugBreakpointFunctionUnverified=new _("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"});_.debugBreakpointFunction=new _("debug-breakpoint-function",{fontCharacter:"\\eb88"});_.debugBreakpointFunctionDisabled=new _("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"});_.debugStackframeActive=new _("debug-stackframe-active",{fontCharacter:"\\eb89"});_.debugStackframeDot=new _("debug-stackframe-dot",{fontCharacter:"\\eb8a"});_.debugStackframe=new _("debug-stackframe",{fontCharacter:"\\eb8b"});_.debugStackframeFocused=new _("debug-stackframe-focused",{fontCharacter:"\\eb8b"});_.debugBreakpointUnsupported=new _("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"});_.symbolString=new _("symbol-string",{fontCharacter:"\\eb8d"});_.debugReverseContinue=new _("debug-reverse-continue",{fontCharacter:"\\eb8e"});_.debugStepBack=new _("debug-step-back",{fontCharacter:"\\eb8f"});_.debugRestartFrame=new _("debug-restart-frame",{fontCharacter:"\\eb90"});_.callIncoming=new _("call-incoming",{fontCharacter:"\\eb92"});_.callOutgoing=new _("call-outgoing",{fontCharacter:"\\eb93"});_.menu=new _("menu",{fontCharacter:"\\eb94"});_.expandAll=new _("expand-all",{fontCharacter:"\\eb95"});_.feedback=new _("feedback",{fontCharacter:"\\eb96"});_.groupByRefType=new _("group-by-ref-type",{fontCharacter:"\\eb97"});_.ungroupByRefType=new _("ungroup-by-ref-type",{fontCharacter:"\\eb98"});_.account=new _("account",{fontCharacter:"\\eb99"});_.bellDot=new _("bell-dot",{fontCharacter:"\\eb9a"});_.debugConsole=new _("debug-console",{fontCharacter:"\\eb9b"});_.library=new _("library",{fontCharacter:"\\eb9c"});_.output=new _("output",{fontCharacter:"\\eb9d"});_.runAll=new _("run-all",{fontCharacter:"\\eb9e"});_.syncIgnored=new _("sync-ignored",{fontCharacter:"\\eb9f"});_.pinned=new _("pinned",{fontCharacter:"\\eba0"});_.githubInverted=new _("github-inverted",{fontCharacter:"\\eba1"});_.debugAlt=new _("debug-alt",{fontCharacter:"\\eb91"});_.serverProcess=new _("server-process",{fontCharacter:"\\eba2"});_.serverEnvironment=new _("server-environment",{fontCharacter:"\\eba3"});_.pass=new _("pass",{fontCharacter:"\\eba4"});_.stopCircle=new _("stop-circle",{fontCharacter:"\\eba5"});_.playCircle=new _("play-circle",{fontCharacter:"\\eba6"});_.record=new _("record",{fontCharacter:"\\eba7"});_.debugAltSmall=new _("debug-alt-small",{fontCharacter:"\\eba8"});_.vmConnect=new _("vm-connect",{fontCharacter:"\\eba9"});_.cloud=new _("cloud",{fontCharacter:"\\ebaa"});_.merge=new _("merge",{fontCharacter:"\\ebab"});_.exportIcon=new _("export",{fontCharacter:"\\ebac"});_.graphLeft=new _("graph-left",{fontCharacter:"\\ebad"});_.magnet=new _("magnet",{fontCharacter:"\\ebae"});_.notebook=new _("notebook",{fontCharacter:"\\ebaf"});_.redo=new _("redo",{fontCharacter:"\\ebb0"});_.checkAll=new _("check-all",{fontCharacter:"\\ebb1"});_.pinnedDirty=new _("pinned-dirty",{fontCharacter:"\\ebb2"});_.passFilled=new _("pass-filled",{fontCharacter:"\\ebb3"});_.circleLargeFilled=new _("circle-large-filled",{fontCharacter:"\\ebb4"});_.circleLargeOutline=new _("circle-large-outline",{fontCharacter:"\\ebb5"});_.combine=new _("combine",{fontCharacter:"\\ebb6"});_.gather=new _("gather",{fontCharacter:"\\ebb6"});_.table=new _("table",{fontCharacter:"\\ebb7"});_.variableGroup=new _("variable-group",{fontCharacter:"\\ebb8"});_.typeHierarchy=new _("type-hierarchy",{fontCharacter:"\\ebb9"});_.typeHierarchySub=new _("type-hierarchy-sub",{fontCharacter:"\\ebba"});_.typeHierarchySuper=new _("type-hierarchy-super",{fontCharacter:"\\ebbb"});_.gitPullRequestCreate=new _("git-pull-request-create",{fontCharacter:"\\ebbc"});_.runAbove=new _("run-above",{fontCharacter:"\\ebbd"});_.runBelow=new _("run-below",{fontCharacter:"\\ebbe"});_.notebookTemplate=new _("notebook-template",{fontCharacter:"\\ebbf"});_.debugRerun=new _("debug-rerun",{fontCharacter:"\\ebc0"});_.workspaceTrusted=new _("workspace-trusted",{fontCharacter:"\\ebc1"});_.workspaceUntrusted=new _("workspace-untrusted",{fontCharacter:"\\ebc2"});_.workspaceUnspecified=new _("workspace-unspecified",{fontCharacter:"\\ebc3"});_.terminalCmd=new _("terminal-cmd",{fontCharacter:"\\ebc4"});_.terminalDebian=new _("terminal-debian",{fontCharacter:"\\ebc5"});_.terminalLinux=new _("terminal-linux",{fontCharacter:"\\ebc6"});_.terminalPowershell=new _("terminal-powershell",{fontCharacter:"\\ebc7"});_.terminalTmux=new _("terminal-tmux",{fontCharacter:"\\ebc8"});_.terminalUbuntu=new _("terminal-ubuntu",{fontCharacter:"\\ebc9"});_.terminalBash=new _("terminal-bash",{fontCharacter:"\\ebca"});_.arrowSwap=new _("arrow-swap",{fontCharacter:"\\ebcb"});_.copy=new _("copy",{fontCharacter:"\\ebcc"});_.personAdd=new _("person-add",{fontCharacter:"\\ebcd"});_.filterFilled=new _("filter-filled",{fontCharacter:"\\ebce"});_.wand=new _("wand",{fontCharacter:"\\ebcf"});_.debugLineByLine=new _("debug-line-by-line",{fontCharacter:"\\ebd0"});_.inspect=new _("inspect",{fontCharacter:"\\ebd1"});_.layers=new _("layers",{fontCharacter:"\\ebd2"});_.layersDot=new _("layers-dot",{fontCharacter:"\\ebd3"});_.layersActive=new _("layers-active",{fontCharacter:"\\ebd4"});_.compass=new _("compass",{fontCharacter:"\\ebd5"});_.compassDot=new _("compass-dot",{fontCharacter:"\\ebd6"});_.compassActive=new _("compass-active",{fontCharacter:"\\ebd7"});_.azure=new _("azure",{fontCharacter:"\\ebd8"});_.issueDraft=new _("issue-draft",{fontCharacter:"\\ebd9"});_.gitPullRequestClosed=new _("git-pull-request-closed",{fontCharacter:"\\ebda"});_.gitPullRequestDraft=new _("git-pull-request-draft",{fontCharacter:"\\ebdb"});_.debugAll=new _("debug-all",{fontCharacter:"\\ebdc"});_.debugCoverage=new _("debug-coverage",{fontCharacter:"\\ebdd"});_.runErrors=new _("run-errors",{fontCharacter:"\\ebde"});_.folderLibrary=new _("folder-library",{fontCharacter:"\\ebdf"});_.debugContinueSmall=new _("debug-continue-small",{fontCharacter:"\\ebe0"});_.beakerStop=new _("beaker-stop",{fontCharacter:"\\ebe1"});_.graphLine=new _("graph-line",{fontCharacter:"\\ebe2"});_.graphScatter=new _("graph-scatter",{fontCharacter:"\\ebe3"});_.pieChart=new _("pie-chart",{fontCharacter:"\\ebe4"});_.bracket=new _("bracket",_.json.definition);_.bracketDot=new _("bracket-dot",{fontCharacter:"\\ebe5"});_.bracketError=new _("bracket-error",{fontCharacter:"\\ebe6"});_.lockSmall=new _("lock-small",{fontCharacter:"\\ebe7"});_.azureDevops=new _("azure-devops",{fontCharacter:"\\ebe8"});_.verifiedFilled=new _("verified-filled",{fontCharacter:"\\ebe9"});_.newLine=new _("newline",{fontCharacter:"\\ebea"});_.layout=new _("layout",{fontCharacter:"\\ebeb"});_.layoutActivitybarLeft=new _("layout-activitybar-left",{fontCharacter:"\\ebec"});_.layoutActivitybarRight=new _("layout-activitybar-right",{fontCharacter:"\\ebed"});_.layoutPanelLeft=new _("layout-panel-left",{fontCharacter:"\\ebee"});_.layoutPanelCenter=new _("layout-panel-center",{fontCharacter:"\\ebef"});_.layoutPanelJustify=new _("layout-panel-justify",{fontCharacter:"\\ebf0"});_.layoutPanelRight=new _("layout-panel-right",{fontCharacter:"\\ebf1"});_.layoutPanel=new _("layout-panel",{fontCharacter:"\\ebf2"});_.layoutSidebarLeft=new _("layout-sidebar-left",{fontCharacter:"\\ebf3"});_.layoutSidebarRight=new _("layout-sidebar-right",{fontCharacter:"\\ebf4"});_.layoutStatusbar=new _("layout-statusbar",{fontCharacter:"\\ebf5"});_.layoutMenubar=new _("layout-menubar",{fontCharacter:"\\ebf6"});_.layoutCentered=new _("layout-centered",{fontCharacter:"\\ebf7"});_.target=new _("target",{fontCharacter:"\\ebf8"});_.indent=new _("indent",{fontCharacter:"\\ebf9"});_.recordSmall=new _("record-small",{fontCharacter:"\\ebfa"});_.errorSmall=new _("error-small",{fontCharacter:"\\ebfb"});_.arrowCircleDown=new _("arrow-circle-down",{fontCharacter:"\\ebfc"});_.arrowCircleLeft=new _("arrow-circle-left",{fontCharacter:"\\ebfd"});_.arrowCircleRight=new _("arrow-circle-right",{fontCharacter:"\\ebfe"});_.arrowCircleUp=new _("arrow-circle-up",{fontCharacter:"\\ebff"});_.dialogError=new _("dialog-error",_.error.definition);_.dialogWarning=new _("dialog-warning",_.warning.definition);_.dialogInfo=new _("dialog-info",_.info.definition);_.dialogClose=new _("dialog-close",_.close.definition);_.treeItemExpanded=new _("tree-item-expanded",_.chevronDown.definition);_.treeFilterOnTypeOn=new _("tree-filter-on-type-on",_.listFilter.definition);_.treeFilterOnTypeOff=new _("tree-filter-on-type-off",_.listSelection.definition);_.treeFilterClear=new _("tree-filter-clear",_.close.definition);_.treeItemLoading=new _("tree-item-loading",_.loading.definition);_.menuSelection=new _("menu-selection",_.check.definition);_.menuSubmenu=new _("menu-submenu",_.chevronRight.definition);_.menuBarMore=new _("menubar-more",_.more.definition);_.scrollbarButtonLeft=new _("scrollbar-button-left",_.triangleLeft.definition);_.scrollbarButtonRight=new _("scrollbar-button-right",_.triangleRight.definition);_.scrollbarButtonUp=new _("scrollbar-button-up",_.triangleUp.definition);_.scrollbarButtonDown=new _("scrollbar-button-down",_.triangleDown.definition);_.toolBarMore=new _("toolbar-more",_.more.definition);_.quickInputBack=new _("quick-input-back",_.arrowLeft.definition);var _i;(function(s){s.iconNameSegment="[A-Za-z0-9]+",s.iconNameExpression="[A-Za-z0-9-]+",s.iconModifierExpression="~[A-Za-z]+",s.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${s.iconNameExpression})(${s.iconModifierExpression})?$`);function t(o){if(o instanceof _)return["codicon","codicon-"+o.id];const r=e.exec(o.id);if(!r)return t(_.error);let[,a,l]=r;const d=["codicon","codicon-"+a];return l&&d.push("codicon-modifier-"+l.substr(1)),d}h(t,"asClassNameArray"),s.asClassNameArray=t;function n(o){return t(o).join(" ")}h(n,"asClassName"),s.asClassName=n;function i(o){return"."+t(o).join(".")}h(i,"asCSSSelector"),s.asCSSSelector=i})(_i||(_i={}));class Gn{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static getFontStyle(e){return(e&15360)>>>10}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){const t=this.getForeground(e);let n="mtk"+t;const i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let o=`color: ${t[n]};`;i&1&&(o+="font-style: italic;"),i&2&&(o+="font-weight: bold;");let r="";return i&4&&(r+=" underline"),i&8&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:Boolean(n&1),bold:Boolean(n&2),underline:Boolean(n&4),strikethrough:Boolean(n&8)}}}h(Gn,"TokenMetadata");class hf{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}}h(hf,"Token$2");class u0{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}h(u0,"TokenizationResult");class v_{constructor(e,t){this._encodedTokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}h(v_,"EncodedTokenizationResult");var dm;(function(s){const e=new Map;e.set(0,_.symbolMethod),e.set(1,_.symbolFunction),e.set(2,_.symbolConstructor),e.set(3,_.symbolField),e.set(4,_.symbolVariable),e.set(5,_.symbolClass),e.set(6,_.symbolStruct),e.set(7,_.symbolInterface),e.set(8,_.symbolModule),e.set(9,_.symbolProperty),e.set(10,_.symbolEvent),e.set(11,_.symbolOperator),e.set(12,_.symbolUnit),e.set(13,_.symbolValue),e.set(15,_.symbolEnum),e.set(14,_.symbolConstant),e.set(15,_.symbolEnum),e.set(16,_.symbolEnumMember),e.set(17,_.symbolKeyword),e.set(27,_.symbolSnippet),e.set(18,_.symbolText),e.set(19,_.symbolColor),e.set(20,_.symbolFile),e.set(21,_.symbolReference),e.set(22,_.symbolCustomColor),e.set(23,_.symbolFolder),e.set(24,_.symbolTypeParameter),e.set(25,_.account),e.set(26,_.issues);function t(o){let r=e.get(o);return r||(console.info("No codicon found for CompletionItemKind "+o),r=_.symbolProperty),r}h(t,"toIcon"),s.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function i(o,r){let a=n.get(o);return typeof a>"u"&&!r&&(a=9),a}h(i,"fromString"),s.fromString=i})(dm||(dm={}));var Ho;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(Ho||(Ho={}));var Or;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(Or||(Or={}));var cm;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(cm||(cm={}));function hG(s){return s&&Ce.isUri(s.uri)&&T.isIRange(s.range)&&(T.isIRange(s.originSelectionRange)||T.isIRange(s.targetSelectionRange))}h(hG,"isLocationLink");var Cx;(function(s){const e=new Map;e.set(0,_.symbolFile),e.set(1,_.symbolModule),e.set(2,_.symbolNamespace),e.set(3,_.symbolPackage),e.set(4,_.symbolClass),e.set(5,_.symbolMethod),e.set(6,_.symbolProperty),e.set(7,_.symbolField),e.set(8,_.symbolConstructor),e.set(9,_.symbolEnum),e.set(10,_.symbolInterface),e.set(11,_.symbolFunction),e.set(12,_.symbolVariable),e.set(13,_.symbolConstant),e.set(14,_.symbolString),e.set(15,_.symbolNumber),e.set(16,_.symbolBoolean),e.set(17,_.symbolArray),e.set(18,_.symbolObject),e.set(19,_.symbolKey),e.set(20,_.symbolNull),e.set(21,_.symbolEnumMember),e.set(22,_.symbolStruct),e.set(23,_.symbolEvent),e.set(24,_.symbolOperator),e.set(25,_.symbolTypeParameter);function t(n){let i=e.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=_.symbolProperty),i}h(t,"toIcon"),s.toIcon=t})(Cx||(Cx={}));class bs{constructor(e){this.value=e}}h(bs,"FoldingRangeKind");bs.Comment=new bs("comment");bs.Imports=new bs("imports");bs.Region=new bs("region");var yx;(function(s){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}h(e,"is"),s.is=e})(yx||(yx={}));var zw;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(zw||(zw={}));const Ft=new AO;var Sx;(function(s){s[s.Unknown=0]="Unknown",s[s.Disabled=1]="Disabled",s[s.Enabled=2]="Enabled"})(Sx||(Sx={}));var xx;(function(s){s[s.KeepWhitespace=1]="KeepWhitespace",s[s.InsertAsSnippet=4]="InsertAsSnippet"})(xx||(xx={}));var Tx;(function(s){s[s.Method=0]="Method",s[s.Function=1]="Function",s[s.Constructor=2]="Constructor",s[s.Field=3]="Field",s[s.Variable=4]="Variable",s[s.Class=5]="Class",s[s.Struct=6]="Struct",s[s.Interface=7]="Interface",s[s.Module=8]="Module",s[s.Property=9]="Property",s[s.Event=10]="Event",s[s.Operator=11]="Operator",s[s.Unit=12]="Unit",s[s.Value=13]="Value",s[s.Constant=14]="Constant",s[s.Enum=15]="Enum",s[s.EnumMember=16]="EnumMember",s[s.Keyword=17]="Keyword",s[s.Text=18]="Text",s[s.Color=19]="Color",s[s.File=20]="File",s[s.Reference=21]="Reference",s[s.Customcolor=22]="Customcolor",s[s.Folder=23]="Folder",s[s.TypeParameter=24]="TypeParameter",s[s.User=25]="User",s[s.Issue=26]="Issue",s[s.Snippet=27]="Snippet"})(Tx||(Tx={}));var Lx;(function(s){s[s.Deprecated=1]="Deprecated"})(Lx||(Lx={}));var kx;(function(s){s[s.Invoke=0]="Invoke",s[s.TriggerCharacter=1]="TriggerCharacter",s[s.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(kx||(kx={}));var Ex;(function(s){s[s.EXACT=0]="EXACT",s[s.ABOVE=1]="ABOVE",s[s.BELOW=2]="BELOW"})(Ex||(Ex={}));var Dx;(function(s){s[s.NotSet=0]="NotSet",s[s.ContentFlush=1]="ContentFlush",s[s.RecoverFromMarkers=2]="RecoverFromMarkers",s[s.Explicit=3]="Explicit",s[s.Paste=4]="Paste",s[s.Undo=5]="Undo",s[s.Redo=6]="Redo"})(Dx||(Dx={}));var Ix;(function(s){s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(Ix||(Ix={}));var Nx;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(Nx||(Nx={}));var Ax;(function(s){s[s.None=0]="None",s[s.Keep=1]="Keep",s[s.Brackets=2]="Brackets",s[s.Advanced=3]="Advanced",s[s.Full=4]="Full"})(Ax||(Ax={}));var Mx;(function(s){s[s.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",s[s.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",s[s.accessibilitySupport=2]="accessibilitySupport",s[s.accessibilityPageSize=3]="accessibilityPageSize",s[s.ariaLabel=4]="ariaLabel",s[s.autoClosingBrackets=5]="autoClosingBrackets",s[s.autoClosingDelete=6]="autoClosingDelete",s[s.autoClosingOvertype=7]="autoClosingOvertype",s[s.autoClosingQuotes=8]="autoClosingQuotes",s[s.autoIndent=9]="autoIndent",s[s.automaticLayout=10]="automaticLayout",s[s.autoSurround=11]="autoSurround",s[s.bracketPairColorization=12]="bracketPairColorization",s[s.guides=13]="guides",s[s.codeLens=14]="codeLens",s[s.codeLensFontFamily=15]="codeLensFontFamily",s[s.codeLensFontSize=16]="codeLensFontSize",s[s.colorDecorators=17]="colorDecorators",s[s.columnSelection=18]="columnSelection",s[s.comments=19]="comments",s[s.contextmenu=20]="contextmenu",s[s.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",s[s.cursorBlinking=22]="cursorBlinking",s[s.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",s[s.cursorStyle=24]="cursorStyle",s[s.cursorSurroundingLines=25]="cursorSurroundingLines",s[s.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",s[s.cursorWidth=27]="cursorWidth",s[s.disableLayerHinting=28]="disableLayerHinting",s[s.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",s[s.domReadOnly=30]="domReadOnly",s[s.dragAndDrop=31]="dragAndDrop",s[s.emptySelectionClipboard=32]="emptySelectionClipboard",s[s.extraEditorClassName=33]="extraEditorClassName",s[s.fastScrollSensitivity=34]="fastScrollSensitivity",s[s.find=35]="find",s[s.fixedOverflowWidgets=36]="fixedOverflowWidgets",s[s.folding=37]="folding",s[s.foldingStrategy=38]="foldingStrategy",s[s.foldingHighlight=39]="foldingHighlight",s[s.foldingImportsByDefault=40]="foldingImportsByDefault",s[s.foldingMaximumRegions=41]="foldingMaximumRegions",s[s.unfoldOnClickAfterEndOfLine=42]="unfoldOnClickAfterEndOfLine",s[s.fontFamily=43]="fontFamily",s[s.fontInfo=44]="fontInfo",s[s.fontLigatures=45]="fontLigatures",s[s.fontSize=46]="fontSize",s[s.fontWeight=47]="fontWeight",s[s.formatOnPaste=48]="formatOnPaste",s[s.formatOnType=49]="formatOnType",s[s.glyphMargin=50]="glyphMargin",s[s.gotoLocation=51]="gotoLocation",s[s.hideCursorInOverviewRuler=52]="hideCursorInOverviewRuler",s[s.hover=53]="hover",s[s.inDiffEditor=54]="inDiffEditor",s[s.inlineSuggest=55]="inlineSuggest",s[s.letterSpacing=56]="letterSpacing",s[s.lightbulb=57]="lightbulb",s[s.lineDecorationsWidth=58]="lineDecorationsWidth",s[s.lineHeight=59]="lineHeight",s[s.lineNumbers=60]="lineNumbers",s[s.lineNumbersMinChars=61]="lineNumbersMinChars",s[s.linkedEditing=62]="linkedEditing",s[s.links=63]="links",s[s.matchBrackets=64]="matchBrackets",s[s.minimap=65]="minimap",s[s.mouseStyle=66]="mouseStyle",s[s.mouseWheelScrollSensitivity=67]="mouseWheelScrollSensitivity",s[s.mouseWheelZoom=68]="mouseWheelZoom",s[s.multiCursorMergeOverlapping=69]="multiCursorMergeOverlapping",s[s.multiCursorModifier=70]="multiCursorModifier",s[s.multiCursorPaste=71]="multiCursorPaste",s[s.occurrencesHighlight=72]="occurrencesHighlight",s[s.overviewRulerBorder=73]="overviewRulerBorder",s[s.overviewRulerLanes=74]="overviewRulerLanes",s[s.padding=75]="padding",s[s.parameterHints=76]="parameterHints",s[s.peekWidgetDefaultFocus=77]="peekWidgetDefaultFocus",s[s.definitionLinkOpensInPeek=78]="definitionLinkOpensInPeek",s[s.quickSuggestions=79]="quickSuggestions",s[s.quickSuggestionsDelay=80]="quickSuggestionsDelay",s[s.readOnly=81]="readOnly",s[s.renameOnType=82]="renameOnType",s[s.renderControlCharacters=83]="renderControlCharacters",s[s.renderFinalNewline=84]="renderFinalNewline",s[s.renderLineHighlight=85]="renderLineHighlight",s[s.renderLineHighlightOnlyWhenFocus=86]="renderLineHighlightOnlyWhenFocus",s[s.renderValidationDecorations=87]="renderValidationDecorations",s[s.renderWhitespace=88]="renderWhitespace",s[s.revealHorizontalRightPadding=89]="revealHorizontalRightPadding",s[s.roundedSelection=90]="roundedSelection",s[s.rulers=91]="rulers",s[s.scrollbar=92]="scrollbar",s[s.scrollBeyondLastColumn=93]="scrollBeyondLastColumn",s[s.scrollBeyondLastLine=94]="scrollBeyondLastLine",s[s.scrollPredominantAxis=95]="scrollPredominantAxis",s[s.selectionClipboard=96]="selectionClipboard",s[s.selectionHighlight=97]="selectionHighlight",s[s.selectOnLineNumbers=98]="selectOnLineNumbers",s[s.showFoldingControls=99]="showFoldingControls",s[s.showUnused=100]="showUnused",s[s.snippetSuggestions=101]="snippetSuggestions",s[s.smartSelect=102]="smartSelect",s[s.smoothScrolling=103]="smoothScrolling",s[s.stickyTabStops=104]="stickyTabStops",s[s.stopRenderingLineAfter=105]="stopRenderingLineAfter",s[s.suggest=106]="suggest",s[s.suggestFontSize=107]="suggestFontSize",s[s.suggestLineHeight=108]="suggestLineHeight",s[s.suggestOnTriggerCharacters=109]="suggestOnTriggerCharacters",s[s.suggestSelection=110]="suggestSelection",s[s.tabCompletion=111]="tabCompletion",s[s.tabIndex=112]="tabIndex",s[s.unicodeHighlighting=113]="unicodeHighlighting",s[s.unusualLineTerminators=114]="unusualLineTerminators",s[s.useShadowDOM=115]="useShadowDOM",s[s.useTabStops=116]="useTabStops",s[s.wordSeparators=117]="wordSeparators",s[s.wordWrap=118]="wordWrap",s[s.wordWrapBreakAfterCharacters=119]="wordWrapBreakAfterCharacters",s[s.wordWrapBreakBeforeCharacters=120]="wordWrapBreakBeforeCharacters",s[s.wordWrapColumn=121]="wordWrapColumn",s[s.wordWrapOverride1=122]="wordWrapOverride1",s[s.wordWrapOverride2=123]="wordWrapOverride2",s[s.wrappingIndent=124]="wrappingIndent",s[s.wrappingStrategy=125]="wrappingStrategy",s[s.showDeprecated=126]="showDeprecated",s[s.inlayHints=127]="inlayHints",s[s.editorClassName=128]="editorClassName",s[s.pixelRatio=129]="pixelRatio",s[s.tabFocusMode=130]="tabFocusMode",s[s.layoutInfo=131]="layoutInfo",s[s.wrappingInfo=132]="wrappingInfo"})(Mx||(Mx={}));var Rx;(function(s){s[s.TextDefined=0]="TextDefined",s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(Rx||(Rx={}));var Px;(function(s){s[s.LF=0]="LF",s[s.CRLF=1]="CRLF"})(Px||(Px={}));var Ox;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(Ox||(Ox={}));var Fx;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(Fx||(Fx={}));var Wx;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(Wx||(Wx={}));var Vx;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(Vx||(Vx={}));var Bx;(function(s){s[s.DependsOnKbLayout=-1]="DependsOnKbLayout",s[s.Unknown=0]="Unknown",s[s.Backspace=1]="Backspace",s[s.Tab=2]="Tab",s[s.Enter=3]="Enter",s[s.Shift=4]="Shift",s[s.Ctrl=5]="Ctrl",s[s.Alt=6]="Alt",s[s.PauseBreak=7]="PauseBreak",s[s.CapsLock=8]="CapsLock",s[s.Escape=9]="Escape",s[s.Space=10]="Space",s[s.PageUp=11]="PageUp",s[s.PageDown=12]="PageDown",s[s.End=13]="End",s[s.Home=14]="Home",s[s.LeftArrow=15]="LeftArrow",s[s.UpArrow=16]="UpArrow",s[s.RightArrow=17]="RightArrow",s[s.DownArrow=18]="DownArrow",s[s.Insert=19]="Insert",s[s.Delete=20]="Delete",s[s.Digit0=21]="Digit0",s[s.Digit1=22]="Digit1",s[s.Digit2=23]="Digit2",s[s.Digit3=24]="Digit3",s[s.Digit4=25]="Digit4",s[s.Digit5=26]="Digit5",s[s.Digit6=27]="Digit6",s[s.Digit7=28]="Digit7",s[s.Digit8=29]="Digit8",s[s.Digit9=30]="Digit9",s[s.KeyA=31]="KeyA",s[s.KeyB=32]="KeyB",s[s.KeyC=33]="KeyC",s[s.KeyD=34]="KeyD",s[s.KeyE=35]="KeyE",s[s.KeyF=36]="KeyF",s[s.KeyG=37]="KeyG",s[s.KeyH=38]="KeyH",s[s.KeyI=39]="KeyI",s[s.KeyJ=40]="KeyJ",s[s.KeyK=41]="KeyK",s[s.KeyL=42]="KeyL",s[s.KeyM=43]="KeyM",s[s.KeyN=44]="KeyN",s[s.KeyO=45]="KeyO",s[s.KeyP=46]="KeyP",s[s.KeyQ=47]="KeyQ",s[s.KeyR=48]="KeyR",s[s.KeyS=49]="KeyS",s[s.KeyT=50]="KeyT",s[s.KeyU=51]="KeyU",s[s.KeyV=52]="KeyV",s[s.KeyW=53]="KeyW",s[s.KeyX=54]="KeyX",s[s.KeyY=55]="KeyY",s[s.KeyZ=56]="KeyZ",s[s.Meta=57]="Meta",s[s.ContextMenu=58]="ContextMenu",s[s.F1=59]="F1",s[s.F2=60]="F2",s[s.F3=61]="F3",s[s.F4=62]="F4",s[s.F5=63]="F5",s[s.F6=64]="F6",s[s.F7=65]="F7",s[s.F8=66]="F8",s[s.F9=67]="F9",s[s.F10=68]="F10",s[s.F11=69]="F11",s[s.F12=70]="F12",s[s.F13=71]="F13",s[s.F14=72]="F14",s[s.F15=73]="F15",s[s.F16=74]="F16",s[s.F17=75]="F17",s[s.F18=76]="F18",s[s.F19=77]="F19",s[s.NumLock=78]="NumLock",s[s.ScrollLock=79]="ScrollLock",s[s.Semicolon=80]="Semicolon",s[s.Equal=81]="Equal",s[s.Comma=82]="Comma",s[s.Minus=83]="Minus",s[s.Period=84]="Period",s[s.Slash=85]="Slash",s[s.Backquote=86]="Backquote",s[s.BracketLeft=87]="BracketLeft",s[s.Backslash=88]="Backslash",s[s.BracketRight=89]="BracketRight",s[s.Quote=90]="Quote",s[s.OEM_8=91]="OEM_8",s[s.IntlBackslash=92]="IntlBackslash",s[s.Numpad0=93]="Numpad0",s[s.Numpad1=94]="Numpad1",s[s.Numpad2=95]="Numpad2",s[s.Numpad3=96]="Numpad3",s[s.Numpad4=97]="Numpad4",s[s.Numpad5=98]="Numpad5",s[s.Numpad6=99]="Numpad6",s[s.Numpad7=100]="Numpad7",s[s.Numpad8=101]="Numpad8",s[s.Numpad9=102]="Numpad9",s[s.NumpadMultiply=103]="NumpadMultiply",s[s.NumpadAdd=104]="NumpadAdd",s[s.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",s[s.NumpadSubtract=106]="NumpadSubtract",s[s.NumpadDecimal=107]="NumpadDecimal",s[s.NumpadDivide=108]="NumpadDivide",s[s.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",s[s.ABNT_C1=110]="ABNT_C1",s[s.ABNT_C2=111]="ABNT_C2",s[s.AudioVolumeMute=112]="AudioVolumeMute",s[s.AudioVolumeUp=113]="AudioVolumeUp",s[s.AudioVolumeDown=114]="AudioVolumeDown",s[s.BrowserSearch=115]="BrowserSearch",s[s.BrowserHome=116]="BrowserHome",s[s.BrowserBack=117]="BrowserBack",s[s.BrowserForward=118]="BrowserForward",s[s.MediaTrackNext=119]="MediaTrackNext",s[s.MediaTrackPrevious=120]="MediaTrackPrevious",s[s.MediaStop=121]="MediaStop",s[s.MediaPlayPause=122]="MediaPlayPause",s[s.LaunchMediaPlayer=123]="LaunchMediaPlayer",s[s.LaunchMail=124]="LaunchMail",s[s.LaunchApp2=125]="LaunchApp2",s[s.Clear=126]="Clear",s[s.MAX_VALUE=127]="MAX_VALUE"})(Bx||(Bx={}));var Hx;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(Hx||(Hx={}));var zx;(function(s){s[s.Unnecessary=1]="Unnecessary",s[s.Deprecated=2]="Deprecated"})(zx||(zx={}));var Kx;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(Kx||(Kx={}));var Ux;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.TEXTAREA=1]="TEXTAREA",s[s.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",s[s.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",s[s.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",s[s.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",s[s.CONTENT_TEXT=6]="CONTENT_TEXT",s[s.CONTENT_EMPTY=7]="CONTENT_EMPTY",s[s.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",s[s.CONTENT_WIDGET=9]="CONTENT_WIDGET",s[s.OVERVIEW_RULER=10]="OVERVIEW_RULER",s[s.SCROLLBAR=11]="SCROLLBAR",s[s.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",s[s.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(Ux||(Ux={}));var jx;(function(s){s[s.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",s[s.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",s[s.TOP_CENTER=2]="TOP_CENTER"})(jx||(jx={}));var Gx;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(Gx||(Gx={}));var $x;(function(s){s[s.Left=0]="Left",s[s.Right=1]="Right",s[s.None=2]="None"})($x||($x={}));var qx;(function(s){s[s.Off=0]="Off",s[s.On=1]="On",s[s.Relative=2]="Relative",s[s.Interval=3]="Interval",s[s.Custom=4]="Custom"})(qx||(qx={}));var Yx;(function(s){s[s.None=0]="None",s[s.Text=1]="Text",s[s.Blocks=2]="Blocks"})(Yx||(Yx={}));var Xx;(function(s){s[s.Smooth=0]="Smooth",s[s.Immediate=1]="Immediate"})(Xx||(Xx={}));var Zx;(function(s){s[s.Auto=1]="Auto",s[s.Hidden=2]="Hidden",s[s.Visible=3]="Visible"})(Zx||(Zx={}));var Jx;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(Jx||(Jx={}));var Qx;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(Qx||(Qx={}));var eT;(function(s){s[s.File=0]="File",s[s.Module=1]="Module",s[s.Namespace=2]="Namespace",s[s.Package=3]="Package",s[s.Class=4]="Class",s[s.Method=5]="Method",s[s.Property=6]="Property",s[s.Field=7]="Field",s[s.Constructor=8]="Constructor",s[s.Enum=9]="Enum",s[s.Interface=10]="Interface",s[s.Function=11]="Function",s[s.Variable=12]="Variable",s[s.Constant=13]="Constant",s[s.String=14]="String",s[s.Number=15]="Number",s[s.Boolean=16]="Boolean",s[s.Array=17]="Array",s[s.Object=18]="Object",s[s.Key=19]="Key",s[s.Null=20]="Null",s[s.EnumMember=21]="EnumMember",s[s.Struct=22]="Struct",s[s.Event=23]="Event",s[s.Operator=24]="Operator",s[s.TypeParameter=25]="TypeParameter"})(eT||(eT={}));var tT;(function(s){s[s.Deprecated=1]="Deprecated"})(tT||(tT={}));var nT;(function(s){s[s.Hidden=0]="Hidden",s[s.Blink=1]="Blink",s[s.Smooth=2]="Smooth",s[s.Phase=3]="Phase",s[s.Expand=4]="Expand",s[s.Solid=5]="Solid"})(nT||(nT={}));var iT;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(iT||(iT={}));var oT;(function(s){s[s.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",s[s.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",s[s.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",s[s.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(oT||(oT={}));var sT;(function(s){s[s.None=0]="None",s[s.Same=1]="Same",s[s.Indent=2]="Indent",s[s.DeepIndent=3]="DeepIndent"})(sT||(sT={}));class gg{static chord(e,t){return An(e,t)}}h(gg,"KeyMod$1");gg.CtrlCmd=2048;gg.Shift=1024;gg.Alt=512;gg.WinCtrl=256;function RO(){return{editor:void 0,languages:void 0,CancellationTokenSource:Bn,Emitter:P,KeyCode:Bx,KeyMod:gg,Position:W,Range:T,Selection:oe,SelectionDirection:Jx,MarkerSeverity:Hx,MarkerTag:zx,Uri:Ce,Token:hf}}h(RO,"createMonacoBaseAPI");class PO{constructor(e){this.computeFn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.computeFn(e)),this.lastCache}}h(PO,"LRUCachedComputed");class $c{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}h($c,"Lazy");var OO;function FO(s){return!s||typeof s!="string"?!0:s.trim().length===0}h(FO,"isFalsyOrWhitespace");const uG=/{(\d+)}/g;function jo(s,...e){return e.length===0?s:s.replace(uG,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}h(jo,"format");function yD(s){return s.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}h(yD,"escape");function Xo(s){return s.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}h(Xo,"escapeRegExpCharacters");function fG(s,e=" "){const t=SD(s,e);return WO(t,e)}h(fG,"trim");function SD(s,e){if(!s||!e)return s;const t=e.length;if(t===0||s.length===0)return s;let n=0;for(;s.indexOf(e,n)===n;)n=n+t;return s.substring(n)}h(SD,"ltrim");function WO(s,e){if(!s||!e)return s;const t=e.length,n=s.length;if(t===0||n===0)return s;let i=n,o=-1;for(;o=s.lastIndexOf(e,i-1),!(o===-1||o+t!==i);){if(o===0)return"";i=o}return s.substring(0,i)}h(WO,"rtrim");function gG(s){return s.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}h(gG,"convertSimple2RegExpPattern");function pG(s){return s.replace(/\*/g,"")}h(pG,"stripWildcards");function VO(s,e,t={}){if(!s)throw new Error("Cannot create regex from empty string");e||(s=Xo(s)),t.wholeWord&&(/\B/.test(s.charAt(0))||(s="\\b"+s),/\B/.test(s.charAt(s.length-1))||(s=s+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(s,n)}h(VO,"createRegExp");function mG(s){return s.source==="^"||s.source==="^$"||s.source==="$"||s.source==="^\\s*$"?!1:!!(s.exec("")&&s.lastIndex===0)}h(mG,"regExpLeadsToEndlessLoop");function _y(s){return(s.global?"g":"")+(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")}h(_y,"regExpFlags");function zr(s){return s.split(/\r\n|\r|\n/)}h(zr,"splitLines");function bi(s){for(let e=0,t=s.length;e<t;e++){const n=s.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}h(bi,"firstNonWhitespaceIndex");function pt(s,e=0,t=s.length){for(let n=e;n<t;n++){const i=s.charCodeAt(n);if(i!==32&&i!==9)return s.substring(e,n)}return s.substring(e,t)}h(pt,"getLeadingWhitespace");function Fr(s,e=s.length-1){for(let t=e;t>=0;t--){const n=s.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}h(Fr,"lastNonWhitespaceIndex");function hm(s,e){return s<e?-1:s>e?1:0}h(hm,"compare");function xD(s,e,t=0,n=s.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=s.charCodeAt(t),d=e.charCodeAt(i);if(l<d)return-1;if(l>d)return 1}const r=n-t,a=o-i;return r<a?-1:r>a?1:0}h(xD,"compareSubstring");function rT(s,e){return w_(s,e,0,s.length,0,e.length)}h(rT,"compareIgnoreCase");function w_(s,e,t=0,n=s.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=s.charCodeAt(t),d=e.charCodeAt(i);if(l===d)continue;if(l>=128||d>=128)return xD(s.toLowerCase(),e.toLowerCase(),t,n,i,o);kl(l)&&(l-=32),kl(d)&&(d-=32);const c=l-d;if(c!==0)return c}const r=n-t,a=o-i;return r<a?-1:r>a?1:0}h(w_,"compareSubstringIgnoreCase");function kl(s){return s>=97&&s<=122}h(kl,"isLowerAsciiLetter");function Lr(s){return s>=65&&s<=90}h(Lr,"isUpperAsciiLetter");function Iu(s,e){return s.length===e.length&&w_(s,e)===0}h(Iu,"equalsIgnoreCase");function TD(s,e){const t=e.length;return e.length>s.length?!1:w_(s,e,0,t)===0}h(TD,"startsWithIgnoreCase");function uf(s,e){let t,n=Math.min(s.length,e.length);for(t=0;t<n;t++)if(s.charCodeAt(t)!==e.charCodeAt(t))return t;return n}h(uf,"commonPrefixLength");function Kw(s,e){let t,n=Math.min(s.length,e.length);const i=s.length-1,o=e.length-1;for(t=0;t<n;t++)if(s.charCodeAt(i-t)!==e.charCodeAt(o-t))return t;return n}h(Kw,"commonSuffixLength");function Cn(s){return 55296<=s&&s<=56319}h(Cn,"isHighSurrogate");function qc(s){return 56320<=s&&s<=57343}h(qc,"isLowSurrogate");function LD(s,e){return(s-55296<<10)+(e-56320)+65536}h(LD,"computeCodePoint");function Uw(s,e,t){const n=s.charCodeAt(t);if(Cn(n)&&t+1<e){const i=s.charCodeAt(t+1);if(qc(i))return LD(n,i)}return n}h(Uw,"getNextCodePoint");function _G(s,e){const t=s.charCodeAt(e-1);if(qc(t)&&e>1){const n=s.charCodeAt(e-2);if(Cn(n))return LD(n,t)}return t}h(_G,"getPrevCodePoint");class f0{constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}get offset(){return this._offset}setOffset(e){this._offset=e}prevCodePoint(){const e=_G(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=Uw(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}h(f0,"CodePointIterator");class um{constructor(e,t=0){this._iterator=new f0(e,t)}get offset(){return this._iterator.offset}nextGraphemeLength(){const e=Ea.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const o=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(tM(i,r)){t.setOffset(o);break}i=r}return t.offset-n}prevGraphemeLength(){const e=Ea.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const o=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(tM(r,i)){t.setOffset(o);break}i=r}return n-t.offset}eol(){return this._iterator.eol()}}h(um,"GraphemeIterator");function kD(s,e){return new um(s,e).nextGraphemeLength()}h(kD,"nextCharLength");function BO(s,e){return new um(s,e).prevGraphemeLength()}h(BO,"prevCharLength");function bG(s,e){e>0&&qc(s.charCodeAt(e))&&e--;const t=e+kD(s,e);return[t-BO(s,t),t]}h(bG,"getCharContainingOffset");const vG=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function g0(s){return vG.test(s)}h(g0,"containsRTL");const wG=/^[\t\n\r\x20-\x7E]*$/;function p0(s){return wG.test(s)}h(p0,"isBasicASCII");const HO=/[\u2028\u2029]/;function zO(s){return HO.test(s)}h(zO,"containsUnusualLineTerminators");function Xl(s){return s>=11904&&s<=55215||s>=63744&&s<=64255||s>=65281&&s<=65374}h(Xl,"isFullWidthCharacter");function ED(s){return s>=127462&&s<=127487||s===8986||s===8987||s===9200||s===9203||s>=9728&&s<=10175||s===11088||s===11093||s>=127744&&s<=128591||s>=128640&&s<=128764||s>=128992&&s<=129008||s>=129280&&s<=129535||s>=129648&&s<=129782}h(ED,"isEmojiImprecise");const CG=String.fromCharCode(65279);function DD(s){return!!(s&&s.length>0&&s.charCodeAt(0)===65279)}h(DD,"startsWithUTF8BOM");function yG(s,e=!1){return s?(e&&(s=s.replace(/\\./g,"")),s.toLowerCase()!==s):!1}h(yG,"containsUppercaseCharacter");function KO(s){return s=s%(2*26),s<26?String.fromCharCode(97+s):String.fromCharCode(65+s-26)}h(KO,"singleLetterHash");function tM(s,e){return s===0?e!==5&&e!==7:s===2&&e===3?!1:s===4||s===2||s===3||e===4||e===2||e===3?!0:!(s===8&&(e===8||e===9||e===11||e===12)||(s===11||s===9)&&(e===9||e===10)||(s===12||s===10)&&e===10||e===5||e===13||e===7||s===1||s===13&&e===14||s===6&&e===6)}h(tM,"breakBetweenGraphemeBreakType");class Ea{constructor(){this._data=SG()}static getInstance(){return Ea._INSTANCE||(Ea._INSTANCE=new Ea),Ea._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}}h(Ea,"GraphemeBreakTree");Ea._INSTANCE=null;function SG(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}h(SG,"getGraphemeBreakRawData");function xG(s,e){if(s===0)return 0;const t=TG(s,e);if(t!==void 0)return t;const n=new f0(e,s);return n.prevCodePoint(),n.offset}h(xG,"getLeftDeleteOffset");function TG(s,e){const t=new f0(e,s);let n=t.prevCodePoint();for(;LG(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!ED(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}h(TG,"getOffsetBeforeLastEmojiComponent");function LG(s){return 127995<=s&&s<=127999}h(LG,"isEmojiModifier");const kG="\xA0";class Zo{constructor(e){this.confusableDictionary=e}static getInstance(e){return Zo.cache.get(Array.from(e))}static getLocales(){return Zo._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}h(Zo,"AmbiguousCharacters");OO=Zo;Zo.ambiguousCharacterData=new $c(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));Zo.cache=new PO(s=>{function e(d){const c=new Map;for(let u=0;u<d.length;u+=2)c.set(d[u],d[u+1]);return c}h(e,"arrayToMap");function t(d,c){const u=new Map(d);for(const[f,g]of c)u.set(f,g);return u}h(t,"mergeMaps");function n(d,c){if(!d)return c;const u=new Map;for(const[f,g]of d)c.has(f)&&u.set(f,g);return u}h(n,"intersectMaps");const i=OO.ambiguousCharacterData.getValue();let o=s.filter(d=>!d.startsWith("_")&&d in i);o.length===0&&(o=["_default"]);let r;for(const d of o){const c=e(i[d]);r=n(r,c)}const a=e(i._common),l=t(a,r);return new Zo(l)});Zo._locales=new $c(()=>Object.keys(Zo.ambiguousCharacterData.getValue()).filter(s=>!s.startsWith("_")));class Qs{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Qs.getRawData())),this._data}static isInvisibleCharacter(e){return Qs.getData().has(e)}static get codePoints(){return Qs.getData()}}h(Qs,"InvisibleCharacters");Qs._data=void 0;class jw{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}h(jw,"WindowManager");jw.INSTANCE=new jw;class UO extends z{constructor(){super();this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){this._mediaQueryList&&this._mediaQueryList.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}h(UO,"DevicePixelRatioMonitor");class jO extends z{constructor(){super();this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new UO);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}h(jO,"PixelRatioImpl");class GO{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new jO),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}h(GO,"PixelRatioFacade");const ff=new GO;function $O(){return jw.INSTANCE.getZoomFactor()}h($O,"getZoomFactor");const pg=navigator.userAgent,Eo=pg.indexOf("Firefox")>=0,Pl=pg.indexOf("AppleWebKit")>=0,ID=pg.indexOf("Chrome")>=0,vs=!ID&&pg.indexOf("Safari")>=0,ND=!ID&&!vs&&Pl,EG=pg.indexOf("Electron/")>=0,qO=pg.indexOf("Android")>=0,AD=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches;var DG=Object.freeze(Object.defineProperty({__proto__:null,PixelRatio:ff,getZoomFactor:$O,isFirefox:Eo,isWebKit:Pl,isChrome:ID,isSafari:vs,isWebkitWebView:ND,isElectron:EG,isAndroid:qO,isStandalone:AD},Symbol.toStringTag,{value:"Module"}));class MD{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}h(MD,"FastDomNode");function nt(s){return new MD(s)}h(nt,"createFastDomNode");function ti(s,e){s instanceof MD?(s.setFontFamily(e.getMassagedFontFamily(vs?di.fontFamily:null)),s.setFontWeight(e.fontWeight),s.setFontSize(e.fontSize),s.setFontFeatureSettings(e.fontFeatureSettings),s.setLineHeight(e.lineHeight),s.setLetterSpacing(e.letterSpacing)):(s.style.fontFamily=e.getMassagedFontFamily(vs?di.fontFamily:null),s.style.fontWeight=e.fontWeight,s.style.fontSize=e.fontSize+"px",s.style.fontFeatureSettings=e.fontFeatureSettings,s.style.lineHeight=e.lineHeight+"px",s.style.letterSpacing=e.letterSpacing+"px")}h(ti,"applyFontInfo");class YO{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}h(YO,"CharWidthRequest");class m0{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");ti(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");ti(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const i=document.createElement("div");ti(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);const o=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=n),r.type===1&&(a=i),a.appendChild(document.createElement("br"));const l=document.createElement("span");m0._render(l,r),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let n="\xA0";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}h(m0,"DomCharWidthReader");function IG(s,e){new m0(s,e).read()}h(IG,"readCharWidths");const Ua=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new P,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(s){s=Math.min(Math.max(-5,s),20),this._zoomLevel!==s&&(this._zoomLevel=s,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},NG=Ke?1.5:1.35,by=8;class Ol{constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n){const i=e.get(43),o=e.get(47),r=e.get(46),a=e.get(45),l=e.get(59),d=e.get(56);return Ol._create(i,o,r,a,l,d,t,n)}static _create(e,t,n,i,o,r,a,l){o===0?o=NG*n:o<by&&(o=o*n),o=Math.round(o),o<by&&(o=by);const d=1+(l?0:Ua.getZoomLevel()*.1);return n*=d,o*=d,new Ol({pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,lineHeight:o,letterSpacing:r})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(e){const t=Ol._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}h(Ol,"BareFontInfo");const AG=1;class Gw extends Ol{constructor(e,t){super(e);this._editorStylingBrand=void 0,this.version=AG,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}h(Gw,"FontInfo");class XO extends z{constructor(){super();this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,this._cache=new aT,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new aT,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new Gw({pixelRatio:ff.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,i){const o=new YO(e,t);return n.push(o),i&&i.push(o),o}_actualReadFontInfo(e){const t=[],n=[],i=this._createRequest("n",0,t,n),o=this._createRequest("\uFF4D",0,t,null),r=this._createRequest(" ",0,t,n),a=this._createRequest("0",0,t,n),l=this._createRequest("1",0,t,n),d=this._createRequest("2",0,t,n),c=this._createRequest("3",0,t,n),u=this._createRequest("4",0,t,n),f=this._createRequest("5",0,t,n),g=this._createRequest("6",0,t,n),m=this._createRequest("7",0,t,n),b=this._createRequest("8",0,t,n),v=this._createRequest("9",0,t,n),C=this._createRequest("\u2192",0,t,n),w=this._createRequest("\uFFEB",0,t,null),y=this._createRequest("\xB7",0,t,n),S=this._createRequest(String.fromCharCode(11825),0,t,null),L="|/-_ilm%";for(let V=0,F=L.length;V<F;V++)this._createRequest(L.charAt(V),0,t,n),this._createRequest(L.charAt(V),1,t,n),this._createRequest(L.charAt(V),2,t,n);IG(e,t);const E=Math.max(a.width,l.width,d.width,c.width,u.width,f.width,g.width,m.width,b.width,v.width);let x=e.fontFeatureSettings===Yi.OFF;const k=n[0].width;for(let V=1,F=n.length;x&&V<F;V++){const G=k-n[V].width;if(G<-.001||G>.001){x=!1;break}}let N=!0;return x&&w.width!==k&&(N=!1),w.width>C.width&&(N=!1),new Gw({pixelRatio:ff.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:x,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:N,spaceWidth:r.width,middotWidth:y.width,wsmiddotWidth:S.width,maxDigitWidth:E},!0)}}h(XO,"FontMeasurementsImpl");class aT{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}h(aT,"FontMeasurementsCache");const lT=new XO;var Gs;(function(s){s.serviceIds=new Map,s.DI_TARGET="$di$target",s.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[s.DI_DEPENDENCIES]||[]}h(e,"getServiceDependencies"),s.getServiceDependencies=e})(Gs||(Gs={}));const Ge=Xe("instantiationService");function MG(s,e,t){e[Gs.DI_TARGET]===e?e[Gs.DI_DEPENDENCIES].push({id:s,index:t}):(e[Gs.DI_DEPENDENCIES]=[{id:s,index:t}],e[Gs.DI_TARGET]=e)}h(MG,"storeServiceDependency");function Xe(s){if(Gs.serviceIds.has(s))return Gs.serviceIds.get(s);const e=h(function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");MG(e,t,i)},"id");return e.toString=()=>s,Gs.serviceIds.set(s,e),e}h(Xe,"createDecorator");const ht=Xe("codeEditorService");function Vv(s,e){if(!s)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}h(Vv,"ok");const RG={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class ZO extends z{constructor(e,t={}){super();this._onDidUpdate=this._register(new P),this._editor=e,this._options=$r(t,RG,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new T(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new T(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new T(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>T.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1;const n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let i=0,o=this.ranges.length;i<o&&!t;i++){const r=this.ranges[i].range;n.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=i+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(Vv(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const i=n.range.getStartPosition();this._editor.setPosition(i),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}h(ZO,"DiffNavigator");const C_={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var Jo;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(Jo||(Jo={}));var $o;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})($o||($o={}));var Ar;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(Ar||(Ar={}));class Fp{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Go(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}h(Fp,"TextModelResolvedOptions");class gf{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}h(gf,"FindMatch");class Bv{constructor(e,t,n,i,o,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=o,this._isTracked=r}}h(Bv,"ValidAnnotatedEditOperation");class JO{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}h(JO,"SearchData");class QO{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}h(QO,"ApplyEditsResult");function PG(s){return!s.isTooLargeForSyncing()&&!s.isForSimpleWidget}h(PG,"shouldSynchronizeModel");var sn;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(sn||(sn={}));class Hv{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}h(Hv,"StandardAutoClosingPairConditional");class e4{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)jg(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),jg(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),jg(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),jg(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&jg(this.autoClosingPairsCloseSingleChar,t.close,t)}}h(e4,"AutoClosingPairs");function jg(s,e,t){s.has(e)?s.get(e).push(t):s.set(e,[t])}h(jg,"appendEntry");function $w(s,e){const t=s.getCount(),n=s.findTokenIndexAtOffset(e),i=s.getLanguageId(n);let o=n;for(;o+1<t&&s.getLanguageId(o+1)===i;)o++;let r=n;for(;r>0&&s.getLanguageId(r-1)===i;)r--;return new t4(s,i,r,o+1,s.getStartOffset(r),s.getEndOffset(o))}h($w,"createScopedLineTokens");class t4{constructor(e,t,n,i,o,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=o,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}h(t4,"ScopedLineTokens");function Cr(s){return(s&3)!==0}h(Cr,"ignoreBracketsInToken");class y_{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Hv(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Hv({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=nM(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=nM(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Hv({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:y_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}h(y_,"CharacterPairSupport");y_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function nM(s){return s.filter(([e,t])=>e!==""&&t!=="")}h(nM,"filterValidBrackets");const iM=typeof Buffer<"u";let vy;class S_{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return iM&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new S_(e)}toString(){return iM?this.buffer.toString():(vy||(vy=new TextDecoder),vy.decode(this.buffer))}}h(S_,"VSBuffer");function OG(s,e){return s[e+0]<<0>>>0|s[e+1]<<8>>>0}h(OG,"readUInt16LE");function FG(s,e,t){s[t+0]=e&255,e=e>>>8,s[t+1]=e&255}h(FG,"writeUInt16LE");function ks(s,e){return s[e]*Math.pow(2,24)+s[e+1]*Math.pow(2,16)+s[e+2]*Math.pow(2,8)+s[e+3]}h(ks,"readUInt32BE");function Es(s,e,t){s[t+3]=e,e=e>>>8,s[t+2]=e,e=e>>>8,s[t+1]=e,e=e>>>8,s[t]=e}h(Es,"writeUInt32BE");function oM(s,e){return s[e]}h(oM,"readUInt8");function sM(s,e,t){s[t]=e}h(sM,"writeUInt8");let wy;function n4(){return wy||(wy=new TextDecoder("UTF-16LE")),wy}h(n4,"getUTF16LE_TextDecoder");let Cy;function WG(){return Cy||(Cy=new TextDecoder("UTF-16BE")),Cy}h(WG,"getUTF16BE_TextDecoder");let yy;function i4(){return yy||(yy=NP()?n4():WG()),yy}h(i4,"getPlatformTextDecoder");const o4=typeof TextDecoder<"u";let Yc,dT;o4?(Yc=h(s=>new r4(s),"createStringBuilder"),dT=VG):(Yc=h(s=>new a4,"createStringBuilder"),dT=s4);function VG(s,e,t){const n=new Uint16Array(s.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?s4(s,e,t):n4().decode(n)}h(VG,"standardDecodeUTF16LE");function s4(s,e,t){const n=[];let i=0;for(let o=0;o<t;o++){const r=OG(s,e);e+=2,n[i++]=String.fromCharCode(r)}return n.join("")}h(s4,"compatDecodeUTF16LE");class r4{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return i4().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Cn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}h(r4,"StringBuilder");class a4{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}h(a4,"CompatStringBuilder");class fm{constructor(e,t,n,i,o,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=o,this.reversedRegex=r,this._openSet=fm._toSet(this.open),this._closeSet=fm._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}h(fm,"RichEditBracket");function BG(s){const e=s.length;s=s.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const n=h((r,a)=>{const[l,d]=r,[c,u]=a;return l===c||l===u||d===c||d===u},"areOverlapping"),i=h((r,a)=>{const l=Math.min(r,a),d=Math.max(r,a);for(let c=0;c<e;c++)t[c]===d&&(t[c]=l)},"mergeGroups");for(let r=0;r<e;r++){const a=s[r];for(let l=r+1;l<e;l++){const d=s[l];n(a,d)&&i(t[r],t[l])}}const o=[];for(let r=0;r<e;r++){const a=[],l=[];for(let d=0;d<e;d++)if(t[d]===r){const[c,u]=s[d];a.push(c),l.push(u)}a.length>0&&o.push({open:a,close:l})}return o}h(BG,"groupFuzzyBrackets");class l4{constructor(e,t){this._richEditBracketsBrand=void 0;const n=BG(t);this.brackets=n.map((i,o)=>new fm(e,o,i.open,i.close,HG(i.open,i.close,n,o),zG(i.open,i.close,n,o))),this.forwardRegex=KG(this.brackets),this.reversedRegex=UG(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const o of i.open)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of i.close)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}h(l4,"RichEditBrackets");function d4(s,e,t,n){for(let i=0,o=e.length;i<o;i++){if(i===t)continue;const r=e[i];for(const a of r.open)a.indexOf(s)>=0&&n.push(a);for(const a of r.close)a.indexOf(s)>=0&&n.push(a)}}h(d4,"collectSuperstrings");function c4(s,e){return s.length-e.length}h(c4,"lengthcmp");function _0(s){if(s.length<=1)return s;const e=[],t=new Set;for(const n of s)t.has(n)||(e.push(n),t.add(n));return e}h(_0,"unique");function HG(s,e,t,n){let i=[];i=i.concat(s),i=i.concat(e);for(let o=0,r=i.length;o<r;o++)d4(i[o],t,n,i);return i=_0(i),i.sort(c4),i.reverse(),b0(i)}h(HG,"getRegexForBracketPair");function zG(s,e,t,n){let i=[];i=i.concat(s),i=i.concat(e);for(let o=0,r=i.length;o<r;o++)d4(i[o],t,n,i);return i=_0(i),i.sort(c4),i.reverse(),b0(i.map(RD))}h(zG,"getReversedRegexForBracketPair");function KG(s){let e=[];for(const t of s){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=_0(e),b0(e)}h(KG,"getRegexForBrackets");function UG(s){let e=[];for(const t of s){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=_0(e),b0(e.map(RD))}h(UG,"getReversedRegexForBrackets");function jG(s){const e=/^[\w ]+$/.test(s);return s=Xo(s),e?`\\b${s}\\b`:s}h(jG,"prepareBracketForRegExp$1");function b0(s){const e=`(${s.map(jG).join(")|(")})`;return VO(e,!0)}h(b0,"createBracketOrRegExp");const RD=function(){function s(n){if(o4){const i=new Uint16Array(n.length);let o=0;for(let r=n.length-1;r>=0;r--)i[o++]=n.charCodeAt(r);return i4().decode(i)}else{const i=[];let o=0;for(let r=n.length-1;r>=0;r--)i[o++]=n.charAt(r);return i.join("")}}h(s,"reverse");let e=null,t=null;return h(function(i){return e!==i&&(e=i,t=s(e)),t},"toReversedString")}();class Oo{static _findPrevBracketInText(e,t,n,i){const o=n.match(e);if(!o)return null;const r=n.length-(o.index||0),a=o[0].length,l=i+r;return new T(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,o){const a=RD(n).substring(n.length-o,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){const o=n.match(e);if(!o)return null;const r=o.index||0,a=o[0].length;if(a===0)return null;const l=i+r;return new T(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,o){const r=n.substring(i,o);return this.findNextBracketInText(e,t,r,i)}}h(Oo,"BracketsUtils");class h4{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return Yl(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(Cr(t.getStandardTokenType(i)))return null;const o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,n-1)+e,a=Oo.findPrevBracketInRange(o,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const c=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(c)?{matchOpenBracket:l}:null}}h(h4,"BracketElectricCharacterSupport");function Hb(s){return s.global&&(s.lastIndex=0),!0}h(Hb,"resetGlobalRegex");class u4{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Hb(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Hb(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Hb(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Hb(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}h(u4,"IndentRulesSupport");class gc{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=gc._createOpenBracketRegExp(t[0]),i=gc._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let o=0,r=this._regExpRules.length;o<r;o++){const a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let o=0,r=this._brackets.length;o<r;o++){const a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:sn.IndentOutdent}}if(e>=2&&n.length>0){for(let o=0,r=this._brackets.length;o<r;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:sn.Indent}}return null}static _createOpenBracketRegExp(e){let t=Xo(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",gc._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Xo(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,gc._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ne(t),null}}}h(gc,"OnEnterSupport");const wt=Xe("configurationService");function f4(s,e){const t=Object.create(null);for(let n in s)PD(t,n,s[n],e);return t}h(f4,"toValuesTree");function PD(s,e,t,n){const i=e.split("."),o=i.pop();let r=s;for(let a=0;a<i.length;a++){let l=i[a],d=r[l];switch(typeof d){case"undefined":d=r[l]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(d)}`);return}r=d}if(typeof r=="object"&&r!==null)try{r[o]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}h(PD,"addToValueTree");function GG(s,e){const t=e.split(".");g4(s,t)}h(GG,"removeFromValueTree");function g4(s,e){const t=e.shift();if(e.length===0){delete s[t];return}if(Object.keys(s).indexOf(t)!==-1){const n=s[t];typeof n=="object"&&!Array.isArray(n)&&(g4(n,e),Object.keys(n).length===0&&delete s[t])}}h(g4,"doRemoveFromValueTree");function rM(s,e,t){function n(r,a){let l=r;for(const d of a){if(typeof l!="object"||l===null)return;l=l[d]}return l}h(n,"accessSetting");const i=e.split("."),o=n(s,i);return typeof o>"u"?t:o}h(rM,"getConfigurationValue");const Vt=Xe("languageService");class Ps{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}h(Ps,"SyncDescriptor");const p4=[];function it(s,e,t){e instanceof Ps||(e=new Ps(e,[],t)),p4.push([s,e])}h(it,"registerSingleton");function aM(){return p4}h(aM,"getSingletonServiceDescriptors");var $G=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},lM=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class zv{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}h(zv,"LanguageConfigurationServiceChangeEvent");const oi=Xe("languageConfigurationService");let cT=h(class extends z{constructor(e,t){super();this.configurationService=e,this.languageService=t,this.onDidChangeEmitter=this._register(new P),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(hT));this._register(this.configurationService.onDidChangeConfiguration(i=>{const o=i.change.keys.some(a=>n.has(a)),r=i.change.overrides.filter(([a,l])=>l.some(d=>n.has(d))).map(([a])=>a);if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new zv(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new zv(a)))})),this._register(fn.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new zv(i.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=qG(e,this.configurationService,this.languageService),this.configurations.set(e,t)),t}},"LanguageConfigurationService");cT=$G([lM(0,wt),lM(1,Vt)],cT);function qG(s,e,t){let n=fn.getLanguageConfiguration(s);if(!n){if(!t.isRegisteredLanguageId(s))throw new Error(`Language id "${s}" is not configured nor known`);n=new pf(s,{})}const i=YG(n.languageId,e),o=b4([n.underlyingConfig,i]);return new pf(n.languageId,o)}h(qG,"computeConfig");const hT={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function YG(s,e){const t=e.getValue(hT.brackets,{overrideIdentifier:s}),n=e.getValue(hT.colorizedBracketPairs,{overrideIdentifier:s});return{brackets:dM(t),colorizedBracketPairs:dM(n)}}h(YG,"getCustomizedLanguageConfig");function dM(s){if(!!Array.isArray(s))return s.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}h(dM,"validateBracketPairs");class uT{constructor(e){this.languageId=e}}h(uT,"LanguageConfigurationChangeEvent");class m4{constructor(){this._entries=new Map,this._onDidChange=new P,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let i=this._entries.get(e);i||(i=new _4(e),this._entries.set(e,i));const o=i.register(t,n);return this._onDidChange.fire(new uT(e)),He(()=>{o.dispose(),this._onDidChange.fire(new uT(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}getComments(e){const t=this.getLanguageConfiguration(e);return t&&t.comments||null}getIndentRulesSupport(e){const t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){const i=e.getLanguageIdAtPosition(t,0);if(t>1){let o,r=-1;for(o=t-1;o>=1;o--){if(e.getLanguageIdAtPosition(o,0)!==i)return r;const a=e.getLineContent(o);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){r=o;continue}return o}}return-1}getInheritIndentForLine(e,t,n,i=!0){if(e<4)return null;const o=this.getIndentRulesSupport(t.getLanguageId());if(!o)return null;if(n<=1)return{indentation:"",action:null};const r=this.getPrecedingValidLine(t,n,o);if(r<0)return null;if(r<1)return{indentation:"",action:null};const a=t.getLineContent(r);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:pt(a),action:sn.Indent,line:r};if(o.shouldDecrease(a))return{indentation:pt(a),action:null,line:r};{if(r===1)return{indentation:pt(t.getLineContent(r)),action:null,line:r};const l=r-1,d=o.getIndentMetadata(t.getLineContent(l));if(!(d&3)&&d&4){let c=0;for(let u=l-1;u>0;u--)if(!o.shouldIndentNextLine(t.getLineContent(u))){c=u;break}return{indentation:pt(t.getLineContent(c+1)),action:null,line:c+1}}if(i)return{indentation:pt(t.getLineContent(r)),action:null,line:r};for(let c=r;c>0;c--){const u=t.getLineContent(c);if(o.shouldIncrease(u))return{indentation:pt(u),action:sn.Indent,line:c};if(o.shouldIndentNextLine(u)){let f=0;for(let g=c-1;g>0;g--)if(!o.shouldIndentNextLine(t.getLineContent(c))){f=g;break}return{indentation:pt(t.getLineContent(f+1)),action:null,line:f+1}}else if(o.shouldDecrease(u))return{indentation:pt(u),action:null,line:c}}return{indentation:pt(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,i,o){if(e<4)return null;const r=this.getLanguageConfiguration(n);if(!r)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const l=this.getInheritIndentForLine(e,t,i),d=t.getLineContent(i);if(l){const c=l.line;if(c!==void 0){const u=r.onEnter(e,"",t.getLineContent(c),"");if(u){let f=pt(t.getLineContent(c));return u.removeText&&(f=f.substring(0,f.length-u.removeText)),u.indentAction===sn.Indent||u.indentAction===sn.IndentOutdent?f=o.shiftIndent(f):u.indentAction===sn.Outdent&&(f=o.unshiftIndent(f)),a.shouldDecrease(d)&&(f=o.unshiftIndent(f)),u.appendText&&(f+=u.appendText),pt(f)}}return a.shouldDecrease(d)?l.action===sn.Indent?l.indentation:o.unshiftIndent(l.indentation):l.action===sn.Indent?o.shiftIndent(l.indentation):l.indentation}return null}getIndentForEnter(e,t,n,i){if(e<4)return null;t.forceTokenization(n.startLineNumber);const o=t.getLineTokens(n.startLineNumber),r=$w(o,n.startColumn-1),a=r.getLineContent();let l=!1,d;r.firstCharOffset>0&&o.getLanguageId(0)!==r.languageId?(l=!0,d=a.substr(0,n.startColumn-1-r.firstCharOffset)):d=o.getLineContent().substring(0,n.startColumn-1);let c;n.isEmpty()?c=a.substr(n.startColumn-1-r.firstCharOffset):c=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-r.firstCharOffset);const u=this.getIndentRulesSupport(r.languageId);if(!u)return null;const f=d,g=pt(d),m={getLineTokens:w=>t.getLineTokens(w),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(w,y)=>t.getLanguageIdAtPosition(w,y),getLineContent:w=>w===n.startLineNumber?f:t.getLineContent(w)},b=pt(o.getLineContent()),v=this.getInheritIndentForLine(e,m,n.startLineNumber+1);if(!v){const w=l?b:g;return{beforeEnter:w,afterEnter:w}}let C=l?b:v.indentation;return v.action===sn.Indent&&(C=i.shiftIndent(C)),u.shouldDecrease(c)&&(C=i.unshiftIndent(C)),{beforeEnter:l?b:g,afterEnter:C}}getIndentActionForType(e,t,n,i,o){if(e<4)return null;const r=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(r.firstCharOffset)return null;const a=this.getIndentRulesSupport(r.languageId);if(!a)return null;const l=r.getLineContent(),d=l.substr(0,n.startColumn-1-r.firstCharOffset);let c;if(n.isEmpty()?c=l.substr(n.startColumn-1-r.firstCharOffset):c=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-r.firstCharOffset),!a.shouldDecrease(d+c)&&a.shouldDecrease(d+i+c)){const u=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!u)return null;let f=u.indentation;return u.action!==sn.Indent&&(f=o.unshiftIndent(f)),f}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const i=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),o=this.getLanguageConfiguration(i.languageId);if(!o)return null;const r=i.getLineContent(),a=r.substr(0,n.startColumn-1-i.firstCharOffset);let l;n.isEmpty()?l=r.substr(n.startColumn-1-i.firstCharOffset):l=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-i.firstCharOffset);let d="";if(n.startLineNumber>1&&i.firstCharOffset===0){const b=this.getScopedLineTokens(t,n.startLineNumber-1);b.languageId===i.languageId&&(d=b.getLineContent())}const c=o.onEnter(e,d,a,l);if(!c)return null;const u=c.indentAction;let f=c.appendText;const g=c.removeText||0;f?u===sn.Indent&&(f="	"+f):u===sn.Indent||u===sn.IndentOutdent?f="	":f="";let m=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return g&&(m=m.substring(0,m.length-g)),{indentAction:u,appendText:f,removeText:g,indentation:m}}getIndentationAtPosition(e,t,n){const i=e.getLineContent(t);let o=pt(i);return o.length>n-1&&(o=o.substring(0,n-1)),o}getScopedLineTokens(e,t,n){e.forceTokenization(t);const i=e.getLineTokens(t),o=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return $w(i,o)}}h(m4,"LanguageConfigurationRegistryImpl");const fn=new m4;class _4{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new fT(e,t,++this._order);return this._entries.push(n),this._resolved=null,He(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new pf(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(fT.cmp),b4(this._entries.map(e=>e.configuration)))}}h(_4,"ComposedLanguageConfiguration");function b4(s){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of s)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}h(b4,"combineLanguageConfigurations");class fT{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}h(fT,"LanguageConfigurationContribution");class pf{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new gc(this.underlyingConfig):null,this.comments=pf._handleComments(this.underlyingConfig),this.characterPair=new y_(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||dD,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new u4(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return RP(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new l4(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new h4(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new e4(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[i,o]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=o}return n}}h(pf,"ResolvedLanguageConfiguration");it(oi,cT);const mf=new class{clone(){return this}equals(s){return this===s}};function v4(s,e){return new u0([new hf(0,"",s)],e)}h(v4,"nullTokenize");function OD(s,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(s<<0|0<<8|0<<10|1<<14|2<<23)>>>0,new v_(t,e===null?mf:e)}h(OD,"nullTokenizeEncoded");const Bt=Xe("modelService");var Fo=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},gp=globalThis&&globalThis.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=s[o]&&function(r){return new Promise(function(a,l){r=s[o](r),i(a,l,r.done,r.value)})}}function i(o,r,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},r)}};function XG(s){return!!s&&typeof s.then=="function"}h(XG,"isThenable$1");function Hn(s){const e=new Bn,t=s(e.token),n=new Promise((i,o)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),o(new Dd)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),i(a)},a=>{r.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}h(Hn,"createCancelablePromise");function FD(s,e,t){return new Promise((n,i)=>{const o=e.onCancellationRequested(()=>{o.dispose(),n(t)});s.then(n,i).finally(()=>o.dispose())})}h(FD,"raceCancellation");class w4{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=h(()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n},"onComplete");this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}}h(w4,"Throttler");const ZG=h((s,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},s);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},"timeoutDeferred"),JG=h(s=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,s())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},"microtaskDeferred"),C4=Symbol("MicrotaskDelay");class nr{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,o)=>{this.doResolve=i,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}}));const n=h(()=>{var i;this.deferred=null,(i=this.doResolve)===null||i===void 0||i.call(this,null)},"fn");return this.deferred=t===C4?JG(n):ZG(t,n),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new Dd),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}h(nr,"Delayer");class y4{constructor(e){this.delayer=new nr(e),this.throttler=new w4}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}h(y4,"ThrottledDelayer");function Zl(s,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{o.dispose(),t()},s),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new Dd)})}):Hn(t=>Zl(s,t))}h(Zl,"timeout");function Xc(s,e=0){const t=setTimeout(s,e);return He(()=>clearTimeout(t))}h(Xc,"disposableTimeout");function S4(s,e=n=>!!n,t=null){let n=0;const i=s.length,o=h(()=>{if(n>=i)return Promise.resolve(t);const r=s[n++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):o())},"loop");return o()}h(S4,"first");class Ki{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}h(Ki,"TimeoutTimer");class mg{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}h(mg,"IntervalTimer");class gt{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}h(gt,"RunOnceScheduler");let gm;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?gm=h(s=>{IP(()=>{if(e)return;const t=Date.now()+15;s(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}},"runWhenIdle"):gm=h((s,e)=>{const t=requestIdleCallback(s,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}},"runWhenIdle")})();class Ra{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=gm(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}h(Ra,"IdleValue");class v0{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(new Dd),this.rejected=!0,e()})}}h(v0,"DeferredPromise");var gT;(function(s){function e(n){return Fo(this,void 0,void 0,function*(){let i;const o=yield Promise.all(n.map(r=>r.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o})}h(e,"settled"),s.settled=e;function t(n){return new Promise((i,o)=>Fo(this,void 0,void 0,function*(){try{yield n(i,o)}catch(r){o(r)}}))}h(t,"withAsyncBody"),s.withAsyncBody=t})(gT||(gT={}));class Qt{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new P,queueMicrotask(()=>Fo(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new Qt(t=>{t.emitMany(e)})}static fromPromise(e){return new Qt(t=>Fo(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Qt(t=>Fo(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>Fo(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Qt(t=>Fo(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var i,o;return Fo(this,void 0,void 0,function*(){var r,a;try{for(i=gp(n);o=yield i.next(),!o.done;){const l=o.value;t.emitOne(l)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(a=i.return)&&(yield a.call(i))}finally{if(r)throw r.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>Fo(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield fe.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Qt(n=>Fo(this,void 0,void 0,function*(){var i,o;try{for(var r=gp(e),a;a=yield r.next(),!a.done;){const l=a.value;n.emitOne(t(l))}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=r.return)&&(yield o.call(r))}finally{if(i)throw i.error}}}))}map(e){return Qt.map(this,e)}static filter(e,t){return new Qt(n=>Fo(this,void 0,void 0,function*(){var i,o;try{for(var r=gp(e),a;a=yield r.next(),!a.done;){const l=a.value;t(l)&&n.emitOne(l)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=r.return)&&(yield o.call(r))}finally{if(i)throw i.error}}}))}filter(e){return Qt.filter(this,e)}static coalesce(e){return Qt.filter(e,t=>!!t)}coalesce(){return Qt.coalesce(this)}static toPromise(e){var t,n,i,o;return Fo(this,void 0,void 0,function*(){const r=[];try{for(t=gp(e);n=yield t.next(),!n.done;){const a=n.value;r.push(a)}}catch(a){i={error:a}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}return r})}toPromise(){return Qt.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}h(Qt,"AsyncIterableObject");Qt.EMPTY=Qt.fromArray([]);class x4 extends Qt{constructor(e,t){super(t);this._source=e}cancel(){this._source.cancel()}}h(x4,"CancelableAsyncIterableObject");function QG(s){const e=new Bn,t=s(e.token);return new x4(e,n=>Fo(this,void 0,void 0,function*(){var i,o;const r=e.token.onCancellationRequested(()=>{r.dispose(),e.dispose(),n.reject(new Dd)});try{try{for(var a=gp(t),l;l=yield a.next(),!l.done;){const d=l.value;if(e.token.isCancellationRequested)return;n.emitOne(d)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=a.return)&&(yield o.call(a))}finally{if(i)throw i.error}}r.dispose(),e.dispose()}catch(d){r.dispose(),e.dispose(),n.reject(d)}}))}h(QG,"createCancelableAsyncIterable");const e$="$initialize";let cM=!1;function pT(s){!kd||(cM||(cM=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(s.message))}h(pT,"logOnceWebWorkerWarning");class T4{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}}h(T4,"RequestMessage");class mT{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}h(mT,"ReplyMessage");class L4{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}}h(L4,"SubscribeEventMessage");class k4{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}h(k4,"EventMessage");class E4{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}h(E4,"UnsubscribeEventMessage");class D4{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((i,o)=>{this._pendingReplies[n]={resolve:i,reject:o},this._send(new T4(this._workerId,n,e,t))})}listen(e,t){let n=null;const i=new P({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new L4(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new E4(this._workerId,n)),n=null}});return i.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(i=>{this._send(new mT(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=ZA(i.detail)),this._send(new mT(this._workerId,t,void 0,ZA(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(i=>{this._send(new k4(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}h(D4,"SimpleWorkerProtocol");class I4 extends z{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{i&&i(d)})),this._protocol=new D4({sendMessage:(d,c)=>{this._worker.postMessage(d,c)},handleMessage:(d,c)=>{if(typeof n[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(n[d].apply(n,c))}catch(u){return Promise.reject(u)}},handleEvent:(d,c)=>{if(A4(d)){const u=n[d].call(n,c);if(typeof u!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return u}if(N4(d)){const u=n[d];if(typeof u!="function")throw new Error(`Missing event ${d} on main thread host.`);return u}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null;typeof tn.require<"u"&&typeof tn.require.getConfig=="function"?o=tn.require.getConfig():typeof tn.requirejs<"u"&&(o=tn.requirejs.s.contexts._.config);const r=fD(n);this._onModuleLoaded=this._protocol.sendMessage(e$,[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,r]);const a=h((d,c)=>this._request(d,c),"proxyMethodRequest"),l=h((d,c)=>this._protocol.listen(d,c),"proxyListen");this._lazyProxy=new Promise((d,c)=>{i=c,this._onModuleLoaded.then(u=>{d(t$(u,a,l))},u=>{c(u),this._onError("Worker failed to load "+t,u)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,i)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,i)},i)})}_onError(e,t){console.error(e),console.info(t)}}h(I4,"SimpleWorkerClient");function N4(s){return s[0]==="o"&&s[1]==="n"&&Lr(s.charCodeAt(2))}h(N4,"propertyIsEvent");function A4(s){return/^onDynamic/.test(s)&&Lr(s.charCodeAt(9))}h(A4,"propertyIsDynamicEvent");function t$(s,e,t){const n=h(r=>function(){const a=Array.prototype.slice.call(arguments,0);return e(r,a)},"createProxyMethod"),i=h(r=>function(a){return t(r,a)},"createProxyDynamicEvent");let o={};for(const r of s){if(A4(r)){o[r]=i(r);continue}if(N4(r)){o[r]=t(r,void 0);continue}o[r]=n(r)}return o}h(t$,"createProxyObject");var Sy;const hM=(Sy=window.trustedTypes)===null||Sy===void 0?void 0:Sy.createPolicy("defaultWorkerFactory",{createScriptURL:s=>s});function n$(s){if(tn.MonacoEnvironment){if(typeof tn.MonacoEnvironment.getWorker=="function")return tn.MonacoEnvironment.getWorker("workerMain.js",s);if(typeof tn.MonacoEnvironment.getWorkerUrl=="function"){const e=tn.MonacoEnvironment.getWorkerUrl("workerMain.js",s);return new Worker(hM?hM.createScriptURL(e):e,{name:s})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}h(n$,"getWorker");function i$(s){return typeof s.then=="function"}h(i$,"isPromiseLike");class M4{constructor(e,t,n,i,o){this.id=t;const r=n$(n);i$(r)?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(l){i(l.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}h(M4,"WebWorker");class x_{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let i=++x_.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new M4(e,i,this._label||"anonymous"+i,t,o=>{pT(o),this._webWorkerFailedBeforeError=o,n(o)})}}h(x_,"DefaultWorkerFactory");x_.LAST_WORKER_ID=0;class ha{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}h(ha,"DiffChange");function R4(s){return w0(s,0)}h(R4,"hash");function w0(s,e){switch(typeof s){case"object":return s===null?Da(349,e):Array.isArray(s)?s$(s,e):r$(s,e);case"string":return WD(s,e);case"boolean":return o$(s,e);case"number":return Da(s,e);case"undefined":return Da(937,e);default:return Da(617,e)}}h(w0,"doHash");function Da(s,e){return(e<<5)-e+s|0}h(Da,"numberHash");function o$(s,e){return Da(s?433:863,e)}h(o$,"booleanHash");function WD(s,e){e=Da(149417,e);for(let t=0,n=s.length;t<n;t++)e=Da(s.charCodeAt(t),e);return e}h(WD,"stringHash");function s$(s,e){return e=Da(104579,e),s.reduce((t,n)=>w0(n,t),e)}h(s$,"arrayHash");function r$(s,e){return e=Da(181387,e),Object.keys(s).sort().reduce((t,n)=>(t=WD(n,t),w0(s[n],t)),e)}h(r$,"objectHash");function xy(s,e,t=32){const n=t-e,i=~((1<<n)-1);return(s<<e|(i&s)>>>n)>>>0}h(xy,"leftRotate$2");function uM(s,e=0,t=s.byteLength,n=0){for(let i=0;i<t;i++)s[e+i]=n}h(uM,"fill");function a$(s,e,t="0"){for(;s.length<e;)s=t+s;return s}h(a$,"leftPad");function Gg(s,e=32){return s instanceof ArrayBuffer?Array.from(new Uint8Array(s)).map(t=>t.toString(16).padStart(2,"0")).join(""):a$((s>>>0).toString(16),e/4)}h(Gg,"toHexString");class T_{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,o=this._leftoverHighSurrogate,r,a;for(o!==0?(r=o,a=-1,o=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(Cn(r))if(a+1<t){const d=e.charCodeAt(a+1);qc(d)?(a++,l=LD(r,d)):l=65533}else{o=r;break}else qc(r)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Gg(this._h0)+Gg(this._h1)+Gg(this._h2)+Gg(this._h3)+Gg(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,uM(this._buff,this._buffLen),this._buffLen>56&&(this._step(),uM(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=T_._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,xy(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n=this._h0,i=this._h1,o=this._h2,r=this._h3,a=this._h4,l,d,c;for(let u=0;u<80;u++)u<20?(l=i&o|~i&r,d=1518500249):u<40?(l=i^o^r,d=1859775393):u<60?(l=i&o|i&r|o&r,d=2400959708):(l=i^o^r,d=3395469782),c=xy(n,5)+l+a+d+e.getUint32(u*4,!1)&4294967295,a=r,r=o,o=xy(i,30),i=n,n=c;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}}h(T_,"StringSHA1");T_._bigBlock32=new DataView(new ArrayBuffer(320));class _T{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}h(_T,"StringDiffSequence");function l$(s,e,t){return new Bs(new _T(s),new _T(e)).ComputeDiff(t).changes}h(l$,"stringDiff");class $d{static Assert(e,t){if(!e)throw new Error(t)}}h($d,"Debug");class qd{static Copy(e,t,n,i,o){for(let r=0;r<o;r++)n[i+r]=e[t+r]}static Copy2(e,t,n,i,o){for(let r=0;r<o;r++)n[i+r]=e[t+r]}}h(qd,"MyArray");class bT{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ha(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}h(bT,"DiffChangeHelper");class Bs{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,o,r]=Bs._getElements(e),[a,l,d]=Bs._getElements(t);this._hasStrings=r&&d,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Bs._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=WD(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Bs._getStrictElement(this._originalSequence,e),i=Bs._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,o){const r=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,r);return o&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,n,i,o){for(o[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let u;return n<=i?($d.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new ha(e,0,n,i-n+1)]):e<=t?($d.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[new ha(e,t-e+1,n,0)]):($d.Assert(e===t+1,"originalStart should only be one more than originalEnd"),$d.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,r,a,o),d=r[0],c=a[0];if(l!==null)return l;if(!o[0]){const u=this.ComputeDiffRecursive(e,d,n,c,o);let f=[];return o[0]?f=[new ha(d+1,t-(d+1)+1,c+1,i-(c+1)+1)]:f=this.ComputeDiffRecursive(d+1,t,c+1,i,o),this.ConcatenateChanges(u,f)}return[new ha(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,o,r,a,l,d,c,u,f,g,m,b,v,C,w){let y=null,S=null,L=new bT,E=t,x=n,k=g[0]-v[0]-i,N=-1073741824,V=this.m_forwardHistory.length-1;do{const F=k+e;F===E||F<x&&d[F-1]<d[F+1]?(u=d[F+1],m=u-k-i,u<N&&L.MarkNextChange(),N=u,L.AddModifiedElement(u+1,m),k=F+1-e):(u=d[F-1]+1,m=u-k-i,u<N&&L.MarkNextChange(),N=u-1,L.AddOriginalElement(u,m+1),k=F-1-e),V>=0&&(d=this.m_forwardHistory[V],e=d[0],E=1,x=d.length-1)}while(--V>=-1);if(y=L.getReverseChanges(),w[0]){let F=g[0]+1,G=v[0]+1;if(y!==null&&y.length>0){const $=y[y.length-1];F=Math.max(F,$.getOriginalEnd()),G=Math.max(G,$.getModifiedEnd())}S=[new ha(F,f-F+1,G,b-G+1)]}else{L=new bT,E=r,x=a,k=g[0]-v[0]-l,N=1073741824,V=C?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const F=k+o;F===E||F<x&&c[F-1]>=c[F+1]?(u=c[F+1]-1,m=u-k-l,u>N&&L.MarkNextChange(),N=u+1,L.AddOriginalElement(u+1,m+1),k=F+1-o):(u=c[F-1],m=u-k-l,u>N&&L.MarkNextChange(),N=u,L.AddModifiedElement(u+1,m+1),k=F-1-o),V>=0&&(c=this.m_reverseHistory[V],o=c[0],E=1,x=c.length-1)}while(--V>=-1);S=L.getChanges()}return this.ConcatenateChanges(y,S)}ComputeRecursionPoint(e,t,n,i,o,r,a){let l=0,d=0,c=0,u=0,f=0,g=0;e--,n--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const m=t-e+(i-n),b=m+1,v=new Int32Array(b),C=new Int32Array(b),w=i-n,y=t-e,S=e-n,L=t-i,x=(y-w)%2===0;v[w]=e,C[y]=t,a[0]=!1;for(let k=1;k<=m/2+1;k++){let N=0,V=0;c=this.ClipDiagonalBound(w-k,k,w,b),u=this.ClipDiagonalBound(w+k,k,w,b);for(let G=c;G<=u;G+=2){G===c||G<u&&v[G-1]<v[G+1]?l=v[G+1]:l=v[G-1]+1,d=l-(G-w)-S;const $=l;for(;l<t&&d<i&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(v[G]=l,l+d>N+V&&(N=l,V=d),!x&&Math.abs(G-y)<=k-1&&l>=C[G])return o[0]=l,r[0]=d,$<=C[G]&&1447>0&&k<=1447+1?this.WALKTRACE(w,c,u,S,y,f,g,L,v,C,l,t,o,d,i,r,x,a):null}const F=(N-e+(V-n)-k)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(N,F))return a[0]=!0,o[0]=N,r[0]=V,F>0&&1447>0&&k<=1447+1?this.WALKTRACE(w,c,u,S,y,f,g,L,v,C,l,t,o,d,i,r,x,a):(e++,n++,[new ha(e,t-e+1,n,i-n+1)]);f=this.ClipDiagonalBound(y-k,k,y,b),g=this.ClipDiagonalBound(y+k,k,y,b);for(let G=f;G<=g;G+=2){G===f||G<g&&C[G-1]>=C[G+1]?l=C[G+1]-1:l=C[G-1],d=l-(G-y)-L;const $=l;for(;l>e&&d>n&&this.ElementsAreEqual(l,d);)l--,d--;if(C[G]=l,x&&Math.abs(G-w)<=k&&l<=v[G])return o[0]=l,r[0]=d,$>=v[G]&&1447>0&&k<=1447+1?this.WALKTRACE(w,c,u,S,y,f,g,L,v,C,l,t,o,d,i,r,x,a):null}if(k<=1447){let G=new Int32Array(u-c+2);G[0]=w-c+1,qd.Copy2(v,c,G,1,u-c+1),this.m_forwardHistory.push(G),G=new Int32Array(g-f+2),G[0]=y-f+1,qd.Copy2(C,f,G,1,g-f+1),this.m_reverseHistory.push(G)}}return this.WALKTRACE(w,c,u,S,y,f,g,L,v,C,l,t,o,d,i,r,x,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,o=0;if(t>0){const u=e[t-1];i=u.originalStart+u.originalLength,o=u.modifiedStart+u.modifiedLength}const r=n.originalLength>0,a=n.modifiedLength>0;let l=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let u=1;;u++){const f=n.originalStart-u,g=n.modifiedStart-u;if(f<i||g<o||r&&!this.OriginalElementsAreEqual(f,f+n.originalLength)||a&&!this.ModifiedElementsAreEqual(g,g+n.modifiedLength))break;const b=(f===i&&g===o?5:0)+this._boundaryScore(f,n.originalLength,g,n.modifiedLength);b>d&&(d=b,l=u)}n.originalStart-=l,n.modifiedStart-=l;const c=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],c)){e[t-1]=c[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],o=e[t],r=o.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=o.originalStart+o.originalLength,d=l-a,c=i.modifiedStart,u=o.modifiedStart+o.modifiedLength,f=u-c;if(r<5&&d<20&&f<20){const g=this._findBetterContiguousSequence(a,d,c,f,r);if(g){const[m,b]=g;(m!==i.originalStart+i.originalLength||b!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=m-i.originalStart,i.modifiedLength=b-i.modifiedStart,o.originalStart=m+r,o.modifiedStart=b+r,o.originalLength=l-o.originalStart,o.modifiedLength=u-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,o){if(t<o||i<o)return null;const r=e+t-o+1,a=n+i-o+1;let l=0,d=0,c=0;for(let u=e;u<r;u++)for(let f=n;f<a;f++){const g=this._contiguousSequenceScore(u,f,o);g>0&&g>l&&(l=g,d=u,c=f)}return l>0?[d,c]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(n,i)?1:0;return o+r}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return qd.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],qd.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return qd.Copy(e,0,i,0,e.length),qd.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if($d.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),$d.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let o=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new ha(i,o,r,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const o=n,r=i-n-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?i-1:i-2}}}h(Bs,"LcsDiff");const d$=3;function P4(s,e,t,n){return new Bs(s,e,t).ComputeDiff(n)}h(P4,"computeDiff");class vT{constructor(e){const t=[],n=[];for(let i=0,o=e.length;i<o;i++)t[i]=wT(e[i],1),n[i]=CT(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],o=[],r=[];let a=0;for(let l=t;l<=n;l++){const d=this.lines[l],c=e?this._startColumns[l]:1,u=e?this._endColumns[l]:d.length+1;for(let f=c;f<u;f++)i[a]=d.charCodeAt(f-1),o[a]=l+1,r[a]=f,a++}return new O4(i,o,r)}}h(vT,"LineSequence");class O4{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}h(O4,"CharSequence");class _f{constructor(e,t,n,i,o,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){let i,o,r,a,l,d,c,u;return e.originalLength===0?(i=0,o=0,r=0,a=0):(i=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(l=0,d=0,c=0,u=0):(l=n.getStartLineNumber(e.modifiedStart),d=n.getStartColumn(e.modifiedStart),c=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new _f(i,o,r,a,l,d,c,u)}}h(_f,"CharChange");function c$(s){if(s.length<=1)return s;const e=[s[0]];let t=e[0];for(let n=1,i=s.length;n<i;n++){const o=s[n],r=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<d$?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}h(c$,"postProcessCharChanges");class Hu{constructor(e,t,n,i,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=o}static createFromDiffResult(e,t,n,i,o,r,a){let l,d,c,u,f;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,d=0):(l=n.getStartLineNumber(t.originalStart),d=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(c=i.getStartLineNumber(t.modifiedStart)-1,u=0):(c=i.getStartLineNumber(t.modifiedStart),u=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const g=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),m=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let b=P4(g,m,o,!0).changes;a&&(b=c$(b)),f=[];for(let v=0,C=b.length;v<C;v++)f.push(_f.createFromDiffChange(b[v],g,m))}return new Hu(l,d,c,u,f)}}h(Hu,"LineChange");class F4{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new vT(e),this.modified=new vT(t),this.continueLineDiff=fM(n.maxComputationTime),this.continueCharDiff=fM(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=P4(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,d=t.length;l<d;l++)a.push(Hu.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let o=0,r=0;for(let a=-1,l=t.length;a<l;a++){const d=a+1<l?t[a+1]:null,c=d?d.originalStart:this.originalLines.length,u=d?d.modifiedStart:this.modifiedLines.length;for(;o<c&&r<u;){const f=this.originalLines[o],g=this.modifiedLines[r];if(f!==g){{let m=wT(f,1),b=wT(g,1);for(;m>1&&b>1;){const v=f.charCodeAt(m-2),C=g.charCodeAt(b-2);if(v!==C)break;m--,b--}(m>1||b>1)&&this._pushTrimWhitespaceCharChange(i,o+1,1,m,r+1,1,b)}{let m=CT(f,1),b=CT(g,1);const v=f.length+1,C=g.length+1;for(;m<v&&b<C;){const w=f.charCodeAt(m-1),y=f.charCodeAt(b-1);if(w!==y)break;m++,b++}(m<v||b<C)&&this._pushTrimWhitespaceCharChange(i,o+1,m,v,r+1,b,C)}}o++,r++}d&&(i.push(Hu.createFromDiffResult(this.shouldIgnoreTrimWhitespace,d,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=d.originalLength,r+=d.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,o,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,o,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new _f(t,n,t,i,o,r,o,a)]),e.push(new Hu(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,o,r,a){const l=e.length;if(l===0)return!1;const d=e[l-1];return d.originalEndLineNumber===0||d.modifiedEndLineNumber===0?!1:d.originalEndLineNumber+1===t&&d.modifiedEndLineNumber+1===o?(d.originalEndLineNumber=t,d.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new _f(t,n,t,i,o,r,o,a)),!0):!1}}h(F4,"DiffComputer");function wT(s,e){const t=bi(s);return t===-1?e:t+1}h(wT,"getFirstNonBlankColumn");function CT(s,e){const t=Fr(s);return t===-1?e:t+2}h(CT,"getLastNonBlankColumn");function fM(s){if(s===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<s}h(fM,"createContinueProcessingPredicate");function qw(s){return s<0?0:s>255?255:s|0}h(qw,"toUint8");function lu(s){return s<0?0:s>4294967295?4294967295:s|0}h(lu,"toUint32");class W4{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=lu(e);const n=this.values,i=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=lu(e),t=lu(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=lu(e),t=lu(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const o=n.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=lu(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,o=0,r=0;for(;t<=n;)if(i=t+(n-t)/2|0,o=this.prefixSum[i],r=o-this.values[i],e<r)n=i-1;else if(e>=o)t=i+1;else break;return new VD(i,e-r)}}h(W4,"PrefixSumComputer");class V4{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new VD(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=a0(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let o=0;o<n;o++)this._indexBySum[i+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}h(V4,"ConstantTimePrefixSumComputer");class VD{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}h(VD,"PrefixSumIndexOfResult");class B4{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new W(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new W4(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=zr(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.lineNumber+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}h(B4,"MirrorTextModel");class Oh{constructor(e){const t=qw(e);this._defaultValue=t,this._asciiMap=Oh._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){const n=qw(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}h(Oh,"CharacterClassifier");class pc{constructor(){this._actual=new Oh(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}h(pc,"CharacterSet");class H4{constructor(e,t,n){const i=new Uint8Array(e*t);for(let o=0,r=e*t;o<r;o++)i[o]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}h(H4,"Uint8Matrix");class z4{constructor(e){let t=0,n=0;for(let o=0,r=e.length;o<r;o++){const[a,l,d]=e[o];l>t&&(t=l),a>n&&(n=a),d>n&&(n=d)}t++,n++;const i=new H4(n,t,0);for(let o=0,r=e.length;o<r;o++){const[a,l,d]=e[o];i.set(a,l,d)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}h(z4,"StateMachine");let Ty=null;function h$(){return Ty===null&&(Ty=new z4([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Ty}h(h$,"getStateMachine");let $g=null;function u$(){if($g===null){$g=new Oh(0);const s=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let t=0;t<s.length;t++)$g.set(s.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)$g.set(e.charCodeAt(t),2)}return $g}h(u$,"getClassifier");class pm{static _createLink(e,t,n,i,o){let r=o-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:r+2},url:t.substring(i,r+1)}}static computeLinks(e,t=h$()){const n=u$(),i=[];for(let o=1,r=e.getLineCount();o<=r;o++){const a=e.getLineContent(o),l=a.length;let d=0,c=0,u=0,f=1,g=!1,m=!1,b=!1,v=!1;for(;d<l;){let C=!1;const w=a.charCodeAt(d);if(f===13){let y;switch(w){case 40:g=!0,y=0;break;case 41:y=g?0:1;break;case 91:b=!0,m=!0,y=0;break;case 93:b=!1,y=m?0:1;break;case 123:v=!0,y=0;break;case 125:y=v?0:1;break;case 39:y=u===34||u===96?0:1;break;case 34:y=u===39||u===96?0:1;break;case 96:y=u===39||u===34?0:1;break;case 42:y=u===42?1:0;break;case 124:y=u===124?1:0;break;case 32:y=b?0:1;break;default:y=n.get(w)}y===1&&(i.push(pm._createLink(n,a,o,c,d)),C=!0)}else if(f===12){let y;w===91?(m=!0,y=0):y=n.get(w),y===1?C=!0:f=13}else f=t.nextState(f,w),f===0&&(C=!0);C&&(f=1,g=!1,m=!1,v=!1,c=d+1,u=w),d++}f===13&&i.push(pm._createLink(n,a,o,c,l))}return i}}h(pm,"LinkComputer");function f$(s){return!s||typeof s.getLineCount!="function"||typeof s.getLineContent!="function"?[]:pm.computeLinks(s)}h(f$,"computeLinks");class Yw{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,o){if(e&&t){const r=this.doNavigateValueSet(t,o);if(r)return{range:e,value:r}}if(n&&i){const r=this.doNavigateValueSet(i,o);if(r)return{range:n,value:r}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let i=Number(e),o=parseFloat(e);return!isNaN(i)&&!isNaN(o)&&i===o?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let o=0,r=e.length;i===null&&o<r;o++)i=this.valueSetReplace(e[o],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}h(Yw,"BasicInplaceReplace");Yw.INSTANCE=new Yw;class K4 extends Oh{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}h(K4,"WordCharacterClassifier");function g$(s){const e={};return t=>(e.hasOwnProperty(t)||(e[t]=s(t)),e[t])}h(g$,"once");const Qo=g$(s=>new K4(s)),p$=999;class wl{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=m$(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=VO(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new JO(t,this.wordSeparators?Qo(this.wordSeparators):null,n?this.searchString:null)}}h(wl,"SearchParams");function m$(s){if(!s||s.length===0)return!1;for(let e=0,t=s.length;e<t;e++)if(s.charCodeAt(e)===92){if(e++,e>=t)break;const i=s.charCodeAt(e);if(i===110||i===114||i===87)return!0}return!1}h(m$,"isMultilineRegexSource");function oc(s,e,t){if(!t)return new gf(s,null);const n=[];for(let i=0,o=e.length;i<o;i++)n[i]=e[i];return new gf(s,n)}h(oc,"createFindMatch");class yT{constructor(e){const t=[];let n=0;for(let i=0,o=e.length;i<o;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const o=n+((i-n)/2>>0);t[o]>=e?i=o-1:t[o+1]>=e?(n=o,i=o):n=o+1}return n+1}}h(yT,"LineFeedCounter");class pp{static findMatches(e,t,n,i,o){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new mc(r.wordSeparators,r.regex),i,o):this._doFindMatchesLineByLine(e,n,r,i,o):[]}static _getMultilineMatchRange(e,t,n,i,o,r){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let d;if(i){const g=i.findLineFeedCountBeforeOffset(o+r.length)-l;d=a+r.length+g}else d=a+r.length;const c=e.getPositionAt(a),u=e.getPositionAt(d);return new T(c.lineNumber,c.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,i,o){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new yT(a):null,d=[];let c=0,u;for(n.reset(0);u=n.next(a);)if(d[c++]=oc(this._getMultilineMatchRange(e,r,a,l,u.index,u[0]),u,i),c>=o)return d;return d}static _doFindMatchesLineByLine(e,t,n,i,o){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,r,i,o),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,r,i,o);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<o;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,r,i,o);if(a<o){const d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,r,i,o)}return r}static _findMatchesInLine(e,t,n,i,o,r,a,l){const d=e.wordSeparators;if(!a&&e.simpleSearch){const f=e.simpleSearch,g=f.length,m=t.length;let b=-g;for(;(b=t.indexOf(f,b+g))!==-1;)if((!d||BD(d,t,m,b,g))&&(r[o++]=new gf(new T(n,b+1+i,n,b+1+g+i),null),o>=l))return o;return o}const c=new mc(e.wordSeparators,e.regex);let u;c.reset(0);do if(u=c.next(t),u&&(r[o++]=oc(new T(n,u.index+1+i,n,u.index+1+u[0].length+i),u,a),o>=l))return o;while(u);return o}static findNextMatch(e,t,n,i){const o=t.parseSearchRequest();if(!o)return null;const r=new mc(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const o=new W(t.lineNumber,1),r=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new T(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new yT(l):null;n.reset(t.column-1);let c=n.next(l);return c?oc(this._getMultilineMatchRange(e,r,l,d,c.index,c[0]),c,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new W(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(n,a,r,t.column,i);if(l)return l;for(let d=1;d<=o;d++){const c=(r+d-1)%o,u=e.getLineContent(c+1),f=this._findFirstMatchInLine(n,u,c+1,1,i);if(f)return f}return null}static _findFirstMatchInLine(e,t,n,i,o){e.reset(i-1);const r=e.next(t);return r?oc(new T(n,r.index+1,n,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,n,i){const o=t.parseSearchRequest();if(!o)return null;const r=new mc(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const o=this._doFindMatchesMultiline(e,new T(1,1,t.lineNumber,t.column),n,i,10*p$);if(o.length>0)return o[o.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new W(r,e.getLineMaxColumn(r)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,r,i);if(l)return l;for(let d=1;d<=o;d++){const c=(o+r-d-1)%o,u=e.getLineContent(c+1),f=this._findLastMatchInLine(n,u,c+1,i);if(f)return f}return null}static _findLastMatchInLine(e,t,n,i){let o=null,r;for(e.reset(0);r=e.next(t);)o=oc(new T(n,r.index+1,n,r.index+1+r[0].length),r,i);return o}}h(pp,"TextModelSearch");function _$(s,e,t,n,i){if(n===0)return!0;const o=e.charCodeAt(n-1);if(s.get(o)!==0||o===13||o===10)return!0;if(i>0){const r=e.charCodeAt(n);if(s.get(r)!==0)return!0}return!1}h(_$,"leftIsWordBounday");function b$(s,e,t,n,i){if(n+i===t)return!0;const o=e.charCodeAt(n+i);if(s.get(o)!==0||o===13||o===10)return!0;if(i>0){const r=e.charCodeAt(n+i-1);if(s.get(r)!==0)return!0}return!1}h(b$,"rightIsWordBounday");function BD(s,e,t,n,i){return _$(s,e,t,n,i)&&b$(s,e,t,n,i)}h(BD,"isValidMatch");class mc{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,o=n[0].length;if(i===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){Uw(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=o,!this._wordSeparators||BD(this._wordSeparators,e,t,i,o))return n}while(n);return null}}h(mc,"Searcher");class C0{static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,o=n?n.endLineNumber:e.getLineCount(),r=new ST(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${v$(Array.from(a))}`,"g");const d=new mc(null,l),c=[];let u=!1,f,g=0,m=0,b=0;e:for(let v=i,C=o;v<=C;v++){const w=e.getLineContent(v),y=w.length;d.reset(0);do if(f=d.next(w),f){let S=f.index,L=f.index+f[0].length;if(S>0){const N=w.charCodeAt(S-1);Cn(N)&&S--}if(L+1<y){const N=w.charCodeAt(L-1);Cn(N)&&L++}const E=w.substring(S,L),x=am(S+1,dD,w,0),k=r.shouldHighlightNonBasicASCII(E,x?x.word:null);if(k!==0){k===3?g++:k===2?m++:k===1?b++:gD();const N=1e3;if(c.length>=N){u=!0;break e}c.push(new T(v,S+1,v,L+1))}}while(f)}return{ranges:c,hasMore:u,ambiguousCharacterCount:g,invisibleCharacterCount:m,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){const n=new ST(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const o=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(o),a=Zo.getLocales().filter(l=>!Zo.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}h(C0,"UnicodeTextModelHighlighter");function v$(s,e){return`[${Xo(s.map(n=>String.fromCodePoint(n)).join(""))}]`}h(v$,"buildRegExpCharClassExpr");class ST{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Zo.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Qs.codePoints)gM(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,o=!1;if(t)for(let r of t){const a=r.codePointAt(0),l=p0(r);i=i||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Qs.isInvisibleCharacter(a)&&(o=!0)}return!i&&o?0:this.options.invisibleCharacters&&!gM(e)&&Qs.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}h(ST,"CodePointHighlighter");function gM(s){return s===" "||s===`
`||s==="	"}h(gM,"isAllowedInvisibleCharacter");var Bd=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class U4 extends B4{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=am(e.column,RP(t),this._lines[e.lineNumber-1],0);return n?new T(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,o="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=o.substring(a[r].start,a[r].end);r+=1,yield l}else if(i<t.length)o=t[i],a=n(o,e),r=0,i+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],i=this._wordenize(n,t),o=[];for(const r of i)o.push({word:n.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return o}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,o=[];o.push(this._lines[n].substring(e.startColumn-1));for(let r=n+1;r<i;r++)o.push(this._lines[r]);return o.push(this._lines[i].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!W.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{const o=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>o&&(n=o,i=!0)}return i?{lineNumber:t,column:n}:e}}h(U4,"MirrorModel");class Jl{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new U4(Ce.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){!this._models[e]||delete this._models[e]}computeUnicodeHighlights(e,t,n){return Bd(this,void 0,void 0,function*(){const i=this._getModel(e);return i?C0.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,i){return Bd(this,void 0,void 0,function*(){const o=this._getModel(e),r=this._getModel(t);if(!o||!r)return null;const a=o.getLinesContent(),l=r.getLinesContent(),c=new F4(a,l,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:i}).computeDiff(),u=c.changes.length>0?!1:this._modelsAreIdentical(o,r);return{quitEarly:c.quitEarly,identical:u,changes:c.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let o=1;o<=n;o++){const r=e.getLineContent(o),a=t.getLineContent(o);if(r!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return Bd(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const i=[];let o;t=t.slice(0).sort((r,a)=>{if(r.range&&a.range)return T.compareRangesUsingStarts(r.range,a.range);const l=r.range?0:1,d=a.range?0:1;return l-d});for(let{range:r,text:a,eol:l}of t){if(typeof l=="number"&&(o=l),T.isEmpty(r)&&!a)continue;const d=n.getValueInRange(r);if(a=a.replace(/\r\n|\n|\r/g,n.eol),d===a)continue;if(Math.max(a.length,d.length)>Jl._diffLimit){i.push({range:r,text:a});continue}const c=l$(d,a,!1),u=n.offsetAt(T.lift(r).getStartPosition());for(const f of c){const g=n.positionAt(u+f.originalStart),m=n.positionAt(u+f.originalStart+f.originalLength),b={text:a.substr(f.modifiedStart,f.modifiedLength),range:{startLineNumber:g.lineNumber,startColumn:g.column,endLineNumber:m.lineNumber,endColumn:m.column}};n.getValueInRange(b.range)!==b.text&&i.push(b)}}return typeof o=="number"&&i.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),i})}computeLinks(e){return Bd(this,void 0,void 0,function*(){const t=this._getModel(e);return t?f$(t):null})}textualSuggest(e,t,n,i){return Bd(this,void 0,void 0,function*(){const o=new wi(!0),r=new RegExp(n,i),a=new Set;e:for(let l of e){const d=this._getModel(l);if(!!d){for(let c of d.words(r))if(!(c===t||!isNaN(Number(c)))&&(a.add(c),a.size>Jl._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}})}computeWordRanges(e,t,n,i){return Bd(this,void 0,void 0,function*(){const o=this._getModel(e);if(!o)return Object.create(null);const r=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const d=o.getLineWords(l,r);for(const c of d){if(!isNaN(Number(c.word)))continue;let u=a[c.word];u||(u=[],a[c.word]=u),u.push({startLineNumber:l,startColumn:c.startColumn,endLineNumber:l,endColumn:c.endColumn})}}return a})}navigateValueSet(e,t,n,i,o){return Bd(this,void 0,void 0,function*(){const r=this._getModel(e);if(!r)return null;const a=new RegExp(i,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),d=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!d)return null;const c=r.getValueInRange(d);return Yw.INSTANCE.navigateValueSet(t,l,d,c,n)})}loadForeignModule(e,t,n){const r={host:Nj(n,h((a,l)=>this._host.fhr(a,l),"proxyMethodRequest")),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(fD(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}h(Jl,"EditorSimpleWorker");Jl._diffLimit=1e5;Jl._suggestionsLimit=1e4;typeof importScripts=="function"&&(tn.monaco=RO());const HD=Xe("textResourceConfigurationService"),j4=Xe("textResourcePropertiesService"),Cs=Xe("logService");var $s;(function(s){s[s.Trace=0]="Trace",s[s.Debug=1]="Debug",s[s.Info=2]="Info",s[s.Warning=3]="Warning",s[s.Error=4]="Error",s[s.Critical=5]="Critical",s[s.Off=6]="Off"})($s||($s={}));const G4=$s.Info;class $4 extends z{constructor(){super(...arguments);this.level=G4,this._onDidChangeLogLevel=this._register(new P)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}h($4,"AbstractLogger");class q4 extends $4{constructor(e=G4){super();this.setLevel(e)}trace(e,...t){this.getLevel()<=$s.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=$s.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=$s.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=$s.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}h(q4,"ConsoleLogger");class Y4 extends z{constructor(e){super();this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}h(Y4,"LogService");const ce=Xe("ILanguageFeaturesService");var w$=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qg=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},xT=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const pM=60*1e3,mM=5*60*1e3;function sc(s,e){const t=s.getModel(e);return!(!t||t.isTooLargeForSyncing())}h(sc,"canSyncModel");let TT=h(class extends z{constructor(e,t,n,i,o){super();this._modelService=e,this._workerManager=this._register(new Z4(this._modelService,i)),this._logService=n,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,a)=>sc(this._modelService,r.uri)?this._workerManager.withWorker().then(l=>l.computeLinks(r.uri)).then(l=>l&&{links:l}):Promise.resolve({links:[]})})),this._register(o.completionProvider.register("*",new X4(this._workerManager,t,this._modelService,i)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return sc(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(i=>i.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,i){return this._workerManager.withWorker().then(o=>o.computeDiff(e,t,n,i))}computeMoreMinimalEdits(e,t){if(io(t)){if(!sc(this._modelService,e))return Promise.resolve(t);const n=wi.create(!0),i=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t));return i.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([i,Zl(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return sc(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(i=>i.navigateValueSet(e,t,n))}canComputeWordRanges(e){return sc(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}},"EditorWorkerService");TT=w$([qg(0,Bt),qg(1,HD),qg(2,Cs),qg(3,oi),qg(4,ce)],TT);class X4{constructor(e,t,n,i){this.languageConfigurationService=i,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return xT(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const i=[];if(n.wordBasedSuggestionsMode==="currentDocument")sc(this._modelService,e.uri)&&i.push(e.uri);else for(const u of this._modelService.getModels())!sc(this._modelService,u.uri)||(u===e?i.unshift(u.uri):(n.wordBasedSuggestionsMode==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&i.push(u.uri));if(i.length===0)return;const o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new T(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):T.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),c=yield(yield this._workerManager.withWorker()).textualSuggest(i,r?.word,o);if(!!c)return{duration:c.duration,suggestions:c.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}})}}h(X4,"WordBasedCompletionItemProvider");class Z4 extends z{constructor(e,t){super();this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new mg).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(mM/2)),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>mM&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new zD(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}h(Z4,"WorkerManager");class J4 extends z{constructor(e,t,n){super();if(this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const i=new mg;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(pM/2)),this._register(i)}}dispose(){for(let e in this._syncedModels)et(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){const i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>pM&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const o=new Q;o.add(n.onDidChangeContent(r=>{this._proxy.acceptModelChanged(i.toString(),r)})),o.add(n.onWillDispose(()=>{this._stopModelSync(i)})),o.add(He(()=>{this._proxy.acceptRemovedModel(i)})),this._syncedModels[i]=o}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],et(t)}}h(J4,"EditorModelManager");class LT{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}h(LT,"SynchronousWorkerClient");class Kv{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}h(Kv,"EditorWorkerHost");class zD extends z{constructor(e,t,n,i){super();this.languageConfigurationService=i,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new x_(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new I4(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Kv(this)))}catch(e){pT(e),this._worker=new LT(new Jl(new Kv(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(pT(e),this._worker=new LT(new Jl(new Kv(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new J4(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return xT(this,void 0,void 0,function*(){return this._disposed?Promise.reject(_D()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(i=>i.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),n,i))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return xT(this,void 0,void 0,function*(){const i=yield this._withSyncedResources(e),o=n.source,r=_y(n);return i.textualSuggest(e.map(a=>a.toString()),t,o,r)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const o=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=o.source,a=_y(o);return n.computeWordRanges(e.toString(),t,r,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(i=>{const o=this._modelService.getModel(e);if(!o)return null;const r=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition(),a=r.source,l=_y(r);return i.navigateValueSet(e.toString(),t,n,a,l)})}dispose(){super.dispose(),this._disposed=!0}}h(zD,"EditorWorkerClient");function C$(s,e,t){return new Q4(s,e,t)}h(C$,"createWebWorker$1");class Q4 extends zD{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t);this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?fD(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=h((a,l)=>e.fmr(a,l),"proxyMethodRequest"),o=h((a,l)=>function(){const d=Array.prototype.slice.call(arguments,0);return l(a,d)},"createProxyMethod"),r={};for(const a of n)r[a]=o(a,i);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}h(Q4,"MonacoWebWorkerImpl");class _n{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=_n.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new _n(i,e,t)}equals(e){return e instanceof _n?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,o=i+(n<<1);for(let r=i;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=Gn.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Gn.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Gn.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Gn.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return Gn.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Gn.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return _n.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new y0(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let o=0;o<i;o++)e[o<<1]=e[o+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const o=n+Math.floor((i-n)/2),r=e[o<<1];if(r===t)return o+1;r<t?n=o+1:r>t&&(i=o)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const o=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(r,a);const d=this._tokens[(t<<1)+1];o.push(i.length,d),t++,r=a}else if(l){if(l.offset>r){i+=this._text.substring(r,l.offset);const d=this._tokens[(t<<1)+1];o.push(i.length,d),r=l.offset}i+=l.text,o.push(i.length,l.tokenMetadata),n++}else break}return new _n(new Uint32Array(o),i,this._languageIdCodec)}}h(_n,"LineTokens");_n.defaultTokenMetadata=(0<<10|1<<14|2<<23)>>>0;class y0{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let o=this._firstTokenIndex,r=e.getCount();o<r&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof y0?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}h(y0,"SliceLineTokens");class no{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!no._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,o=n+1,r=n-t,a=[];let l=0;for(const d of e)d.endColumn<=i||d.startColumn>=o||(a[l++]=new no(Math.max(1,d.startColumn-i+1),Math.min(r+1,d.endColumn-i+1),d.className,d.type));return a}static filter(e,t,n,i){if(e.length===0)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const d=e[a],c=d.range;if(c.endLineNumber<t||c.startLineNumber>t||c.isEmpty()&&(d.type===0||d.type===3))continue;const u=c.startLineNumber===t?c.startColumn:n,f=c.endLineNumber===t?c.endColumn:i;o[r++]=new no(u,f,d.inlineClassName,d.type)}return o}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=no._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}h(no,"LineDecoration");class kT{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}h(kT,"DecorationSegment");class mm{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new kT(t,this.stopOffsets[i],this.classNames.join(" "),mm._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new kT(t,e-1,this.classNames.join(" "),mm._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}h(mm,"Stack");class e5{static normalize(e,t){if(t.length===0)return[];const n=[],i=new mm;let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let d=l.startColumn,c=l.endColumn;const u=l.className,f=l.type===1?2:l.type===2?4:0;if(d>1){const b=e.charCodeAt(d-2);Cn(b)&&d--}if(c>1){const b=e.charCodeAt(c-2);Cn(b)&&c--}const g=d-1,m=c-2;o=i.consumeLowerThan(g,o,n),i.count===0&&(o=g),i.insert(m,u,f)}return i.consumeLowerThan(1073741824,o,n),n}}h(e5,"LineDecorationsNormalizer");class yn{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}h(yn,"LinePart");class t5{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}h(t5,"LineRange");class Id{constructor(e,t,n,i,o,r,a,l,d,c,u,f,g,m,b,v,C,w,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=d.sort(no.compare),this.tabSize=c,this.startVisibleColumn=u,this.spaceWidth=f,this.stopRenderingLineAfter=b,this.renderWhitespace=v==="all"?4:v==="boundary"?1:v==="selection"?2:v==="trailing"?3:0,this.renderControlCharacters=C,this.fontLigatures=w,this.selectionsOnLine=y&&y.sort((E,x)=>E.startOffset<x.startOffset?-1:1);const S=Math.abs(m-f),L=Math.abs(g-f);S<L?(this.renderSpaceWidth=m,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=g,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&no.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}h(Id,"RenderLineInput");class S0{constructor(e,t){this.partIndex=e,this.charIndex=t}}h(S0,"DomPosition");class Os{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,i){const o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._absoluteOffsets[e-1]=i+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=Os.getPartIndex(t),i=Os.getCharIndex(t);return new S0(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const i=(e<<16|n<<0)>>>0;let o=0,r=this.length-1;for(;o+1<r;){const b=o+r>>>1,v=this._data[b];if(v===i)return b;v>i?r=b:o=b}if(o===r)return o;const a=this._data[o],l=this._data[r];if(a===i)return o;if(l===i)return r;const d=Os.getPartIndex(a),c=Os.getCharIndex(a),u=Os.getPartIndex(l);let f;d!==u?f=t:f=Os.getCharIndex(l);const g=n-c,m=f-n;return g<=m?o:r}}h(Os,"CharacterMapping");class Xw{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}h(Xw,"RenderLineOutput");function x0(s,e){if(s.lineContent.length===0){if(s.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,i=0;for(const r of s.lineDecorations)(r.type===1||r.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(r.className),e.appendASCIIString('"></span>'),r.type===1&&(i|=1,t++),r.type===2&&(i|=2,n++));e.appendASCIIString("</span>");const o=new Os(1,t+n);return o.setColumnInfo(1,t,0,0),new Xw(o,!1,i)}return e.appendASCIIString("<span><span></span></span>"),new Xw(new Os(0,0),!1,0)}return E$(y$(s),e)}h(x0,"renderViewLine");class n5{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}h(n5,"RenderLineOutput2");function T0(s){const e=Yc(1e4),t=x0(s,e);return new n5(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}h(T0,"renderViewLine2");class i5{constructor(e,t,n,i,o,r,a,l,d,c,u,f,g,m,b){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=o,this.parts=r,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=d,this.startVisibleColumn=c,this.containsRTL=u,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=m,this.renderControlCharacters=b}}h(i5,"ResolvedRenderLineInput");function y$(s){const e=s.lineContent;let t,n;s.stopRenderingLineAfter!==-1&&s.stopRenderingLineAfter<e.length?(t=!0,n=s.stopRenderingLineAfter):(t=!1,n=e.length);let i=S$(s.lineTokens,s.fauxIndentLength,n);s.renderControlCharacters&&!s.isBasicASCII&&(i=T$(e,i)),(s.renderWhitespace===4||s.renderWhitespace===1||s.renderWhitespace===2&&!!s.selectionsOnLine||s.renderWhitespace===3)&&(i=L$(s,e,n,i));let o=0;if(s.lineDecorations.length>0){for(let r=0,a=s.lineDecorations.length;r<a;r++){const l=s.lineDecorations[r];l.type===3||l.type===1?o|=1:l.type===2&&(o|=2)}i=k$(e,n,i,s.lineDecorations)}return s.containsRTL||(i=x$(e,i,!s.isBasicASCII||s.fontLigatures)),new i5(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,e,n,t,i,o,s.fauxIndentLength,s.tabSize,s.startVisibleColumn,s.containsRTL,s.spaceWidth,s.renderSpaceCharCode,s.renderWhitespace,s.renderControlCharacters)}h(y$,"resolveRenderLineInput");function S$(s,e,t){const n=[];let i=0;e>0&&(n[i++]=new yn(e,"",0));for(let o=0,r=s.getCount();o<r;o++){const a=s.getEndOffset(o);if(a<=e)continue;const l=s.getClassName(o);if(a>=t){n[i++]=new yn(t,l,0);break}n[i++]=new yn(a,l,0)}return n}h(S$,"transformAndRemoveOverflowing");function x$(s,e,t){let n=0;const i=[];let o=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],d=l.endIndex;if(n+50<d){const c=l.type,u=l.metadata;let f=-1,g=n;for(let m=n;m<d;m++)s.charCodeAt(m)===32&&(f=m),f!==-1&&m-g>=50&&(i[o++]=new yn(f+1,c,u),g=f+1,f=-1);g!==d&&(i[o++]=new yn(d,c,u))}else i[o++]=l;n=d}else for(let r=0,a=e.length;r<a;r++){const l=e[r],d=l.endIndex,c=d-n;if(c>50){const u=l.type,f=l.metadata,g=Math.ceil(c/50);for(let m=1;m<g;m++){const b=n+m*50;i[o++]=new yn(b,u,f)}i[o++]=new yn(d,u,f)}else i[o++]=l;n=d}return i}h(x$,"splitLargeTokens");function o5(s){return s<32?s!==9:s===127||s>=8234&&s<=8238||s>=8294&&s<=8297||s>=8206&&s<=8207||s===1564}h(o5,"isControlCharacter");function T$(s,e){const t=[];let n=new yn(0,"",0),i=0;for(const o of e){const r=o.endIndex;for(;i<r;i++){const a=s.charCodeAt(i);o5(a)&&(i>n.endIndex&&(n=new yn(i,o.type,o.metadata),t.push(n)),n=new yn(i+1,"mtkcontrol",o.metadata),t.push(n))}i>n.endIndex&&(n=new yn(r,o.type,o.metadata),t.push(n))}return t}h(T$,"extractControlCharacters");function L$(s,e,t,n){const i=s.continuesWithWrappedLine,o=s.fauxIndentLength,r=s.tabSize,a=s.startVisibleColumn,l=s.useMonospaceOptimizations,d=s.selectionsOnLine,c=s.renderWhitespace===1,u=s.renderWhitespace===3,f=s.renderSpaceWidth!==s.spaceWidth,g=[];let m=0,b=0,v=n[b].type,C=n[b].endIndex;const w=n.length;let y=!1,S=bi(e),L;S===-1?(y=!0,S=t,L=t):L=Fr(e);let E=!1,x=0,k=d&&d[x],N=a%r;for(let F=o;F<t;F++){const G=e.charCodeAt(F);k&&F>=k.endOffset&&(x++,k=d&&d[x]);let $;if(F<S||F>L)$=!0;else if(G===9)$=!0;else if(G===32)if(c)if(E)$=!0;else{const ue=F+1<t?e.charCodeAt(F+1):0;$=ue===32||ue===9}else $=!0;else $=!1;if($&&d&&($=!!k&&k.startOffset<=F&&k.endOffset>F),$&&u&&($=y||F>L),E){if(!$||!l&&N>=r){if(f){const ue=m>0?g[m-1].endIndex:o;for(let de=ue+1;de<=F;de++)g[m++]=new yn(de,"mtkw",1)}else g[m++]=new yn(F,"mtkw",1);N=N%r}}else(F===C||$&&F>o)&&(g[m++]=new yn(F,v,0),N=N%r);for(G===9?N=r:Xl(G)?N+=2:N++,E=$;F===C&&(b++,b<w);)v=n[b].type,C=n[b].endIndex}let V=!1;if(E)if(i&&c){const F=t>0?e.charCodeAt(t-1):0,G=t>1?e.charCodeAt(t-2):0;F===32&&G!==32&&G!==9||(V=!0)}else V=!0;if(V)if(f){const F=m>0?g[m-1].endIndex:o;for(let G=F+1;G<=t;G++)g[m++]=new yn(G,"mtkw",1)}else g[m++]=new yn(t,"mtkw",1);else g[m++]=new yn(t,v,0);return g}h(L$,"_applyRenderWhitespace");function k$(s,e,t,n){n.sort(no.compare);const i=e5.normalize(s,n),o=i.length;let r=0;const a=[];let l=0,d=0;for(let u=0,f=t.length;u<f;u++){const g=t[u],m=g.endIndex,b=g.type,v=g.metadata;for(;r<o&&i[r].startOffset<m;){const C=i[r];if(C.startOffset>d&&(d=C.startOffset,a[l++]=new yn(d,b,v)),C.endOffset+1<=m)d=C.endOffset+1,a[l++]=new yn(d,b+" "+C.className,v|C.metadata),r++;else{d=m,a[l++]=new yn(d,b+" "+C.className,v|C.metadata);break}}m>d&&(d=m,a[l++]=new yn(d,b,v))}const c=t[t.length-1].endIndex;if(r<o&&i[r].startOffset===c)for(;r<o&&i[r].startOffset===c;){const u=i[r];a[l++]=new yn(d,u.className,u.metadata),r++}return a}h(k$,"_applyInlineDecorations");function E$(s,e){const t=s.fontIsMonospace,n=s.canUseHalfwidthRightwardsArrow,i=s.containsForeignElements,o=s.lineContent,r=s.len,a=s.isOverflowing,l=s.parts,d=s.fauxIndentLength,c=s.tabSize,u=s.startVisibleColumn,f=s.containsRTL,g=s.spaceWidth,m=s.renderSpaceCharCode,b=s.renderWhitespace,v=s.renderControlCharacters,C=new Os(r+1,l.length);let w=!1,y=0,S=u,L=0,E=0,x=0,k=0;f?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let N=0,V=l.length;N<V;N++){k+=x;const F=l[N],G=F.endIndex,$=F.type,ue=b!==0&&F.isWhitespace(),de=ue&&!t&&($==="mtkw"||!i),ye=y===G&&F.isPseudoAfter();if(L=0,e.appendASCIIString('<span class="'),e.appendASCIIString(de?"mtkz":$),e.appendASCII(34),ue){let Ee=0;{let Le=y,Fe=S;for(;Le<G;Le++){const yt=(o.charCodeAt(Le)===9?c-Fe%c:1)|0;Ee+=yt,Le>=d&&(Fe+=yt)}}for(de&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(g*Ee)),e.appendASCIIString('px"')),e.appendASCII(62);y<G;y++){C.setColumnInfo(y+1,N-E,L,k),E=0;const Le=o.charCodeAt(y);let Fe;if(Le===9){Fe=c-S%c|0,!n||Fe>1?e.write1(8594):e.write1(65515);for(let Ht=2;Ht<=Fe;Ht++)e.write1(160)}else Fe=1,e.write1(m);L+=Fe,y>=d&&(S+=Fe)}x=Ee}else{let Ee=0;for(e.appendASCII(62);y<G;y++){C.setColumnInfo(y+1,N-E,L,k),E=0;const Le=o.charCodeAt(y);let Fe=1,Ht=1;switch(Le){case 9:Fe=c-S%c,Ht=Fe;for(let yt=1;yt<=Fe;yt++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:v?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:Xl(Le)&&Ht++,v&&Le<32?e.write1(9216+Le):v&&Le===127?e.write1(9249):v&&o5(Le)?(e.appendASCIIString("[U+"),e.appendASCIIString(D$(Le)),e.appendASCIIString("]"),Fe=8):e.write1(Le)}L+=Fe,Ee+=Fe,y>=d&&(S+=Ht)}x=Ee}ye?E++:E=0,y>=r&&!w&&F.isPseudoAfter()&&(w=!0,C.setColumnInfo(y+1,N,L,k)),e.appendASCIIString("</span>")}return w||C.setColumnInfo(r+1,l.length-1,L,k),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new Xw(C,f,i)}h(E$,"_renderLine");function D$(s){return s.toString(16).toUpperCase().padStart(4,"0")}h(D$,"to4CharHex");class ET{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}h(ET,"Viewport");class s5{constructor(e,t){this.tabSize=e,this.data=t}}h(s5,"MinimapLinesRenderingData");class L0{constructor(e,t,n,i,o,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=a}}h(L0,"ViewLineData");class oo{constructor(e,t,n,i,o,r,a,l,d,c){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=oo.isBasicASCII(n,r),this.containsRTL=oo.containsRTL(n,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=d,this.startVisibleColumn=c}static isBasicASCII(e,t){return t?p0(e):!0}static containsRTL(e,t,n){return!t&&n?g0(e):!1}}h(oo,"ViewLineRenderingData");class zu{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}h(zu,"InlineDecoration");class r5{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new zu(new T(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}h(r5,"SingleLineInlineDecoration");class KD{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}h(KD,"ViewModelDecoration");class UD{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}h(UD,"OverviewRulerDecorationsGroup");function I$(s){return Array.isArray(s)}h(I$,"isFuzzyActionArr");function N$(s){return!I$(s)}h(N$,"isFuzzyAction");function a5(s){return typeof s=="string"}h(a5,"isString");function _M(s){return!a5(s)}h(_M,"isIAction");function Cu(s){return!s}h(Cu,"empty");function Fl(s,e){return s.ignoreCase&&e?e.toLowerCase():e}h(Fl,"fixCase");function bM(s){return s.replace(/[&<>'"_]/g,"-")}h(bM,"sanitize$1");function A$(s,e){console.log(`${s.languageId}: ${e}`)}h(A$,"log");function xt(s,e){return new Error(`${s.languageId}: ${e}`)}h(xt,"createError");function yl(s,e,t,n,i){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(o,function(a,l,d,c,u,f,g,m,b){return Cu(d)?Cu(c)?!Cu(u)&&u<n.length?Fl(s,n[u]):!Cu(g)&&s&&typeof s[g]=="string"?s[g]:(r===null&&(r=i.split("."),r.unshift(i)),!Cu(f)&&f<r.length?Fl(s,r[f]):""):Fl(s,t):"$"})}h(yl,"substituteMatches");function zb(s,e){let t=e;for(;t&&t.length>0;){const n=s.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}h(zb,"findRules");function M$(s,e){let t=e;for(;t&&t.length>0;){if(s.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}h(M$,"stateExists");const l5=5;class bf{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new kc(e,t);let n=kc.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new kc(e,t),this._entries[n]=i,i)}}h(bf,"MonarchStackElementFactory");bf._INSTANCE=new bf(l5);class kc{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return kc._equals(this,e)}push(e){return bf.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return bf.create(this.parent,e)}}h(kc,"MonarchStackElement");class _c{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new _c(this.languageId,this.state)}}h(_c,"EmbeddedLanguageData");class Sa{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new Ku(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new Ku(e,t);const n=kc.getStackElementId(e);let i=this._entries[n];return i||(i=new Ku(e,null),this._entries[n]=i,i)}}h(Sa,"MonarchLineStateFactory");Sa._INSTANCE=new Sa(l5);class Ku{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Sa.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof Ku)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}h(Ku,"MonarchLineState");class d5{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new hf(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,i){const o=n.languageId,r=n.state,a=Ft.get(o);if(!a)return this.enterLanguage(o),this.emit(i,""),r;const l=a.tokenize(e,t,r);if(i!==0)for(const d of l.tokens)this._tokens.push(new hf(d.offset+i,d.type,d.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new u0(this._tokens,e)}}h(d5,"MonarchClassicTokensCollector");class _m{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const i=e!==null?e.length:0,o=t.length,r=n!==null?n.length:0;if(i===0&&o===0&&r===0)return new Uint32Array(0);if(i===0&&o===0)return n;if(o===0&&r===0)return e;const a=new Uint32Array(i+o+r);e!==null&&a.set(e);for(let l=0;l<o;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+o),a}nestedLanguageTokenize(e,t,n,i){const o=n.languageId,r=n.state,a=Ft.get(o);if(!a)return this.enterLanguage(o),this.emit(i,""),r;const l=a.tokenizeEncoded(e,t,r);if(i!==0)for(let d=0,c=l.tokens.length;d<c;d+=2)l.tokens[d]+=i;return this._prependTokens=_m._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new v_(_m._merge(this._prependTokens,this._tokens,null),e)}}h(_m,"MonarchModernTokensCollector");class _g{constructor(e,t,n,i){this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._tokenizationRegistryListener=Ft.onDidChange(r=>{if(o)return;let a=!1;for(let l=0,d=r.changedLanguages.length;l<d;l++){const c=r.changedLanguages[l];if(this._embeddedLanguages[c]){a=!0;break}}a&&(o=!0,Ft.fire([this._languageId]),o=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(let t in this._embeddedLanguages){const n=Ft.get(t);if(n){if(n instanceof _g){const i=n.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}Ft.isResolved(t)||e.push(Ft.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=bf.create(null,this._lexer.start);return Sa.create(e,null)}tokenize(e,t,n){const i=new d5,o=this._tokenize(e,t,n,i);return i.finalize(o)}tokenizeEncoded(e,t,n){const i=new _m(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,i);return i.finalize(o)}_tokenize(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=zb(this._lexer,t.stack.state),!n))throw xt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,o=!1;for(const r of n){if(!_M(r.action)||r.action.nextEmbedded!=="@pop")continue;o=!0;let a=r.regex;const l=r.regex.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const c=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),c)}const d=e.search(a);d===-1||d!==0&&r.matchOnlyAtLineStart||(i===-1||d<i)&&(i=d)}if(!o)throw xt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,o){const r=this._findLeavingNestedLanguageOffset(e,n);if(r===-1){const d=o.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return Sa.create(n.stack,new _c(n.embeddedLanguageData.languageId,d))}const a=e.substring(0,r);a.length>0&&o.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,i);const l=e.substring(r);return this._myTokenize(l,t,n,i+r,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,o){o.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let d=n.embeddedLanguageData,c=n.stack,u=0,f=null,g=!0;for(;g||u<l;){const m=u,b=c.depth,v=f?f.groups.length:0,C=c.state;let w=null,y=null,S=null,L=null,E=null;if(f){w=f.matches;const N=f.groups.shift();y=N.matched,S=N.action,L=f.rule,f.groups.length===0&&(f=null)}else{if(!g&&u>=l)break;g=!1;let N=this._lexer.tokenizer[C];if(!N&&(N=zb(this._lexer,C),!N))throw xt(this._lexer,"tokenizer state is not defined: "+C);let V=a.substr(u);for(const F of N)if((u===0||!F.matchOnlyAtLineStart)&&(w=V.match(F.regex),w)){y=w[0],S=F.action;break}}if(w||(w=[""],y=""),S||(u<l&&(w=[a.charAt(u)],y=w[0]),S=this._lexer.defaultToken),y===null)break;for(u+=y.length;N$(S)&&_M(S)&&S.test;)S=S.test(y,w,C,u===l);let x=null;if(typeof S=="string"||Array.isArray(S))x=S;else if(S.group)x=S.group;else if(S.token!==null&&S.token!==void 0){if(S.tokenSubst?x=yl(this._lexer,S.token,y,w,C):x=S.token,S.nextEmbedded)if(S.nextEmbedded==="@pop"){if(!d)throw xt(this._lexer,"cannot pop embedded language if not inside one");d=null}else{if(d)throw xt(this._lexer,"cannot enter embedded language from within an embedded language");E=yl(this._lexer,S.nextEmbedded,y,w,C)}if(S.goBack&&(u=Math.max(0,u-S.goBack)),S.switchTo&&typeof S.switchTo=="string"){let N=yl(this._lexer,S.switchTo,y,w,C);if(N[0]==="@"&&(N=N.substr(1)),zb(this._lexer,N))c=c.switchTo(N);else throw xt(this._lexer,"trying to switch to a state '"+N+"' that is undefined in rule: "+this._safeRuleName(L))}else{if(S.transform&&typeof S.transform=="function")throw xt(this._lexer,"action.transform not supported");if(S.next)if(S.next==="@push"){if(c.depth>=this._lexer.maxStack)throw xt(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(C)}else if(S.next==="@pop"){if(c.depth<=1)throw xt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(L));c=c.pop()}else if(S.next==="@popall")c=c.popall();else{let N=yl(this._lexer,S.next,y,w,C);if(N[0]==="@"&&(N=N.substr(1)),zb(this._lexer,N))c=c.push(N);else throw xt(this._lexer,"trying to set a next state '"+N+"' that is undefined in rule: "+this._safeRuleName(L))}}S.log&&typeof S.log=="string"&&A$(this._lexer,this._lexer.languageId+": "+yl(this._lexer,S.log,y,w,C))}if(x===null)throw xt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(L));const k=h(N=>{const V=this._languageService.getLanguageIdByLanguageName(N)||this._languageService.getLanguageIdByMimeType(N)||N,F=this._getNestedEmbeddedLanguageData(V);if(u<l){const G=e.substr(u);return this._nestedTokenize(G,t,Sa.create(c,F),i+u,o)}else return Sa.create(c,F)},"computeNewStateForEmbeddedLanguage");if(Array.isArray(x)){if(f&&f.groups.length>0)throw xt(this._lexer,"groups cannot be nested: "+this._safeRuleName(L));if(w.length!==x.length+1)throw xt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(L));let N=0;for(let V=1;V<w.length;V++)N+=w[V].length;if(N!==y.length)throw xt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(L));f={rule:L,matches:w,groups:[]};for(let V=0;V<x.length;V++)f.groups[V]={action:x[V],matched:w[V+1]};u-=y.length;continue}else{if(x==="@rematch"&&(u-=y.length,y="",w=null,x="",E!==null))return k(E);if(y.length===0){if(l===0||b!==c.depth||C!==c.state||(f?f.groups.length:0)!==v)continue;throw xt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(L))}let N=null;if(a5(x)&&x.indexOf("@brackets")===0){const V=x.substr(9),F=R$(this._lexer,y);if(!F)throw xt(this._lexer,"@brackets token returned but no bracket defined as: "+y);N=bM(F.token+V)}else{const V=x===""?"":x+this._lexer.tokenPostfix;N=bM(V)}m<r&&o.emit(m+i,N)}if(E!==null)return k(E)}return Sa.create(c,d)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new _c(e,mf);e!==this._languageId&&(Ft.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Ft.get(e);return t?new _c(e,t.getInitialState()):new _c(e,mf)}}h(_g,"MonarchTokenizer");function R$(s,e){if(!e)return null;e=Fl(s,e);const t=s.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}h(R$,"findBracket");var P$=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},Ly;const ky=(Ly=window.trustedTypes)===null||Ly===void 0?void 0:Ly.createPolicy("standaloneColorizer",{createHTML:s=>s});class k0{static colorizeElement(e,t,n,i){i=i||{};const o=i.theme||"vs",r=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(o);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+o;const d=h(c=>{var u;const f=(u=ky?.createHTML(c))!==null&&u!==void 0?u:c;n.innerHTML=f},"render");return this.colorize(t,l||"",a,i).then(d,c=>console.error(c))}static colorize(e,t,n,i){return P$(this,void 0,void 0,function*(){const o=e.languageIdCodec;let r=4;i&&typeof i.tabSize=="number"&&(r=i.tabSize),DD(t)&&(t=t.substr(1));const a=zr(t);if(!e.isRegisteredLanguageId(n))return vM(a,r,o);const l=yield Ft.getOrCreate(n);return l?O$(a,r,l,o):vM(a,r,o)})}static colorizeLine(e,t,n,i,o=4){const r=oo.isBasicASCII(e,t),a=oo.containsRTL(e,r,n);return T0(new Id(!1,!0,e,!1,r,a,0,i,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const i=e.getLineContent(t);e.forceTokenization(t);const r=e.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,n)}}h(k0,"Colorizer");function O$(s,e,t,n){return new Promise((i,o)=>{const r=h(()=>{const a=F$(s,e,t,n);if(t instanceof _g){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,o);return}}i(a)},"execute");r()})}h(O$,"_colorize");function vM(s,e,t){let n=[];const o=new Uint32Array(2);o[0]=0,o[1]=16793600;for(let r=0,a=s.length;r<a;r++){const l=s[r];o[0]=l.length;const d=new _n(o,l,t),c=oo.isBasicASCII(l,!0),u=oo.containsRTL(l,c,!0),f=T0(new Id(!1,!0,l,!1,c,u,0,d,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(f.html),n.push("<br/>")}return n.join("")}h(vM,"_fakeColorize");function F$(s,e,t,n){let i=[],o=t.getInitialState();for(let r=0,a=s.length;r<a;r++){const l=s[r],d=t.tokenizeEncoded(l,!0,o);_n.convertToEndOffset(d.tokens,l.length);const c=new _n(d.tokens,l,n),u=oo.isBasicASCII(l,!0),f=oo.containsRTL(l,u,!0),g=T0(new Id(!1,!0,l,!1,u,f,0,c.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(g.html),i.push("<br/>"),o=d.endState}return i.join("")}h(F$,"_actualColorize");const E0={clipboard:{writeText:Zs||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Zs||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Zs||AD?0:navigator.keyboard||vs?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function DT(s,e){if(s===0)return null;const t=(s&65535)>>>0,n=(s&4294901760)>>>16;return n!==0?new bm([Ey(t,e),Ey(n,e)]):new bm([Ey(t,e)])}h(DT,"createKeybinding");function Ey(s,e){const t=!!(s&2048),n=!!(s&256),i=e===2?n:t,o=!!(s&1024),r=!!(s&512),a=e===2?t:n,l=s&255;return new Ql(i,o,r,a,l)}h(Ey,"createSimpleKeybinding");class Ql{constructor(e,t,n,i,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=o}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new bm([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}h(Ql,"SimpleKeybinding");class bm{constructor(e){if(e.length===0)throw Js("parts");this.parts=e}}h(bm,"ChordKeybinding");class c5{constructor(e,t,n,i,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=o,this.keyAriaLabel=r}}h(c5,"ResolvedKeybindingPart");class h5{}h(h5,"ResolvedKeybinding");function W$(s){if(s.charCode){let t=String.fromCharCode(s.charCode).toUpperCase();return fc.fromString(t)}const e=s.keyCode;if(e===3)return 7;if(Eo){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(Ke&&e===224)return 57}else if(Pl){if(e===91)return 57;if(Ke&&e===93)return 57;if(!Ke&&e===92)return 57}return LO[e]||0}h(W$,"extractKeyCode");const V$=Ke?256:2048,B$=512,H$=1024,z$=Ke?2048:256;class Et{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=W$(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=V$),this.altKey&&(t|=B$),this.shiftKey&&(t|=H$),this.metaKey&&(t|=z$),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Ql(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}h(Et,"StandardKeyboardEvent");let IT=!1,du=null;function K$(s){if(!s.parent||s.parent===s)return null;try{let e=s.location,t=s.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return IT=!0,null}catch{return IT=!0,null}return s.parent}h(K$,"getParentWindowIfSameOrigin");class Zw{static getSameOriginWindowChain(){if(!du){du=[];let e=window,t;do t=K$(e),t?du.push({window:e,iframeElement:e.frameElement||null}):du.push({window:e,iframeElement:null}),e=t;while(e)}return du.slice(0)}static hasDifferentOriginAncestor(){return du||this.getSameOriginWindowChain(),IT}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,o=this.getSameOriginWindowChain();for(const r of o){if(n+=r.window.scrollY,i+=r.window.scrollX,r.window===t||!r.iframeElement)break;let a=r.iframeElement.getBoundingClientRect();n+=a.top,i+=a.left}return{top:n,left:i}}}h(Zw,"IframeUtils");class Co{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=Zw.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}h(Co,"StandardMouseEvent");class Zc{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let i=e,o=e;if(typeof i.wheelDeltaY<"u")this.deltaY=i.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Eo&&!Ke?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")vs&&Vn?this.deltaX=-(i.wheelDeltaX/120):this.deltaX=i.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const r=e;r.deltaMode===r.DOM_DELTA_LINE?Eo&&!Ke?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}h(Zc,"StandardWheelEvent");var Me;(function(s){s.inMemory="inmemory",s.vscode="vscode",s.internal="private",s.walkThrough="walkThrough",s.walkThroughSnippet="walkThroughSnippet",s.http="http",s.https="https",s.file="file",s.mailto="mailto",s.untitled="untitled",s.data="data",s.command="command",s.vscodeRemote="vscode-remote",s.vscodeRemoteResource="vscode-remote-resource",s.userData="vscode-userdata",s.vscodeCustomEditor="vscode-custom-editor",s.vscodeNotebook="vscode-notebook",s.vscodeNotebookCell="vscode-notebook-cell",s.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",s.vscodeNotebookCellOutput="vscode-notebook-cell-output",s.vscodeInteractive="vscode-interactive",s.vscodeInteractiveInput="vscode-interactive-input",s.vscodeSettings="vscode-settings",s.vscodeWorkspaceTrust="vscode-workspace-trust",s.vscodeTerminal="vscode-terminal",s.webviewPanel="webview-panel",s.vscodeWebview="vscode-webview",s.extension="extension",s.vscodeFileResource="vscode-file",s.tmp="tmp",s.vsls="vsls"})(Me||(Me={}));const U$="tkn";class u5{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const i=this._ports[t],o=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(r+=`&${U$}=${encodeURIComponent(o)}`),Ce.from({scheme:kd?this._preferredWebSchema:Me.vscodeRemoteResource,authority:`${n}:${i}`,path:"/vscode-remote-resource",query:r})}}h(u5,"RemoteAuthoritiesImpl");const f5=new u5;class vf{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===Me.vscodeRemote?f5.rewrite(n):n.scheme===Me.file&&(Zs||uj&&tn.origin===`${Me.vscodeFileResource}://${vf.FALLBACK_AUTHORITY}`)?n.with({scheme:Me.vscodeFileResource,authority:n.authority||vf.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return Ce.isUri(e)?e:Ce.parse(t.toUrl(e))}}h(vf,"FileAccessImpl");vf.FALLBACK_AUTHORITY="vscode-app";const g5=new vf;function Sn(s){for(;s.firstChild;)s.firstChild.remove()}h(Sn,"clearNode");function jD(s){var e;return(e=s?.isConnected)!==null&&e!==void 0?e:!1}h(jD,"isInDOM");class GD{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}h(GD,"DomListener");function J(s,e,t,n){return new GD(s,e,t,n)}h(J,"addDisposableListener");function p5(s){return function(e){return s(new Co(e))}}h(p5,"_wrapAsStandardMouseEvent");function j$(s){return function(e){return s(new Et(e))}}h(j$,"_wrapAsStandardKeyboardEvent");let Wn=h(function(e,t,n,i){let o=n;return t==="click"||t==="mousedown"?o=p5(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=j$(n)),J(e,t,o,i)},"addStandardDisposableListener"),G$=h(function(e,t,n){let i=p5(t);return $D(e,i,n)},"addStandardDisposableListener");function $D(s,e,t){return J(s,tr&&E0.pointerEvents?be.POINTER_DOWN:be.MOUSE_DOWN,e,t)}h($D,"addDisposableGenericMouseDownListener");function m5(s,e,t){return J(s,tr&&E0.pointerEvents?be.POINTER_UP:be.MOUSE_UP,e,t)}h(m5,"addDisposableGenericMouseUpListener");function qD(s,e){return J(s,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==s;)n=n.parentNode;n!==s&&e(t)})}h(qD,"addDisposableNonBubblingMouseOutListener");function $$(s,e){return J(s,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==s;)n=n.parentNode;n!==s&&e(t)})}h($$,"addDisposableNonBubblingPointerOutListener");function Ls(s,e,t){let n=null;const i=h(l=>a.fire(l),"handler"),o=h(()=>{n||(n=new GD(s,e,i,t))},"onFirstListenerAdd"),r=h(()=>{n&&(n.dispose(),n=null)},"onLastListenerRemove"),a=new P({onFirstListenerAdd:o,onLastListenerRemove:r});return a}h(Ls,"createEventEmitter");let Dy=null;function q$(s){if(!Dy){const e=h(t=>setTimeout(()=>t(new Date().getTime()),0),"emulatedRequestAnimationFrame");Dy=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return Dy.call(self,s)}h(q$,"doRequestAnimationFrame");let _5,ir;class Uv{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ne(e)}}static sort(e,t){return t.priority-e.priority}}h(Uv,"AnimationFrameQueueItem");(function(){let s=[],e=null,t=!1,n=!1,i=h(()=>{for(t=!1,e=s,s=[],n=!0;e.length>0;)e.sort(Uv.sort),e.shift().execute();n=!1},"animationFrameRunner");ir=h((o,r=0)=>{let a=new Uv(o,r);return s.push(a),t||(t=!0,q$(i)),a},"scheduleAtNextAnimationFrame"),_5=h((o,r)=>{if(n){let a=new Uv(o,r);return e.push(a),a}else return ir(o,r)},"runAtThisOrScheduleAtNextAnimationFrame")})();const Y$=8,X$=h(function(s,e){return e},"DEFAULT_EVENT_MERGER");class b5 extends z{constructor(e,t,n,i=X$,o=Y$){super();let r=null,a=0,l=this._register(new Ki),d=h(()=>{a=new Date().getTime(),n(r),r=null},"invokeHandler");this._register(J(e,t,c=>{r=i(r,c);let u=new Date().getTime()-a;u>=o?(l.cancel(),d()):l.setIfNotSet(d,o-u)}))}}h(b5,"TimeoutThrottledDomListener");function YD(s,e,t,n,i){return new b5(s,e,t,n,i)}h(YD,"addDisposableThrottledListener");function XD(s){return document.defaultView.getComputedStyle(s,null)}h(XD,"getComputedStyle$1");function D0(s){if(s!==document.body)return new mt(s.clientWidth,s.clientHeight);if(tr&&window.visualViewport)return new mt(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new mt(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new mt(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new mt(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}h(D0,"getClientArea");class Ut{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=XD(e),o="0";return i&&(i.getPropertyValue?o=i.getPropertyValue(t):o=i.getAttribute(n)),Ut.convertToPixels(e,o)}static getBorderLeftWidth(e){return Ut.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Ut.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Ut.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Ut.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Ut.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Ut.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Ut.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Ut.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Ut.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Ut.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Ut.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Ut.getDimension(e,"margin-bottom","marginBottom")}}h(Ut,"SizeUtils");class mt{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new mt(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof mt?e:new mt(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}h(mt,"Dimension");mt.None=new mt(0,0);function v5(s){let e=s.offsetParent,t=s.offsetTop,n=s.offsetLeft;for(;(s=s.parentNode)!==null&&s!==document.body&&s!==document.documentElement;){t-=s.scrollTop;const i=C5(s)?null:XD(s);i&&(n-=i.direction!=="rtl"?s.scrollLeft:-s.scrollLeft),s===e&&(n+=Ut.getBorderLeftWidth(s),t+=Ut.getBorderTopWidth(s),t+=s.offsetTop,n+=s.offsetLeft,e=s.offsetParent)}return{left:n,top:t}}h(v5,"getTopLeftOffset");function Z$(s,e,t){typeof e=="number"&&(s.style.width=`${e}px`),typeof t=="number"&&(s.style.height=`${t}px`)}h(Z$,"size");function $n(s){let e=s.getBoundingClientRect();return{left:e.left+Pa.scrollX,top:e.top+Pa.scrollY,width:e.width,height:e.height}}h($n,"getDomNodePagePosition");const Pa=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function ds(s){let e=Ut.getMarginLeft(s)+Ut.getMarginRight(s);return s.offsetWidth+e}h(ds,"getTotalWidth");function Iy(s){let e=Ut.getBorderLeftWidth(s)+Ut.getBorderRightWidth(s),t=Ut.getPaddingLeft(s)+Ut.getPaddingRight(s);return s.offsetWidth-e-t}h(Iy,"getContentWidth");function J$(s){let e=Ut.getBorderTopWidth(s)+Ut.getBorderBottomWidth(s),t=Ut.getPaddingTop(s)+Ut.getPaddingBottom(s);return s.offsetHeight-e-t}h(J$,"getContentHeight");function NT(s){let e=Ut.getMarginTop(s)+Ut.getMarginBottom(s);return s.offsetHeight+e}h(NT,"getTotalHeight");function Oa(s,e){for(;s;){if(s===e)return!0;s=s.parentNode}return!1}h(Oa,"isAncestor$1");function w5(s,e,t){for(;s&&s.nodeType===s.ELEMENT_NODE;){if(s.classList.contains(e))return s;if(t){if(typeof t=="string"){if(s.classList.contains(t))return null}else if(s===t)return null}s=s.parentNode}return null}h(w5,"findParentWithClass");function wM(s,e,t){return!!w5(s,e,t)}h(wM,"hasParentWithClass");function C5(s){return s&&!!s.host&&!!s.mode}h(C5,"isShadowRoot");function vm(s){return!!ed(s)}h(vm,"isInShadowDOM");function ed(s){for(;s.parentNode;){if(s===document.body)return null;s=s.parentNode}return C5(s)?s:null}h(ed,"getShadowRoot");function Uu(){let s=document.activeElement;for(;s?.shadowRoot;)s=s.shadowRoot.activeElement;return s}h(Uu,"getActiveElement");function es(s=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",s.appendChild(e),e}h(es,"createStyleSheet");let Ny=null;function y5(){return Ny||(Ny=es()),Ny}h(y5,"getSharedStyleSheet");function Q$(s){var e,t;return!((e=s?.sheet)===null||e===void 0)&&e.rules?s.sheet.rules:!((t=s?.sheet)===null||t===void 0)&&t.cssRules?s.sheet.cssRules:[]}h(Q$,"getDynamicStyleSheetRules");function AT(s,e,t=y5()){!t||!e||t.sheet.insertRule(s+"{"+e+"}",0)}h(AT,"createCSSRule");function CM(s,e=y5()){if(!e)return;let t=Q$(e),n=[];for(let i=0;i<t.length;i++)t[i].selectorText.indexOf(s)!==-1&&n.push(i);for(let i=n.length-1;i>=0;i--)e.sheet.deleteRule(n[i])}h(CM,"removeCSSRulesContainingSelector");function S5(s){return typeof HTMLElement=="object"?s instanceof HTMLElement:s&&typeof s=="object"&&s.nodeType===1&&typeof s.nodeName=="string"}h(S5,"isHTMLElement");const be={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Pl?"webkitAnimationStart":"animationstart",ANIMATION_END:Pl?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Pl?"webkitAnimationIteration":"animationiteration"},ct={stop:function(s,e){s.preventDefault?s.preventDefault():s.returnValue=!1,e&&(s.stopPropagation?s.stopPropagation():s.cancelBubble=!0)}};function eq(s){let e=[];for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)e[t]=s.scrollTop,s=s.parentNode;return e}h(eq,"saveParentsScrollTop");function tq(s,e){for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)s.scrollTop!==e[t]&&(s.scrollTop=e[t]),s=s.parentNode}h(tq,"restoreParentsScrollTop");class wm extends z{constructor(e){super();this._onDidFocus=this._register(new P),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new P),this.onDidBlur=this._onDidBlur.event;let t=wm.hasFocusWithin(e),n=!1;const i=h(()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},"onFocus"),o=h(()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))},"onBlur");this._refreshStateHandler=()=>{wm.hasFocusWithin(e)!==t&&(t?o():i())},this._register(J(e,be.FOCUS,i,!0)),this._register(J(e,be.BLUR,o,!0)),this._register(J(e,be.FOCUS_IN,()=>this._refreshStateHandler())),this._register(J(e,be.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=ed(e),n=t?t.activeElement:document.activeElement;return Oa(n,e)}}h(wm,"FocusTracker");function wf(s){return new wm(s)}h(wf,"trackFocus");function j(s,...e){if(s.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}h(j,"append$1");function nq(s,e){return s.insertBefore(e,s.firstChild),e}h(nq,"prepend$1");function td(s,...e){s.innerText="",j(s,...e)}h(td,"reset");const iq=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Cm;(function(s){s.HTML="http://www.w3.org/1999/xhtml",s.SVG="http://www.w3.org/2000/svg"})(Cm||(Cm={}));function x5(s,e,t,...n){let i=iq.exec(e);if(!i)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let o=i[1]||"div",r;return s!==Cm.HTML?r=document.createElementNS(s,o):r=document.createElement(o),i[3]&&(r.id=i[3]),i[4]&&(r.className=i[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const l=t[a];typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...n),r}h(x5,"_$");function X(s,e,...t){return x5(Cm.HTML,s,e,...t)}h(X,"$$c");X.SVG=function(s,e,...t){return x5(Cm.SVG,s,e,...t)};function bo(...s){for(let e of s)e.style.display="",e.removeAttribute("aria-hidden")}h(bo,"show");function Oi(...s){for(let e of s)e.style.display="none",e.setAttribute("aria-hidden","true")}h(Oi,"hide");function oq(s){return Array.prototype.slice.call(document.getElementsByTagName(s),0)}h(oq,"getElementsByTagName");function yM(s){const e=window.devicePixelRatio*s;return Math.max(1,Math.floor(e))/window.devicePixelRatio}h(yM,"computeScreenAwareSize");function T5(s){window.open(s,"_blank","noopener")}h(T5,"windowOpenNoOpener");function sq(s){const e=h(()=>{s(),t=ir(e)},"step");let t=ir(e);return He(()=>t.dispose())}h(sq,"animate");f5.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function Jc(s){return s?`url('${g5.asBrowserUri(s).toString(!0).replace(/'/g,"%27")}')`:"url('')"}h(Jc,"asCSSUrl");function SM(s){return`'${s.replace(/'/g,"%27")}'`}h(SM,"asCSSPropertyValue");class El extends P{constructor(){super();this._subscriptions=new Q,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(J(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new Et(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(J(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(J(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(J(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(J(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(J(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return El.instance||(El.instance=new El),El.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}h(El,"ModifierKeyEmitter");function rq(s,e){window.matchMedia(s).addEventListener("change",e)}h(rq,"addMatchMediaChangeListener");const xM=2e4;let rc,jv,MT,Gv,RT;function aq(s){rc=document.createElement("div"),rc.className="monaco-aria-container";const e=h(()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),rc.appendChild(n),n},"createAlertContainer");jv=e(),MT=e();const t=h(()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),rc.appendChild(n),n},"createStatusContainer");Gv=t(),RT=t(),s.appendChild(rc)}h(aq,"setARIAContainer");function qn(s){!rc||(jv.textContent!==s?(Sn(MT),Qw(jv,s)):(Sn(jv),Qw(MT,s)))}h(qn,"alert");function Jw(s){!rc||(Ke?qn(s):Gv.textContent!==s?(Sn(RT),Qw(Gv,s)):(Sn(Gv),Qw(RT,s)))}h(Jw,"status");function Qw(s,e){Sn(s),e.length>xM&&(e=e.substr(0,xM)),s.textContent=e,s.style.visibility="hidden",s.style.visibility="visible"}h(Qw,"insertMessage");const ZD=Xe("markerDecorationsService"),Ui=Xe("textModelService");var eC=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class Vi extends z{constructor(e,t="",n="",i=!0,o){super();this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return eC(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}h(Vi,"Action");class Qc extends z{constructor(){super(...arguments);this._onBeforeRun=this._register(new P),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new P),this.onDidRun=this._onDidRun.event}run(e,t){return eC(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return eC(this,void 0,void 0,function*(){yield e.run(t)})}}h(Qc,"ActionRunner");class To extends Vi{constructor(e){super(To.ID,e,e?"separator text":"separator");this.checked=!1,this.enabled=!1}}h(To,"Separator");To.ID="vs.actions.separator";class L_{constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}get actions(){return this._actions}dispose(){}run(){return eC(this,void 0,void 0,function*(){})}}h(L_,"SubmenuAction");class k_ extends Vi{constructor(){super(k_.ID,p("submenu.empty","(empty)"),void 0,!1)}}h(k_,"EmptySubmenuAction");k_.ID="vs.actions.empty";const ln=Xe("commandService"),tt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new P,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(s,e){if(!s)throw new Error("invalid command");if(typeof s=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:s,handler:e})}if(s.description){const r=[];for(let l of s.description.args)r.push(l.constraint);const a=s.handler;s.handler=function(l,...d){return Ej(d,r),a(l,...d)}}const{id:t}=s;let n=this._commands.get(t);n||(n=new eo,this._commands.set(t,n));let i=n.unshift(s),o=He(()=>{i();const r=this._commands.get(t);r?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(s,e){return tt.registerCommand(s,(t,...n)=>t.get(ln).executeCommand(e,...n))}getCommand(s){const e=this._commands.get(s);if(!(!e||e.isEmpty()))return Qe.first(e)}getCommands(){const s=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&s.set(e,t)}return s}};tt.registerCommand("noop",()=>{});const ii=new Map;ii.set("false",!1);ii.set("true",!0);ii.set("isMac",Ke);ii.set("isLinux",ni);ii.set("isWindows",Vn);ii.set("isWeb",kd);ii.set("isMacNative",Ke&&!kd);ii.set("isEdge",mj);ii.set("isFirefox",gj);ii.set("isChrome",AP);ii.set("isSafari",pj);const lq=Object.prototype.hasOwnProperty;class se{static has(e){return ja.create(e)}static equals(e,t){return eh.create(e,t)}static regex(e,t){return ym.create(e,t)}static not(e){return nd.create(e)}static and(...e){return Ia.create(e,null)}static or(...e){return Mr.create(e,null,!0)}static deserialize(e,t=!1){if(!!e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return Mr.create(n.map(i=>this._deserializeAndExpression(i,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return Ia.create(n.map(i=>this._deserializeOne(i,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return E_.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return eh.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return ym.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return I0.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return I_.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return D_.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return A_.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return N_.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?nd.create(e.substr(1).trim()):ja.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(FO(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),i=e.lastIndexOf("/");if(n===i||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let o=e.slice(n+1,i),r=e[i+1]==="i"?"i":"";try{return new RegExp(o,r)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}h(se,"ContextKeyExpr");function dq(s,e){const t=s?s.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}h(dq,"expressionsAreEqualWithConstantSubstitution");function ju(s,e){return s.cmp(e)}h(ju,"cmp");class so{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Do.INSTANCE}}h(so,"ContextKeyFalseExpr");so.INSTANCE=new so;class Do{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return so.INSTANCE}}h(Do,"ContextKeyTrueExpr");Do.INSTANCE=new Do;class ja{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=ii.get(e);return typeof n=="boolean"?n?Do.INSTANCE:so.INSTANCE:new ja(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:k5(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=ii.get(this.key);return typeof e=="boolean"?e?Do.INSTANCE:so.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=nd.create(this.key,this)),this.negated}}h(ja,"ContextKeyDefinedExpr");class eh{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?ja.create(e,n):nd.create(e,n);const i=ii.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Do.INSTANCE:so.INSTANCE:new eh(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:Fh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=ii.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Do.INSTANCE:so.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=E_.create(this.key,this.value,this)),this.negated}}h(eh,"ContextKeyEqualsExpr");class I0{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new I0(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:Fh(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?lq.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=N0.create(this)),this.negated}}h(I0,"ContextKeyInExpr");class N0{constructor(e){this._actual=e,this.type=11}static create(e){return new N0(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}h(N0,"ContextKeyNotInExpr");class E_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?nd.create(e,n):ja.create(e,n);const i=ii.get(e);return typeof i=="boolean"?t===(i?"true":"false")?so.INSTANCE:Do.INSTANCE:new E_(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:Fh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=ii.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?so.INSTANCE:Do.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=eh.create(this.key,this.value,this)),this.negated}}h(E_,"ContextKeyNotEqualsExpr");class nd{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=ii.get(e);return typeof n=="boolean"?n?so.INSTANCE:Do.INSTANCE:new nd(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:k5(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=ii.get(this.key);return typeof e=="boolean"?e?so.INSTANCE:Do.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ja.create(this.key,this)),this.negated}}h(nd,"ContextKeyNotExpr");function A0(s,e){if(typeof s=="string"){const t=parseFloat(s);isNaN(t)||(s=t)}return typeof s=="string"||typeof s=="number"?e(s):so.INSTANCE}h(A0,"withFloatOrStr");class D_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return A0(t,i=>new D_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Fh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=A_.create(this.key,this.value,this)),this.negated}}h(D_,"ContextKeyGreaterExpr");class I_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return A0(t,i=>new I_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Fh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=N_.create(this.key,this.value,this)),this.negated}}h(I_,"ContextKeyGreaterEqualsExpr");class N_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return A0(t,i=>new N_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Fh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=I_.create(this.key,this.value,this)),this.negated}}h(N_,"ContextKeySmallerExpr");class A_{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return A0(t,i=>new A_(e,i,n))}cmp(e){return e.type!==this.type?this.type-e.type:Fh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D_.create(this.key,this.value,this)),this.negated}}h(A_,"ContextKeySmallerEqualsExpr");class ym{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new ym(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=M0.create(this)),this.negated}}h(ym,"ContextKeyRegexExpr");class M0{constructor(e){this._actual=e,this.type=8}static create(e){return new M0(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}h(M0,"ContextKeyNotRegexExpr");function L5(s){let e=null;for(let t=0,n=s.length;t<n;t++){const i=s[t].substituteConstants();if(s[t]!==i&&e===null){e=[];for(let o=0;o<t;o++)e[o]=s[o]}e!==null&&(e[t]=i)}return e===null?s:e}h(L5,"eliminateConstantsInArray");class Ia{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return Ia._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=ju(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=L5(this.expr);return e===this.expr?this:Ia.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let i=!1;for(const o of e)if(!!o){if(o.type===1){i=!0;continue}if(o.type===0)return so.INSTANCE;if(o.type===6){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&i)return Do.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(ju);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==9)break;n.pop();const r=n.pop(),a=n.length===0,l=Mr.create(o.expr.map(d=>Ia.create([d,r],null)),null,a);l&&(n.push(l),n.sort(ju))}return n.length===1?n[0]:new Ia(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=Mr.create(e,this,!0)}return this.negated}}h(Ia,"ContextKeyAndExpr");class Mr{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return Mr._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=ju(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=L5(this.expr);return e===this.expr?this:Mr.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],o=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(!!l){if(l.type===0){o=!0;continue}if(l.type===1)return Do.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&o)return so.INSTANCE;i.sort(ju)}if(i.length!==0){if(i.length===1)return i[0];for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)E5(i[r],i[a])&&(i.splice(a,1),a--);if(i.length===1)return i[0]}return new Mr(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const r of tC(t))for(const a of tC(n))i.push(Ia.create([r,a],null));const o=e.length===0;e.unshift(Mr.create(i,null,o))}this.negated=e[0]}return this.negated}}h(Mr,"ContextKeyOrExpr");class re extends ja{constructor(e,t,n){super(e,null);this._defaultValue=t,typeof n=="object"?re._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&re._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return re._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return eh.create(this.key,e)}}h(re,"RawContextKey");re._info=[];const De=Xe("contextKeyService"),cq="setContext";function k5(s,e){return s<e?-1:s>e?1:0}h(k5,"cmp1");function Fh(s,e,t,n){return s<t?-1:s>t?1:e<n?-1:e>n?1:0}h(Fh,"cmp2");function E5(s,e){if(e.type===6&&s.type!==9&&s.type!==6){for(const i of e.expr)if(s.equals(i))return!0}const t=s.negate(),n=tC(t).concat(tC(e));n.sort(ju);for(let i=0;i<n.length;i++){const r=n[i].negate();for(let a=i+1;a<n.length;a++){const l=n[a];if(r.equals(l))return!0}}return!1}h(E5,"implies");function tC(s){return s.type===9?s.expr:[s]}h(tC,"getTerminals");class D5{constructor(){this.data=new Map}add(e,t){Vv(Yo(e)),Vv(Wi(t)),Vv(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}h(D5,"RegistryImpl");const dn=new D5;var fs;(function(s){s.DARK="dark",s.LIGHT="light",s.HIGH_CONTRAST="hc"})(fs||(fs={}));const Mt=Xe("themeService");var PT;(function(s){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}h(e,"isThemeColor"),s.isThemeColor=e})(PT||(PT={}));function Yt(s){return{id:s}}h(Yt,"themeColorFromId");var vt;(function(s){function e(d){return d&&typeof d=="object"&&typeof d.id=="string"&&(typeof d.color>"u"||PT.isThemeColor(d.color))}h(e,"isThemeIcon"),s.isThemeIcon=e;const t=new RegExp(`^\\$\\((${_i.iconNameExpression}(?:${_i.iconModifierExpression})?)\\)$`);function n(d){const c=t.exec(d);if(!c)return;let[,u]=c;return{id:u}}h(n,"fromString"),s.fromString=n;function i(d){return{id:d}}h(i,"fromId"),s.fromId=i;function o(d,c){let u=d.id;const f=u.lastIndexOf("~");return f!==-1&&(u=u.substring(0,f)),c&&(u=`${u}~${c}`),{id:u}}h(o,"modify"),s.modify=o;function r(d){const c=d.id.lastIndexOf("~");if(c!==-1)return d.id.substring(c+1)}h(r,"getModifier"),s.getModifier=r;function a(d,c){var u,f;return d.id===c.id&&((u=d.color)===null||u===void 0?void 0:u.id)===((f=c.color)===null||f===void 0?void 0:f.id)}h(a,"isEqual"),s.isEqual=a;function l(d,c){return{id:d.id,color:c?Yt(c):void 0}}h(l,"asThemeIcon"),s.asThemeIcon=l,s.asClassNameArray=_i.asClassNameArray,s.asClassName=_i.asClassName,s.asCSSSelector=_i.asCSSSelector})(vt||(vt={}));function nC(s){switch(s){case fs.DARK:return"vs-dark";case fs.HIGH_CONTRAST:return"hc-black";default:return"vs"}}h(nC,"getThemeTypeSelector");const I5={ThemingContribution:"base.contributions.theming"};class N5{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new P}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),He(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}h(N5,"ThemingRegistry");let A5=new N5;dn.add(I5.ThemingContribution,A5);function It(s){return A5.onColorThemeChange(s)}h(It,"registerThemingParticipant");class M5 extends z{constructor(e){super();this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}h(M5,"Themable");var hq=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},TM=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};function Nu(s){return s.command!==void 0}h(Nu,"isIMenuItem");class R{constructor(e){this.id=R._idPool++,this._debugName=e}}h(R,"MenuId");R._idPool=0;R.CommandPalette=new R("CommandPalette");R.DebugBreakpointsContext=new R("DebugBreakpointsContext");R.DebugCallStackContext=new R("DebugCallStackContext");R.DebugConsoleContext=new R("DebugConsoleContext");R.DebugVariablesContext=new R("DebugVariablesContext");R.DebugWatchContext=new R("DebugWatchContext");R.DebugToolBar=new R("DebugToolBar");R.EditorContext=new R("EditorContext");R.SimpleEditorContext=new R("SimpleEditorContext");R.EditorContextCopy=new R("EditorContextCopy");R.EditorContextPeek=new R("EditorContextPeek");R.EditorTitle=new R("EditorTitle");R.EditorTitleRun=new R("EditorTitleRun");R.EditorTitleContext=new R("EditorTitleContext");R.EmptyEditorGroup=new R("EmptyEditorGroup");R.EmptyEditorGroupContext=new R("EmptyEditorGroupContext");R.ExplorerContext=new R("ExplorerContext");R.ExtensionContext=new R("ExtensionContext");R.GlobalActivity=new R("GlobalActivity");R.LayoutControlMenuSubmenu=new R("LayoutControlMenuSubmenu");R.LayoutControlMenu=new R("LayoutControlMenu");R.MenubarMainMenu=new R("MenubarMainMenu");R.MenubarAppearanceMenu=new R("MenubarAppearanceMenu");R.MenubarDebugMenu=new R("MenubarDebugMenu");R.MenubarEditMenu=new R("MenubarEditMenu");R.MenubarCopy=new R("MenubarCopy");R.MenubarFileMenu=new R("MenubarFileMenu");R.MenubarGoMenu=new R("MenubarGoMenu");R.MenubarHelpMenu=new R("MenubarHelpMenu");R.MenubarLayoutMenu=new R("MenubarLayoutMenu");R.MenubarNewBreakpointMenu=new R("MenubarNewBreakpointMenu");R.MenubarPanelAlignmentMenu=new R("MenubarPanelAlignmentMenu");R.MenubarPanelPositionMenu=new R("MenubarPanelPositionMenu");R.MenubarPreferencesMenu=new R("MenubarPreferencesMenu");R.MenubarRecentMenu=new R("MenubarRecentMenu");R.MenubarSelectionMenu=new R("MenubarSelectionMenu");R.MenubarSwitchEditorMenu=new R("MenubarSwitchEditorMenu");R.MenubarSwitchGroupMenu=new R("MenubarSwitchGroupMenu");R.MenubarTerminalMenu=new R("MenubarTerminalMenu");R.MenubarViewMenu=new R("MenubarViewMenu");R.MenubarHomeMenu=new R("MenubarHomeMenu");R.OpenEditorsContext=new R("OpenEditorsContext");R.ProblemsPanelContext=new R("ProblemsPanelContext");R.SCMChangeContext=new R("SCMChangeContext");R.SCMResourceContext=new R("SCMResourceContext");R.SCMResourceFolderContext=new R("SCMResourceFolderContext");R.SCMResourceGroupContext=new R("SCMResourceGroupContext");R.SCMSourceControl=new R("SCMSourceControl");R.SCMTitle=new R("SCMTitle");R.SearchContext=new R("SearchContext");R.StatusBarWindowIndicatorMenu=new R("StatusBarWindowIndicatorMenu");R.StatusBarRemoteIndicatorMenu=new R("StatusBarRemoteIndicatorMenu");R.TestItem=new R("TestItem");R.TestItemGutter=new R("TestItemGutter");R.TestPeekElement=new R("TestPeekElement");R.TestPeekTitle=new R("TestPeekTitle");R.TouchBarContext=new R("TouchBarContext");R.TitleBarContext=new R("TitleBarContext");R.TunnelContext=new R("TunnelContext");R.TunnelPrivacy=new R("TunnelPrivacy");R.TunnelProtocol=new R("TunnelProtocol");R.TunnelPortInline=new R("TunnelInline");R.TunnelTitle=new R("TunnelTitle");R.TunnelLocalAddressInline=new R("TunnelLocalAddressInline");R.TunnelOriginInline=new R("TunnelOriginInline");R.ViewItemContext=new R("ViewItemContext");R.ViewContainerTitle=new R("ViewContainerTitle");R.ViewContainerTitleContext=new R("ViewContainerTitleContext");R.ViewTitle=new R("ViewTitle");R.ViewTitleContext=new R("ViewTitleContext");R.CommentThreadTitle=new R("CommentThreadTitle");R.CommentThreadActions=new R("CommentThreadActions");R.CommentTitle=new R("CommentTitle");R.CommentActions=new R("CommentActions");R.InteractiveToolbar=new R("InteractiveToolbar");R.InteractiveCellTitle=new R("InteractiveCellTitle");R.InteractiveCellExecute=new R("InteractiveCellExecute");R.InteractiveInputExecute=new R("InteractiveInputExecute");R.NotebookToolbar=new R("NotebookToolbar");R.NotebookCellTitle=new R("NotebookCellTitle");R.NotebookCellInsert=new R("NotebookCellInsert");R.NotebookCellBetween=new R("NotebookCellBetween");R.NotebookCellListTop=new R("NotebookCellTop");R.NotebookCellExecute=new R("NotebookCellExecute");R.NotebookCellExecutePrimary=new R("NotebookCellExecutePrimary");R.NotebookDiffCellInputTitle=new R("NotebookDiffCellInputTitle");R.NotebookDiffCellMetadataTitle=new R("NotebookDiffCellMetadataTitle");R.NotebookDiffCellOutputsTitle=new R("NotebookDiffCellOutputsTitle");R.NotebookOutputToolbar=new R("NotebookOutputToolbar");R.NotebookEditorLayoutConfigure=new R("NotebookEditorLayoutConfigure");R.BulkEditTitle=new R("BulkEditTitle");R.BulkEditContext=new R("BulkEditContext");R.TimelineItemContext=new R("TimelineItemContext");R.TimelineTitle=new R("TimelineTitle");R.TimelineTitleContext=new R("TimelineTitleContext");R.AccountsContext=new R("AccountsContext");R.PanelTitle=new R("PanelTitle");R.AuxiliaryBarTitle=new R("AuxiliaryBarTitle");R.TerminalInstanceContext=new R("TerminalInstanceContext");R.TerminalEditorInstanceContext=new R("TerminalEditorInstanceContext");R.TerminalNewDropdownContext=new R("TerminalNewDropdownContext");R.TerminalTabContext=new R("TerminalTabContext");R.TerminalTabEmptyAreaContext=new R("TerminalTabEmptyAreaContext");R.TerminalInlineTabContext=new R("TerminalInlineTabContext");R.WebviewContext=new R("WebviewContext");R.InlineCompletionsActions=new R("InlineCompletionsActions");R.NewFile=new R("NewFile");const Wh=Xe("menuService"),Lo=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new P,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:s=>s===R.CommandPalette}}addCommand(s){return this.addCommands(Qe.single(s))}addCommands(s){for(const e of s)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),He(()=>{let e=!1;for(const t of s)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(s){return this._commands.get(s)}getCommands(){const s=new Map;return this._commands.forEach((e,t)=>s.set(t,e)),s}appendMenuItem(s,e){return this.appendMenuItems(Qe.single({id:s,item:e}))}appendMenuItems(s){const e=new Set,t=new eo;for(const{id:n,item:i}of s){let o=this._menuItems.get(n);o||(o=new eo,this._menuItems.set(n,o)),t.push(o.push(i)),e.add(n)}return this._onDidChangeMenu.fire(e),He(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(s){let e;return this._menuItems.has(s)?e=[...this._menuItems.get(s)]:e=[],s===R.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(s){const e=new Set;for(const t of s)Nu(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||s.push({command:t})})}};class R0 extends L_{constructor(e,t,n,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu");this.item=e,this._menuService=t,this._contextKeyService=n,this._options=i}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,i]of n)i.length>0&&(e.push(...i),e.push(new To));return e.length&&e.pop(),e}}h(R0,"SubmenuItemAction");let id=h(class R5{constructor(e,t,n,i,o){var r,a;if(this._commandService=o,this.id=e.id,this.label=n?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(r=e.tooltip)===null||r===void 0?void 0:r.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||i.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const l=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=i.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}this.item=e,this.alt=t?new R5(t,void 0,n,i,o):void 0,this._options=n,vt.isThemeIcon(e.icon)&&(this.class=_i.asClassName(e.icon))}dispose(){}run(...e){var t,n;let i=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(i=[...i,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(i=[...i,...e]),this._commandService.executeCommand(this.id,...i)}},"MenuItemAction");id=hq([TM(3,De),TM(4,ln)],id);class Sm{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Bo===1){if(e&&e.win)return e.win}else if(Bo===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Sm.bindToCurrentPlatform(e);if(t&&t.primary){const n=DT(t.primary,Bo);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,i=t.secondary.length;n<i;n++){const o=t.secondary[n],r=DT(o,Bo);r&&this._registerDefaultKeybinding(r,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),tt.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Sm._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,i,o,r){Bo===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:r,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(fq)),this._cachedMergedKeybindings.slice(0)}}h(Sm,"KeybindingsRegistryImpl");const Ci=new Sm,uq={EditorModes:"platform.keybindingsRegistry"};dn.add(uq.EditorModes,Ci);function fq(s,e){return s.weight1!==e.weight1?s.weight1-e.weight1:s.command<e.command?-1:s.command>e.command?1:s.weight2-e.weight2}h(fq,"sorter");const Yr=Xe("telemetryService");class M_{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=se.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Ci.registerKeybindingRule(i)}}tt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){Lo.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}h(M_,"Command");class Vh extends M_{constructor(){super(...arguments);this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((i,o)=>o.priority-i.priority),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i].implementation===n){this._implementations.splice(i,1);return}}}}runCommand(e,t){const n=e.get(Cs);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const i of this._implementations){const o=i.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${i.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}h(Vh,"MultiCommand");class JD extends M_{constructor(e,t){super(t);this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}h(JD,"ProxyCommand");class zn extends M_{static bindToContribution(e){return h(class extends zn{constructor(n){super(n);this._callback=n.handler}runEditorCommand(n,i,o){const r=e(i);r&&this._callback(r,o)}},"EditorControllerCommandImpl")}runCommand(e,t){const n=e.get(ht),i=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(!!i)return i.invokeWithinContext(o=>{if(!!o.get(De).contextMatchesRules(Qi(this.precondition)))return this.runEditorCommand(o,i,t)})}}h(zn,"EditorCommand");class le extends zn{constructor(e){super(le.convertOptions(e));this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=R.EditorContext),i.title||(i.title=e.label),i.when=se.and(e.precondition,i.when),i}return h(n,"withDefaults"),Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Yr).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}h(le,"EditorAction");class QD extends le{constructor(){super(...arguments);this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const o=i[1](e,t,n);if(o)return typeof o=="boolean"?void 0:o}}}h(QD,"MultiEditorAction");function Xr(s,e){tt.registerCommand(s,function(t,...n){const i=t.get(Ge),[o,r]=n;bt(Ce.isUri(o)),bt(W.isIPosition(r));const a=t.get(Bt).getModel(o);if(a){const l=W.lift(r);return i.invokeFunction(e,a,l,...n.slice(2))}return t.get(Ui).createModelReference(o).then(l=>new Promise((d,c)=>{try{const u=i.invokeFunction(e,l.object.textEditorModel,W.lift(r),n.slice(2));d(u)}catch(u){c(u)}}).finally(()=>{l.dispose()}))})}h(Xr,"registerModelAndPositionCommand");function te(s){return vo.INSTANCE.registerEditorCommand(s),s}h(te,"registerEditorCommand");function ne(s){const e=new s;return vo.INSTANCE.registerEditorAction(e),e}h(ne,"registerEditorAction");function P5(s){return vo.INSTANCE.registerEditorAction(s),s}h(P5,"registerMultiEditorAction");function O5(s){vo.INSTANCE.registerEditorAction(s)}h(O5,"registerInstantiatedEditorAction");function lt(s,e){vo.INSTANCE.registerEditorContribution(s,e)}h(lt,"registerEditorContribution");var Ec;(function(s){function e(r){return vo.INSTANCE.getEditorCommand(r)}h(e,"getEditorCommand"),s.getEditorCommand=e;function t(){return vo.INSTANCE.getEditorActions()}h(t,"getEditorActions"),s.getEditorActions=t;function n(){return vo.INSTANCE.getEditorContributions()}h(n,"getEditorContributions"),s.getEditorContributions=n;function i(r){return vo.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}h(i,"getSomeEditorContributions"),s.getSomeEditorContributions=i;function o(){return vo.INSTANCE.getDiffEditorContributions()}h(o,"getDiffEditorContributions"),s.getDiffEditorContributions=o})(Ec||(Ec={}));const gq={EditorCommonContributions:"editor.contributions"};class vo{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}h(vo,"EditorContributionRegistry");vo.INSTANCE=new vo;dn.add(gq.EditorCommonContributions,vo.INSTANCE);function R_(s){return s.register(),s}h(R_,"registerCommand$3");const F5=R_(new Vh({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:R.MenubarEditMenu,group:"1_do",title:p({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:R.CommandPalette,group:"",title:p("undo","Undo"),order:1}]}));R_(new JD(F5,{id:"default:undo",precondition:void 0}));const W5=R_(new Vh({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:R.MenubarEditMenu,group:"1_do",title:p({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:R.CommandPalette,group:"",title:p("redo","Redo"),order:1}]}));R_(new JD(W5,{id:"default:redo",precondition:void 0}));const pq=R_(new Vh({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:R.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:R.CommandPalette,group:"",title:p("selectAll","Select All"),order:1}]}));var mq=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_q=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let xm=h(class{constructor(e,t){}dispose(){}},"MarkerDecorationsContribution");xm.ID="editor.contrib.markerDecorations";xm=mq([_q(1,ZD)],xm);lt(xm.ID,xm);class eI extends z{constructor(e,t){super();this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}}h(eI,"ElementSizeObserver");const bq=Object.prototype.hasOwnProperty;function vq(s,e){for(let t in s)if(bq.call(s,t)&&e({key:t,value:s[t]},function(){delete s[t]})===!1)return}h(vq,"forEach");class V5{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);!n||(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);!n||n.forEach(t)}}h(V5,"SetMap");function wq(s){const e=s.wordWrap;e===!0?s.wordWrap="on":e===!1&&(s.wordWrap="off");const t=s.lineNumbers;t===!0?s.lineNumbers="on":t===!1&&(s.lineNumbers="off"),s.autoClosingBrackets===!1&&(s.autoClosingBrackets="never",s.autoClosingQuotes="never",s.autoSurround="never"),s.cursorBlinking==="visible"&&(s.cursorBlinking="solid");const o=s.renderWhitespace;o===!0?s.renderWhitespace="boundary":o===!1&&(s.renderWhitespace="none");const r=s.renderLineHighlight;r===!0?s.renderLineHighlight="line":r===!1&&(s.renderLineHighlight="none");const a=s.acceptSuggestionOnEnter;a===!0?s.acceptSuggestionOnEnter="on":a===!1&&(s.acceptSuggestionOnEnter="off");const l=s.tabCompletion;l===!1?s.tabCompletion="off":l===!0&&(s.tabCompletion="onlySnippets");const d=s.suggest;if(d&&typeof d.filteredTypes=="object"&&d.filteredTypes){const v={};v.method="showMethods",v.function="showFunctions",v.constructor="showConstructors",v.deprecated="showDeprecated",v.field="showFields",v.variable="showVariables",v.class="showClasses",v.struct="showStructs",v.interface="showInterfaces",v.module="showModules",v.property="showProperties",v.event="showEvents",v.operator="showOperators",v.unit="showUnits",v.value="showValues",v.constant="showConstants",v.enum="showEnums",v.enumMember="showEnumMembers",v.keyword="showKeywords",v.text="showWords",v.color="showColors",v.file="showFiles",v.reference="showReferences",v.folder="showFolders",v.typeParameter="showTypeParameters",v.snippet="showSnippets",vq(v,C=>{const w=d.filteredTypes[C.key];w===!1&&(d[C.value]=w)})}const c=s.hover;c===!0?s.hover={enabled:!0}:c===!1&&(s.hover={enabled:!1});const u=s.parameterHints;u===!0?s.parameterHints={enabled:!0}:u===!1&&(s.parameterHints={enabled:!1});const f=s.autoIndent;f===!0?s.autoIndent="full":f===!1&&(s.autoIndent="advanced");const g=s.matchBrackets;g===!0?s.matchBrackets="always":g===!1&&(s.matchBrackets="never");const{renderIndentGuides:m,highlightActiveIndentGuide:b}=s;s.guides||(s.guides={}),m!==void 0&&(s.guides.indentation=!!m),b!==void 0&&(s.guides.highlightActiveIndentation=!!b)}h(wq,"migrateOptions");class B5{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new P,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}}h(B5,"TabFocusImpl");const iC=new B5,lo=Xe("accessibilityService"),P_=new re("accessibilityModeEnabled",!1);var Cq=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},yq=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let OT=h(class extends z{constructor(e,t,n,i){super();this._accessibilityService=i,this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new P),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new mD,this.isSimpleWidget=e,this._containerObserver=this._register(new eI(n,t.dimension)),this._rawOptions=LM(t),this._validatedOptions=xa.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(Ua.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(iC.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(lT.onDidChange(()=>this._recomputeOptions())),this._register(ff.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=xa.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=Ol.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:iC.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return xa.computeOptions(this._validatedOptions,i)}_readEnvConfiguration(){return{extraEditorClassName:xq(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Pl||Eo,pixelRatio:ff.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return lT.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=LM(e);!xa.applyUpdate(this._rawOptions,t)||(this._validatedOptions=xa.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=Sq(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}},"EditorConfiguration");OT=Cq([yq(3,lo)],OT);function Sq(s){let e=0;for(;s;)s=Math.floor(s/10),e++;return e||1}h(Sq,"digitCount");function xq(){let s="";return!vs&&!ND&&(s+="no-user-select "),vs&&(s+="no-minimap-shadow "),Ke&&(s+="mac "),s}h(xq,"getExtraEditorClassName");class H5{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}h(H5,"ValidatedEditorOptions");class z5{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}h(z5,"ComputedEditorOptions");class xa{static validateOptions(e){const t=new H5;for(const n of Du){const i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){const n=new z5;for(const i of Du)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?xo(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!xa._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const o of Du){const r=!xa._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=r,r&&(i=!0)}return i?new pD(n):null}static applyUpdate(e,t){let n=!1;for(const i of Du)if(t.hasOwnProperty(i.name)){const o=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=o.newValue,n=n||o.didChange}return n}}h(xa,"EditorOptionsUtil");function LM(s){const e=ba(s);return wq(e),e}h(LM,"deepCloneAndMigrateOptions");function vn(s,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const o=`$memoize$${e}`;t[n]=function(...r){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,r)}),this[o]}}h(vn,"memoize");var Tq=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},kt;(function(s){s.Tap="-monaco-gesturetap",s.Change="-monaco-gesturechange",s.Start="-monaco-gesturestart",s.End="-monaco-gesturesend",s.Contextmenu="-monaco-gesturecontextmenu"})(kt||(kt={}));class dt extends z{constructor(){super();this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(J(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(J(document,"touchend",e=>this.onTouchEnd(e))),this._register(J(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return dt.isTouchDevice()?(dt.INSTANCE||(dt.INSTANCE=new dt),dt.INSTANCE.targets.push(e),{dispose:()=>{dt.INSTANCE.targets=dt.INSTANCE.targets.filter(t=>t!==e)}}):z.None}static ignoreTarget(e){return dt.isTouchDevice()?(dt.INSTANCE||(dt.INSTANCE=new dt),dt.INSTANCE.ignoreTargets.push(e),{dispose:()=>{dt.INSTANCE.ignoreTargets=dt.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):z.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let r=this.newGestureEvent(kt.Start,o.target);r.pageX=o.pageX,r.pageY=o.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let i=0,o=e.changedTouches.length;i<o;i++){let r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}let a=this.activeTouches[r.identifier],l=Date.now()-a.initialTimeStamp;if(l<dt.HOLD_DELAY&&Math.abs(a.initialPageX-Ro(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ro(a.rollingPageY))<30){let d=this.newGestureEvent(kt.Tap,a.initialTarget);d.pageX=Ro(a.rollingPageX),d.pageY=Ro(a.rollingPageY),this.dispatchEvent(d)}else if(l>=dt.HOLD_DELAY&&Math.abs(a.initialPageX-Ro(a.rollingPageX))<30&&Math.abs(a.initialPageY-Ro(a.rollingPageY))<30){let d=this.newGestureEvent(kt.Contextmenu,a.initialTarget);d.pageX=Ro(a.rollingPageX),d.pageY=Ro(a.rollingPageY),this.dispatchEvent(d)}else if(n===1){let d=Ro(a.rollingPageX),c=Ro(a.rollingPageY),u=Ro(a.rollingTimestamps)-a.rollingTimestamps[0],f=d-a.rollingPageX[0],g=c-a.rollingPageY[0];const m=this.targets.filter(b=>a.initialTarget instanceof Node&&b.contains(a.initialTarget));this.inertia(m,t,Math.abs(f)/u,f>0?1:-1,d,Math.abs(g)/u,g>0?1:-1,c)}this.dispatchEvent(this.newGestureEvent(kt.End,a.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===kt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>dt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===kt.Change||e.type===kt.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,i,o,r,a,l){this.handle=ir(()=>{let d=Date.now(),c=d-t,u=0,f=0,g=!0;n+=dt.SCROLL_FRICTION*c,r+=dt.SCROLL_FRICTION*c,n>0&&(g=!1,u=i*n*c),r>0&&(g=!1,f=a*r*c);let m=this.newGestureEvent(kt.Change);m.translationX=u,m.translationY=f,e.forEach(b=>b.dispatchEvent(m)),g||this.inertia(e,d,n,i,o+u,r,a,l+f)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let r=this.activeTouches[o.identifier],a=this.newGestureEvent(kt.Change,r.initialTarget);a.translationX=o.pageX-Ro(r.rollingPageX),a.translationY=o.pageY-Ro(r.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(o.pageX),r.rollingPageY.push(o.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}h(dt,"Gesture");dt.SCROLL_FRICTION=-.005;dt.HOLD_DELAY=700;dt.CLEAR_TAP_COUNT_TIME=400;Tq([vn],dt,"isTouchDevice",null);function bg(s,e){let t=new Co(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}h(bg,"standardMouseMoveMerger");class Nd{constructor(){this._hooks=new Q,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,i,o){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=i,this._onStopCallback=o;const r=Zw.getSameOriginWindowChain(),a=tr?"pointermove":"mousemove",l="mouseup",d=r.map(u=>u.window.document),c=ed(e);c&&d.unshift(c);for(const u of d)this._hooks.add(YD(u,a,f=>{if(f.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(f)},(f,g)=>this._mouseMoveEventMerger(f,g))),this._hooks.add(J(u,l,f=>this.stopMonitoring(!0)));if(Zw.hasDifferentOriginAncestor()){let u=r[r.length-1];this._hooks.add(J(u.window.document,"mouseout",f=>{new Co(f).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(J(u.window.document,"mouseover",f=>{new Co(f).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(J(u.window.document.body,"mouseleave",f=>{this.stopMonitoring(!0)}))}}}h(Nd,"GlobalMouseMoveMonitor");function Wl(s,e){const t=Math.pow(10,e);return Math.round(s*t)/t}h(Wl,"roundFloat");class $e{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Wl(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}h($e,"RGBA");class hs{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Wl(Math.max(Math.min(1,t),0),3),this.l=Wl(Math.max(Math.min(1,n),0),3),this.a=Wl(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,o=e.a,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,d=0;const c=(a+r)/2,u=r-a;if(u>0){switch(d=Math.min(c<=.5?u/(2*c):u/(2-2*c),1),r){case t:l=(n-i)/u+(n<i?6:0);break;case n:l=(i-t)/u+2;break;case i:l=(t-n)/u+4;break}l*=60,l=Math.round(l)}return new hs(l,d,c,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:o}=e;let r,a,l;if(n===0)r=a=l=i;else{const d=i<.5?i*(1+n):i+n-i*n,c=2*i-d;r=hs._hue2rgb(c,d,t+1/3),a=hs._hue2rgb(c,d,t),l=hs._hue2rgb(c,d,t-1/3)}return new $e(Math.round(r*255),Math.round(a*255),Math.round(l*255),o)}}h(hs,"HSLA");class qs{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Wl(Math.max(Math.min(1,t),0),3),this.v=Wl(Math.max(Math.min(1,n),0),3),this.a=Wl(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(t,n,i),r=Math.min(t,n,i),a=o-r,l=o===0?0:a/o;let d;return a===0?d=0:o===t?d=((n-i)/a%6+6)%6:o===n?d=(i-t)/a+2:d=(t-n)/a+4,new qs(Math.round(d*60),l,o,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:o}=e,r=i*n,a=r*(1-Math.abs(t/60%2-1)),l=i-r;let[d,c,u]=[0,0,0];return t<60?(d=r,c=a):t<120?(d=a,c=r):t<180?(c=r,u=a):t<240?(c=a,u=r):t<300?(d=a,u=r):t<=360&&(d=r,u=a),d=Math.round((d+l)*255),c=Math.round((c+l)*255),u=Math.round((u+l)*255),new $e(d,c,u,o)}}h(qs,"HSVA");class H{constructor(e){if(e)if(e instanceof $e)this.rgba=e;else if(e instanceof hs)this._hsla=e,this.rgba=hs.toRGBA(e);else if(e instanceof qs)this._hsva=e,this.rgba=qs.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return H.Format.CSS.parseHex(e)||H.red}get hsla(){return this._hsla?this._hsla:hs.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:qs.fromRGBA(this.rgba)}equals(e){return!!e&&$e.equals(this.rgba,e.rgba)&&hs.equals(this.hsla,e.hsla)&&qs.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=H._relativeLuminanceForComponent(this.rgba.r),t=H._relativeLuminanceForComponent(this.rgba.g),n=H._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Wl(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new H(new hs(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new H(new hs(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:o}=this.rgba;return new H(new $e(t,n,i,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new H(new $e(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=H.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-i)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(i-o)/i,e.darken(n)}}h(H,"Color");H.white=new H(new $e(255,255,255,1));H.black=new H(new $e(0,0,0,1));H.red=new H(new $e(255,0,0,1));H.blue=new H(new $e(0,0,255,1));H.green=new H(new $e(0,255,0,1));H.cyan=new H(new $e(0,255,255,1));H.lightgrey=new H(new $e(211,211,211,1));H.transparent=new H(new $e(0,0,0,0));(function(s){(function(e){(function(t){function n(g){return g.rgba.a===1?`rgb(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b})`:s.Format.CSS.formatRGBA(g)}h(n,"formatRGB"),t.formatRGB=n;function i(g){return`rgba(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b}, ${+g.rgba.a.toFixed(2)})`}h(i,"formatRGBA"),t.formatRGBA=i;function o(g){return g.hsla.a===1?`hsl(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%)`:s.Format.CSS.formatHSLA(g)}h(o,"formatHSL"),t.formatHSL=o;function r(g){return`hsla(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%, ${g.hsla.a.toFixed(2)})`}h(r,"formatHSLA"),t.formatHSLA=r;function a(g){const m=g.toString(16);return m.length!==2?"0"+m:m}h(a,"_toTwoDigitHex");function l(g){return`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}`}h(l,"formatHex"),t.formatHex=l;function d(g,m=!1){return m&&g.rgba.a===1?s.Format.CSS.formatHex(g):`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}${a(Math.round(g.rgba.a*255))}`}h(d,"formatHexA"),t.formatHexA=d;function c(g){return g.isOpaque()?s.Format.CSS.formatHex(g):s.Format.CSS.formatRGBA(g)}h(c,"format"),t.format=c;function u(g){const m=g.length;if(m===0||g.charCodeAt(0)!==35)return null;if(m===7){const b=16*f(g.charCodeAt(1))+f(g.charCodeAt(2)),v=16*f(g.charCodeAt(3))+f(g.charCodeAt(4)),C=16*f(g.charCodeAt(5))+f(g.charCodeAt(6));return new s(new $e(b,v,C,1))}if(m===9){const b=16*f(g.charCodeAt(1))+f(g.charCodeAt(2)),v=16*f(g.charCodeAt(3))+f(g.charCodeAt(4)),C=16*f(g.charCodeAt(5))+f(g.charCodeAt(6)),w=16*f(g.charCodeAt(7))+f(g.charCodeAt(8));return new s(new $e(b,v,C,w/255))}if(m===4){const b=f(g.charCodeAt(1)),v=f(g.charCodeAt(2)),C=f(g.charCodeAt(3));return new s(new $e(16*b+b,16*v+v,16*C+C))}if(m===5){const b=f(g.charCodeAt(1)),v=f(g.charCodeAt(2)),C=f(g.charCodeAt(3)),w=f(g.charCodeAt(4));return new s(new $e(16*b+b,16*v+v,16*C+C,(16*w+w)/255))}return null}h(u,"parseHex"),t.parseHex=u;function f(g){switch(g){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}h(f,"_parseHexDigit")})(e.CSS||(e.CSS={}))})(s.Format||(s.Format={}))})(H||(H={}));const P0={JSONContribution:"base.contributions.json"};function Lq(s){return s.length>0&&s.charAt(s.length-1)==="#"?s.substring(0,s.length-1):s}h(Lq,"normalizeId");class K5{constructor(){this._onDidChangeSchema=new P,this.schemasById={}}registerSchema(e,t){this.schemasById[Lq(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}h(K5,"JSONContributionRegistry");const kq=new K5;dn.add(P0.JSONContribution,kq);function U5(s){return`--vscode-${s.replace(/\./g,"-")}`}h(U5,"asCssVariableName");const j5={ColorContribution:"base.contributions.colors"};class G5{constructor(){this._onDidChangeSchema=new P,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,o){let r={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:o};this.colorsById[e]=r;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const i=n.defaults[t.type];return ua(i,t)}}getColorSchema(){return this.colorSchema}toString(){let e=h((t,n)=>{let i=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return i!==o?i-o:t.localeCompare(n)},"sorter");return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}h(G5,"ColorRegistry");const O0=new G5;dn.add(j5.ColorContribution,O0);function A(s,e,t,n,i){return O0.registerColor(s,e,t,n,i)}h(A,"registerColor");const ae=A("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},p("foreground","Overall foreground color. This color is only used if not overridden by a component.")),Eq=A("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},p("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));A("descriptionForeground",{light:"#717171",dark:xe(ae,.7),hc:xe(ae,.7)},p("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const Ay=A("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},p("iconForeground","The default color for icons in the workbench.")),Wr=A("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},p("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Pt=A("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},p("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),ci=A("contrastActiveBorder",{light:null,dark:null,hc:Wr},p("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));A("selection.background",{light:null,dark:null,hc:null},p("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));A("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hc:H.black},p("textSeparatorForeground","Color for text separators."));const F0=A("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},p("textLinkForeground","Foreground color for links in text.")),W0=A("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},p("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));A("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hc:"#D7BA7D"},p("textPreformatForeground","Foreground color for preformatted text segments."));A("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hc:null},p("textBlockQuoteBackground","Background color for block quotes in text."));A("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hc:H.white},p("textBlockQuoteBorder","Border color for block quotes in text."));const $5=A("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:H.black},p("textCodeBlockBackground","Background color for code blocks in text.")),od=A("widget.shadow",{dark:xe(H.black,.36),light:xe(H.black,.16),hc:null},p("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),tI=A("input.background",{dark:"#3C3C3C",light:H.white,hc:H.black},p("inputBoxBackground","Input box background.")),nI=A("input.foreground",{dark:ae,light:ae,hc:ae},p("inputBoxForeground","Input box foreground.")),iI=A("input.border",{dark:null,light:null,hc:Pt},p("inputBoxBorder","Input box border.")),FT=A("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:Pt},p("inputBoxActiveOptionBorder","Border color of activated options in input fields."));A("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hc:null},p("inputOption.hoverBackground","Background color of activated options in input fields."));const WT=A("inputOption.activeBackground",{dark:xe(Wr,.4),light:xe(Wr,.2),hc:H.transparent},p("inputOption.activeBackground","Background hover color of options in input fields.")),VT=A("inputOption.activeForeground",{dark:H.white,light:H.black,hc:null},p("inputOption.activeForeground","Foreground color of activated options in input fields."));A("input.placeholderForeground",{light:xe(ae,.5),dark:xe(ae,.5),hc:xe(ae,.7)},p("inputPlaceholderForeground","Input box foreground color for placeholder text."));const q5=A("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:H.black},p("inputValidationInfoBackground","Input validation background color for information severity.")),Y5=A("inputValidation.infoForeground",{dark:null,light:null,hc:null},p("inputValidationInfoForeground","Input validation foreground color for information severity.")),X5=A("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:Pt},p("inputValidationInfoBorder","Input validation border color for information severity.")),Z5=A("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:H.black},p("inputValidationWarningBackground","Input validation background color for warning severity.")),J5=A("inputValidation.warningForeground",{dark:null,light:null,hc:null},p("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Q5=A("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:Pt},p("inputValidationWarningBorder","Input validation border color for warning severity.")),eF=A("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:H.black},p("inputValidationErrorBackground","Input validation background color for error severity.")),tF=A("inputValidation.errorForeground",{dark:null,light:null,hc:null},p("inputValidationErrorForeground","Input validation foreground color for error severity.")),nF=A("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:Pt},p("inputValidationErrorBorder","Input validation border color for error severity.")),Dc=A("dropdown.background",{dark:"#3C3C3C",light:H.white,hc:H.black},p("dropdownBackground","Dropdown background."));A("dropdown.listBackground",{dark:null,light:null,hc:H.black},p("dropdownListBackground","Dropdown list background."));const Wp=A("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:H.white},p("dropdownForeground","Dropdown foreground.")),My=A("dropdown.border",{dark:Dc,light:"#CECECE",hc:Pt},p("dropdownBorder","Dropdown border."));A("checkbox.background",{dark:Dc,light:Dc,hc:Dc},p("checkbox.background","Background color of checkbox widget."));A("checkbox.foreground",{dark:Wp,light:Wp,hc:Wp},p("checkbox.foreground","Foreground color of checkbox widget."));A("checkbox.border",{dark:My,light:My,hc:My},p("checkbox.border","Border color of checkbox widget."));const Dq=A("button.foreground",{dark:H.white,light:H.white,hc:H.white},p("buttonForeground","Button foreground color.")),BT=A("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},p("buttonBackground","Button background color.")),Iq=A("button.hoverBackground",{dark:sd(BT,.2),light:wg(BT,.2),hc:null},p("buttonHoverBackground","Button background color when hovering."));A("button.border",{dark:Pt,light:Pt,hc:Pt},p("buttonBorder","Button border color."));A("button.secondaryForeground",{dark:H.white,light:H.white,hc:H.white},p("buttonSecondaryForeground","Secondary button foreground color."));const kM=A("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hc:null},p("buttonSecondaryBackground","Secondary button background color."));A("button.secondaryHoverBackground",{dark:sd(kM,.2),light:wg(kM,.2),hc:null},p("buttonSecondaryHoverBackground","Secondary button background color when hovering."));const Vp=A("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:H.black},p("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Bp=A("badge.foreground",{dark:H.white,light:"#333",hc:H.white},p("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),vg=A("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},p("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Gu=A("scrollbarSlider.background",{dark:H.fromHex("#797979").transparent(.4),light:H.fromHex("#646464").transparent(.4),hc:xe(Pt,.6)},p("scrollbarSliderBackground","Scrollbar slider background color.")),$u=A("scrollbarSlider.hoverBackground",{dark:H.fromHex("#646464").transparent(.7),light:H.fromHex("#646464").transparent(.7),hc:xe(Pt,.8)},p("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),qu=A("scrollbarSlider.activeBackground",{dark:H.fromHex("#BFBFBF").transparent(.4),light:H.fromHex("#000000").transparent(.6),hc:Pt},p("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Nq=A("progressBar.background",{dark:H.fromHex("#0E70C0"),light:H.fromHex("#0E70C0"),hc:Pt},p("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Aq=A("editorError.background",{dark:null,light:null,hc:null},p("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Vl=A("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},p("editorError.foreground","Foreground color of error squigglies in the editor.")),iF=A("editorError.border",{dark:null,light:null,hc:H.fromHex("#E47777").transparent(.8)},p("errorBorder","Border color of error boxes in the editor.")),Mq=A("editorWarning.background",{dark:null,light:null,hc:null},p("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),gs=A("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},p("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),V0=A("editorWarning.border",{dark:null,light:null,hc:H.fromHex("#FFCC00").transparent(.8)},p("warningBorder","Border color of warning boxes in the editor.")),Rq=A("editorInfo.background",{dark:null,light:null,hc:null},p("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ko=A("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},p("editorInfo.foreground","Foreground color of info squigglies in the editor.")),oI=A("editorInfo.border",{dark:null,light:null,hc:H.fromHex("#3794FF").transparent(.8)},p("infoBorder","Border color of info boxes in the editor.")),Pq=A("editorHint.foreground",{dark:H.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},p("editorHint.foreground","Foreground color of hint squigglies in the editor.")),Oq=A("editorHint.border",{dark:null,light:null,hc:H.fromHex("#eeeeee").transparent(.8)},p("hintBorder","Border color of hint boxes in the editor."));A("sash.hoverBorder",{dark:Wr,light:Wr,hc:Wr},p("sashActiveBorder","Border color of active sashes."));const Bi=A("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:H.black},p("editorBackground","Editor background color.")),Bl=A("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:H.white},p("editorForeground","Editor default foreground color.")),vi=A("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},p("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Fa=A("editorWidget.foreground",{dark:ae,light:ae,hc:ae},p("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Ic=A("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:Pt},p("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),Fq=A("editorWidget.resizeBorder",{light:null,dark:null,hc:null},p("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),EM=A("quickInput.background",{dark:vi,light:vi,hc:vi},p("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Wq=A("quickInput.foreground",{dark:Fa,light:Fa,hc:Fa},p("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Vq=A("quickInputTitle.background",{dark:new H(new $e(255,255,255,.105)),light:new H(new $e(0,0,0,.06)),hc:"#000000"},p("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Bq=A("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:H.white},p("pickerGroupForeground","Quick picker color for grouping labels.")),Hq=A("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:H.white},p("pickerGroupBorder","Quick picker color for grouping borders.")),zq=A("keybindingLabel.background",{dark:new H(new $e(128,128,128,.17)),light:new H(new $e(221,221,221,.4)),hc:H.transparent},p("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Kq=A("keybindingLabel.foreground",{dark:H.fromHex("#CCCCCC"),light:H.fromHex("#555555"),hc:H.white},p("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Uq=A("keybindingLabel.border",{dark:new H(new $e(51,51,51,.6)),light:new H(new $e(204,204,204,.4)),hc:new H(new $e(111,195,223))},p("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),jq=A("keybindingLabel.bottomBorder",{dark:new H(new $e(68,68,68,.6)),light:new H(new $e(187,187,187,.4)),hc:new H(new $e(111,195,223))},p("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Hl=A("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},p("editorSelectionBackground","Color of the editor selection.")),Gq=A("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},p("editorSelectionForeground","Color of the selected text for high contrast.")),sI=A("editor.inactiveSelectionBackground",{light:xe(Hl,.5),dark:xe(Hl,.5),hc:xe(Hl,.5)},p("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),rI=A("editor.selectionHighlightBackground",{light:RM(Hl,Bi,.3,.6),dark:RM(Hl,Bi,.3,.6),hc:null},p("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),$q=A("editor.selectionHighlightBorder",{light:null,dark:null,hc:ci},p("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),qq=A("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},p("editorFindMatch","Color of the current search match.")),zl=A("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},p("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Yq=A("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},p("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Xq=A("editor.findMatchBorder",{light:null,dark:null,hc:ci},p("editorFindMatchBorder","Border color of the current search match.")),Yu=A("editor.findMatchHighlightBorder",{light:null,dark:null,hc:ci},p("findMatchHighlightBorder","Border color of the other search matches.")),Zq=A("editor.findRangeHighlightBorder",{dark:null,light:null,hc:xe(ci,.4)},p("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);A("searchEditor.findMatchBackground",{light:xe(zl,.66),dark:xe(zl,.66),hc:zl},p("searchEditor.queryMatch","Color of the Search Editor query matches."));A("searchEditor.findMatchBorder",{light:xe(Yu,.66),dark:xe(Yu,.66),hc:Yu},p("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));const Jq=A("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},p("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),th=A("editorHoverWidget.background",{light:vi,dark:vi,hc:vi},p("hoverBackground","Background color of the editor hover.")),aI=A("editorHoverWidget.foreground",{light:Fa,dark:Fa,hc:Fa},p("hoverForeground","Foreground color of the editor hover.")),lI=A("editorHoverWidget.border",{light:Ic,dark:Ic,hc:Ic},p("hoverBorder","Border color of the editor hover.")),Qq=A("editorHoverWidget.statusBarBackground",{dark:sd(th,.2),light:wg(th,.05),hc:vi},p("statusBarBackground","Background color of the editor hover status bar.")),dI=A("editorLink.activeForeground",{dark:"#4E94CE",light:H.blue,hc:H.cyan},p("activeLinkForeground","Color of active links.")),Nc=A("editorInlayHint.foreground",{dark:xe(Bp,.8),light:xe(Bp,.8),hc:Bp},p("editorInlayHintForeground","Foreground color of inline hints")),Ac=A("editorInlayHint.background",{dark:xe(Vp,.6),light:xe(Vp,.3),hc:Vp},p("editorInlayHintBackground","Background color of inline hints")),eY=A("editorInlayHint.typeForeground",{dark:Nc,light:Nc,hc:Nc},p("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),tY=A("editorInlayHint.typeBackground",{dark:Ac,light:Ac,hc:Ac},p("editorInlayHintBackgroundTypes","Background color of inline hints for types")),nY=A("editorInlayHint.parameterForeground",{dark:Nc,light:Nc,hc:Nc},p("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),iY=A("editorInlayHint.parameterBackground",{dark:Ac,light:Ac,hc:Ac},p("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),oY=A("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},p("editorLightBulbForeground","The color used for the lightbulb actions icon.")),sY=A("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},p("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),HT=new H(new $e(155,185,85,.2)),zT=new H(new $e(255,0,0,.2)),oF=A("diffEditor.insertedTextBackground",{dark:HT,light:HT,hc:null},p("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),sF=A("diffEditor.removedTextBackground",{dark:zT,light:zT,hc:null},p("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),rY=A("diffEditor.insertedLineBackground",{dark:null,light:null,hc:null},p("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),aY=A("diffEditor.removedLineBackground",{dark:null,light:null,hc:null},p("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),lY=A("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hc:null},p("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),dY=A("diffEditorGutter.removedLineBackground",{dark:null,light:null,hc:null},p("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),cY=A("diffEditorOverview.insertedForeground",{dark:null,light:null,hc:null},p("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),hY=A("diffEditorOverview.removedForeground",{dark:null,light:null,hc:null},p("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),uY=A("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},p("diffEditorInsertedOutline","Outline color for the text that got inserted.")),fY=A("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},p("diffEditorRemovedOutline","Outline color for text that got removed.")),gY=A("diffEditor.border",{dark:null,light:null,hc:Pt},p("diffEditorBorder","Border color between the two text editors.")),pY=A("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},p("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),mY=A("list.focusBackground",{dark:null,light:null,hc:null},p("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),_Y=A("list.focusForeground",{dark:null,light:null,hc:null},p("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),bY=A("list.focusOutline",{dark:Wr,light:Wr,hc:ci},p("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Kl=A("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},p("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ul=A("list.activeSelectionForeground",{dark:H.white,light:H.white,hc:null},p("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),$v=A("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},p("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vY=A("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},p("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),wY=A("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},p("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),CY=A("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},p("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),yY=A("list.inactiveFocusBackground",{dark:null,light:null,hc:null},p("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),SY=A("list.inactiveFocusOutline",{dark:null,light:null,hc:null},p("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),xY=A("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},p("listHoverBackground","List/Tree background when hovering over items using the mouse.")),TY=A("list.hoverForeground",{dark:null,light:null,hc:null},p("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),LY=A("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},p("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),Wa=A("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:Wr},p("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Ry=A("list.focusHighlightForeground",{dark:Wa,light:ZY(Kl,Wa,"#9DDDFF"),hc:Wa},p("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));A("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hc:"#B89500"},p("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));A("list.errorForeground",{dark:"#F88070",light:"#B01011",hc:null},p("listErrorForeground","Foreground color of list items containing errors."));A("list.warningForeground",{dark:"#CCA700",light:"#855F00",hc:null},p("listWarningForeground","Foreground color of list items containing warnings."));const kY=A("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:H.black},p("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),EY=A("listFilterWidget.outline",{dark:H.transparent,light:H.transparent,hc:"#f38518"},p("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),DY=A("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:Pt},p("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches."));A("list.filterMatchBackground",{dark:zl,light:zl,hc:null},p("listFilterMatchHighlight","Background color of the filtered match."));A("list.filterMatchBorder",{dark:Yu,light:Yu,hc:Pt},p("listFilterMatchHighlightBorder","Border color of the filtered match."));const IY=A("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},p("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),NY=A("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},p("tableColumnsBorder","Table border color between columns.")),AY=A("tree.tableOddRowsBackground",{dark:xe(ae,.04),light:xe(ae,.04),hc:null},p("tableOddRowsBackgroundColor","Background color for odd table rows."));A("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hc:"#A7A8A9"},p("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const DM=A("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,p("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),qv=A("quickInputList.focusForeground",{dark:Ul,light:Ul,hc:Ul},p("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Yv=A("quickInputList.focusIconForeground",{dark:$v,light:$v,hc:$v},p("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Xv=A("quickInputList.focusBackground",{dark:Tm(DM,Kl),light:Tm(DM,Kl),hc:null},p("quickInput.listFocusBackground","Quick picker background color for the focused item.")),MY=A("menu.border",{dark:null,light:null,hc:Pt},p("menuBorder","Border color of menus.")),RY=A("menu.foreground",{dark:Wp,light:ae,hc:Wp},p("menuForeground","Foreground color of menu items.")),PY=A("menu.background",{dark:Dc,light:Dc,hc:Dc},p("menuBackground","Background color of menu items.")),OY=A("menu.selectionForeground",{dark:Ul,light:Ul,hc:Ul},p("menuSelectionForeground","Foreground color of the selected menu item in menus.")),FY=A("menu.selectionBackground",{dark:Kl,light:Kl,hc:Kl},p("menuSelectionBackground","Background color of the selected menu item in menus.")),WY=A("menu.selectionBorder",{dark:null,light:null,hc:ci},p("menuSelectionBorder","Border color of the selected menu item in menus.")),VY=A("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:Pt},p("menuSeparatorBackground","Color of a separator menu item in menus.")),KT=A("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},p("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));A("toolbar.hoverOutline",{dark:null,light:null,hc:ci},p("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));A("toolbar.activeBackground",{dark:sd(KT,.1),light:wg(KT,.1),hc:null},p("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));A("editor.snippetTabstopHighlightBackground",{dark:new H(new $e(124,124,124,.3)),light:new H(new $e(10,50,100,.2)),hc:new H(new $e(124,124,124,.3))},p("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));A("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hc:null},p("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));A("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hc:null},p("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));A("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new H(new $e(10,50,100,.5)),hc:"#525252"},p("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));A("breadcrumb.foreground",{light:xe(ae,.8),dark:xe(ae,.8),hc:xe(ae,.8)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items."));A("breadcrumb.background",{light:Bi,dark:Bi,hc:Bi},p("breadcrumbsBackground","Background color of breadcrumb items."));A("breadcrumb.focusForeground",{light:wg(ae,.2),dark:sd(ae,.1),hc:sd(ae,.1)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items."));A("breadcrumb.activeSelectionForeground",{light:wg(ae,.2),dark:sd(ae,.1),hc:sd(ae,.1)},p("breadcrumbsSelectedForegound","Color of selected breadcrumb items."));A("breadcrumbPicker.background",{light:vi,dark:vi,hc:vi},p("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const rF=.5,IM=H.fromHex("#40C8AE").transparent(rF),NM=H.fromHex("#40A6FF").transparent(rF),AM=H.fromHex("#606060").transparent(.4),Va=.4,Cf=1,Hp=A("merge.currentHeaderBackground",{dark:IM,light:IM,hc:null},p("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);A("merge.currentContentBackground",{dark:xe(Hp,Va),light:xe(Hp,Va),hc:xe(Hp,Va)},p("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const zp=A("merge.incomingHeaderBackground",{dark:NM,light:NM,hc:null},p("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);A("merge.incomingContentBackground",{dark:xe(zp,Va),light:xe(zp,Va),hc:xe(zp,Va)},p("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Kp=A("merge.commonHeaderBackground",{dark:AM,light:AM,hc:null},p("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);A("merge.commonContentBackground",{dark:xe(Kp,Va),light:xe(Kp,Va),hc:xe(Kp,Va)},p("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const cI=A("merge.border",{dark:null,light:null,hc:"#C3DF6F"},p("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));A("editorOverviewRuler.currentContentForeground",{dark:xe(Hp,Cf),light:xe(Hp,Cf),hc:cI},p("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));A("editorOverviewRuler.incomingContentForeground",{dark:xe(zp,Cf),light:xe(zp,Cf),hc:cI},p("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));A("editorOverviewRuler.commonContentForeground",{dark:xe(Kp,Cf),light:xe(Kp,Cf),hc:cI},p("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const hI=A("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},p("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),aF=A("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},p("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Up=A("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},p("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),B0=A("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},p("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),MM=A("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},p("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),BY=A("minimap.errorHighlight",{dark:new H(new $e(255,18,18,.7)),light:new H(new $e(255,18,18,.7)),hc:new H(new $e(255,50,50,1))},p("minimapError","Minimap marker color for errors.")),HY=A("minimap.warningHighlight",{dark:gs,light:gs,hc:V0},p("overviewRuleWarning","Minimap marker color for warnings.")),zY=A("minimap.background",{dark:null,light:null,hc:null},p("minimapBackground","Minimap background color.")),KY=A("minimap.foregroundOpacity",{dark:H.fromHex("#000f"),light:H.fromHex("#000f"),hc:H.fromHex("#000f")},p("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),UY=A("minimapSlider.background",{light:xe(Gu,.5),dark:xe(Gu,.5),hc:xe(Gu,.5)},p("minimapSliderBackground","Minimap slider background color.")),jY=A("minimapSlider.hoverBackground",{light:xe($u,.5),dark:xe($u,.5),hc:xe($u,.5)},p("minimapSliderHoverBackground","Minimap slider background color when hovering.")),GY=A("minimapSlider.activeBackground",{light:xe(qu,.5),dark:xe(qu,.5),hc:xe(qu,.5)},p("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),$Y=A("problemsErrorIcon.foreground",{dark:Vl,light:Vl,hc:Vl},p("problemsErrorIconForeground","The color used for the problems error icon.")),qY=A("problemsWarningIcon.foreground",{dark:gs,light:gs,hc:gs},p("problemsWarningIconForeground","The color used for the problems warning icon.")),YY=A("problemsInfoIcon.foreground",{dark:ko,light:ko,hc:ko},p("problemsInfoIconForeground","The color used for the problems info icon."));A("charts.foreground",{dark:ae,light:ae,hc:ae},p("chartsForeground","The foreground color used in charts."));A("charts.lines",{dark:xe(ae,.5),light:xe(ae,.5),hc:xe(ae,.5)},p("chartsLines","The color used for horizontal lines in charts."));A("charts.red",{dark:Vl,light:Vl,hc:Vl},p("chartsRed","The red color used in chart visualizations."));A("charts.blue",{dark:ko,light:ko,hc:ko},p("chartsBlue","The blue color used in chart visualizations."));A("charts.yellow",{dark:gs,light:gs,hc:gs},p("chartsYellow","The yellow color used in chart visualizations."));A("charts.orange",{dark:Up,light:Up,hc:Up},p("chartsOrange","The orange color used in chart visualizations."));A("charts.green",{dark:"#89D185",light:"#388A34",hc:"#89D185"},p("chartsGreen","The green color used in chart visualizations."));A("charts.purple",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},p("chartsPurple","The purple color used in chart visualizations."));function XY(s,e){var t,n,i;switch(s.op){case 0:return(t=ua(s.value,e))===null||t===void 0?void 0:t.darken(s.factor);case 1:return(n=ua(s.value,e))===null||n===void 0?void 0:n.lighten(s.factor);case 2:return(i=ua(s.value,e))===null||i===void 0?void 0:i.transparent(s.factor);case 3:for(const o of s.values){const r=ua(o,e);if(r)return r}return;case 5:return ua(e.defines(s.if)?s.then:s.else,e);case 4:{const o=ua(s.value,e);if(!o)return;const r=ua(s.background,e);return r?o.isDarkerThan(r)?H.getLighterColor(o,r,s.factor).transparent(s.transparency):H.getDarkerColor(o,r,s.factor).transparent(s.transparency):o.transparent(s.factor*s.transparency)}default:throw gD()}}h(XY,"executeTransform");function wg(s,e){return{op:0,value:s,factor:e}}h(wg,"darken");function sd(s,e){return{op:1,value:s,factor:e}}h(sd,"lighten");function xe(s,e){return{op:2,value:s,factor:e}}h(xe,"transparent");function Tm(...s){return{op:3,values:s}}h(Tm,"oneOf");function ZY(s,e,t){return{op:5,if:s,then:e,else:t}}h(ZY,"ifDefinedThenElse");function RM(s,e,t,n){return{op:4,value:s,background:e,factor:t,transparency:n}}h(RM,"lessProminent");function ua(s,e){if(s!==null){if(typeof s=="string")return s[0]==="#"?H.fromHex(s):e.getColor(s);if(s instanceof H)return s;if(typeof s=="object")return XY(s,e)}}h(ua,"resolveColorValue");const lF="vscode://schemas/workbench-colors";let dF=dn.as(P0.JSONContribution);dF.registerSchema(lF,O0.getColorSchema());const PM=new gt(()=>dF.notifySchemaChanged(lF),200);O0.onDidChangeSchema(()=>{PM.isScheduled()||PM.schedule()});class H0{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new uI(this.x-Pa.scrollX,this.y-Pa.scrollY)}}h(H0,"PageCoordinates");class uI{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new H0(this.clientX+Pa.scrollX,this.clientY+Pa.scrollY)}}h(uI,"ClientCoordinates");class cF{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}h(cF,"EditorPagePosition");class hF{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}h(hF,"CoordinatesRelativeToEditor");function uF(s){const e=$n(s);return new cF(e.left,e.top,e.width,e.height)}h(uF,"createEditorPagePosition");function fF(s,e,t){const n=e.width/s.offsetWidth,i=e.height/s.offsetHeight,o=(t.x-e.x)/n,r=(t.y-e.y)/i;return new hF(o,r)}h(fF,"createCoordinatesRelativeToEditor");class rd extends Co{constructor(e,t){super(e);this._editorMouseEventBrand=void 0,this.pos=new H0(this.posx,this.posy),this.editorPos=uF(t),this.relativePos=fF(t,this.editorPos,this.pos)}}h(rd,"EditorMouseEvent");class gF{constructor(e){this._editorViewDomNode=e}_create(e){return new rd(e,this._editorViewDomNode)}onContextMenu(e,t){return J(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return J(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return J(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return qD(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,i){return YD(e,"mousemove",t,h((r,a)=>n(r,this._create(a)),"myMerger"),i)}}h(gF,"EditorMouseEventFactory");class pF{constructor(e){this._editorViewDomNode=e}_create(e){return new rd(e,this._editorViewDomNode)}onPointerUp(e,t){return J(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return J(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return $$(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,i){return YD(e,"pointermove",t,h((r,a)=>n(r,this._create(a)),"myMerger"),i)}}h(pF,"EditorPointerEventFactory");class mF extends z{constructor(e){super();this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new Nd),this._keydownListener=null}startMonitoring(e,t,n,i,o){this._keydownListener=Wn(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const r=h((a,l)=>n(a,new rd(l,this._editorViewDomNode)),"myMerger");this._globalMouseMoveMonitor.startMonitoring(e,t,r,i,a=>{this._keydownListener.dispose(),o(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}h(mF,"GlobalEditorMouseMoveMonitor");class Cg{constructor(e){this._editor=e,this._instanceId=++Cg._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new gt(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new _F(t,`dyn-rule-${this._instanceId}-${i}`,vm(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}h(Cg,"DynamicCssRules");Cg._idPool=0;class _F{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElement=es(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const o=t[i];let r;typeof o=="object"?r=`var(${U5(o.id)})`:r=o,n+=`
	${JY(i)}: ${r};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}h(_F,"RefCountedCssRule");function JY(s){return s.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}h(JY,"camelToDashes");class yg extends z{constructor(){super();this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const o=e[n];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}h(yg,"ViewEventHandler");class No extends yg{constructor(e){super();this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}h(No,"ViewPart");class or{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let i=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(i);for(let r=0;r<i;r++)o[r]=n[i-r-1];return o}}h(or,"PartFingerprints");class bF{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}h(bF,"RestrictedRenderingContext");class vF extends bF{constructor(e,t,n){super(e,t);this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}h(vF,"RenderingContext");class wF{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}h(wF,"LineVisibleRanges");class O_{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const o=e[n];t[n]=new O_(o.left,o.width)}return t}toString(){return`[${this.left},${this.width}]`}}h(O_,"HorizontalRange");class Mc{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}h(Mc,"FloatHorizontalRange");class CF{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}h(CF,"HorizontalPosition");class yF{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}h(yF,"VisibleRanges");class Zv{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,o){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,i),r.getClientRects()}catch{return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Mc.compare);const t=[];let n=0,i=e[0];for(let o=1,r=e.length;o<r;o++){const a=e[o];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const i=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];i[o]=new Mc(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,o,r,a,l){const c=e.children.length-1;if(0>c)return null;if(t=Math.min(c,Math.max(0,t)),i=Math.min(c,Math.max(0,i)),t===i&&n===o&&n===0&&!e.children[t].firstChild){const m=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(m,r,a)}t!==i&&i>0&&o===0&&(i--,o=1073741824);let u=e.children[t].firstChild,f=e.children[i].firstChild;if((!u||!f)&&(!u&&n===0&&t>0&&(u=e.children[t-1].firstChild,n=1073741824),!f&&o===0&&i>0&&(f=e.children[i-1].firstChild,o=1073741824)),!u||!f)return null;n=Math.min(u.textContent.length,Math.max(0,n)),o=Math.min(f.textContent.length,Math.max(0,o));const g=this._readClientRects(u,n,f,o,l);return this._createHorizontalRangesFromClientRects(g,r,a)}}h(Zv,"RangeUtil");const QY=function(){return Zs?!0:!(ni||Eo||vs)}();let Xu=!0;class UT{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=t}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}h(UT,"DomReadingContext");class jT{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(44);this.renderWhitespace=n.get(88),this.renderControlCharacters=n.get(83),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(59),this.stopRenderingLineAfter=n.get(105),this.fontLigatures=n.get(45)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}h(jT,"ViewLineOptions");class Hs{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=nt(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===fs.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=n.getViewLineRenderingData(e),r=this._options,a=no.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let l=null;if(r.themeType===fs.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const f=n.selections;for(const g of f){if(g.endLineNumber<e||g.startLineNumber>e)continue;const m=g.startLineNumber===e?g.startColumn:o.minColumn,b=g.endLineNumber===e?g.endColumn:o.maxColumn;m<b&&(r.themeType===fs.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new no(m,b,"inline-selected-text",0)):(l||(l=[]),l.push(new t5(m-1,b-1))))}}const d=new Id(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,o.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Yi.OFF,l);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;i.appendASCIIString('<div style="top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;height:"),i.appendASCIIString(String(this._options.lineHeight)),i.appendASCIIString('px;" class="'),i.appendASCIIString(Hs.CLASS_NAME),i.appendASCIIString('">');const c=x0(d,i);i.appendASCIIString("</div>");let u=null;return Xu&&QY&&o.isBasicASCII&&r.useMonospaceOptimizations&&c.containsForeignElements===0&&o.content.length<300&&d.lineTokens.getCount()<100&&(u=new mp(this._renderedViewLine?this._renderedViewLine.domNode:null,d,c.characterMapping)),u||(u=xF(this._renderedViewLine?this._renderedViewLine.domNode:null,d,c.characterMapping,c.containsRTL,c.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof mp:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof mp?this._renderedViewLine.monospaceAssumptionsAreValid():Xu}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof mp&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const o=this._renderedViewLine.input.stopRenderingLineAfter;let r=!1;o!==-1&&t>o+1&&n>o+1&&(r=!0),o!==-1&&t>o+1&&(t=o+1),o!==-1&&n>o+1&&(n=o+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return a&&a.length>0?new yF(r,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}h(Hs,"ViewLine");Hs.CLASS_NAME="view-line";class mp{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return Xu;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Xu=!1),Xu}toSlowRenderedLine(){return xF(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const o=this._getCharPosition(t),r=this._getCharPosition(n);return[new Mc(o,r-o)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new S0(o,n),i)}}h(mp,"FastRenderedViewLine");class fI{constructor(e,t,n,i,o){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,i);if(o===-1)return null;const r=this._readPixelOffset(this.domNode,e,n,i);return r===-1?null:[new Mc(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,o){if(n===i){const r=this._readPixelOffset(e,t,n,o);return r===-1?null:[new Mc(r,0)]}else return this._readRawVisibleRangesForRange(e,n,i,o)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[n];if(o!==-1)return o;const r=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=r,r}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=Zv.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const o=this._characterMapping.getDomPosition(n),r=Zv.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getAbsoluteOffset(n),d=Math.round(this.input.spaceWidth*l);if(Math.abs(d-a)<=1)return d}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new Mc(0,this.getWidth())];const o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return Zv.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,i.clientRectDeltaLeft,i.clientRectScale,i.endNode)}getColumnOfNodeOffset(e,t,n){const i=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new S0(o,n),i)}}h(fI,"RenderedViewLine");class SF extends fI{_readVisibleRangesForRange(e,t,n,i,o){const r=super._readVisibleRangesForRange(e,t,n,i,o);if(!r||r.length===0||n===i||n===1&&i===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,o);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}h(SF,"WebKitRenderedViewLine");const xF=function(){return Pl?eX:tX}();function eX(s,e,t,n,i){return new SF(s,e,t,n,i)}h(eX,"createWebKitRenderedLine");function tX(s,e,t,n,i){return new fI(s,e,t,n,i)}h(tX,"createNormalRenderedLine");class mn{static _nextVisibleColumn(e,t,n){return e===9?mn.nextRenderTabStop(t,n):Xl(e)||ED(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),o=e.substring(0,i),r=new um(o);let a=0;for(;!r.eol();){const l=Uw(o,i,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,o=new um(e);let r=0,a=1;for(;!o.eol();){const l=Uw(e,i,o.offset);o.nextGraphemeLength();const d=this._nextVisibleColumn(l,r,n),c=o.offset+1;if(d>=t){const u=t-r;return d-t<u?c:a}r=d,a=c}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}h(mn,"CursorColumns");class yf{static whitespaceVisibleColumn(e,t,n){const i=e.length;let o=0,r=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[r,a,o];switch(o%n===0&&(r=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=mn.nextRenderTabStop(o,n);break;default:return[-1,-1,-1]}}return t===i?[r,a,o]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const o=e.length,[r,a,l]=yf.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let d;switch(i){case 0:d=!0;break;case 1:d=!1;break;case 2:if(l%n===0)return t;d=l%n<=n/2;break}if(d){if(r===-1)return-1;let f=a;for(let g=r;g<o;++g){if(f===a+n)return r;switch(e.charCodeAt(g)){case 32:f+=1;break;case 9:f=mn.nextRenderTabStop(f,n);break;default:return-1}}return f===a+n?r:-1}const c=mn.nextRenderTabStop(l,n);let u=l;for(let f=t;f<o;f++){if(u===c)return f;switch(e.charCodeAt(f)){case 32:u+=1;break;case 9:u=mn.nextRenderTabStop(u,n);break;default:return-1}}return u===c?o:-1}}h(yf,"AtomicTabMoveOperations");class fa{constructor(e=null){this.hitTarget=e,this.type=0}}h(fa,"UnknownHitTestResult");class oC{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}h(oC,"ContentHitTestResult");var ac;(function(s){function e(t,n,i){const o=t.getPositionFromDOMInfo(n,i);return o?new oC(o,n,null):new fa(n)}h(e,"createFromDOMInfo"),s.createFromDOMInfo=e})(ac||(ac={}));class TF{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}h(TF,"PointerHandlerLastRenderData");class pi{static _deduceRage(e,t=null){return!t&&e?new T(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,o,r){return{type:e,element:t,mouseColumn:n,position:i,range:o,detail:r}}static createViewZone(e,t,n,i,o){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:o}}static createContentText(e,t,n,i,o){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:o}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t)}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}h(pi,"MouseTarget");class Po{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}h(Po,"ElementPath");class nh{constructor(e,t,n){this.viewModel=e.viewModel;const i=e.configuration.options;this.layoutInfo=i.get(131),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(59),this.stickyTabStops=i.get(104),this.typicalHalfwidthCharacterWidth=i.get(44).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return nh.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,o=e.viewModel.getLineCount();let r=null,a,l=null;return n.afterLineNumber!==o&&(l=new W(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(r=new W(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=r:r===null?a=l:t<i?a=r:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(i);return{range:new T(i,o,i,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new T(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return nh._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}h(nh,"HitTestContext");class LF{constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Kn._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}h(LF,"BareHitTestRequest");class z0 extends LF{constructor(e,t,n,i,o){super(e,t,n,i);this._ctx=e,o?(this.target=o,this.targetPath=or.collect(o,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?mn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return pi.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return pi.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return pi.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return pi.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return pi.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return pi.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return pi.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return pi.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return pi.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new z0(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}h(z0,"HitTestRequest");const OM={isAfterLines:!0};function Py(s){return{isAfterLines:!1,horizontalDistanceToText:s}}h(Py,"createEmptyContentDataInLines");class Kn{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=or.collect(t,this._viewHelper.viewDomNode);return!!(Po.isChildOfContentWidgets(n)||Po.isChildOfOverflowingContentWidgets(n)||Po.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,i,o){const r=new nh(this._context,this._viewHelper,e),a=new z0(r,t,n,i,o);try{return Kn._createMouseTarget(r,a,!1)}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfillUnknown();const r=Kn._doHitTest(e,t);return r.type===1?Kn.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}const i=t;let o=null;return o=o||Kn._hitTestContentWidget(e,i),o=o||Kn._hitTestOverlayWidget(e,i),o=o||Kn._hitTestMinimap(e,i),o=o||Kn._hitTestScrollbarSlider(e,i),o=o||Kn._hitTestViewZone(e,i),o=o||Kn._hitTestMargin(e,i),o=o||Kn._hitTestViewCursor(e,i),o=o||Kn._hitTestTextArea(e,i),o=o||Kn._hitTestViewLines(e,i,n),o=o||Kn._hitTestScrollbar(e,i),o||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Po.isChildOfContentWidgets(t.targetPath)||Po.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Po.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfillContentText(i.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const r of n){if(i<r.contentLeft||i>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=o&&o<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}static _hitTestTextArea(e,t){return Po.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let o=Math.abs(t.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,i,n.range,r):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,r)))}return null}static _hitTestViewLines(e,t,n){if(!Po.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new W(1,1),OM);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const o=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(o);return t.fulfillContentEmpty(new W(o,r),OM)}if(n){if(Po.isStrictChildOfViewLines(t.targetPath)){const o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(o)===0){const a=e.getLineWidth(o),l=Py(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(new W(o,1),l)}const r=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>=r){const a=Py(t.mouseContentHorizontalOffset-r),l=new W(o,e.viewModel.getLineMaxColumn(o));return t.fulfillContentEmpty(l,a)}}return t.fulfillUnknown()}const i=Kn._doHitTest(e,t);return i.type===1?Kn.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(Po.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new W(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(Po.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new W(i,o))}}return null}static _hitTestScrollbar(e,t){if(Po.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new W(n,i))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(131),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return Kn._getMouseColumn(i,t.get(44).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,o){const r=i.lineNumber,a=i.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const v=Py(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(i,v)}const d=e.visibleRangeForPosition(r,a);if(!d)return t.fulfillUnknown(i);const c=d.left;if(t.mouseContentHorizontalOffset===c)return t.fulfillContentText(i,null,{mightBeForeignElement:!!o,injectedText:o});const u=[];if(u.push({offset:d.left,column:a}),a>1){const v=e.visibleRangeForPosition(r,a-1);v&&u.push({offset:v.left,column:a-1})}const f=e.viewModel.getLineMaxColumn(r);if(a<f){const v=e.visibleRangeForPosition(r,a+1);v&&u.push({offset:v.left,column:a+1})}u.sort((v,C)=>v.offset-C.offset);const g=t.pos.toClientCoordinates(),m=n.getBoundingClientRect(),b=m.left<=g.clientX&&g.clientX<=m.right;for(let v=1;v<u.length;v++){const C=u[v-1],w=u[v];if(C.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=w.offset){const y=new T(r,C.column,r,w.column);return t.fulfillContentText(i,y,{mightBeForeignElement:!b||!!o,injectedText:o})}}return t.fulfillContentText(i,null,{mightBeForeignElement:!b||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let r=t.pos.y+(o-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+t.editorPos.height&&(r=t.editorPos.y+t.editorPos.height-1);const a=new H0(t.pos.x,r),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return l.type===1?l:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=ed(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=nX(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=document.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new fa;const o=i.startContainer;if(o.nodeType===o.TEXT_NODE){const r=o.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Hs.CLASS_NAME?ac.createFromDOMInfo(e,r,i.startOffset):new fa(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const r=o.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Hs.CLASS_NAME?ac.createFromDOMInfo(e,o,o.textContent.length):new fa(o)}return new fa}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,o=i?i.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Hs.CLASS_NAME?ac.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new fa(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,o=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,r=i?i.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===Hs.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return ac.createFromDOMInfo(e,l,0)}else if(a===Hs.CLASS_NAME)return ac.createFromDOMInfo(e,n.offsetNode,0)}return new fa(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),o=yf.atomicPosition(n,e.column-1,i,2);return o!==-1?new W(e.lineNumber,o+1):e}static _doHitTest(e,t){let n=new fa;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const i=e.viewModel.getInjectedTextAt(n.position),o=e.viewModel.normalizePosition(n.position,2);(i||!o.equals(n.position))&&(n=new oC(o,n.spanNode,i))}return n.type===1&&e.stickyTabStops&&(n=new oC(this._snapToSoftTabBoundary(n.position,e.viewModel),n.spanNode,n.injectedText)),n}}h(Kn,"MouseTargetFactory");function nX(s,e,t){const n=document.createRange();let i=s.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const o=i.getBoundingClientRect(),r=window.getComputedStyle(i,null).getPropertyValue("font"),a=i.innerText;let l=o.left,d=0,c;if(e>o.left+o.width)d=a.length;else{const u=Dl.getInstance();for(let f=0;f<a.length+1;f++){if(c=u.getCharWidth(a.charAt(f),r)/2,l+=c,e<l){d=f;break}l+=c}}n.setStart(i.firstChild,d),n.setEnd(i.firstChild,d)}return n}h(nX,"shadowCaretRangeFromPoint");class Dl{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return Dl._INSTANCE||(Dl._INSTANCE=new Dl),Dl._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const r=i.measureText(e).width;return this._cache[n]=r,r}}h(Dl,"CharWidthReader");Dl._INSTANCE=null;function sC(s){return function(e,t){let n=!1;return s&&(n=s.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}h(sC,"createMouseMoveEventMerger");class ad extends yg{constructor(e,t,n){super();this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Kn(this._context,n),this._mouseDownOperation=this._register(new kF(this._context,this.viewController,this.viewHelper,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(131).height;const i=new gF(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(i.onMouseMoveThrottled(this.viewHelper.viewDomNode,r=>this._onMouseMove(r),sC(this.mouseTargetFactory),ad.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(i.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r)));const o=h(r=>{if(this.viewController.emitMouseWheel(r),!this._context.configuration.options.get(68))return;const a=new Zc(r);if(Ke?(r.metaKey||r.ctrlKey)&&!r.shiftKey&&!r.altKey:r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey){const d=Ua.getZoomLevel(),c=a.deltaY>0?1:-1;Ua.setZoomLevel(d+c),a.preventDefault(),a.stopPropagation()}},"onMouseWheel");this._register(J(this.viewHelper.viewDomNode,be.MOUSE_WHEEL,o,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(131)){const t=this._context.configuration.options.get(131).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const i=new uI(e,t).toPageCoordinates(),o=uF(this.viewHelper.viewDomNode);if(i.y<o.y||i.y>o.y+o.height||i.x<o.x||i.x>o.x+o.width)return null;const r=fF(this.viewHelper.viewDomNode,o,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,i,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=ed(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,i=t.type===2||t.type===3||t.type===4,o=t.type===3,r=this._context.configuration.options.get(98),a=t.type===8||t.type===5,l=t.type===9;let d=e.leftButton||e.middleButton;Ke&&e.leftButton&&e.ctrlKey&&(d=!1);const c=h(()=>{e.preventDefault(),this.viewHelper.focusTextArea()},"focus");if(d&&(n||o&&r))c(),this._mouseDownOperation.start(t.type,e);else if(i)e.preventDefault();else if(a){const u=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(c(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(c(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}h(ad,"MouseHandler");ad.MOUSE_MOVE_MINIMUM_TIME=100;class kF extends z{constructor(e,t,n,i,o){super();this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=i,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new mF(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Ki),this._mouseState=new F_,this._currentSelection=new oe(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);!t||(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const i=this._context.configuration.options;if(!i.get(81)&&i.get(31)&&!i.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,sC(null),o=>this._onMouseDownThenMove(o),o=>{const r=this._findMousePosition(this._lastMouseEvent,!0);o&&o instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:r?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,sC(null),o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){!this._isActive||this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);!e||this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0)},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(i.getCurrentScrollTop()-(t.y-e.posy),0),l=nh.getZoneAtCoord(this._context,a);if(l){const c=this._helpPositionJumpOverViewZone(l);if(c)return pi.createOutsideEditor(o,c)}const d=i.getLineNumberAtVerticalOffset(a);return pi.createOutsideEditor(o,new W(d,1))}if(e.posy>t.y+t.height){const a=i.getCurrentScrollTop()+e.relativePos.y,l=nh.getZoneAtCoord(this._context,a);if(l){const c=this._helpPositionJumpOverViewZone(l);if(c)return pi.createOutsideEditor(o,c)}const d=i.getLineNumberAtVerticalOffset(a);return pi.createOutsideEditor(o,new W(d,n.getLineMaxColumn(d)))}const r=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);return e.posx<t.x?pi.createOutsideEditor(o,new W(r,1)):e.posx>t.x+t.width?pi.createOutsideEditor(o,new W(r,n.getLineMaxColumn(r))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const r=this._helpPositionJumpOverViewZone(i.detail);if(r)return pi.createViewZone(i.type,i.element,i.mouseColumn,r,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new W(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t){!e.position||this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}h(kF,"MouseDownOperation");class F_{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>F_.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}h(F_,"MouseDownState");F_.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var zs;(function(s){s.text="text/plain",s.binary="application/octet-stream",s.unknown="application/unknown",s.markdown="text/markdown",s.latex="text/latex",s.uriList="text/uri-list"})(zs||(zs={}));class Un{constructor(e,t,n,i,o){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=i,this.selectionEndPosition=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e){return new Un(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new Un(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,i,-1)}if(e>=this.selectionEnd){const i=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const i=Math.min(uf(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(Kw(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(i,e.value.length-o);const r=t.value.substring(i,t.value.length-o),a=e.selectionStart-i,l=e.selectionEnd-i,d=t.selectionStart-i,c=t.selectionEnd-i;if(d===c){const f=e.selectionStart-i;return{text:r,replacePrevCharCnt:f,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:r,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(uf(e.value,t.value),e.selectionEnd),i=Math.min(Kw(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-i),r=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-r.length}}}h(Un,"TextAreaState");Un.EMPTY=new Un("",0,0,null,null);class bc{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,o=n+t;return new T(i,1,o+1,1)}static fromEditorSelection(e,t,n,i,o){const r=bc._getPageOfLine(n.startLineNumber,i),a=bc._getRangeForPage(r,i),l=bc._getPageOfLine(n.endLineNumber,i),d=bc._getRangeForPage(l,i),c=a.intersectRanges(new T(1,1,n.startLineNumber,n.startColumn));let u=t.getValueInRange(c,1);const f=t.getLineCount(),g=t.getLineMaxColumn(f),m=d.intersectRanges(new T(n.endLineNumber,n.endColumn,f,g));let b=t.getValueInRange(m,1),v;if(r===l||r+1===l)v=t.getValueInRange(n,1);else{const C=a.intersectRanges(n),w=d.intersectRanges(n);v=t.getValueInRange(C,1)+String.fromCharCode(8230)+t.getValueInRange(w,1)}return o&&(u.length>500&&(u=u.substring(u.length-500,u.length)),b.length>500&&(b=b.substring(0,500)),v.length>2*500&&(v=v.substring(0,500)+String.fromCharCode(8230)+v.substring(v.length-500,v.length))),new Un(u+v+b,u.length,u.length+v.length,new W(n.startLineNumber,n.startColumn),new W(n.endLineNumber,n.endColumn))}}h(bc,"PagedScreenReaderStrategy");var rC;(function(s){s.Tap="-monaco-textarea-synthetic-tap"})(rC||(rC={}));const GT={forceCopyWithSyntaxHighlighting:!1};class Sf{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}h(Sf,"InMemoryClipboardMetadataManager");Sf.INSTANCE=new Sf;class EF{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}h(EF,"CompositionContext");class DF extends z{constructor(e,t,n,i){super();this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._onFocus=this._register(new P),this.onFocus=this._onFocus.event,this._onBlur=this._register(new P),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new P),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new P),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new P),this.onCut=this._onCut.event,this._onPaste=this._register(new P),this.onPaste=this._onPaste.event,this._onType=this._register(new P),this.onType=this._onType.event,this._onCompositionStart=this._register(new P),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new P),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new P),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new P),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new gt(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new gt(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Un.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let o=null;this._register(this._textArea.onKeyDown(r=>{const a=new Et(r);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),o=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(r=>{const a=new Et(r);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(r=>{const a=new EF;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&o&&o.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===r.data&&(o.code==="ArrowRight"||o.code==="ArrowLeft")){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:r.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:r.data});return}this._onCompositionStart.fire({data:r.data})})),this._register(this._textArea.onCompositionUpdate(r=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const d=Un.readFromTextArea(this._textArea),c=Un.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(c),this._onCompositionUpdate.fire(r);return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Un.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionUpdate.fire(r)})),this._register(this._textArea.onCompositionEnd(r=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const d=Un.readFromTextArea(this._textArea),c=Un.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(c),this._onCompositionEnd.fire();return}const l=a.handleCompositionUpdate(r.data);this._textAreaState=Un.readFromTextArea(this._textArea),this._onType.fire(l),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Un.readFromTextArea(this._textArea),l=Un.deduceInput(this._textAreaState,a,this._OS===2);l.replacePrevCharCnt===0&&l.text.length===1&&Cn(l.text.charCodeAt(0))||(this._textAreaState=a,(l.text!==""||l.replacePrevCharCnt!==0||l.replaceNextCharCnt!==0||l.positionDelta!==0)&&this._onType.fire(l))})),this._register(this._textArea.onCut(r=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(r),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(r=>{this._ensureClipboardGetsEditorSelection(r)})),this._register(this._textArea.onPaste(r=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),r.preventDefault(),!r.clipboardData)return;let[a,l]=$T.getTextData(r.clipboardData);!a||(l=l||Sf.INSTANCE.get(a),this._onPaste.fire({text:a,metadata:l}))})),this._register(this._textArea.onFocus(()=>{const r=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!r&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return J(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const o=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const d=this._textAreaState.deduceEditorPosition(a),c=this._host.deduceModelPosition(d[0],d[1],d[2]),u=this._textAreaState.deduceEditorPosition(l),f=this._host.deduceModelPosition(u[0],u[1],u[2]),g=new oe(c.lineNumber,c.column,f.lineNumber,f.column);this._onSelectionChangeRequest.fire(g)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};Sf.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&$T.setTextData(e.clipboardData,t.text,t.html,n)}}h(DF,"TextAreaInput");class $T{static getTextData(e){const t=e.getData(zs.text);let n=null;const i=e.getData("vscode-editor-data");if(typeof i=="string")try{n=JSON.parse(i),n.version!==1&&(n=null)}catch{}return[t,n]}static setTextData(e,t,n,i){e.setData(zs.text,t),typeof n=="string"&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(i))}}h($T,"ClipboardEventUtils");class IF extends z{constructor(e){super();this._actual=e,this.onKeyDown=this._register(Ls(this._actual,"keydown")).event,this.onKeyUp=this._register(Ls(this._actual,"keyup")).event,this.onCompositionStart=this._register(Ls(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(Ls(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(Ls(this._actual,"compositionend")).event,this.onInput=this._register(Ls(this._actual,"input")).event,this.onCut=this._register(Ls(this._actual,"cut")).event,this.onCopy=this._register(Ls(this._actual,"copy")).event,this.onPaste=this._register(Ls(this._actual,"paste")).event,this.onFocus=this._register(Ls(this._actual,"focus")).event,this.onBlur=this._register(Ls(this._actual,"blur")).event,this._onSyntheticTap=this._register(new P),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(J(this._actual,rC.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=ed(this._actual);return e?e.activeElement===this._actual:jD(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let o=null;const r=ed(i);r?o=r.activeElement:o=document.activeElement;const a=o===i,l=i.selectionStart,d=i.selectionEnd;if(a&&l===t&&d===n){Eo&&window.parent!==window&&i.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),Eo&&window.parent!==window&&i.focus();return}try{const c=eq(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),tq(i,c)}catch{}}}h(IF,"TextAreaWrapper");class NF extends ad{constructor(e,t,n){super(e,t,n);this._register(dt.addTarget(this.viewHelper.linesContentDomNode)),this._register(J(this.viewHelper.linesContentDomNode,kt.Tap,o=>this.onTap(o))),this._register(J(this.viewHelper.linesContentDomNode,kt.Change,o=>this.onChange(o))),this._register(J(this.viewHelper.linesContentDomNode,kt.Contextmenu,o=>this._onContextMenu(new rd(o,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(J(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const r=o.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new pF(this.viewHelper.viewDomNode);this._register(i.onPointerMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),sC(this.mouseTargetFactory),ad.MOUSE_MOVE_MINIMUM_TIME)),this._register(i.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new rd(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:t.type===6&&t.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}h(NF,"PointerEventHandler");class AF extends ad{constructor(e,t,n){super(e,t,n);this._register(dt.addTarget(this.viewHelper.linesContentDomNode)),this._register(J(this.viewHelper.linesContentDomNode,kt.Tap,i=>this.onTap(i))),this._register(J(this.viewHelper.linesContentDomNode,kt.Change,i=>this.onChange(i))),this._register(J(this.viewHelper.linesContentDomNode,kt.Contextmenu,i=>this._onContextMenu(new rd(i,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new rd(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(rC.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}h(AF,"TouchHandler");class MF extends z{constructor(e,t,n){super();tr&&E0.pointerEvents?this.handler=this._register(new NF(e,t,n)):window.TouchEvent?this.handler=this._register(new AF(e,t,n)):this.handler=this._register(new ad(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}h(MF,"PointerHandler");class Bh extends yg{}h(Bh,"DynamicViewOverlay");const iX=A("editor.lineHighlightBackground",{dark:null,light:null,hc:null},p("lineHighlight","Background color for the highlight of line at the cursor position.")),FM=A("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},p("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),oX=A("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},p("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),sX=A("editor.rangeHighlightBorder",{dark:null,light:null,hc:ci},p("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),rX=A("editor.symbolHighlightBackground",{dark:zl,light:zl,hc:null},p("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),aX=A("editor.symbolHighlightBorder",{dark:null,light:null,hc:ci},p("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),RF=A("editorCursor.foreground",{dark:"#AEAFAD",light:H.black,hc:H.white},p("caret","Color of the editor cursor.")),lX=A("editorCursor.background",null,p("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Rc=A("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},p("editorWhitespaces","Color of whitespace characters in the editor.")),K0=A("editorIndentGuide.background",{dark:Rc,light:Rc,hc:Rc},p("editorIndentGuides","Color of the editor indentation guides.")),U0=A("editorIndentGuide.activeBackground",{dark:Rc,light:Rc,hc:Rc},p("editorActiveIndentGuide","Color of the active editor indentation guides.")),PF=A("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:H.white},p("editorLineNumbers","Color of editor line numbers.")),Oy=A("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:ci},p("editorActiveLineNumber","Color of editor active line number"),!1,p("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),dX=A("editorLineNumber.activeForeground",{dark:Oy,light:Oy,hc:Oy},p("editorActiveLineNumber","Color of editor active line number")),cX=A("editorRuler.foreground",{dark:"#5A5A5A",light:H.lightgrey,hc:H.white},p("editorRuler","Color of the editor rulers."));A("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hc:"#999999"},p("editorCodeLensForeground","Foreground color of editor CodeLens"));const hX=A("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},p("editorBracketMatchBackground","Background color behind matching brackets")),OF=A("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:Pt},p("editorBracketMatchBorder","Color for matching brackets boxes")),uX=A("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},p("editorOverviewRulerBorder","Color of the overview ruler border.")),fX=A("editorOverviewRuler.background",null,p("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),gX=A("editorGutter.background",{dark:Bi,light:Bi,hc:Bi},p("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),pX=A("editorUnnecessaryCode.border",{dark:null,light:null,hc:H.fromHex("#fff").transparent(.8)},p("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),mX=A("editorUnnecessaryCode.opacity",{dark:H.fromHex("#000a"),light:H.fromHex("#0007"),hc:null},p("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),_X=A("editorGhostText.border",{dark:null,light:null,hc:H.fromHex("#fff").transparent(.8)},p("editorGhostTextBorder","Border color of ghost text in the editor.")),bX=A("editorGhostText.foreground",{dark:H.fromHex("#ffffff56"),light:H.fromHex("#0007"),hc:null},p("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),vX=A("editorGhostText.background",{dark:null,light:null,hc:null},p("editorGhostTextBackground","Background color of the ghost text in the editor.")),Fy=new H(new $e(0,122,204,.6)),wX=A("editorOverviewRuler.rangeHighlightForeground",{dark:Fy,light:Fy,hc:Fy},p("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),CX=A("editorOverviewRuler.errorForeground",{dark:new H(new $e(255,18,18,.7)),light:new H(new $e(255,18,18,.7)),hc:new H(new $e(255,50,50,1))},p("overviewRuleError","Overview ruler marker color for errors.")),yX=A("editorOverviewRuler.warningForeground",{dark:gs,light:gs,hc:V0},p("overviewRuleWarning","Overview ruler marker color for warnings.")),SX=A("editorOverviewRuler.infoForeground",{dark:ko,light:ko,hc:oI},p("overviewRuleInfo","Overview ruler marker color for infos.")),FF=A("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},p("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),WF=A("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},p("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),VF=A("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},p("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),BF=A("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),HF=A("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),zF=A("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),xX=A("editorBracketHighlight.unexpectedBracket.foreground",{dark:new H(new $e(255,18,18,.8)),light:new H(new $e(255,18,18,.8)),hc:new H(new $e(255,50,50,1))},p("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),TX=A("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),LX=A("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),kX=A("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),EX=A("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),DX=A("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),IX=A("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),NX=A("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),AX=A("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),MX=A("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),RX=A("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),PX=A("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),OX=A("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},p("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));A("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hc:"#ff0000"},p("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));It((s,e)=>{const t=s.getColor(Bi);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=s.getColor(Bl);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const i=s.getColor(gX);i&&e.addRule(`.monaco-editor .margin { background-color: ${i}; }`);const o=s.getColor(oX);o&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${o}; }`);const r=s.getColor(sX);r&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${s.type==="hc"?"dotted":"solid"} ${r}; }`);const a=s.getColor(rX);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const l=s.getColor(aX);l&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${s.type==="hc"?"dotted":"solid"} ${l}; }`);const d=s.getColor(Rc);d&&(e.addRule(`.monaco-editor .mtkw { color: ${d} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${d} !important; }`))});class ih extends Bh{constructor(e){super();this._context=e,this._readConfig(),this._lastCursorModelPosition=new W(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(59);const t=e.get(60);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(84);const n=e.get(131);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=ni?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o='<div class="'+ih.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',r=this._context.viewModel.getLineCount(),a=[];for(let l=n;l<=i;l++){const d=l-n;if(!this._renderFinalNewline&&l===r&&this._context.viewModel.getLineLength(l)===0){a[d]="";continue}const c=this._getLineRenderLineNumber(l);c?l===this._activeLineNumber?a[d]='<div class="active-line-number '+ih.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+c+"</div>":a[d]=o+c+"</div>":a[d]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}h(ih,"LineNumbersOverlay");ih.CLASS_NAME="line-numbers";It((s,e)=>{const t=s.getColor(PF);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=s.getColor(dX);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class ld extends No{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(131);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=nt(document.createElement("div")),this._domNode.setClassName(ld.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=nt(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(ld.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}h(ld,"Margin");ld.CLASS_NAME="glyph-margin";ld.OUTER_CLASS_NAME="margin";const Pc="monaco-mouse-cursor-text";class KF{constructor(e,t,n,i,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=i,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new W(this.modelLineNumber,this.distanceToModelLineStart+1),n=new W(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}h(KF,"VisibleTextAreaData");const Yg=Eo;class UF extends No{constructor(e,t,n){super(e);this._primaryCursorPosition=new W(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const i=this._context.configuration.options,o=i.get(131);this._setAccessibilityOptions(i),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=i.get(44),this._lineHeight=i.get(59),this._emptySelectionClipboard=i.get(32),this._copyWithSyntaxHighlighting=i.get(21),this._visibleTextArea=null,this._selections=[new oe(1,1,1,1)],this._modelSelections=[new oe(1,1,1,1)],this._lastRenderPosition=null,this.textArea=nt(document.createElement("textarea")),or.write(this.textArea,6),this.textArea.setClassName(`inputarea ${Pc}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(112))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",p("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),i.get(30)&&i.get(81)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=nt(document.createElement("div")),this.textAreaCover.setPosition("absolute");const r={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:d=>this._context.viewModel.getLineMaxColumn(d),getValueInRange:(d,c)=>this._context.viewModel.getValueInRange(d,c)},a={getDataToCopy:()=>{const d=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Vn),c=this._context.viewModel.model.getEOL(),u=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),f=Array.isArray(d)?d:null,g=Array.isArray(d)?d.join(c):d;let m,b=null;if(GT.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&g.length<65536){const v=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);v&&(m=v.html,b=v.mode)}return{isFromEmptySelection:u,multicursorText:f,text:g,html:m,mode:b}},getScreenReaderContent:d=>{if(this._accessibilitySupport===1){if(Ke){const c=this._selections[0];if(c.isEmpty()){const u=c.getStartPosition();let f=this._getWordBeforePosition(u);if(f.length===0&&(f=this._getCharacterBeforePosition(u)),f.length>0)return new Un(f,f.length,f.length,u,u)}}return Un.EMPTY}if(qO){const c=this._selections[0];if(c.isEmpty()){const u=c.getStartPosition(),[f,g]=this._getAndroidWordAtPosition(u);if(f.length>0)return new Un(f,g,g,u,u)}return Un.EMPTY}return bc.fromEditorSelection(d,r,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(d,c,u)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(d,c,u)},l=this._register(new IF(this.textArea.domNode));this._textAreaInput=this._register(new DF(a,l,Bo,DG)),this._register(this._textAreaInput.onKeyDown(d=>{this._viewController.emitKeyDown(d)})),this._register(this._textAreaInput.onKeyUp(d=>{this._viewController.emitKeyUp(d)})),this._register(this._textAreaInput.onPaste(d=>{let c=!1,u=null,f=null;d.metadata&&(c=this._emptySelectionClipboard&&!!d.metadata.isFromEmptySelection,u=typeof d.metadata.multicursorText<"u"?d.metadata.multicursorText:null,f=d.metadata.mode),this._viewController.paste(d.text,c,u,f)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(d=>{d.replacePrevCharCnt||d.replaceNextCharCnt||d.positionDelta?this._viewController.compositionType(d.text,d.replacePrevCharCnt,d.replaceNextCharCnt,d.positionDelta):this._viewController.type(d.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(d=>{this._viewController.setSelection(d)})),this._register(this._textAreaInput.onCompositionStart(d=>{const c=this.textArea.domNode,u=this._modelSelections[0],{distanceToModelLineStart:f,widthOfHiddenTextBefore:g}=(()=>{const b=c.value.substring(0,Math.min(c.selectionStart,c.selectionEnd)),v=b.lastIndexOf(`
`),C=b.substring(v+1),w=C.lastIndexOf("	"),y=C.length-w-1,S=u.getStartPosition(),L=Math.min(S.column-1,y),E=S.column-1-L,x=C.substring(0,C.length-L),k=FX(x,this._fontInfo);return{distanceToModelLineStart:E,widthOfHiddenTextBefore:k}})(),{distanceToModelLineEnd:m}=(()=>{const b=c.value.substring(Math.max(c.selectionStart,c.selectionEnd)),v=b.indexOf(`
`),C=v===-1?b:b.substring(0,v),w=C.indexOf("	"),y=w===-1?C.length:C.length-w-1,S=u.getEndPosition(),L=Math.min(this._context.viewModel.model.getLineMaxColumn(S.lineNumber)-S.column,y);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(S.lineNumber)-S.column-L}})();this._context.viewModel.revealRange("keyboard",!0,T.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new KF(this._context,u.startLineNumber,f,g,m),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Pc} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(d=>{!this._visibleTextArea||(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${Pc}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),i=Qo(t);let o=!0,r=e.column,a=!0,l=e.column,d=0;for(;d<50&&(o||a);){if(o&&r<=1&&(o=!1),o){const c=n.charCodeAt(r-2);i.get(c)!==0?o=!1:r--}if(a&&l>n.length&&(a=!1),a){const c=n.charCodeAt(l-1);i.get(c)!==0?a=!1:l++}d++}return[n.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=Qo(this._context.configuration.options.get(117));let i=e.column,o=0;for(;i>1;){const r=t.charCodeAt(i-2);if(n.get(r)!==0||o>50)return t.substring(i-1,e.column-1);o++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Cn(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?p("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",ni?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===cr.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(44),this._lineHeight=t.get(59),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(112))),(e.hasChanged(30)||e.hasChanged(81))&&(t.get(30)&&t.get(81)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new W(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea&&this._visibleTextArea.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){const n=this._visibleTextArea.visibleTextareaStart,i=this._visibleTextArea.visibleTextareaEnd,o=this._visibleTextArea.startPosition,r=this._visibleTextArea.endPosition;if(o&&r&&n&&i&&i.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let d=this._visibleTextArea.widthOfHiddenLineTextBefore,c=this._contentLeft+n.left-this._scrollLeft,u=i.left-n.left+1;if(c<this._contentLeft){const C=this._contentLeft-c;c+=C,d+=C,u-=C}u>this._contentWidth&&(u=this._contentWidth);const f=this._context.viewModel.getViewLineData(o.lineNumber),g=f.tokens.findTokenIndexAtOffset(o.column-1),m=f.tokens.findTokenIndexAtOffset(r.column-1),b=g===m,v=this._visibleTextArea.definePresentation(b?f.tokens.getPresentation(g):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=d,this._doRender({lastRenderPosition:null,top:a,left:c,width:u,height:this._lineHeight,useCover:!1,color:(Ft.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Ke){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:Yg?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:e,width:Yg?0:1,height:Yg?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:Yg?0:1,height:Yg?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;ti(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?H.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const i=this._context.configuration.options;i.get(50)?n.setClassName("monaco-editor-background textAreaCover "+ld.OUTER_CLASS_NAME):i.get(60).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+ih.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}}h(UF,"TextAreaHandler");function FX(s,e){if(s.length===0)return 0;const t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("span");ti(n,e),n.style.whiteSpace="pre",n.append(s),t.appendChild(n),document.body.appendChild(t);const i=n.offsetWidth;return document.body.removeChild(t),i}h(FX,"measureText");function WX(s,e,t){let n=0;for(let o=0;o<s.length;o++)s.charAt(o)==="	"?n+=e:n++;let i="";if(!t){const o=Math.floor(n/e);n=n%e;for(let r=0;r<o;r++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}h(WX,"_normalizeIndentationFromWhitespace");function aC(s,e,t){let n=bi(s);return n===-1&&(n=s.length),WX(s.substring(0,n),e,t)+s.substring(n)}h(aC,"normalizeIndentation");const VX=h(()=>!0,"autoCloseAlways"),BX=h(()=>!1,"autoCloseNever"),HX=h(s=>s===" "||s==="	","autoCloseBeforeWhitespace");class Yd{constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=n.options,r=o.get(131);this.readOnly=o.get(81),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(104),this.lineHeight=o.get(59),this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(116),this.wordSeparators=o.get(117),this.emptySelectionClipboard=o.get(32),this.copyWithSyntaxHighlighting=o.get(21),this.multiCursorMergeOverlapping=o.get(69),this.multiCursorPaste=o.get(71),this.autoClosingBrackets=o.get(5),this.autoClosingQuotes=o.get(8),this.autoClosingDelete=o.get(6),this.autoClosingOvertype=o.get(7),this.autoSurround=o.get(11),this.autoIndent=o.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const a=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(a)for(const l of a)this.surroundingPairs[l.open]=l.close}static shouldRecreate(e){return e.hasChanged(131)||e.hasChanged(117)||e.hasChanged(32)||e.hasChanged(69)||e.hasChanged(71)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(116)||e.hasChanged(59)||e.hasChanged(81)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=$w(t,n-1),o=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return o?o.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return aC(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return HX;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return VX;case"never":return BX}}_getLanguageDefinedShouldAutoClose(e){const t=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return n=>t.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return mn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=mn.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),o=e.getLineMinColumn(t);if(i<o)return o;const r=e.getLineMaxColumn(t);return i>r?r:i}}h(Yd,"CursorConfiguration");class Be{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new jF(e)}static fromViewState(e){return new GF(e)}static fromModelSelection(e){const t=oe.liftSelection(e),n=new Dn(T.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return Be.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}h(Be,"CursorState$1");class jF{constructor(e){this.modelState=e,this.viewState=null}}h(jF,"PartialModelCursorState");class GF{constructor(e){this.modelState=null,this.viewState=e}}h(GF,"PartialViewCursorState");class Dn{constructor(e,t,n,i){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=i,this.selection=Dn._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new Dn(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new W(t,n),i):new Dn(new T(t,n,t,n),i,new W(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?oe.fromPositions(e.getStartPosition(),t):oe.fromPositions(e.getEndPosition(),t)}}h(Dn,"SingleCursorState");class Ni{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}h(Ni,"EditOperationResult");function yu(s){return s==="'"||s==='"'||s==="`"}h(yu,"isQuote");class Sl{static columnSelect(e,t,n,i,o,r){const a=Math.abs(o-n)+1,l=n>o,d=i>r,c=i<r,u=[];for(let f=0;f<a;f++){const g=n+(l?-f:f),m=e.columnFromVisibleColumn(t,g,i),b=e.columnFromVisibleColumn(t,g,r),v=e.visibleColumnFromColumn(t,new W(g,m)),C=e.visibleColumnFromColumn(t,new W(g,b));c&&(v>r||C<i)||d&&(C>i||v<r)||u.push(new Dn(new T(g,m,g,m),0,new W(g,b),0))}if(u.length===0)for(let f=0;f<a;f++){const g=n+(l?-f:f),m=t.getLineMaxColumn(g);u.push(new Dn(new T(g,m,g,m),0,new W(g,m),0))}return{viewStates:u,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,Sl.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const o=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=o;l<=r;l++){const d=t.getLineMaxColumn(l),c=e.visibleColumnFromColumn(t,new W(l,d));i=Math.max(i,c)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const o=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const o=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}h(Sl,"ColumnSelection");class Pn{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return oe.fromPositions(i.getEndPosition())}}h(Pn,"ReplaceCommand");class $F{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return oe.fromRange(i,0)}}h($F,"ReplaceCommandThatSelectsText");class _p{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return oe.fromPositions(i.getStartPosition())}}h(_p,"ReplaceCommandWithoutChangingPosition");class jp{constructor(e,t,n,i,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return oe.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}h(jp,"ReplaceCommandWithOffsetCursorState");class j0{constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}h(j0,"ReplaceCommandThatPreservesSelection");class Jv{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}h(Jv,"CursorPosition");class ot{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-BO(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new W(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=yf.atomicPosition(o,t.column-1,n,0);if(r!==-1&&r+1>=i)return new W(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?ot.leftPositionAtomicSoftTabs(t,n,e.tabSize):ot.leftPosition(t,n);return new Jv(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,o){let r,a;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(o-1)),d=t.normalizePosition(ot.clipPositionColumn(l,t),0),c=ot.left(e,t,d);r=c.lineNumber,a=c.column}return n.move(i,r,a,0)}static clipPositionColumn(e,t){return new W(e.lineNumber,ot.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+kD(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new W(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,o){if(n<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=yf.atomicPosition(r,n-1,i,1);if(a!==-1)return new W(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?ot.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):ot.rightPosition(t,n.lineNumber,n.column);return new Jv(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,o){let r,a;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,o-1),d=t.normalizePosition(ot.clipPositionColumn(l,t),1),c=ot.right(e,t,d);r=c.lineNumber,a=c.column}return n.move(i,r,a,0)}static vertical(e,t,n,i,o,r,a,l){const d=mn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+o,c=t.getLineCount(),u=n===1&&i===1,f=n===c&&i===t.getLineMaxColumn(n),g=r<n?u:f;if(n=r,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>c?(n=c,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,d),g?o=0:o=d-mn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){const m=new W(n,i),b=t.normalizePosition(m,l);o=o+(i-b.column),n=b.lineNumber,i=b.column}return new Jv(n,i,o)}static down(e,t,n,i,o,r,a){return this.vertical(e,t,n,i,o,n+r,a,1)}static moveDown(e,t,n,i,o){let r,a;n.hasSelection()&&!i?(r=n.selection.endLineNumber,a=n.selection.endColumn):(r=n.position.lineNumber,a=n.position.column);const l=ot.down(e,t,r,a,n.leftoverVisibleColumns,o,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,o=ot.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=ot.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Dn(new T(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new W(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,n,i,o,r,a){return this.vertical(e,t,n,i,o,n-r,a,0)}static moveUp(e,t,n,i,o){let r,a;n.hasSelection()&&!i?(r=n.selection.startLineNumber,a=n.selection.startColumn):(r=n.position.lineNumber,a=n.position.column);const l=ot.up(e,t,r,a,n.leftoverVisibleColumns,o,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,o=ot.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=ot.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Dn(new T(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new W(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,i){const o=t.getLineCount();let r=n.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const o=n.position.lineNumber,r=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return n.position.column===a?l=r:l=a,n.move(i,o,l,0)}static moveToEndOfLine(e,t,n,i,o){const r=n.position.lineNumber,a=t.getLineMaxColumn(r);return n.move(i,r,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return n.move(i,o,r,0)}}h(ot,"MoveOperations");class dd{static deleteRight(e,t,n,i){const o=[];let r=e!==3;for(let a=0,l=i.length;a<l;a++){const d=i[a];let c=d;if(c.isEmpty()){const u=d.getPosition(),f=ot.right(t,n,u);c=new T(f.lineNumber,f.column,u.lineNumber,u.column)}if(c.isEmpty()){o[a]=null;continue}c.startLineNumber!==c.endLineNumber&&(r=!0),o[a]=new Pn(c,"")}return[r,o]}static isAutoClosingPairDelete(e,t,n,i,o,r,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,d=r.length;l<d;l++){const c=r[l],u=c.getPosition();if(!c.isEmpty())return!1;const f=o.getLineContent(u.lineNumber);if(u.column<2||u.column>=f.length+1)return!1;const g=f.charAt(u.column-2),m=i.get(g);if(!m)return!1;if(yu(g)){if(n==="never")return!1}else if(t==="never")return!1;const b=f.charAt(u.column-1);let v=!1;for(const C of m)C.open===g&&C.close===b&&(v=!0);if(!v)return!1;if(e==="auto"){let C=!1;for(let w=0,y=a.length;w<y;w++){const S=a[w];if(u.lineNumber===S.startLineNumber&&u.column===S.startColumn){C=!0;break}}if(!C)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++){const a=n[o].getPosition(),l=new T(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[o]=new Pn(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,o))return this._runAutoClosingPairDelete(t,n,i);const r=[];let a=e!==2;for(let l=0,d=i.length;l<d;l++){const c=dd.getDeleteRange(i[l],n,t);if(c.isEmpty()){r[l]=null;continue}c.startLineNumber!==c.endLineNumber&&(a=!0),r[l]=new Pn(c,"")}return[a,r]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const o=t.getLineContent(i.lineNumber),r=bi(o),a=r===-1?o.length+1:r+1;if(i.column<=a){const l=n.visibleColumnFromColumn(t,i),d=mn.prevIndentTabStop(l,n.indentSize),c=n.columnFromVisibleColumn(t,i.lineNumber,d);return new T(i.lineNumber,c,i.lineNumber,i.column)}}return T.fromPositions(dd.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=xG(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new W(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const i=[];let o=null;n.sort((r,a)=>W.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=n.length;r<a;r++){const l=n[r];if(l.isEmpty())if(e.emptySelectionClipboard){const d=l.getPosition();let c,u,f,g;d.lineNumber<t.getLineCount()?(c=d.lineNumber,u=1,f=d.lineNumber+1,g=1):d.lineNumber>1&&o?.endLineNumber!==d.lineNumber?(c=d.lineNumber-1,u=t.getLineMaxColumn(d.lineNumber-1),f=d.lineNumber,g=t.getLineMaxColumn(d.lineNumber)):(c=d.lineNumber,u=1,f=d.lineNumber,g=t.getLineMaxColumn(d.lineNumber));const m=new T(c,u,f,g);o=m,m.isEmpty()?i[r]=null:i[r]=new Pn(m,"")}else i[r]=null;else i[r]=new Pn(l,"")}return new Ni(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}h(dd,"DeleteOperations");class Je{static _createWord(e,t,n,i,o){return{start:i,end:o,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let o=n.column-2;o>=0;o--){const r=e.charCodeAt(o),a=t.get(r);if(a===0){if(i===2)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1));i=1}else if(a===2){if(i===1)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1));i=2}else if(a===1&&i!==0)return this._createWord(e,i,a,o+1,this._findEndOfWord(e,t,i,o+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const o=e.length;for(let r=i;r<o;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===1||n===1&&l===2||n===2&&l===0)return r}return o}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const o=e.length;for(let r=n.column-1;r<o;r++){const a=e.charCodeAt(r),l=t.get(a);if(l===0){if(i===2)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r);i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,this._findStartOfWord(e,t,i,r-1),r)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,o-1),o):null}static _findStartOfWord(e,t,n,i){for(let o=i;o>=0;o--){const r=e.charCodeAt(o),a=t.get(r);if(a===1||n===1&&a===2||n===2&&a===0)return o+1}return 0}static moveWordLeft(e,t,n,i){let o=n.lineNumber,r=n.column;r===1&&o>1&&(o=o-1,r=t.getLineMaxColumn(o));let a=Je._findPreviousWordOnLine(e,t,new W(o,r));if(i===0)return new W(o,a?a.start+1:1);if(i===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=Je._findPreviousWordOnLine(e,t,new W(o,a.start+1))),new W(o,a?a.start+1:1);if(i===3){for(;a&&a.wordType===2;)a=Je._findPreviousWordOnLine(e,t,new W(o,a.start+1));return new W(o,a?a.start+1:1)}return a&&r<=a.end+1&&(a=Je._findPreviousWordOnLine(e,t,new W(o,a.start+1))),new W(o,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new W(n-1,e.getLineMaxColumn(n-1)):t;const o=e.getLineContent(n);for(let r=t.column-1;r>1;r--){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a===95&&l!==95)return new W(n,r);if(kl(a)&&Lr(l))return new W(n,r);if(Lr(a)&&Lr(l)&&r+1<i){const d=o.charCodeAt(r);if(kl(d))return new W(n,r)}}return new W(n,1)}static moveWordRight(e,t,n,i){let o=n.lineNumber,r=n.column,a=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,r=1);let l=Je._findNextWordOnLine(e,t,new W(o,r));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Je._findNextWordOnLine(e,t,new W(o,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(o);else if(i===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=Je._findNextWordOnLine(e,t,new W(o,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(o)}else l&&!a&&r>=l.start+1&&(l=Je._findNextWordOnLine(e,t,new W(o,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(o);return new W(o,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new W(n+1,1):t;const o=e.getLineContent(n);for(let r=t.column+1;r<i;r++){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a!==95&&l===95)return new W(n,r);if(kl(a)&&Lr(l))return new W(n,r);if(Lr(a)&&Lr(l)&&r+1<i){const d=o.charCodeAt(r);if(kl(d))return new W(n,r)}}return new W(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,o=Fr(n,i);return o+1<i?new T(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(dd.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new T(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new W(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,d=a.column;if(l===1&&d===1)return null;if(r){const u=this._deleteWordLeftWhitespace(i,a);if(u)return u}let c=Je._findPreviousWordOnLine(n,i,a);return t===0?c?d=c.start+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l)):(c&&d<=c.end+1&&(c=Je._findPreviousWordOnLine(n,i,new W(l,c.start+1))),c?d=c.end+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l))),new T(l,d,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new W(n.positionLineNumber,n.positionColumn),o=this._deleteInsideWordWhitespace(t,i);return o||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;r+1<i&&this._charAtIsWhitespace(n,r+1);)r++;return new T(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),o=i.length;if(o===0)return n.lineNumber>1?new T(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new T(n.lineNumber,1,n.lineNumber+1,1):new T(n.lineNumber,1,n.lineNumber,1);const r=h(u=>u.start+1<=n.column&&n.column<=u.end+1,"touchesWord"),a=h((u,f)=>(u=Math.min(u,n.column),f=Math.max(f,n.column),new T(n.lineNumber,u,n.lineNumber,f)),"createRangeWithPosition"),l=h(u=>{let f=u.start+1,g=u.end+1,m=!1;for(;g-1<o&&this._charAtIsWhitespace(i,g-1);)m=!0,g++;if(!m)for(;f>1&&this._charAtIsWhitespace(i,f-2);)f--;return a(f,g)},"deleteWordAndAdjacentWhitespace"),d=Je._findPreviousWordOnLine(e,t,n);if(d&&r(d))return l(d);const c=Je._findNextWordOnLine(e,t,n);return c&&r(c)?l(c):d&&c?a(d.end+1,c.start+1):d?a(d.start+1,d.end+1):c?a(c.start+1,c.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=Je._moveWordPartLeft(e,n);return new T(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const o=e.charAt(i);if(o!==" "&&o!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,o=this._findFirstNonWhitespaceChar(n,i);return i+1<o?new T(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new W(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,d=a.column;const c=i.getLineCount(),u=i.getLineMaxColumn(l);if(l===c&&d===u)return null;if(r){const g=this._deleteWordRightWhitespace(i,a);if(g)return g}let f=Je._findNextWordOnLine(n,i,a);return t===2?f?d=f.end+1:d<u||l===c?d=u:(l++,f=Je._findNextWordOnLine(n,i,new W(l,1)),f?d=f.start+1:d=i.getLineMaxColumn(l)):(f&&d>=f.start+1&&(f=Je._findNextWordOnLine(n,i,new W(l,f.end+1))),f?d=f.start+1:d<u||l===c?d=u:(l++,f=Je._findNextWordOnLine(n,i,new W(l,1)),f?d=f.start+1:d=i.getLineMaxColumn(l))),new T(l,d,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=Je._moveWordPartRight(e,n);return new T(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new T(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=Qo(t),o=Je._findPreviousWordOnLine(i,e,n);if(o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end)return Je._createWordAtPosition(e,n.lineNumber,o);const r=Je._findNextWordOnLine(i,e,n);return r&&r.wordType===1&&r.start<=n.column-1&&n.column-1<=r.end?Je._createWordAtPosition(e,n.lineNumber,r):null}static word(e,t,n,i,o){const r=Qo(e.wordSeparators),a=Je._findPreviousWordOnLine(r,t,o),l=Je._findNextWordOnLine(r,t,o);if(!i){let g,m;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(g=a.start+1,m=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(g=l.start+1,m=l.end+1):(a?g=a.end+1:g=1,l?m=l.start+1:m=t.getLineMaxColumn(o.lineNumber)),new Dn(new T(o.lineNumber,g,o.lineNumber,m),0,new W(o.lineNumber,m),0)}let d,c;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(d=a.start+1,c=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(d=l.start+1,c=l.end+1):(d=o.column,c=o.column);const u=o.lineNumber;let f;if(n.selectionStart.containsPosition(o))f=n.selectionStart.endColumn;else if(o.isBeforeOrEqual(n.selectionStart.getStartPosition())){f=d;const g=new W(u,f);n.selectionStart.containsPosition(g)&&(f=n.selectionStart.endColumn)}else{f=c;const g=new W(u,f);n.selectionStart.containsPosition(g)&&(f=n.selectionStart.startColumn)}return n.move(!0,u,f,0)}}h(Je,"WordOperations");class W_ extends Je{static deleteWordPartLeft(e){const t=Kb([Je.deleteWordLeft(e,0),Je.deleteWordLeft(e,2),Je._deleteWordPartLeft(e.model,e.selection)]);return t.sort(T.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=Kb([Je.deleteWordRight(e,0),Je.deleteWordRight(e,2),Je._deleteWordPartRight(e.model,e.selection)]);return t.sort(T.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const i=Kb([Je.moveWordLeft(e,t,n,0),Je.moveWordLeft(e,t,n,2),Je._moveWordPartLeft(t,n)]);return i.sort(W.compare),i[2]}static moveWordPartRight(e,t,n){const i=Kb([Je.moveWordRight(e,t,n,0),Je.moveWordRight(e,t,n,2),Je._moveWordPartRight(t,n)]);return i.sort(W.compare),i[0]}}h(W_,"WordPartOperations");function Kb(s){return s.filter(e=>Boolean(e))}h(Kb,"enforceDefined");class Ln{static addCursorDown(e,t,n){const i=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[o++]=new Be(l.modelState,l.viewState),n?i[o++]=Be.fromModelState(ot.translateDown(e.cursorConfig,e.model,l.modelState)):i[o++]=Be.fromViewState(ot.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){const i=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[o++]=new Be(l.modelState,l.viewState),n?i[o++]=Be.fromModelState(ot.translateUp(e.cursorConfig,e.model,l.modelState)):i[o++]=Be.fromViewState(ot.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){let i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];i[o]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,o=t.modelState.position.column,r=i===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Be.fromViewState(ot.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Be.fromModelState(ot.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=this._moveToLineEnd(e,l,n,i)}return o}static _moveToLineEnd(e,t,n,i){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),a=o.column===r,l=t.modelState.position,d=e.model.getLineMaxColumn(l.lineNumber),c=r-o.column===d-l.column;return a||c?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return Be.fromViewState(ot.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return Be.fromModelState(ot.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const r=t[i],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let d=r.modelState.selection.endLineNumber,c;d===l?c=e.model.getLineMaxColumn(l):(d++,c=1),n[i]=Be.fromModelState(new Dn(new T(a,1,a,1),0,new W(d,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];i[o]=Be.fromModelState(ot.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];i[o]=Be.fromModelState(ot.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return Be.fromModelState(new Dn(new T(1,1,1,1),0,new W(n,i),0))}static line(e,t,n,i,o){const r=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new W(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!n||!t.modelState.hasSelection()){const d=e.model.getLineCount();let c=r.lineNumber+1,u=1;return c>d&&(c=d,u=e.model.getLineMaxColumn(c)),Be.fromModelState(new Dn(new T(r.lineNumber,1,c,u),0,new W(c,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return Be.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(r.lineNumber>l){const d=e.getLineCount();let c=a.lineNumber+1,u=1;return c>d&&(c=d,u=e.getLineMaxColumn(c)),Be.fromViewState(t.viewState.move(t.modelState.hasSelection(),c,u,0))}else{const d=t.modelState.selectionStart.getEndPosition();return Be.fromModelState(t.modelState.move(t.modelState.hasSelection(),d.lineNumber,d.column,0))}}static word(e,t,n,i){const o=e.model.validatePosition(i);return Be.fromModelState(Je.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Be(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return Be.fromViewState(new Dn(new T(n,i,n,i),0,new W(n,i),0))}static moveTo(e,t,n,i,o){const r=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new W(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return Be.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,o,r){switch(n){case 0:return r===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,o);case 1:return r===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,o);case 2:return r===2?this._moveUpByViewLines(e,t,i,o):this._moveUpByModelLines(e,t,i,o);case 3:return r===2?this._moveDownByViewLines(e,t,i,o):this._moveDownByModelLines(e,t,i,o);case 4:return r===2?t.map(a=>Be.fromViewState(ot.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Be.fromModelState(ot.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return r===2?t.map(a=>Be.fromViewState(ot.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>Be.fromModelState(ot.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,o){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case 14:{const l=[];for(let d=0,c=t.length;d<c;d++){const u=t[d];l[d]=this.findPositionInViewportIfOutside(e,u,r,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new Be(t.modelState,t.viewState);{let r;o>n.endLineNumber-1?r=n.endLineNumber-1:o<n.startLineNumber?r=n.startLineNumber:r=o;const a=ot.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return Be.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(o=>Be.fromViewState(ot.moveLeft(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(l).length/2);i[o]=Be.fromViewState(ot.moveLeft(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveRight(e,t,n,i){return t.map(o=>Be.fromViewState(ot.moveRight(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineRight(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(l).length/2);i[o]=Be.fromViewState(ot.moveRight(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveDownByViewLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Be.fromViewState(ot.moveDown(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveDownByModelLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Be.fromModelState(ot.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveUpByViewLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Be.fromViewState(ot.moveUp(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveUpByModelLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=Be.fromModelState(ot.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveToViewPosition(e,t,n,i,o){return Be.fromViewState(t.viewState.move(n,i,o,0))}static _moveToModelPosition(e,t,n,i,o){return Be.fromModelState(t.modelState.move(n,i,o,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,d=e.getLineMinColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,d=e.getLineFirstNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,d=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,d=e.getLineMaxColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,d=e.getLineLastNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}}h(Ln,"CursorMoveCommands");var lC;(function(s){const e=h(function(n){if(!Wi(n))return!1;const i=n;return!(!Yo(i.to)||!Ji(i.select)&&!HP(i.select)||!Ji(i.by)&&!Yo(i.by)||!Ji(i.value)&&!Gc(i.value))},"isCursorMoveArgs");s.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},s.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case s.RawDirection.Left:i=0;break;case s.RawDirection.Right:i=1;break;case s.RawDirection.Up:i=2;break;case s.RawDirection.Down:i=3;break;case s.RawDirection.PrevBlankLine:i=4;break;case s.RawDirection.NextBlankLine:i=5;break;case s.RawDirection.WrappedLineStart:i=6;break;case s.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case s.RawDirection.WrappedLineColumnCenter:i=8;break;case s.RawDirection.WrappedLineEnd:i=9;break;case s.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case s.RawDirection.ViewPortTop:i=11;break;case s.RawDirection.ViewPortBottom:i=13;break;case s.RawDirection.ViewPortCenter:i=12;break;case s.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let o=0;switch(n.by){case s.RawUnit.Line:o=1;break;case s.RawUnit.WrappedLine:o=2;break;case s.RawUnit.Character:o=3;break;case s.RawUnit.HalfLine:o=4;break}return{direction:i,unit:o,select:!!n.select,value:n.value||1}}h(t,"parse"),s.parse=t})(lC||(lC={}));const Wy=Object.create(null);function Hd(s,e){if(e<=0)return"";Wy[s]||(Wy[s]=["",s]);const t=Wy[s];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+s;return t[e]}h(Hd,"cachedStringRepeat");class Xi{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,o){const r=mn.visibleColumnFromColumn(e,t,n);if(o){const a=Hd(" ",i),d=mn.prevIndentTabStop(r,i)/i;return Hd(a,d)}else{const a="	",d=mn.prevRenderTabStop(r,n)/n;return Hd(a,d)}}static shiftIndent(e,t,n,i,o){const r=mn.visibleColumnFromColumn(e,t,n);if(o){const a=Hd(" ",i),d=mn.nextIndentTabStop(r,i)/i;return Hd(a,d)}else{const a="	",d=mn.nextRenderTabStop(r,n)/n;return Hd(a,d)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:o,indentSize:r,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,c=0;for(let u=n;u<=i;u++,d=c){c=0;const f=e.getLineContent(u);let g=bi(f);if(this._opts.isUnshift&&(f.length===0||g===0)||!l&&!this._opts.isUnshift&&f.length===0)continue;if(g===-1&&(g=f.length),u>1&&mn.visibleColumnFromColumn(f,g+1,o)%r!==0&&e.isCheapToTokenize(u-1)){const v=fn.getEnterAction(this._opts.autoIndent,e,new T(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)));if(v){if(c=d,v.appendText)for(let C=0,w=v.appendText.length;C<w&&c<r&&v.appendText.charCodeAt(C)===32;C++)c++;v.removeText&&(c=Math.max(0,c-v.removeText));for(let C=0;C<c&&!(g===0||f.charCodeAt(g-1)!==32);C++)g--}}if(this._opts.isUnshift&&g===0)continue;let m;this._opts.isUnshift?m=Xi.unshiftIndent(f,g+1,o,r,a):m=Xi.shiftIndent(f,g+1,o,r,a),this._addEditOperation(t,new T(u,1,u,g+1),m),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=g+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const d=a?Hd(" ",r):"	";for(let c=n;c<=i;c++){const u=e.getLineContent(c);let f=bi(u);if(!(this._opts.isUnshift&&(u.length===0||f===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(f===-1&&(f=u.length),!(this._opts.isUnshift&&f===0)))if(this._opts.isUnshift){f=Math.min(f,r);for(let g=0;g<f;g++)if(u.charCodeAt(g)===9){f=g+1;break}this._addEditOperation(t,new T(c,1,c,f+1),"")}else this._addEditOperation(t,new T(c,1,c,1),d),c===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const i=t.getInverseEditOperations()[0];return new oe(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new oe(n.startLineNumber,i,n.endLineNumber,n.endColumn):new oe(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}}h(Xi,"ShiftCommand");class qF{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new T(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new T(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range,o=n[1].range;return new oe(i.endLineNumber,i.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}h(qF,"SurroundSelectionCommand");class Rt{static indent(e,t,n){if(t===null||n===null)return[];const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=new Xi(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static outdent(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=new Xi(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return i}static shiftIndent(e,t,n){return n=n||1,Xi.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Xi.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){const o=[];for(let r=0,a=n.length;r<a;r++)o[r]=new Pn(n[r],i[r]);return new Ni(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,o){const r=[];for(let a=0,l=n.length;a<l;a++){const d=n[a],c=d.getPosition();if(o&&!d.isEmpty()&&(o=!1),o&&i.indexOf(`
`)!==i.length-1&&(o=!1),o){const u=new T(c.lineNumber,1,c.lineNumber,1);r[a]=new j0(u,i,d,!0)}else r[a]=new Pn(d,i)}return new Ni(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,o){if(i||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));const r=zr(n);if(r.length===t.length)return r}return null}static paste(e,t,n,i,o,r){const a=this._distributePasteToCursors(e,n,i,o,r);return a?(n=n.sort(T.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,o)}static _goodIndentForLine(e,t,n){let i=null,o="";const r=fn.getInheritIndentForLine(e.autoIndent,t,n,!1);if(r)i=r.action,o=r.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const c=t.getLineContent(a);if(Fr(c)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),d=fn.getEnterAction(e.autoIndent,t,new T(a,l,a,l));d&&(o=d.indentation+d.appendText)}return i&&(i===sn.Indent&&(o=Rt.shiftIndent(e,o)),i===sn.Outdent&&(o=Rt.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,n,i){let o="";const r=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,d=l-a%l;for(let c=0;c<d;c++)o+=" "}else o="	";return new Pn(n,o,i)}static tab(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++){const a=n[o];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.isCheapToTokenize(a.startLineNumber)){let d=this._goodIndentForLine(e,t,a.startLineNumber);d=d||"	";const c=e.normalizeIndentation(d);if(!l.startsWith(c)){i[o]=new Pn(new T(a.startLineNumber,1,a.startLineNumber,l.length+1),c,!0);continue}}i[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[o]=new Xi(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return i}static compositionType(e,t,n,i,o,r,a,l){const d=i.map(c=>this._compositionType(n,c,o,r,a,l));return new Ni(4,d,{shouldPushStackElementBefore:Ub(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,o,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),c=new T(a.lineNumber,l,a.lineNumber,d);return e.getValueInRange(c)===n&&r===0?null:new jp(c,n,0,r)}static _typeCommand(e,t,n){return n?new _p(e,t,!0):new Pn(e,t,!0)}static _enter(e,t,n,i){if(e.autoIndent===0)return Rt._typeCommand(i,`
`,n);if(!t.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(i.startLineNumber),d=pt(l).substring(0,i.startColumn-1);return Rt._typeCommand(i,`
`+e.normalizeIndentation(d),n)}const o=fn.getEnterAction(e.autoIndent,t,i);if(o){if(o.indentAction===sn.None)return Rt._typeCommand(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===sn.Indent)return Rt._typeCommand(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===sn.IndentOutdent){const l=e.normalizeIndentation(o.indentation),d=e.normalizeIndentation(o.indentation+o.appendText),c=`
`+d+`
`+l;return n?new _p(i,c,!0):new jp(i,c,-1,d.length-l.length,!0)}else if(o.indentAction===sn.Outdent){const l=Rt.unshiftIndent(e,o.indentation);return Rt._typeCommand(i,`
`+e.normalizeIndentation(l+o.appendText),n)}}const r=t.getLineContent(i.startLineNumber),a=pt(r).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=fn.getIndentForEnter(e.autoIndent,t,i,{unshiftIndent:d=>Rt.unshiftIndent(e,d),shiftIndent:d=>Rt.shiftIndent(e,d),normalizeIndentation:d=>e.normalizeIndentation(d)});if(l){let d=e.visibleColumnFromColumn(t,i.getEndPosition());const c=i.endColumn,u=t.getLineContent(i.endLineNumber),f=bi(u);if(f>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,f+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new _p(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let g=0;return c<=f+1&&(e.insertSpaces||(d=Math.ceil(d/e.indentSize)),g=Math.min(d+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new jp(i,`
`+e.normalizeIndentation(l.afterEnter),0,g,!0)}}}return Rt._typeCommand(i,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,o=n.length;i<o;i++)if(!t.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const o=fn.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),r=fn.getIndentActionForType(e.autoIndent,t,n,i,{shiftIndent:a=>Rt.shiftIndent(e,a),unshiftIndent:a=>Rt.unshiftIndent(e,a)});if(r===null)return null;if(r!==e.normalizeIndentation(o)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?Rt._typeCommand(new T(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+i,!1):Rt._typeCommand(new T(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())return!1;const d=l.getPosition(),c=t.getLineContent(d.lineNumber);if(c.charAt(d.column-1)!==o)return!1;const f=yu(o);if((d.column>2?c.charCodeAt(d.column-2):0)===92&&f)return!1;if(e.autoClosingOvertype==="auto"){let m=!1;for(let b=0,v=i.length;b<v;b++){const C=i[b];if(d.lineNumber===C.startLineNumber&&d.column===C.startColumn){m=!0;break}}if(!m)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,o){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a].getPosition(),u=new T(c.lineNumber,c.column,c.lineNumber,c.column+1);r[a]=new Pn(u,o)}return new Ni(4,r,{shouldPushStackElementBefore:Ub(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!r&&a}static _findAutoClosingPairOpen(e,t,n,i){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!o)return null;let r=null;for(const a of o)if(r===null||a.open.length>r.open.length){let l=!0;for(const d of n)if(t.getValueInRange(new T(d.lineNumber,d.column-a.open.length+1,d.lineNumber,d.column))+i!==a.open){l=!1;break}l&&(r=a)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const r of i)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _getAutoClosingPairClose(e,t,n,i,o){const r=yu(i),a=r?e.autoClosingQuotes:e.autoClosingBrackets,l=r?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const m of n)if(!m.isEmpty())return null;const d=n.map(m=>{const b=m.getPosition();return o?{lineNumber:b.lineNumber,beforeColumn:b.column-i.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),c=this._findAutoClosingPairOpen(e,t,d.map(m=>new W(m.lineNumber,m.beforeColumn)),i);if(!c)return null;const u=this._findContainedAutoClosingPair(e,c),f=u?u.close:"";let g=!0;for(const m of d){const{lineNumber:b,beforeColumn:v,afterColumn:C}=m,w=t.getLineContent(b),y=w.substring(0,v-1),S=w.substring(C-1);if(S.startsWith(f)||(g=!1),S.length>0){const k=S.charAt(0);if(!Rt._isBeforeClosingBrace(e,S)&&!l(k))return null}if(c.open.length===1&&(i==="'"||i==='"')&&a!=="always"){const k=Qo(e.wordSeparators);if(y.length>0){const N=y.charCodeAt(y.length-1);if(k.get(N)===0)return null}}if(!t.isCheapToTokenize(b))return null;t.forceTokenization(b);const L=t.getLineTokens(b),E=$w(L,v-1);if(!c.shouldAutoClose(E,v-E.firstCharOffset))return null;const x=c.findNeutralCharacter();if(x){const k=t.getTokenTypeIfInsertingCharacter(b,v,x);if(!c.isOK(k))return null}}return g?c.close.substring(0,c.close.length-f.length):c.close}static _runAutoClosingOpenCharType(e,t,n,i,o,r,a){const l=[];for(let d=0,c=i.length;d<c;d++){const u=i[d];l[d]=new gI(u,o,!r,a)}return new Ni(4,l,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return yu(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,i){if(!Rt._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const o=yu(i);for(let r=0,a=n.length;r<a;r++){const l=n[r];if(l.isEmpty())return!1;let d=!0;for(let c=l.startLineNumber;c<=l.endLineNumber;c++){const u=t.getLineContent(c),f=c===l.startLineNumber?l.startColumn-1:0,g=c===l.endLineNumber?l.endColumn-1:u.length,m=u.substring(f,g);if(/[^ \t]/.test(m)){d=!1;break}}if(d)return!1;if(o&&l.startLineNumber===l.endLineNumber&&l.startColumn+1===l.endColumn){const c=t.getValueInRange(l);if(yu(c))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,o){const r=[];for(let a=0,l=i.length;a<l;a++){const d=i[a],c=t.surroundingPairs[o];r[a]=new qF(d,o,c)}return new Ni(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,o){if(!t.electricChars.hasOwnProperty(o)||!i.isEmpty())return null;const r=i.getPosition();n.forceTokenization(r.lineNumber);const a=n.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(o,a,r.column)}catch(d){return Ne(d),null}if(!l)return null;if(l.matchOpenBracket){const d=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,c=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:d},500);if(c){if(c.startLineNumber===r.lineNumber)return null;const u=n.getLineContent(c.startLineNumber),f=pt(u),g=t.normalizeIndentation(f),m=n.getLineContent(r.lineNumber),b=n.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,v=m.substring(b-1,r.column-1),C=g+v+o,w=new T(r.lineNumber,1,r.lineNumber,r.column),y=new Pn(w,C);return new Ni(Vy(C,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,o,r){if(!i||oe.selectionsArrEqual(i,o))return null;let a=null;for(const d of o){if(!d.isEmpty())return null;const c=d.getPosition(),u=n.getValueInRange(new T(c.lineNumber,c.column-1,c.lineNumber,c.column));if(a===null)a=u;else if(a!==u)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,o,r,a)){const d=o.map(c=>new Pn(new T(c.positionLineNumber,c.positionColumn,c.positionLineNumber,c.positionColumn+1),"",!1));return new Ni(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=this._getAutoClosingPairClose(t,n,o,a,!0);return l!==null?this._runAutoClosingOpenCharType(e,t,n,o,a,!0,l):null}static typeWithInterceptors(e,t,n,i,o,r,a){if(!e&&a===`
`){const c=[];for(let u=0,f=o.length;u<f;u++)c[u]=Rt._enter(n,i,!1,o[u]);return new Ni(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,o)){const c=[];let u=!1;for(let f=0,g=o.length;f<g;f++)if(c[f]=this._runAutoIndentType(n,i,o[f],a),!c[f]){u=!0;break}if(!u)return new Ni(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,i,o,r,a))return this._runAutoClosingOvertype(t,n,i,o,a);if(!e){const c=this._getAutoClosingPairClose(n,i,o,a,!1);if(c)return this._runAutoClosingOpenCharType(t,n,i,o,a,!1,c)}if(this._isSurroundSelectionType(n,i,o,a))return this._runSurroundSelectionType(t,n,i,o,a);if(!e&&this._isTypeInterceptorElectricChar(n,i,o)){const c=this._typeInterceptorElectricChar(t,n,i,o[0],a);if(c)return c}const l=[];for(let c=0,u=o.length;c<u;c++)l[c]=new Pn(o[c],a);const d=Vy(a,t);return new Ni(d,l,{shouldPushStackElementBefore:Ub(t,d),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,o){const r=[];for(let l=0,d=i.length;l<d;l++)r[l]=new Pn(i[l],o);const a=Vy(o,e);return new Ni(a,r,{shouldPushStackElementBefore:Ub(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const i=[];for(let o=0,r=n.length;o<r;o++){let a=n[o].positionLineNumber;if(a===1)i[o]=new _p(new T(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new T(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const i=[];for(let o=0,r=n.length;o<r;o++){const a=n[o].positionLineNumber,l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new T(a,l,a,l))}return i}static lineBreakInsert(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=this._enter(e,t,!0,n[o]);return i}}h(Rt,"TypeOperations");class gI extends jp{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length);this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new T(i.startLineNumber,i.endColumn-this._closeCharacter.length,i.endLineNumber,i.endColumn),this.enclosingRange=new T(i.startLineNumber,i.endColumn-this._openCharacter.length-this._closeCharacter.length,i.endLineNumber,i.endColumn),super.computeCursorState(e,t)}}h(gI,"TypeWithAutoClosingCommand");function Vy(s,e){return s===" "?e===5||e===6?6:5:4}h(Vy,"getTypingOperation");function Ub(s,e){return VM(s)&&!VM(e)?!0:s===5?!1:WM(s)!==WM(e)}h(Ub,"shouldPushStackElementBetween");function WM(s){return s===6||s===5?"space":s}h(WM,"normalizeOperationType");function VM(s){return s===4||s===5||s===6}h(VM,"isTypingOperation");var I;(function(s){s.editorSimpleInput=new re("editorSimpleInput",!1,!0),s.editorTextFocus=new re("editorTextFocus",!1,p("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),s.focus=new re("editorFocus",!1,p("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),s.textInputFocus=new re("textInputFocus",!1,p("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),s.readOnly=new re("editorReadonly",!1,p("editorReadonly","Whether the editor is read only")),s.inDiffEditor=new re("inDiffEditor",!1,p("inDiffEditor","Whether the context is a diff editor")),s.columnSelection=new re("editorColumnSelection",!1,p("editorColumnSelection","Whether `editor.columnSelection` is enabled")),s.writable=s.readOnly.toNegated(),s.hasNonEmptySelection=new re("editorHasSelection",!1,p("editorHasSelection","Whether the editor has text selected")),s.hasOnlyEmptySelection=s.hasNonEmptySelection.toNegated(),s.hasMultipleSelections=new re("editorHasMultipleSelections",!1,p("editorHasMultipleSelections","Whether the editor has multiple selections")),s.hasSingleSelection=s.hasMultipleSelections.toNegated(),s.tabMovesFocus=new re("editorTabMovesFocus",!1,p("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),s.tabDoesNotMoveFocus=s.tabMovesFocus.toNegated(),s.isInWalkThroughSnippet=new re("isInEmbeddedEditor",!1,!0),s.canUndo=new re("canUndo",!1,!0),s.canRedo=new re("canRedo",!1,!0),s.hoverVisible=new re("editorHoverVisible",!1,p("editorHoverVisible","Whether the editor hover is visible")),s.inCompositeEditor=new re("inCompositeEditor",void 0,p("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),s.notInCompositeEditor=s.inCompositeEditor.toNegated(),s.languageId=new re("editorLangId","",p("editorLangId","The language identifier of the editor")),s.hasCompletionItemProvider=new re("editorHasCompletionItemProvider",!1,p("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),s.hasCodeActionsProvider=new re("editorHasCodeActionsProvider",!1,p("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),s.hasCodeLensProvider=new re("editorHasCodeLensProvider",!1,p("editorHasCodeLensProvider","Whether the editor has a code lens provider")),s.hasDefinitionProvider=new re("editorHasDefinitionProvider",!1,p("editorHasDefinitionProvider","Whether the editor has a definition provider")),s.hasDeclarationProvider=new re("editorHasDeclarationProvider",!1,p("editorHasDeclarationProvider","Whether the editor has a declaration provider")),s.hasImplementationProvider=new re("editorHasImplementationProvider",!1,p("editorHasImplementationProvider","Whether the editor has an implementation provider")),s.hasTypeDefinitionProvider=new re("editorHasTypeDefinitionProvider",!1,p("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),s.hasHoverProvider=new re("editorHasHoverProvider",!1,p("editorHasHoverProvider","Whether the editor has a hover provider")),s.hasDocumentHighlightProvider=new re("editorHasDocumentHighlightProvider",!1,p("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),s.hasDocumentSymbolProvider=new re("editorHasDocumentSymbolProvider",!1,p("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),s.hasReferenceProvider=new re("editorHasReferenceProvider",!1,p("editorHasReferenceProvider","Whether the editor has a reference provider")),s.hasRenameProvider=new re("editorHasRenameProvider",!1,p("editorHasRenameProvider","Whether the editor has a rename provider")),s.hasSignatureHelpProvider=new re("editorHasSignatureHelpProvider",!1,p("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),s.hasInlayHintsProvider=new re("editorHasInlayHintsProvider",!1,p("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),s.hasDocumentFormattingProvider=new re("editorHasDocumentFormattingProvider",!1,p("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),s.hasDocumentSelectionFormattingProvider=new re("editorHasDocumentSelectionFormattingProvider",!1,p("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),s.hasMultipleDocumentFormattingProvider=new re("editorHasMultipleDocumentFormattingProvider",!1,p("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),s.hasMultipleDocumentSelectionFormattingProvider=new re("editorHasMultipleDocumentSelectionFormattingProvider",!1,p("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(I||(I={}));const st=0;class nn extends zn{runEditorCommand(e,t,n){const i=t._getViewModel();!i||this.runCoreEditorCommand(i,n||{})}}h(nn,"CoreEditorCommand");var dC;(function(s){const e=h(function(n){if(!Wi(n))return!1;const i=n;return!(!Yo(i.to)||!Ji(i.by)&&!Yo(i.by)||!Ji(i.value)&&!Gc(i.value)||!Ji(i.revealCursor)&&!HP(i.revealCursor))},"isEditorScrollArgs");s.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},s.RawDirection={Up:"up",Down:"down"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let i;switch(n.to){case s.RawDirection.Up:i=1;break;case s.RawDirection.Down:i=2;break;default:return null}let o;switch(n.by){case s.RawUnit.Line:o=1;break;case s.RawUnit.WrappedLine:o=2;break;case s.RawUnit.Page:o=3;break;case s.RawUnit.HalfPage:o=4;break;default:o=2}const r=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:o,value:r,revealCursor:a,select:!!n.select}}h(t,"parse"),s.parse=t})(dC||(dC={}));var Au;(function(s){const e=h(function(t){if(!Wi(t))return!1;const n=t;return!(!Gc(n.lineNumber)&&!Yo(n.lineNumber)||!Ji(n.at)&&!Yo(n.at))},"isRevealLineArgs");s.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},s.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Au||(Au={}));class cC{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(ht).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=document.activeElement;return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(ht).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}h(cC,"EditorOrNativeTextInputCommand");var kn;(function(s){class e extends nn{constructor(w){super(w);this._minimalReveal=w.minimalReveal,this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[Ln.moveTo(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&w.revealPrimaryCursor(y.source,!0,this._minimalReveal)}}h(e,"BaseMoveToCommand"),s.MoveTo=te(new e({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),s.MoveToSelect=te(new e({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class t extends nn{runCoreEditorCommand(w,y){w.model.pushStackElement();const S=this._getColumnSelectResult(w,w.getPrimaryCursorState(),w.getCursorColumnSelectData(),y);w.setCursorStates(y.source,3,S.viewStates.map(L=>Be.fromViewState(L))),w.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:S.fromLineNumber,fromViewVisualColumn:S.fromVisualColumn,toViewLineNumber:S.toLineNumber,toViewVisualColumn:S.toVisualColumn}),S.reversed?w.revealTopMostCursor(y.source):w.revealBottomMostCursor(y.source)}}h(t,"ColumnSelectCommand"),s.ColumnSelect=te(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(C,w,y,S){const L=C.model.validatePosition(S.position),E=C.coordinatesConverter.validateViewPosition(new W(S.viewPosition.lineNumber,S.viewPosition.column),L),x=S.doColumnSelect?y.fromViewLineNumber:E.lineNumber,k=S.doColumnSelect?y.fromViewVisualColumn:S.mouseColumn-1;return Sl.columnSelect(C.cursorConfig,C,x,k,E.lineNumber,S.mouseColumn-1)}}),s.CursorColumnSelectLeft=te(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(C,w,y,S){return Sl.columnSelectLeft(C.cursorConfig,C,y)}}),s.CursorColumnSelectRight=te(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(C,w,y,S){return Sl.columnSelectRight(C.cursorConfig,C,y)}});class n extends t{constructor(w){super(w);this._isPaged=w.isPaged}_getColumnSelectResult(w,y,S,L){return Sl.columnSelectUp(w.cursorConfig,w,S,this._isPaged)}}h(n,"ColumnSelectUpCommand"),s.CursorColumnSelectUp=te(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3600,linux:{primary:0}}})),s.CursorColumnSelectPageUp=te(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3595,linux:{primary:0}}}));class i extends t{constructor(w){super(w);this._isPaged=w.isPaged}_getColumnSelectResult(w,y,S,L){return Sl.columnSelectDown(w.cursorConfig,w,S,this._isPaged)}}h(i,"ColumnSelectDownCommand"),s.CursorColumnSelectDown=te(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3602,linux:{primary:0}}})),s.CursorColumnSelectPageDown=te(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends nn{constructor(){super({id:"cursorMove",precondition:void 0,description:lC.description})}runCoreEditorCommand(w,y){const S=lC.parse(y);!S||this._runCursorMove(w,y.source,S)}_runCursorMove(w,y,S){w.model.pushStackElement(),w.setCursorStates(y,3,o._move(w,w.getCursorStates(),S)),w.revealPrimaryCursor(y,!0)}static _move(w,y,S){const L=S.select,E=S.value;switch(S.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Ln.simpleMove(w,y,S.direction,L,E,S.unit);case 11:case 13:case 12:case 14:return Ln.viewportMove(w,y,S.direction,L,E);default:return null}}}h(o,"CursorMoveImpl"),s.CursorMoveImpl=o,s.CursorMove=te(new o);class r extends nn{constructor(w){super(w);this._staticArgs=w.args}runCoreEditorCommand(w,y){let S=this._staticArgs;this._staticArgs.value===-1&&(S={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||w.cursorConfig.pageSize}),w.model.pushStackElement(),w.setCursorStates(y.source,3,Ln.simpleMove(w,w.getCursorStates(),S.direction,S.select,S.value,S.unit)),w.revealPrimaryCursor(y.source,!0)}}h(r,"CursorMoveBasedCommand"),s.CursorLeft=te(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),s.CursorLeftSelect=te(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1039}})),s.CursorRight=te(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),s.CursorRightSelect=te(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1041}})),s.CursorUp=te(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),s.CursorUpSelect=te(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),s.CursorPageUp=te(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:11}})),s.CursorPageUpSelect=te(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1035}})),s.CursorDown=te(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),s.CursorDownSelect=te(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),s.CursorPageDown=te(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:12}})),s.CursorPageDownSelect=te(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1036}})),s.CreateCursor=te(new class extends nn{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(C,w){let y;w.wholeLine?y=Ln.line(C,C.getPrimaryCursorState(),!1,w.position,w.viewPosition):y=Ln.moveTo(C,C.getPrimaryCursorState(),!1,w.position,w.viewPosition);const S=C.getCursorStates();if(S.length>1){const L=y.modelState?y.modelState.position:null,E=y.viewState?y.viewState.position:null;for(let x=0,k=S.length;x<k;x++){const N=S[x];if(!(L&&!N.modelState.selection.containsPosition(L))&&!(E&&!N.viewState.selection.containsPosition(E))){S.splice(x,1),C.model.pushStackElement(),C.setCursorStates(w.source,3,S);return}}}S.push(y),C.model.pushStackElement(),C.setCursorStates(w.source,3,S)}}),s.LastCursorMoveToSelect=te(new class extends nn{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(C,w){const y=C.getLastAddedCursorIndex(),S=C.getCursorStates(),L=S.slice(0);L[y]=Ln.moveTo(C,S[y],!0,w.position,w.viewPosition),C.model.pushStackElement(),C.setCursorStates(w.source,3,L)}});class a extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,Ln.moveToBeginningOfLine(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(y.source,!0)}}h(a,"HomeCommand"),s.CursorHome=te(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),s.CursorHomeSelect=te(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,this._exec(w.getCursorStates())),w.revealPrimaryCursor(y.source,!0)}_exec(w){const y=[];for(let S=0,L=w.length;S<L;S++){const E=w[S],x=E.modelState.position.lineNumber;y[S]=Be.fromModelState(E.modelState.move(this._inSelectionMode,x,1,0))}return y}}h(l,"LineStartCommand"),s.CursorLineStart=te(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:0,mac:{primary:287}}})),s.CursorLineStartSelect=te(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:0,mac:{primary:1311}}}));class d extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,Ln.moveToEndOfLine(w,w.getCursorStates(),this._inSelectionMode,y.sticky||!1)),w.revealPrimaryCursor(y.source,!0)}}h(d,"EndCommand"),s.CursorEnd=te(new d({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:st,kbExpr:I.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),s.CursorEndSelect=te(new d({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:st,kbExpr:I.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class c extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,this._exec(w,w.getCursorStates())),w.revealPrimaryCursor(y.source,!0)}_exec(w,y){const S=[];for(let L=0,E=y.length;L<E;L++){const x=y[L],k=x.modelState.position.lineNumber,N=w.model.getLineMaxColumn(k);S[L]=Be.fromModelState(x.modelState.move(this._inSelectionMode,k,N,0))}return S}}h(c,"LineEndCommand"),s.CursorLineEnd=te(new c({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:0,mac:{primary:291}}})),s.CursorLineEndSelect=te(new c({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,Ln.moveToBeginningOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(y.source,!0)}}h(u,"TopCommand"),s.CursorTop=te(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:2062,mac:{primary:2064}}})),s.CursorTopSelect=te(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3086,mac:{primary:3088}}}));class f extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,Ln.moveToEndOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealPrimaryCursor(y.source,!0)}}h(f,"BottomCommand"),s.CursorBottom=te(new f({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:2061,mac:{primary:2066}}})),s.CursorBottomSelect=te(new f({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:3085,mac:{primary:3090}}}));class g extends nn{constructor(){super({id:"editorScroll",precondition:void 0,description:dC.description})}runCoreEditorCommand(w,y){const S=dC.parse(y);!S||this._runEditorScroll(w,y.source,S)}_runEditorScroll(w,y,S){const L=this._computeDesiredScrollTop(w,S);if(S.revealCursor){const E=w.getCompletelyVisibleViewRangeAtScrollTop(L);w.setCursorStates(y,3,[Ln.findPositionInViewportIfOutside(w,w.getPrimaryCursorState(),E,S.select)])}w.viewLayout.setScrollPosition({scrollTop:L},0)}_computeDesiredScrollTop(w,y){if(y.unit===1){const E=w.getCompletelyVisibleViewRange(),x=w.coordinatesConverter.convertViewRangeToModelRange(E);let k;y.direction===1?k=Math.max(1,x.startLineNumber-y.value):k=Math.min(w.model.getLineCount(),x.startLineNumber+y.value);const N=w.coordinatesConverter.convertModelPositionToViewPosition(new W(k,1));return w.viewLayout.getVerticalOffsetForLineNumber(N.lineNumber)}let S;y.unit===3?S=w.cursorConfig.pageSize*y.value:y.unit===4?S=Math.round(w.cursorConfig.pageSize/2)*y.value:S=y.value;const L=(y.direction===1?-1:1)*S;return w.viewLayout.getCurrentScrollTop()+L*w.cursorConfig.lineHeight}}h(g,"EditorScrollImpl"),s.EditorScrollImpl=g,s.EditorScroll=te(new g),s.ScrollLineUp=te(new class extends nn{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(C,w){s.EditorScroll._runEditorScroll(C,w.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),s.ScrollPageUp=te(new class extends nn{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(C,w){s.EditorScroll._runEditorScroll(C,w.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),s.ScrollLineDown=te(new class extends nn{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(C,w){s.EditorScroll._runEditorScroll(C,w.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),s.ScrollPageDown=te(new class extends nn{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(C,w){s.EditorScroll._runEditorScroll(C,w.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class m extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[Ln.word(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position)]),w.revealPrimaryCursor(y.source,!0)}}h(m,"WordCommand"),s.WordSelect=te(new m({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),s.WordSelectDrag=te(new m({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),s.LastCursorWordSelect=te(new class extends nn{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(C,w){const y=C.getLastAddedCursorIndex(),S=C.getCursorStates(),L=S.slice(0),E=S[y];L[y]=Ln.word(C,E,E.modelState.hasSelection(),w.position),C.model.pushStackElement(),C.setCursorStates(w.source,3,L)}});class b extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){w.model.pushStackElement(),w.setCursorStates(y.source,3,[Ln.line(w,w.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),w.revealPrimaryCursor(y.source,!1)}}h(b,"LineCommand"),s.LineSelect=te(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),s.LineSelectDrag=te(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class v extends nn{constructor(w){super(w);this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,y){const S=w.getLastAddedCursorIndex(),L=w.getCursorStates(),E=L.slice(0);E[S]=Ln.line(w,L[S],this._inSelectionMode,y.position,y.viewPosition),w.model.pushStackElement(),w.setCursorStates(y.source,3,E)}}h(v,"LastCursorLineCommand"),s.LastCursorLineSelect=te(new v({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),s.LastCursorLineSelectDrag=te(new v({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),s.CancelSelection=te(new class extends nn{constructor(){super({id:"cancelSelection",precondition:I.hasNonEmptySelection,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[Ln.cancelSelection(C,C.getPrimaryCursorState())]),C.revealPrimaryCursor(w.source,!0)}}),s.RemoveSecondaryCursors=te(new class extends nn{constructor(){super({id:"removeSecondaryCursors",precondition:I.hasMultipleSelections,kbOpts:{weight:st+1,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[C.getPrimaryCursorState()]),C.revealPrimaryCursor(w.source,!0),Jw(p("removedCursor","Removed secondary cursors"))}}),s.RevealLine=te(new class extends nn{constructor(){super({id:"revealLine",precondition:void 0,description:Au.description})}runCoreEditorCommand(C,w){const y=w,S=y.lineNumber||0;let L=typeof S=="number"?S+1:parseInt(S)+1;L<1&&(L=1);const E=C.model.getLineCount();L>E&&(L=E);const x=new T(L,1,L,C.model.getLineMaxColumn(L));let k=0;if(y.at)switch(y.at){case Au.RawAtArgument.Top:k=3;break;case Au.RawAtArgument.Center:k=1;break;case Au.RawAtArgument.Bottom:k=4;break}const N=C.coordinatesConverter.convertModelRangeToViewRange(x);C.revealRange(w.source,!1,N,k,0)}}),s.SelectAll=new class extends cC{constructor(){super(pq)}runDOMCommand(){Eo&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(C,w,y){const S=w._getViewModel();!S||this.runCoreEditorCommand(S,y)}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates("keyboard",3,[Ln.selectAll(C,C.getPrimaryCursorState())])}},s.SetSelection=te(new class extends nn{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(C,w){C.model.pushStackElement(),C.setCursorStates(w.source,3,[Be.fromModelSelection(w.selection)])}})})(kn||(kn={}));const zX=se.and(I.textInputFocus,I.columnSelection);function Sg(s,e){Ci.registerKeybindingRule({id:s,primary:e,when:zX,weight:st+1})}h(Sg,"registerColumnSelection");Sg(kn.CursorColumnSelectLeft.id,1039);Sg(kn.CursorColumnSelectRight.id,1041);Sg(kn.CursorColumnSelectUp.id,1040);Sg(kn.CursorColumnSelectPageUp.id,1035);Sg(kn.CursorColumnSelectDown.id,1042);Sg(kn.CursorColumnSelectPageDown.id,1036);function BM(s){return s.register(),s}h(BM,"registerCommand$2");var Zu;(function(s){class e extends zn{runEditorCommand(n,i,o){const r=i._getViewModel();!r||this.runCoreEditingCommand(i,r,o||{})}}h(e,"CoreEditingCommand"),s.CoreEditingCommand=e,s.LineBreakInsert=te(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:I.writable,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Rt.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection)))}}),s.Outdent=te(new class extends e{constructor(){super({id:"outdent",precondition:I.writable,kbOpts:{weight:st,kbExpr:se.and(I.editorTextFocus,I.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Rt.outdent(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),s.Tab=te(new class extends e{constructor(){super({id:"tab",precondition:I.writable,kbOpts:{weight:st,kbExpr:se.and(I.editorTextFocus,I.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,Rt.tab(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),s.DeleteLeft=te(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,i){const[o,r]=dd.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(2)}}),s.DeleteRight=te(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:st,kbExpr:I.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,i){const[o,r]=dd.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(3)}}),s.Undo=new class extends cC{constructor(){super(F5)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(81)===!0))return n.getModel().undo()}},s.Redo=new class extends cC{constructor(){super(W5)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(81)===!0))return n.getModel().redo()}}})(Zu||(Zu={}));class qT extends M_{constructor(e,t,n){super({id:e,precondition:void 0,description:n});this._handlerId=t}runCommand(e,t){const n=e.get(ht).getFocusedCodeEditor();!n||n.trigger("keyboard",this._handlerId,t)}}h(qT,"EditorHandlerCommand");function Hh(s,e){BM(new qT("default:"+s,s)),BM(new qT(s,s,e))}h(Hh,"registerOverwritableCommand");Hh("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Hh("replacePreviousChar");Hh("compositionType");Hh("compositionStart");Hh("compositionEnd");Hh("paste");Hh("cut");class YF{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){kn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new W(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(70)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(70)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=ni&&t.get(96),i=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){kn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){kn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),kn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),kn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){kn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){kn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){kn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){kn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){kn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){kn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){kn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){kn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){kn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}h(YF,"ViewController");class V_{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return V_.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n=Object.assign({},e);return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),n}}h(V_,"ViewUserInputEvents");var By;class pI{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let o=0,r=0;for(let l=n;l<=i;l++){const d=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(o=d,r=1):r++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(o,r)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),i=this.getEndLineNumber();let o=!1;for(let r=e;r<=t;r++)r>=n&&r<=i&&(this._lines[r-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const r=[];for(let u=0;u<n;u++)r[u]=this._createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),d=this._lines.slice(a,this._lines.length-n),c=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(r).concat(d),c}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let o=0,r=e.length;o<r;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),d=Math.min(n,a.toLineNumber);for(let c=l;c<=d;c++){const u=c-this._rendLineNumberStart;this._lines[u].onTokensChanged(),i=!0}}return i}}h(pI,"RenderedLinesCollection");class mI{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new pI(()=>this._host.createVisibleLine())}_createDomNode(){const e=nt(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(131)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new Ir(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}h(mI,"VisibleLinesCollection");class Ir{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(let r=t;r<=n;r++)o.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,i),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),i,t),o.rendLineNumberStart>t){const r=t,a=Math.min(n,o.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(o,r,a,i,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart<t){const r=Math.min(o.linesLength,t-o.rendLineNumberStart);r>0&&(this._removeLinesBefore(o,r),o.linesLength-=r)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){const r=o.rendLineNumberStart+o.linesLength,a=n;r<=a&&(this._insertLinesAfter(o,r,a,i,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){const r=Math.max(0,n-o.rendLineNumberStart+1),l=o.linesLength-1-r+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,i),o}_renderUntouchedLines(e,t,n,i,o){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const d=r+l;a[l].layoutLine(d,i[d-o])}}_insertLinesBefore(e,t,n,i,o){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,o){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const o=e.lines[n+i].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){Ir._ttPolicy&&(n=Ir._ttPolicy.createHTML(n));const o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=n:o.insertAdjacentHTML("afterend",n);let r=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");Ir._ttPolicy&&(t=Ir._ttPolicy.createHTML(t)),i.innerHTML=t;for(let o=0;o<e.linesLength;o++){const r=e.lines[o];if(n[o]){const a=i.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,n){const i=Ir._sb,o=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let d=!1;for(let c=0;c<o;c++){const u=r[c];l[c]=!1,!(u.getDomNode()||!u.renderLine(c+a,n[c],this.viewportData,i))&&(l[c]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let d=!1;const c=[];for(let u=0;u<o;u++){const f=r[u];c[u]=!1,!(l[u]||!f.renderLine(u+a,n[u],this.viewportData,i))&&(c[u]=!0,d=!0)}d&&this._finishRenderingInvalidLines(e,i.build(),c)}}}h(Ir,"ViewLayerRenderer");Ir._ttPolicy=(By=window.trustedTypes)===null||By===void 0?void 0:By.createPolicy("editorViewLayer",{createHTML:s=>s});Ir._sb=Yc(1e5);class _I extends No{constructor(e){super(e);this._visibleLines=new mI(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new XF(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const o=t[n];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}h(_I,"ViewOverlays");class XF{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(59),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=nt(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(59)}renderLine(e,t,n,i){let o="";for(let r=0,a=this._dynamicOverlays.length;r<a;r++)o+=this._dynamicOverlays[r].render(n.startLineNumber,e);return this._renderedContent===o?!1:(this._renderedContent=o,i.appendASCIIString('<div style="position:absolute;top:'),i.appendASCIIString(String(t)),i.appendASCIIString("px;width:100%;height:"),i.appendASCIIString(String(this._lineHeight)),i.appendASCIIString('px;">'),i.appendASCIIString(o),i.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}h(XF,"ViewOverlayLine");class ZF extends _I{constructor(e){super(e);const n=this._context.configuration.options.get(131);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(131);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}h(ZF,"ContentViewOverlays");class JF extends _I{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(131);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),ti(this.domNode,t.get(44))}onConfigurationChanged(e){const t=this._context.configuration.options;ti(this.domNode,t.get(44));const n=t.get(131);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}h(JF,"MarginViewOverlays");class Su{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}h(Su,"Coordinate");class QF extends No{constructor(e,t){super(e);this._viewDomNode=t,this._widgets={},this.domNode=nt(document.createElement("div")),or.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=nt(document.createElement("div")),or.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new e3(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.parentNode.removeChild(i),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}h(QF,"ViewContentWidgets");class e3{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=nt(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,o=i.get(131);this._fixedOverflowWidgets=i.get(36),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=i.get(59),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(59),e.hasChanged(131)){const n=t.get(131);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i,o){const r=e.top,a=r,l=t.top+this._lineHeight,d=o.viewportHeight-l,c=r-i,u=a>=i,f=l,g=d>=i;let m=e.left,b=t.left;return m+n>o.scrollLeft+o.viewportWidth&&(m=o.scrollLeft+o.viewportWidth-n),b+n>o.scrollLeft+o.viewportWidth&&(b=o.scrollLeft+o.viewportWidth-n),m<o.scrollLeft&&(m=o.scrollLeft),b<o.scrollLeft&&(b=o.scrollLeft),{fitsAbove:u,aboveTop:c,aboveLeft:m,fitsBelow:g,belowTop:f,belowLeft:b}}_layoutHorizontalSegmentInPage(e,t,n,i){const o=Math.max(0,t.left-i),r=Math.min(t.left+t.width+i,e.width);let a=t.left+n-Pa.scrollX;if(a+i>r){const l=a-(r-i);a-=l,n-=l}if(a<o){const l=a-o;a-=l,n-=l}return[n,a]}_layoutBoxInPage(e,t,n,i,o){const r=e.top-i,a=t.top+this._lineHeight,l=$n(this._viewDomNode.domNode),d=l.top+r-Pa.scrollY,c=l.top+a-Pa.scrollY,u=D0(document.body),[f,g]=this._layoutHorizontalSegmentInPage(u,l,e.left-o.scrollLeft+this._contentLeft,n),[m,b]=this._layoutHorizontalSegmentInPage(u,l,t.left-o.scrollLeft+this._contentLeft,n),v=22,C=22,w=d>=v,y=c+i<=u.height-C;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(d,v),aboveLeft:g,fitsBelow:y,belowTop:c,belowLeft:b}:{fitsAbove:w,aboveTop:r,aboveLeft:f,fitsBelow:y,belowTop:a,belowLeft:m}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Su(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],i=t[0];for(const u of t)u.lineNumber<n.lineNumber&&(n=u),u.lineNumber>i.lineNumber&&(i=u);let o=1073741824;for(const u of n.ranges)u.left<o&&(o=u.left);let r=1073741824;for(const u of i.ranges)u.left<r&&(r=u.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,l=new Su(a,o),d=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.scrollTop,c=new Su(d,r);return[l,c]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=Hy(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const r=this.domNode.domNode;this._cachedDomNodeOffsetWidth=r.offsetWidth,this._cachedDomNodeOffsetHeight=r.offsetHeight}}let i;this.allowEditorOverflow?i=this._layoutBoxInPage(t,n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):i=this._layoutBoxInViewport(t,n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const r of this._preference)if(r===1){if(!i)return null;if(o===2||i.fitsAbove)return{coordinate:new Su(i.aboveTop,i.aboveLeft),position:1}}else if(r===2){if(!i)return null;if(o===2||i.fitsBelow)return{coordinate:new Su(i.belowTop,i.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&Hy(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&Hy(this._actual.afterRender,this._actual,this._renderData.position)}}h(e3,"Widget$1");function Hy(s,e,...t){try{return s.call(e,...t)}catch{return null}}h(Hy,"safeInvoke");class bI extends Bh{constructor(e){super();this._context=e;const t=this._context.configuration.options,n=t.get(131);this._lineHeight=t.get(59),this._renderLineHighlight=t.get(85),this._renderLineHighlightOnlyWhenFocus=t.get(86),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new oe(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=this._selections.map(i=>i.positionLineNumber);t.sort((i,o)=>i-o),xo(this._cursorLineNumbers,t)||(this._cursorLineNumbers=t,e=!0);const n=this._selections.every(i=>i.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131);return this._lineHeight=t.get(59),this._renderLineHighlight=t.get(85),this._renderLineHighlightOnlyWhenFocus=t.get(86),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length;let r=0;const a=[];for(let l=n;l<=i;l++){const d=l-n;for(;r<o&&this._cursorLineNumbers[r]<l;)r++;r<o&&this._cursorLineNumbers[r]===l?a[d]=t:a[d]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}h(bI,"AbstractLineHighlightOverlay");class t3 extends bI{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}h(t3,"CurrentLineHighlightOverlay");class n3 extends bI{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}h(n3,"CurrentLineMarginHighlightOverlay");It((s,e)=>{const t=s.getColor(iX);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||s.defines(FM)){const n=s.getColor(FM);n&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),s.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class i3 extends Bh{constructor(e){super();this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,d=t.length;l<d;l++){const c=t[l];c.options.className&&(n[i++]=c)}n=n.sort((l,d)=>{if(l.options.zIndex<d.options.zIndex)return-1;if(l.options.zIndex>d.options.zIndex)return 1;const c=l.options.className,u=d.options.className;return c<u?-1:c>u?1:T.compareRangesUsingStarts(l.range,d.range)});const o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=r;l++){const d=l-o;a[d]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let a=0,l=t.length;a<l;a++){const d=t[a];if(!d.options.isWholeLine)continue;const c='<div class="cdr '+d.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',u=Math.max(d.range.startLineNumber,o),f=Math.min(d.range.endLineNumber,r);for(let g=u;g<=f;g++){const m=g-o;n[m]+=c}}}_renderNormalDecorations(e,t,n){const i=String(this._lineHeight),o=e.visibleRange.startLineNumber;let r=null,a=!1,l=null;for(let d=0,c=t.length;d<c;d++){const u=t[d];if(u.options.isWholeLine)continue;const f=u.options.className,g=Boolean(u.options.showIfCollapsed);let m=u.range;if(g&&m.endColumn===1&&m.endLineNumber!==m.startLineNumber&&(m=new T(m.startLineNumber,m.startColumn,m.endLineNumber-1,this._context.viewModel.getLineMaxColumn(m.endLineNumber-1))),r===f&&a===g&&T.areIntersectingOrTouching(l,m)){l=T.plusRange(l,m);continue}r!==null&&this._renderNormalDecoration(e,l,r,a,i,o,n),r=f,a=g,l=m}r!==null&&this._renderNormalDecoration(e,l,r,a,i,o,n)}_renderNormalDecoration(e,t,n,i,o,r,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(!!l)for(let d=0,c=l.length;d<c;d++){const u=l[d];if(u.outsideRenderedLine)continue;const f=u.lineNumber-r;if(i&&u.ranges.length===1){const g=u.ranges[0];if(g.width<this._typicalHalfwidthCharacterWidth){const m=Math.round(g.left+g.width/2),b=Math.max(0,Math.round(m-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new O_(b,this._typicalHalfwidthCharacterWidth)}}for(let g=0,m=u.ranges.length;g<m;g++){const b=u.ranges[g],v='<div class="cdr '+n+'" style="left:'+String(b.left)+"px;width:"+String(b.width)+"px;height:"+o+'px;"></div>';a[f]+=v}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}h(i3,"DecorationsOverlay");class ns extends z{onclick(e,t){this._register(J(e,be.CLICK,n=>t(new Co(n))))}onmousedown(e,t){this._register(J(e,be.MOUSE_DOWN,n=>t(new Co(n))))}onmouseover(e,t){this._register(J(e,be.MOUSE_OVER,n=>t(new Co(n))))}onnonbubblingmouseout(e,t){this._register(qD(e,n=>t(new Co(n))))}onkeydown(e,t){this._register(J(e,be.KEY_DOWN,n=>t(new Et(n))))}onkeyup(e,t){this._register(J(e,be.KEY_UP,n=>t(new Et(n))))}oninput(e,t){this._register(J(e,be.INPUT,t))}onblur(e,t){this._register(J(e,be.BLUR,t))}onfocus(e,t){this._register(J(e,be.FOCUS,t))}ignoreGesture(e){dt.ignoreTarget(e)}}h(ns,"Widget");const xf=11;class o3 extends ns{constructor(e){super();this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=xf+"px",this.domNode.style.height=xf+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new Nd),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new mg),this._mousedownScheduleRepeatTimer=this._register(new Ki)}_arrowMouseDown(e){const t=h(()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)},"scheduleRepeater");this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,bg,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}h(o3,"ScrollbarArrow");class s3 extends z{constructor(e,t,n){super();this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Ki)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}h(s3,"ScrollbarVisibilityController");const KX=140;class vI extends ns{constructor(e){super();this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new s3(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new Nd),this._shouldRender=!0,this.domNode=nt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new o3(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=nt(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,o=>{o.leftButton&&(o.preventDefault(),this._sliderMouseDown(o,()=>{}))}),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){!this._shouldRender||(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderMousePosition(e);n<=o&&o<=i?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const o=$n(this.domNode.domNode);t=e.posx-o.left,n=e.posy-o.top}const i=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),i=this._sliderOrthogonalMousePosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,bg,r=>{const a=this._sliderOrthogonalMousePosition(r),l=Math.abs(a-i);if(Vn&&l>KX){this._setDesiredScrollPositionNow(o.getScrollPosition());return}const c=this._sliderMousePosition(r)-n;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}h(vI,"AbstractScrollbar");const UX=20;class Tf{constructor(e,t,n,i,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Tf(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,o){const r=Math.max(0,n-e),a=Math.max(0,r-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const d=Math.round(Math.max(UX,Math.floor(n*a/i))),c=(a-d)/(i-n),u=o*c;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(d),computedSliderRatio:c,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=Tf._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}h(Tf,"ScrollbarState");class r3 extends vI{constructor(e,t,n){const i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();super({lazyRender:t.lazyRender,host:n,scrollbarState:new Tf(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage});if(t.horizontalHasArrows){const r=(t.arrowSize-xf)/2,a=(t.horizontalScrollbarSize-xf)/2;this._createArrow({className:"scra",icon:_.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Zc(null,1,0))}),this._createArrow({className:"scra",icon:_.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Zc(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}h(r3,"HorizontalScrollbar");class a3 extends vI{constructor(e,t,n){const i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();super({lazyRender:t.lazyRender,host:n,scrollbarState:new Tf(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage});if(t.verticalHasArrows){const r=(t.arrowSize-xf)/2,a=(t.verticalScrollbarSize-xf)/2;this._createArrow({className:"scra",icon:_.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Zc(null,0,1))}),this._createArrow({className:"scra",icon:_.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Zc(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}h(a3,"VerticalScrollbar");class Lm{constructor(e,t,n,i,o,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,o=o|0,r=r|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),o<0&&(o=0),a+o>r&&(a=r-o),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=o,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new Lm(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new Lm(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}h(Lm,"ScrollState");class xg extends z{constructor(e){super();this._scrollableBrand=void 0,this._onScroll=this._register(new P),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Lm(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new Lf(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=Lf.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}h(xg,"Scrollable");class YT{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}h(YT,"SmoothScrollingUpdate");function zy(s,e){const t=e-s;return function(n){return s+t*$X(n)}}h(zy,"createEaseOutCubic");function jX(s,e,t){return function(n){return n<t?s(n/t):e((n-t)/(1-t))}}h(jX,"createComposed");class Lf{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,r;return e<t?(o=e+.75*n,r=t-.75*n):(o=e-.75*n,r=t+.75*n),jX(zy(e,o),zy(r,t),.33)}return zy(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new YT(n,i,!1)}return new YT(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return Lf.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new Lf(e,t,i,n)}}h(Lf,"SmoothScrollingOperation");function GX(s){return Math.pow(s,3)}h(GX,"easeInCubic");function $X(s){return 1-GX(1-s)}h($X,"easeOutCubic");const qX=500,HM=50;class l3{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}h(l3,"MouseWheelClassifierItem");class hC{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const o=i===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const i=new l3(e,t,n);i.score=this._computeScore(i),this._front===-1&&this._rear===-1?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}h(hC,"MouseWheelClassifier");hC.INSTANCE=new hC;class G0 extends ns{constructor(e,t,n){super();this._onScroll=this._register(new P),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new P),e.style.overflow="hidden",this._options=YX(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const i={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new a3(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new r3(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=nt(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=nt(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=nt(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onnonbubblingmouseout(this._listenOnDomNode,o=>this._onMouseOut(o)),this._hideTimeout=this._register(new Ki),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=et(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ke&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=et(this._mouseWheelToDispose),e)){const n=h(i=>{this._onMouseWheel(new Zc(i))},"onMouseWheel");this._mouseWheelToDispose.push(J(this._listenOnDomNode,be.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=hC.INSTANCE;{const o=window.devicePixelRatio/$O();Vn||ni?t.accept(Date.now(),e.deltaX/o,e.deltaY/o):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,r=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(o)>=Math.abs(r)?r=0:o=0),this._options.flipAxes&&([o,r]=[r,o]);const a=!Ke&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!r&&(r=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(r=r*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let d={};if(o){const c=HM*o,u=l.scrollTop-(c<0?Math.floor(c):Math.ceil(c));this._verticalScrollbar.writeScrollPosition(d,u)}if(r){const c=HM*r,u=l.scrollLeft-(c<0?Math.floor(c):Math.ceil(c));this._horizontalScrollbar.writeScrollPosition(d,u)}d=this._scrollable.validateScrollPosition(d),(l.scrollLeft!==d.scrollLeft||l.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!!this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",o=t?" top":"",r=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),qX)}}h(G0,"AbstractScrollableElement");class wI extends G0{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new xg({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>ir(i)});super(e,t,n);this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}h(wI,"ScrollableElement");class $0 extends G0{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}h($0,"SmoothScrollableElement");class Tg extends G0{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new xg({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>ir(i)});super(e,t,n);this._register(n),this._element=e,this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}h(Tg,"DomScrollableElement");function YX(s){const e={lazyRender:typeof s.lazyRender<"u"?s.lazyRender:!1,className:typeof s.className<"u"?s.className:"",useShadows:typeof s.useShadows<"u"?s.useShadows:!0,handleMouseWheel:typeof s.handleMouseWheel<"u"?s.handleMouseWheel:!0,flipAxes:typeof s.flipAxes<"u"?s.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof s.consumeMouseWheelIfScrollbarIsNeeded<"u"?s.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof s.alwaysConsumeMouseWheel<"u"?s.alwaysConsumeMouseWheel:!1,scrollYToX:typeof s.scrollYToX<"u"?s.scrollYToX:!1,mouseWheelScrollSensitivity:typeof s.mouseWheelScrollSensitivity<"u"?s.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof s.fastScrollSensitivity<"u"?s.fastScrollSensitivity:5,scrollPredominantAxis:typeof s.scrollPredominantAxis<"u"?s.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof s.mouseWheelSmoothScroll<"u"?s.mouseWheelSmoothScroll:!0,arrowSize:typeof s.arrowSize<"u"?s.arrowSize:11,listenOnDomNode:typeof s.listenOnDomNode<"u"?s.listenOnDomNode:null,horizontal:typeof s.horizontal<"u"?s.horizontal:1,horizontalScrollbarSize:typeof s.horizontalScrollbarSize<"u"?s.horizontalScrollbarSize:10,horizontalSliderSize:typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:0,horizontalHasArrows:typeof s.horizontalHasArrows<"u"?s.horizontalHasArrows:!1,vertical:typeof s.vertical<"u"?s.vertical:1,verticalScrollbarSize:typeof s.verticalScrollbarSize<"u"?s.verticalScrollbarSize:10,verticalHasArrows:typeof s.verticalHasArrows<"u"?s.verticalHasArrows:!1,verticalSliderSize:typeof s.verticalSliderSize<"u"?s.verticalSliderSize:0,scrollByPage:typeof s.scrollByPage<"u"?s.scrollByPage:!1};return e.horizontalSliderSize=typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof s.verticalSliderSize<"u"?s.verticalSliderSize:e.verticalScrollbarSize,Ke&&(e.className+=" mac"),e}h(YX,"resolveOptions$1");class d3 extends No{constructor(e,t,n,i){super(e);const o=this._context.configuration.options,r=o.get(92),a=o.get(67),l=o.get(34),d=o.get(95),c={listenOnDomNode:n.domNode,className:"editor-scrollable "+nC(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:d,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new $0(t.domNode,c,this._context.viewLayout.getScrollable())),or.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=nt(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=h((f,g,m)=>{const b={};if(g){const v=f.scrollTop;v&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+v,f.scrollTop=0)}if(m){const v=f.scrollLeft;v&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+v,f.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(b,1)},"onBrowserDesperateReveal");this._register(J(n.domNode,"scroll",f=>u(n.domNode,!0,!0))),this._register(J(t.domNode,"scroll",f=>u(t.domNode,!0,!1))),this._register(J(i.domNode,"scroll",f=>u(i.domNode,!0,!1))),this._register(J(this.scrollbarDomNode.domNode,"scroll",f=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(131);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(65).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(92)||e.hasChanged(67)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(92),i=t.get(67),o=t.get(34),r=t.get(95),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(131)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+nC(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}h(d3,"EditorScrollbar");It((s,e)=>{const t=s.getColor(vg);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=s.getColor(Gu);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const i=s.getColor($u);i&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${i};
			}
		`);const o=s.getColor(qu);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`)});class km{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}h(km,"DecorationToRender");class q0 extends Bh{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=[]}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,r=0;for(let a=0,l=n.length;a<l;a++){const d=n[a],c=d.className;let u=Math.max(d.startLineNumber,e)-e;const f=Math.min(d.endLineNumber,t)-e;o===c?(u=Math.max(r+1,u),r=Math.max(r,f)):(o=c,r=f);for(let g=u;g<=r;g++)i[g].push(o)}return i}}h(q0,"DedupOverlay");class c3 extends q0{constructor(e){super();this._context=e;const t=this._context.configuration.options,n=t.get(131);this._lineHeight=t.get(59),this._glyphMargin=t.get(50),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131);return this._lineHeight=t.get(59),this._glyphMargin=t.get(50),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.glyphMarginClassName;l&&(n[i++]=new km(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=this._lineHeight.toString(),r=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),l='" style="left:'+r+"px;width:"+a+"px;height:"+o+'px;"></div>',d=[];for(let c=t;c<=n;c++){const u=c-t,f=i[u];f.length===0?d[u]="":d[u]='<div class="cgmr codicon '+f.join(" ")+l}this._renderResult=d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}h(c3,"GlyphMarginOverlay");class h3{constructor(){this._isDisposed=!1}dispose(){this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}h(h3,"TextModelPart");function Y0(s,e){let t=0,n=0;const i=s.length;for(;n<i;){const o=s.charCodeAt(n);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;n++}return n===i?-1:t}h(Y0,"computeIndentLevel");var Oc;(function(s){s[s.Disabled=0]="Disabled",s[s.EnabledForActive=1]="EnabledForActive",s[s.Enabled=2]="Enabled"})(Oc||(Oc={}));class vc{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}h(vc,"IndentGuide");class uC{constructor(e,t){this.top=e,this.endColumn=t}}h(uC,"IndentGuideHorizontalLine");class u3 extends h3{constructor(e,t){super();this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return Y0(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(o&&o.offSide);let a=-2,l=-1,d=-2,c=-1;const u=h(x=>{if(a!==-1&&(a===-2||a>x-1)){a=-1,l=-1;for(let k=x-2;k>=0;k--){const N=this._computeIndentLevel(k);if(N>=0){a=k,l=N;break}}}if(d===-2){d=-1,c=-1;for(let k=x;k<i;k++){const N=this._computeIndentLevel(k);if(N>=0){d=k,c=N;break}}}},"up_resolveIndents");let f=-2,g=-1,m=-2,b=-1;const v=h(x=>{if(f===-2){f=-1,g=-1;for(let k=x-2;k>=0;k--){const N=this._computeIndentLevel(k);if(N>=0){f=k,g=N;break}}}if(m!==-1&&(m===-2||m<x-1)){m=-1,b=-1;for(let k=x;k<i;k++){const N=this._computeIndentLevel(k);if(N>=0){m=k,b=N;break}}}},"down_resolveIndents");let C=0,w=!0,y=0,S=!0,L=0,E=0;for(let x=0;w||S;x++){const k=e-x,N=e+x;x>1&&(k<1||k<t)&&(w=!1),x>1&&(N>i||N>n)&&(S=!1),x>5e4&&(w=!1,S=!1);let V=-1;if(w&&k>=1){const G=this._computeIndentLevel(k-1);G>=0?(d=k-1,c=G,V=Math.ceil(G/this.textModel.getOptions().indentSize)):(u(k),V=this._getIndentLevelForWhitespaceLine(r,l,c))}let F=-1;if(S&&N<=i){const G=this._computeIndentLevel(N-1);G>=0?(f=N-1,g=G,F=Math.ceil(G/this.textModel.getOptions().indentSize)):(v(N),F=this._getIndentLevelForWhitespaceLine(r,g,b))}if(x===0){E=V;continue}if(x===1){if(N<=i&&F>=0&&E+1===F){w=!1,C=N,y=N,L=F;continue}if(k>=1&&V>=0&&V-1===E){S=!1,C=k,y=k,L=V;continue}if(C=e,y=e,L=E,L===0)return{startLineNumber:C,endLineNumber:y,indent:L}}w&&(V>=L?C=k:w=!1),S&&(F>=L?y=N:S=!1)}return{startLineNumber:C,endLineNumber:y,indent:L}}getLinesBracketGuides(e,t,n,i){var o,r,a,l,d;const c=[],u=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new T(e,1,t,this.textModel.getLineMaxColumn(t)));let f;if(n&&u.length>0){const C=e<=n.lineNumber&&n.lineNumber<=t?u.filter(w=>T.strictContainsPosition(w.range,n)):this.textModel.bracketPairs.getBracketPairsInRange(T.fromPositions(n));f=(o=Cj(C,w=>w.range.startLineNumber!==w.range.endLineNumber))===null||o===void 0?void 0:o.range}const g=new jc(u),m=new Array,b=new Array,v=new CI;for(let C=e;C<=t;C++){let w=new Array;b.length>0&&(w=w.concat(b),b.length=0),c.push(w);for(const S of g.takeWhile(L=>L.openingBracketRange.startLineNumber<=C)||[]){if(S.range.startLineNumber===S.range.endLineNumber)continue;const L=Math.min(this.getVisibleColumnFromPosition(S.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(r=S.closingBracketRange)===null||r===void 0?void 0:r.getStartPosition())!==null&&a!==void 0?a:S.range.getEndPosition()),S.minVisibleColumnIndentation+1);let E=!1;S.closingBracketRange&&bi(this.textModel.getLineContent(S.closingBracketRange.startLineNumber))<S.closingBracketRange.startColumn-1&&(E=!0);const x=S.openingBracketRange.getStartPosition(),k=(d=(l=S.closingBracketRange)===null||l===void 0?void 0:l.getStartPosition())!==null&&d!==void 0?d:S.range.getEndPosition();S.closingBracketRange===void 0?m[S.nestingLevel]=null:m[S.nestingLevel]={nestingLevel:S.nestingLevel,guideVisibleColumn:L,start:x,visibleStartColumn:this.getVisibleColumnFromPosition(x),end:k,visibleEndColumn:this.getVisibleColumnFromPosition(k),bracketPair:S,renderHorizontalEndLineAtTheBottom:E}}for(const S of m){if(!S)continue;const L=f&&S.bracketPair.range.equalsRange(f),E=v.getInlineClassNameOfLevel(S.nestingLevel)+(i.highlightActive&&L?" "+v.activeClassName:"");(L&&i.horizontalGuides!==Oc.Disabled||i.includeInactive&&i.horizontalGuides===Oc.Enabled)&&(S.start.lineNumber===C&&S.guideVisibleColumn<S.visibleStartColumn&&w.push(new vc(S.guideVisibleColumn,E,new uC(!1,S.start.column))),S.end.lineNumber===C+1&&S.guideVisibleColumn<S.visibleEndColumn&&b.push(new vc(S.guideVisibleColumn,E,new uC(!S.renderHorizontalEndLineAtTheBottom,S.end.column))))}let y=Number.MAX_SAFE_INTEGER;for(let S=m.length-1;S>=0;S--){const L=m[S];if(!L)continue;const E=i.highlightActive&&f&&L.bracketPair.range.equalsRange(f),x=v.getInlineClassNameOfLevel(L.nestingLevel)+(E?" "+v.activeClassName:"");(E||i.includeInactive)&&L.renderHorizontalEndLineAtTheBottom&&L.end.lineNumber===C+1&&b.push(new vc(L.guideVisibleColumn,x,null)),!(L.end.lineNumber<=C||L.start.lineNumber>=C)&&(L.guideVisibleColumn>=y&&!E||(y=L.guideVisibleColumn,(E||i.includeInactive)&&w.push(new vc(L.guideVisibleColumn,x,null))))}w.sort((S,L)=>S.visibleColumn-L.visibleColumn)}return c}getVisibleColumnFromPosition(e){return mn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(o&&o.offSide),a=new Array(t-e+1);let l=-2,d=-1,c=-2,u=-1;for(let f=e;f<=t;f++){const g=f-e,m=this._computeIndentLevel(f-1);if(m>=0){l=f-1,d=m,a[g]=Math.ceil(m/i.indentSize);continue}if(l===-2){l=-1,d=-1;for(let b=f-2;b>=0;b--){const v=this._computeIndentLevel(b);if(v>=0){l=b,d=v;break}}}if(c!==-1&&(c===-2||c<f-1)){c=-1,u=-1;for(let b=f;b<n;b++){const v=this._computeIndentLevel(b);if(v>=0){c=b,u=v;break}}}a[g]=this._getIndentLevelForWhitespaceLine(r,d,u)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}h(u3,"GuidesTextModelPart");class CI{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}h(CI,"BracketPairGuidesClassNames");class f3 extends Bh{constructor(e){super();this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(132),i=t.get(44);this._lineHeight=t.get(59),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(132),i=t.get(44);return this._lineHeight=t.get(59),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const i=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,o;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const r=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,l=e.scrollWidth,d=this._lineHeight,c=this._primaryPosition,u=this.getGuidesByLine(r,a,c),f=[];for(let g=r;g<=a;g++){const m=g-r,b=u[m];let v="";const C=(n=(t=e.visibleRangeForPosition(new W(g,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const w of b){const y=C+(w.visibleColumn-1)*this._spaceWidth;if(y>l||this._maxIndentLeft>0&&y>this._maxIndentLeft)break;const S=w.horizontalLine?w.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",L=w.horizontalLine?((o=(i=e.visibleRangeForPosition(new W(g,w.horizontalLine.endColumn)))===null||i===void 0?void 0:i.left)!==null&&o!==void 0?o:y+this._spaceWidth)-y:this._spaceWidth;v+=`<div class="core-guide ${w.className} ${S}" style="left:${y}px;height:${d}px;width:${L}px"></div>`}f[m]=v}this._renderResult=f}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Oc.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Oc.EnabledForActive:Oc.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const u=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);r=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:d}=this._context.viewModel.model.getOptions(),c=[];for(let u=e;u<=t;u++){const f=new Array;c.push(f);const g=i?i[u-e]:[],m=new jc(g),b=o?o[u-e]:[];for(let v=1;v<=b;v++){const C=(v-1)*d+1,w=g.length===0&&r<=u&&u<=a&&v===l;f.push(...m.takeWhile(S=>S.visibleColumn<C)||[]);const y=m.peek();(!y||y.visibleColumn!==C||y.horizontalLine)&&f.push(new vc(C,w?"core-guide-indent-active":"core-guide-indent",null))}f.push(...m.takeWhile(v=>!0)||[])}return c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}h(f3,"IndentGuidesOverlay");function jb(s){if(!(s&&s.isTransparent()))return s}h(jb,"transparentToUndefined");It((s,e)=>{const t=s.getColor(K0);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=s.getColor(U0)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const i=[{bracketColor:FF,guideColor:TX,guideColorActive:NX},{bracketColor:WF,guideColor:LX,guideColorActive:AX},{bracketColor:VF,guideColor:kX,guideColorActive:MX},{bracketColor:BF,guideColor:EX,guideColorActive:RX},{bracketColor:HF,guideColor:DX,guideColorActive:PX},{bracketColor:zF,guideColor:IX,guideColorActive:OX}],o=new CI,r=i.map(a=>{var l,d;const c=s.getColor(a.bracketColor),u=s.getColor(a.guideColor),f=s.getColor(a.guideColorActive),g=jb((l=jb(u))!==null&&l!==void 0?l:c?.transparent(.3)),m=jb((d=jb(f))!==null&&d!==void 0?d:c);if(!(!g||!m))return{guideColor:g,guideColorActive:m}}).filter(kj);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${o.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${o.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${o.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class g3{constructor(){this._currentVisibleRange=new T(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}h(g3,"LastRenderedData");class p3{constructor(e,t,n,i,o,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=i,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}h(p3,"HorizontalRevealRangeRequest");class m3{constructor(e,t,n,i,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=i,this.scrollType=o,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,d=t.length;l<d;l++){const c=t[l];r=Math.min(r,c.startLineNumber),a=Math.max(a,c.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}h(m3,"HorizontalRevealSelectionsRequest");class B_ extends No{constructor(e,t){super(e);this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new mI(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,o=i.get(44),r=i.get(132),a=i.get(131);this._lineHeight=i.get(59),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=i.get(89),this._horizontalScrollbarHeight=a.horizontalScrollbarHeight,this._cursorSurroundingLines=i.get(25),this._cursorSurroundingLinesStyle=i.get(26),this._canUseLayerHinting=!i.get(28),this._viewLineOptions=new jT(n,this._context.theme.type),or.write(this.domNode,7),this.domNode.setClassName(`view-lines ${Pc}`),ti(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new gt(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new gt(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new g3,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Hs(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(132)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(44),i=t.get(132),o=t.get(131);return this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(89),this._horizontalScrollbarHeight=o.horizontalScrollbarHeight,this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),ti(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(131)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new jT(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let o=t;o<=n;o++)i=this._visibleLines.getVisibleLine(o).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new p3(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new m3(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(i)===1)return new W(i,1);const o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(i<o||i>r)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(i,e,t);const l=this._context.viewModel.getLineMinColumn(i);return a<l&&(a=l),new W(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Hs.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const o=this._visibleLines.getVisibleLine(i);if(e===o.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=T.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;let o=[],r=0;const a=new UT(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(i.startLineNumber,1)).lineNumber);const d=this._visibleLines.getStartLineNumber(),c=this._visibleLines.getEndLineNumber();for(let u=i.startLineNumber;u<=i.endLineNumber;u++){if(u<d||u>c)continue;const f=u===i.startLineNumber?i.startColumn:1,g=u===i.endLineNumber?i.endColumn:this._context.viewModel.getLineMaxColumn(u),m=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,f,g,a);if(!!m){if(t&&u<n){const b=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new W(u+1,1)).lineNumber,b!==l&&(m.ranges[m.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new wF(m.outsideRenderedLine,u,O_.from(m.ranges))}}return r===0?null:o}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new UT(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new CF(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,o=!0;for(let r=t;r<=n;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){o=!1;continue}i=Math.max(i,a.getWidth())}return o&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++){const r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){const a=r.getWidth();a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),ni&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,o,r){const a=e.top,l=e.height,d=a+l;let c,u,f;if(o&&o.length>0){let b=o[0].startLineNumber,v=o[0].endLineNumber;for(let C=1,w=o.length;C<w;C++){const y=o[C];b=Math.min(b,y.startLineNumber),v=Math.max(v,y.endLineNumber)}c=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(b),f=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(i)c=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),f=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;if((t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default")n||(u-=this._lineHeight);else{const b=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);u-=b*this._lineHeight,f+=Math.max(0,b-1)*this._lineHeight}(r===0||r===4)&&(f+=n?this._horizontalScrollbarHeight:this._lineHeight);let m;if(f-u>l){if(!c)return-1;m=u}else if(r===5||r===6)if(r===6&&a<=u&&f<=d)m=a;else{const b=Math.max(5*this._lineHeight,l*.2),v=u-b,C=f-l;m=Math.max(C,v)}else if(r===1||r===2)if(r===2&&a<=u&&f<=d)m=a;else{const b=(u+f)/2;m=Math.max(0,b-l/2)}else m=this._computeMinimumScrolling(a,d,u,f,r===3,r===4);return m}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,i=n+t.width;let o=1073741824,r=0;if(e.type==="range"){const l=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!l)return null;for(const d of l.ranges)o=Math.min(o,Math.round(d.left)),r=Math.max(r,Math.round(d.left+d.width))}else for(const l of e.selections){if(l.startLineNumber!==l.endLineNumber)return null;const d=this._visibleRangesForLineRange(l.startLineNumber,l.startColumn,l.endColumn);if(!d)return null;for(const c of d.ranges)o=Math.min(o,Math.round(c.left)),r=Math.max(r,Math.round(c.left+c.width))}return e.minimalReveal||(o=Math.max(0,o-B_.HORIZONTAL_EXTRA_PX),r+=this._revealHorizontalRightPadding),e.type==="selections"&&r-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,i,o,r),maxHorizontalOffset:r}}_computeMinimumScrolling(e,t,n,i,o,r){e=e|0,t=t|0,n=n|0,i=i|0,o=!!o,r=!!r;const a=t-e;if(i-n<a){if(o)return n;if(r)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}}h(B_,"ViewLines");B_.HORIZONTAL_EXTRA_PX=30;class _3 extends q0{constructor(e){super();this._context=e;const n=this._context.configuration.options.get(131);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(131);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.linesDecorationsClassName;l&&(n[i++]=new km(a.range.startLineNumber,a.range.endLineNumber,l));const d=a.options.firstLineDecorationClassName;d&&(n[i++]=new km(a.range.startLineNumber,a.range.startLineNumber,d))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let d=t;d<=n;d++){const c=d-t,u=i[c];let f="";for(let g=0,m=u.length;g<m;g++)f+='<div class="cldr '+u[g]+a;l[c]=f}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}h(_3,"LinesDecorationsOverlay");class b3 extends q0{constructor(e){super();this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.marginClassName;l&&(n[i++]=new km(a.range.startLineNumber,a.range.endLineNumber,l))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=[];for(let r=t;r<=n;r++){const a=r-t,l=i[a];let d="";for(let c=0,u=l.length;c<u;c++)d+='<div class="cmdr '+l[c]+'" style=""></div>';o[a]=d}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}h(b3,"MarginViewLineDecorationsOverlay");class yo{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=yo._clamp(e),this.g=yo._clamp(t),this.b=yo._clamp(n),this.a=yo._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}h(yo,"RGBA8");yo.Empty=new yo(0,0,0,0);class Lg extends z{constructor(){super();this._onDidChange=new P,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Ft.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new Lg),this._INSTANCE}_updateColorMap(){const e=Ft.getColorMap();if(!e){this._colors=[yo.Empty],this._backgroundIsLight=!0;return}this._colors=[yo.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new yo(i.r,i.g,i.b,Math.round(i.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}h(Lg,"MinimapTokensColorTracker");Lg._INSTANCE=null;const XX=(()=>{const s=[];for(let e=32;e<=126;e++)s.push(e);return s.push(65533),s})(),ZX=h((s,e)=>(s-=32,s<0||s>96?e<=2?(s+96)%96:96-1:s),"getCharIndex");class kf{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=kf.soften(e,12/15),this.charDataLight=kf.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let i=0,o=e.length;i<o;i++)n[i]=qw(e[i]*t);return n}renderChar(e,t,n,i,o,r,a,l,d,c,u){const f=1*this.scale,g=2*this.scale,m=u?1:g;if(t+f>e.width||n+m>e.height){console.warn("bad render request outside image data");return}const b=c?this.charDataLight:this.charDataNormal,v=ZX(i,d),C=e.width*4,w=a.r,y=a.g,S=a.b,L=o.r-w,E=o.g-y,x=o.b-S,k=Math.max(r,l),N=e.data;let V=v*f*g,F=n*C+t*4;for(let G=0;G<m;G++){let $=F;for(let ue=0;ue<f;ue++){const de=b[V++]/255*(r/255);N[$++]=w+L*de,N[$++]=y+E*de,N[$++]=S+x*de,N[$++]=k}F+=C}}blockRenderChar(e,t,n,i,o,r,a,l){const d=1*this.scale,c=2*this.scale,u=l?1:c;if(t+d>e.width||n+u>e.height){console.warn("bad render request outside image data");return}const f=e.width*4,g=.5*(o/255),m=r.r,b=r.g,v=r.b,C=i.r-m,w=i.g-b,y=i.b-v,S=m+C*g,L=b+w*g,E=v+y*g,x=Math.max(o,a),k=e.data;let N=n*f+t*4;for(let V=0;V<u;V++){let F=N;for(let G=0;G<d;G++)k[F++]=S,k[F++]=L,k[F++]=E,k[F++]=x;N+=f}}}h(kf,"MinimapCharRenderer");const zM={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,A:10,B:11,C:12,D:13,E:14,F:15},KM=h(s=>{const e=new Uint8ClampedArray(s.length/2);for(let t=0;t<s.length;t+=2)e[t>>1]=zM[s[t]]<<4|zM[s[t+1]]&15;return e},"decodeData"),UM={1:Ka(()=>KM("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Ka(()=>KM("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class Ju{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return UM[e]?n=new kf(UM[e](),e):n=Ju.createFromSampleData(Ju.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height=`${16}px`,t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold ${16}px ${e}`,n.textBaseline="middle";let i=0;for(const o of XX)n.fillText(String.fromCharCode(o),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const i=Ju._downsample(e,t);return new kf(i,t)}static _downsampleChar(e,t,n,i,o){const r=1*o,a=2*o;let l=i,d=0;for(let c=0;c<a;c++){const u=c/a*16,f=(c+1)/a*16;for(let g=0;g<r;g++){const m=g/r*10,b=(g+1)/r*10;let v=0,C=0;for(let y=u;y<f;y++){const S=t+Math.floor(y)*3840,L=1-(y-Math.floor(y));for(let E=m;E<b;E++){const x=1-(E-Math.floor(E)),k=S+Math.floor(E)*4,N=x*L;C+=N,v+=e[k]*e[k+3]/255*N}}const w=v/C;d=Math.max(d,w),n[l++]=qw(w)}}return d}static _downsample(e,t){const n=2*t*1*t,i=n*96,o=new Uint8ClampedArray(i);let r=0,a=0,l=0;for(let d=0;d<96;d++)l=Math.max(l,this._downsampleChar(e,a,o,r,t)),r+=n,a+=10*4;if(l>0){const d=255/l;for(let c=0;c<i;c++)o[c]*=d}return o}}h(Ju,"MinimapCharRendererFactory");const JX=140,QX=2;class Ef{constructor(e,t,n){const i=e.options,o=i.get(129),r=i.get(131),a=r.minimap,l=i.get(44),d=i.get(65);this.renderMinimap=a.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(94),this.showSlider=d.showSlider,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(59),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Ka(()=>Ju.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=Ef._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Ef._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(zY);return n?new yo(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(KY);return t?yo._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}h(Ef,"MinimapOptions");class Qu{constructor(e,t,n,i,o,r,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=o,this.sliderHeight=r,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,i,o,r,a,l,d,c,u){const f=e.pixelRatio,g=e.minimapLineHeight,m=Math.floor(e.canvasInnerHeight/g),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){const L=l*e.lineHeight+(e.scrollBeyondLastLine?o-e.lineHeight:0),E=Math.max(1,Math.floor(o*o/L)),x=Math.max(0,e.minimapHeight-E),k=x/(c-o),N=d*k,V=x>0,F=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new Qu(d,c,V,k,N,E,1,Math.min(a,F))}let v;if(r&&n!==a){const L=n-t+1;v=Math.floor(L*g/f)}else{const L=o/b;v=Math.floor(L*g/f)}let C;e.scrollBeyondLastLine?C=(a-1)*g/f:C=Math.max(0,a*g/f-v),C=Math.min(e.minimapHeight-v,C);const w=C/(c-o),y=d*w;let S=0;if(e.scrollBeyondLastLine&&(S=o/b-1),m>=a+S){const E=a,x=C>0;return new Qu(d,c,x,w,y,v,1,E)}else{let L=Math.max(1,Math.floor(t-y*f/g));u&&u.scrollHeight===c&&(u.scrollTop>d&&(L=Math.min(L,u.startLineNumber)),u.scrollTop<d&&(L=Math.max(L,u.startLineNumber)));const E=Math.min(a,L+m-1),x=(d-i)/b,k=(t-L+x)*g/f;return new Qu(d,c,!0,w,k,v,L,E)}}}h(Qu,"MinimapLayout");class Em{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}h(Em,"MinimapLine");Em.INVALID=new Em(-1);class XT{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new pI(()=>Em.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,o=n.length;i<o;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}h(XT,"RenderData");class X0{constructor(e,t,n,i){this._backgroundFillData=X0._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,o=n.g,r=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let d=0;for(let c=0;c<t;c++)for(let u=0;u<e;u++)l[d]=i,l[d+1]=o,l[d+2]=r,l[d+3]=a,d+=4;return l}}h(X0,"MinimapBuffers");class Df{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const i=e.pixelRatio,o=e.lineHeight,r=e.scrollBeyondLastLine,{minimapLineCount:a}=Tc.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:r,height:e.editorHeight,lineHeight:o,pixelRatio:i}),l=t/a,d=l/2;if(!n||n.minimapLines.length===0){const y=[];if(y[0]=1,a>1){for(let S=0,L=a-1;S<L;S++)y[S]=Math.round(S*l+d);y[a-1]=t}return[new Df(l,y),[]]}const c=n.minimapLines,u=c.length,f=[];let g=0,m=0,b=1;const v=10;let C=[],w=null;for(let y=0;y<a;y++){const S=Math.max(b,Math.round(y*l)),L=Math.max(S,Math.round((y+1)*l));for(;g<u&&c[g]<S;){if(C.length<v){const x=g+1+m;w&&w.type==="deleted"&&w._oldIndex===g-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:g,deleteFromLineNumber:x,deleteToLineNumber:x},C.push(w)),m--}g++}let E;if(g<u&&c[g]<=L)E=c[g],g++;else if(y===0?E=1:y+1===a?E=t:E=Math.round(y*l+d),C.length<v){const x=g+1+m;w&&w.type==="inserted"&&w._i===y-1?w.insertToLineNumber++:(w={type:"inserted",_i:y,insertFromLineNumber:x,insertToLineNumber:x},C.push(w)),m++}f[y]=E,b=E}if(C.length<v)for(;g<u;){const y=g+1+m;w&&w.type==="deleted"&&w._oldIndex===g-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:g,deleteFromLineNumber:y,deleteToLineNumber:y},C.push(w)),m--,g++}else C=[{type:"flush"}];return[new Df(l,f),C]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),i=Math.max(i,o)):this.minimapLines[o]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}h(Df,"MinimapSamplingState");class v3 extends No{constructor(e){super(e);this.tokensColorTracker=Lg.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Ef(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Df.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new Dm(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Ef(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,n]=Df.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const i=[];for(let o=0,r=t-e+1;o<r;o++)n[o]?i[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):i[o]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new oe(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const o=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new T(o,1,r,this._context.viewModel.getLineMaxColumn(r))}else n=new T(e,1,t,this._context.viewModel.getLineMaxColumn(t));const i=this._context.viewModel.getDecorationsInViewport(n);if(this._samplingState){const o=[];for(const r of i){if(!r.options.minimap)continue;const a=r.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),d=this._samplingState.modelLineToMinimapLine(a.endLineNumber);o.push(new KD(new T(l,a.startColumn,d,a.endColumn),r.options))}return o}return i}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new T(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}h(v3,"Minimap");class Dm extends z{constructor(e,t){super();this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(MM),this._domNode=nt(document.createElement("div")),or.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=nt(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=nt(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=nt(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=nt(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=nt(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=Wn(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const d=$n(this._slider.domNode),c=d.top+d.height/2;this._startSliderDragging(n.buttons,n.posx,c,n.posy,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let l=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderMouseMoveMonitor=new Nd,this._sliderMouseDownListener=Wn(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=dt.addTarget(this._domNode.domNode),this._sliderTouchStartListener=J(this._domNode.domNode,kt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=J(this._domNode.domNode,kt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Wn(this._domNode.domNode,kt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,i,o){this._slider.toggleClassName("active",!0);const r=h((a,l)=>{const d=Math.abs(l-t);if(Vn&&d>JX){this._model.setScrollTop(o.scrollTop);return}const c=a-n;this._model.setScrollTop(o.getDesiredScrollTopFromDelta(c))},"handleMouseMove");i!==n&&r(i,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,bg,a=>r(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new X0(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(MM),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=Qu.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(T.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((f,g)=>(f.options.zIndex||0)-(g.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,i,o);const c=new ZT(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,c,e,r),this._renderDecorationsLineHighlights(d,n,c,e,r);const u=new ZT(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,u,e,r,l,a,i),this._renderDecorationsHighlights(d,n,u,e,r,l,a,i)}}_renderSelectionLineHighlights(e,t,n,i,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const d=Math.max(i.startLineNumber,l.startLineNumber),c=Math.min(i.endLineNumber,l.endLineNumber);if(d>c)continue;for(let g=d;g<=c;g++)n.set(g,!0);const u=(d-i.startLineNumber)*o,f=(c-i.startLineNumber)*o+o;a>=u||(a>r&&e.fillRect(_l,r,e.canvas.width,a-r),r=u),a=f}a>r&&e.fillRect(_l,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,n,i,o){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],d=l.options.minimap;if(!d||d.position!==$o.Inline)continue;const c=Math.max(i.startLineNumber,l.range.startLineNumber),u=Math.min(i.endLineNumber,l.range.endLineNumber);if(c>u)continue;const f=d.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=r.get(f.toString());g||(g=f.transparent(.5).toString(),r.set(f.toString(),g)),e.fillStyle=g;for(let m=c;m<=u;m++){if(n.has(m))continue;n.set(m,!0);const b=(c-i.startLineNumber)*o;e.fillRect(_l,b,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,n,i,o,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const d of t){const c=Math.max(i.startLineNumber,d.startLineNumber),u=Math.min(i.endLineNumber,d.endLineNumber);if(!(c>u))for(let f=c;f<=u;f++)this.renderDecorationOnLine(e,n,d,this._selectionColor,i,f,o,o,r,a,l)}}_renderDecorationsHighlights(e,t,n,i,o,r,a,l){for(const d of t){const c=d.options.minimap;if(!c)continue;const u=Math.max(i.startLineNumber,d.range.startLineNumber),f=Math.min(i.endLineNumber,d.range.endLineNumber);if(u>f)continue;const g=c.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let m=u;m<=f;m++)switch(c.position){case $o.Inline:this.renderDecorationOnLine(e,n,d.range,g,i,m,o,o,r,a,l);continue;case $o.Gutter:{const b=(m-i.startLineNumber)*o,v=2;this.renderDecoration(e,g,v,b,QX,o);continue}}}}renderDecorationOnLine(e,t,n,i,o,r,a,l,d,c,u){const f=(r-o.startLineNumber)*l;if(f+a<0||f>this._model.options.canvasInnerHeight)return;const{startLineNumber:g,endLineNumber:m}=n,b=g===r?n.startColumn:1,v=m===r?n.endColumn:this._model.getLineMaxColumn(r),C=this.getXOffsetForPosition(t,r,b,d,c,u),w=this.getXOffsetForPosition(t,r,v,d,c,u);this.renderDecoration(e,i,C,f,w-C,a)}getXOffsetForPosition(e,t,n,i,o,r){if(n===1)return _l;if((n-1)*o>=r)return r;let l=e.get(t);if(!l){const d=this._model.getLineContent(t);l=[_l];let c=_l;for(let u=1;u<d.length+1;u++){const f=d.charCodeAt(u-1),g=f===9?i*o:Xl(f)?2*o:o,m=c+g;if(m>=r){l[u]=r;break}l[u]=m,c=m}e.set(t,l)}return n-1<l.length?l[n-1]:r}renderDecoration(e,t,n,i,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,o,r)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const de=this._lastRenderData._get();return new XT(e,de.imageData,de.lines)}const o=this._getBuffer();if(!o)return null;const[r,a,l]=Dm._renderUntouchedLines(o,t,n,i,this._lastRenderData),d=this._model.getMinimapLinesRenderingData(t,n,l),c=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,f=this._model.options.backgroundColor,g=this._model.options.foregroundAlpha,m=this._model.tokensColorTracker,b=m.backgroundIsLight(),v=this._model.options.renderMinimap,C=this._model.options.charRenderer(),w=this._model.options.fontScale,y=this._model.options.minimapCharWidth,L=(v===1?2:2+1)*w,E=i>L?Math.floor((i-L)/2):0,x=f.a/255,k=new yo(Math.round((f.r-u.r)*x+u.r),Math.round((f.g-u.g)*x+u.g),Math.round((f.b-u.b)*x+u.b),255);let N=0;const V=[];for(let de=0,ye=n-t+1;de<ye;de++)l[de]&&Dm._renderLine(o,k,f.a,b,v,y,m,g,C,N,E,c,d[de],w,i),V[de]=new Em(N),N+=i;const F=r===-1?0:r,$=(a===-1?o.height:a)-F;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,F,o.width,$),new XT(e,o,V)}static _renderUntouchedLines(e,t,n,i,o){const r=[];if(!o){for(let k=0,N=n-t+1;k<N;k++)r[k]=!0;return[-1,-1,r]}const a=o._get(),l=a.imageData.data,d=a.rendLineNumberStart,c=a.lines,u=c.length,f=e.width,g=e.data,m=(n-t+1)*i*f*4;let b=-1,v=-1,C=-1,w=-1,y=-1,S=-1,L=0;for(let k=t;k<=n;k++){const N=k-t,V=k-d,F=V>=0&&V<u?c[V].dy:-1;if(F===-1){r[N]=!0,L+=i;continue}const G=F*f*4,$=(F+i)*f*4,ue=L*f*4,de=(L+i)*f*4;w===G&&S===ue?(w=$,S=de):(C!==-1&&(g.set(l.subarray(C,w),y),b===-1&&C===0&&C===y&&(b=w),v===-1&&w===m&&C===y&&(v=C)),C=G,w=$,y=ue,S=de),r[N]=!1,L+=i}C!==-1&&(g.set(l.subarray(C,w),y),b===-1&&C===0&&C===y&&(b=w),v===-1&&w===m&&C===y&&(v=C));const E=b===-1?-1:b/(f*4),x=v===-1?-1:v/(f*4);return[E,x,r]}static _renderLine(e,t,n,i,o,r,a,l,d,c,u,f,g,m,b){const v=g.content,C=g.tokens,w=e.width-r,y=b===1;let S=_l,L=0,E=0;for(let x=0,k=C.getCount();x<k;x++){const N=C.getEndOffset(x),V=C.getForeground(x),F=a.getColor(V);for(;L<N;L++){if(S>w)return;const G=v.charCodeAt(L);if(G===9){const $=f-(L+E)%f;E+=$-1,S+=$*r}else if(G===32)S+=r;else{const $=Xl(G)?2:1;for(let ue=0;ue<$;ue++)if(o===2?d.blockRenderChar(e,S,c+u,F,l,t,n,y):d.renderChar(e,S,c+u,G,F,l,t,n,m,i,y),S+=r,S>w)return}}}}}h(Dm,"InnerMinimap");class ZT{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,o=this._endLineNumber-this._startLineNumber+1;i<o;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}h(ZT,"ContiguousLineMap");It((s,e)=>{const t=s.getColor(UY);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=s.getColor(jY);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const i=s.getColor(GY);i&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${i}; }`);const o=s.getColor(vg);o&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)});class w3 extends No{constructor(e){super(e);const n=this._context.configuration.options.get(131);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=nt(document.createElement("div")),or.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(131);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=nt(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.parentNode.removeChild(i),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const o=t[n];this._renderWidget(this._widgets[o])}}}h(w3,"ViewOverlayWidgets");class C3{constructor(e,t){const n=e.options;this.lineHeight=n.get(59),this.pixelRatio=n.get(129),this.overviewRulerLanes=n.get(74),this.renderBorder=n.get(73);const i=t.getColor(uX);this.borderColor=i?i.toString():null,this.hideCursor=n.get(52);const o=t.getColor(RF);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;const r=n.get(65),a=r.enabled,l=r.side,d=a?t.getColor(fX)||Ft.getDefaultBackground():null;d===null||l==="left"?this.backgroundColor=null:this.backgroundColor=H.Format.CSS.formatHex(d);const u=n.get(131).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[f,g]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=f,this.w=g}_initLanes(e,t,n){const i=t-e;if(n>=3){const o=Math.floor(i/3),r=Math.floor(i/3),a=i-o-r,l=e,d=l+o,c=l+o+a;return[[0,l,d,l,c,l,d,l],[0,o,a,o+a,r,o+a+r,a+r,o+a+r]]}else if(n===2){const o=Math.floor(i/2),r=i-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,r,o+r,o+r,o+r]]}else{const o=e,r=i;return[[0,o,o,o,o,o,o,o],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}h(C3,"Settings");class y3 extends No{constructor(e){super(e);this._domNode=nt(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Ft.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new C3(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(W.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,i=this._context.viewLayout,o=this._context.viewLayout.getScrollHeight(),r=t/o,a=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),l=6*this._settings.pixelRatio|0,d=l/2|0,c=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?c.clearRect(0,0,e,t):(c.fillStyle=this._settings.backgroundColor,c.fillRect(0,0,e,t));const u=this._settings.x,f=this._settings.w;a.sort(UD.cmp);for(const g of a){const m=g.color,b=g.data;c.fillStyle=m;let v=0,C=0,w=0;for(let y=0,S=b.length/3;y<S;y++){const L=b[3*y],E=b[3*y+1],x=b[3*y+2];let k=i.getVerticalOffsetForLineNumber(E)*r|0,N=(i.getVerticalOffsetForLineNumber(x)+n)*r|0;if(N-k<l){let F=(k+N)/2|0;F<d?F=d:F+d>t&&(F=t-d),k=F-d,N=F+d}k>w+1||L!==v?(y!==0&&c.fillRect(u[v],C,f[v],w-C),v=L,C=k,w=N):N>w&&(w=N)}c.fillRect(u[v],C,f[v],w-C)}if(!this._settings.hideCursor&&this._settings.cursorColor){const g=2*this._settings.pixelRatio|0,m=g/2|0,b=this._settings.x[7],v=this._settings.w[7];c.fillStyle=this._settings.cursorColor;let C=-100,w=-100;for(let y=0,S=this._cursorPositions.length;y<S;y++){const L=this._cursorPositions[y];let E=i.getVerticalOffsetForLineNumber(L.lineNumber)*r|0;E<m?E=m:E+m>t&&(E=t-m);const x=E-m,k=x+g;x>w+1?(y!==0&&c.fillRect(b,C,v,w-C),C=x,w=k):k>w&&(w=k)}c.fillRect(b,C,v,w-C)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(c.beginPath(),c.lineWidth=1,c.strokeStyle=this._settings.borderColor,c.moveTo(0,0),c.lineTo(0,t),c.stroke(),c.moveTo(0,0),c.lineTo(e,0),c.stroke())}}h(y3,"DecorationsOverviewRuler");class JT{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}h(JT,"ColorZone");class If{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}h(If,"OverviewRulerZone");class S3{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(If.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),o=n/i,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,d=this._zones.length;l<d;l++){const c=this._zones[l];if(!e){const S=c.getColorZones();if(S){a.push(S);continue}}const u=this._getVerticalOffsetForLine(c.startLineNumber),f=c.heightInLines===0?this._getVerticalOffsetForLine(c.endLineNumber)+t:u+c.heightInLines*t,g=Math.floor(o*u),m=Math.floor(o*f);let b=Math.floor((g+m)/2),v=m-b;v<r&&(v=r),b-v<0&&(b=v),b+v>n&&(b=n-v);const C=c.color;let w=this._color2Id[C];w||(w=++this._lastAssignedId,this._color2Id[C]=w,this._id2Color[w]=C);const y=new JT(b-v,b+v,w);c.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(JT.compare),a}}h(S3,"OverviewZoneManager");class x3 extends yg{constructor(e,t){super();this._context=e;const n=this._context.configuration.options;this._domNode=nt(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new S3(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(59)),this._zoneManager.setPixelRatio(n.get(129)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(59)&&(this._zoneManager.setLineHeight(t.get(59)),this._render()),e.hasChanged(129)&&(this._zoneManager.setPixelRatio(t.get(129)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,i,e),!0}_renderOneLane(e,t,n,i){let o=0,r=0,a=0;for(const l of t){const d=l.colorId,c=l.from,u=l.to;d!==o?(e.fillRect(0,r,i,a-r),o=d,e.fillStyle=n[o],r=c,a=u):a>=c?a=Math.max(a,u):(e.fillRect(0,r,i,a-r),r=c,a=u)}e.fillRect(0,r,i,a-r)}}h(x3,"OverviewRuler");class T3 extends No{constructor(e){super(e);this.domNode=nt(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(91),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(91),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),o=i;let r=t-e;for(;r>0;){const a=nt(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],o=this._rulers[t];i.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}h(T3,"Rulers");It((s,e)=>{const t=s.getColor(cX);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class L3 extends No{constructor(e){super(e);this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(92);this._useShadows=n.useShadows,this._domNode=nt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(131);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(92);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}h(L3,"ScrollDecorationViewPart");It((s,e)=>{const t=s.getColor(vg);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class k3{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}h(k3,"HorizontalRangeWithStyle");class E3{constructor(e,t){this.lineNumber=e,this.ranges=t}}h(E3,"LineVisibleRangesWithStyle");function eZ(s){return new k3(s)}h(eZ,"toStyledRange");function tZ(s){return new E3(s.lineNumber,s.ranges.map(eZ))}h(tZ,"toStyled");class Kt extends Bh{constructor(e){super();this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(59),this._roundedSelection=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(59),this._roundedSelection=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(44).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let o=null,r=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let d=0;!o&&d<n.length;d++)n[d].lineNumber===a&&(o=n[d].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let d=n.length-1;!r&&d>=0;d--)n[d].lineNumber===l&&(r=n[d].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const d=t[a].ranges[0],c=d.left,u=d.left+d.width,f={top:0,bottom:0},g={top:0,bottom:0};if(a>0){const m=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Gb(c-m)<i?f.top=2:c>m&&(f.top=1),Gb(u-b)<i?g.top=2:m<u&&u<b&&(g.top=1)}else o&&(f.top=o.startStyle.top,g.top=o.endStyle.top);if(a+1<l){const m=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Gb(c-m)<i?f.bottom=2:m<c&&c<b&&(f.bottom=1),Gb(u-b)<i?g.bottom=2:u<b&&(g.bottom=1)}else r&&(f.bottom=r.startStyle.bottom,g.bottom=r.endStyle.bottom);d.startStyle=f,d.endStyle=g}}_getVisibleRangesWithStyle(e,t,n){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(tZ);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,i,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const o=!!i[0].ranges[0].startStyle,r=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),l=i[0].lineNumber,d=i[i.length-1].lineNumber;for(let c=0,u=i.length;c<u;c++){const f=i[c],g=f.lineNumber,m=g-t,b=n&&(g===d||g===l)?a:r,v=n&&g===l?1:0;let C="",w="";for(let y=0,S=f.ranges.length;y<S;y++){const L=f.ranges[y];if(o){const x=L.startStyle,k=L.endStyle;if(x.top===1||x.bottom===1){C+=this._createSelectionPiece(v,b,Kt.SELECTION_CLASS_NAME,L.left-Kt.ROUNDED_PIECE_WIDTH,Kt.ROUNDED_PIECE_WIDTH);let N=Kt.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(N+=" "+Kt.SELECTION_TOP_RIGHT),x.bottom===1&&(N+=" "+Kt.SELECTION_BOTTOM_RIGHT),C+=this._createSelectionPiece(v,b,N,L.left-Kt.ROUNDED_PIECE_WIDTH,Kt.ROUNDED_PIECE_WIDTH)}if(k.top===1||k.bottom===1){C+=this._createSelectionPiece(v,b,Kt.SELECTION_CLASS_NAME,L.left+L.width,Kt.ROUNDED_PIECE_WIDTH);let N=Kt.EDITOR_BACKGROUND_CLASS_NAME;k.top===1&&(N+=" "+Kt.SELECTION_TOP_LEFT),k.bottom===1&&(N+=" "+Kt.SELECTION_BOTTOM_LEFT),C+=this._createSelectionPiece(v,b,N,L.left+L.width,Kt.ROUNDED_PIECE_WIDTH)}}let E=Kt.SELECTION_CLASS_NAME;if(o){const x=L.startStyle,k=L.endStyle;x.top===0&&(E+=" "+Kt.SELECTION_TOP_LEFT),x.bottom===0&&(E+=" "+Kt.SELECTION_BOTTOM_LEFT),k.top===0&&(E+=" "+Kt.SELECTION_TOP_RIGHT),k.bottom===0&&(E+=" "+Kt.SELECTION_BOTTOM_RIGHT)}w+=this._createSelectionPiece(v,b,E,L.left,L.width)}e[m][0]+=C,e[m][1]+=w}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let r=n;r<=i;r++){const a=r-n;t[a]=["",""]}const o=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){o[r]=null;continue}const d=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);o[r]=d,this._actualRenderOneSelection(t,n,this._selections.length>1,d)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}h(Kt,"SelectionsOverlay");Kt.SELECTION_CLASS_NAME="selected-text";Kt.SELECTION_TOP_LEFT="top-left-radius";Kt.SELECTION_BOTTOM_LEFT="bottom-left-radius";Kt.SELECTION_TOP_RIGHT="top-right-radius";Kt.SELECTION_BOTTOM_RIGHT="bottom-right-radius";Kt.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";Kt.ROUNDED_PIECE_WIDTH=10;It((s,e)=>{const t=s.getColor(Hl);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=s.getColor(sI);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const i=s.getColor(Gq);i&&!i.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${i}; }`)});function Gb(s){return s<0?-s:s}h(Gb,"abs");class QT{constructor(e,t,n,i,o,r){this.top=e,this.left=t,this.width=n,this.height=i,this.textContent=o,this.textContentClassName=r}}h(QT,"ViewCursorRenderData");class eL{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(44);this._cursorStyle=t.get(24),this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=nt(document.createElement("div")),this._domNode.setClassName(`cursor ${Pc}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),ti(this._domNode,n),this._domNode.setDisplay("none"),this._position=new W(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(44);return this._cursorStyle=t.get(24),this._lineHeight=t.get(59),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),ti(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,o]=bG(n,t-1);return[new W(e,i+1),n.substring(i,o)]}_prepareRender(e){let t="";const[n,i]=this._getGraphemeAwarePosition();if(this._cursorStyle===Fn.Line||this._cursorStyle===Fn.LineThin){const f=e.visibleRangeForPosition(n);if(!f||f.outsideRenderedLine)return null;let g;this._cursorStyle===Fn.Line?(g=yM(this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=i)):g=yM(1);let m=f.left;g>=2&&m>=1&&(m-=1);const b=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta;return new QT(b,m,g,this._lineHeight,t,"")}const o=e.linesVisibleRangesForRange(new T(n.lineNumber,n.column,n.lineNumber,n.column+i.length),!1);if(!o||o.length===0)return null;const r=o[0];if(r.outsideRenderedLine||r.ranges.length===0)return null;const a=r.ranges[0],l=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let d="";if(this._cursorStyle===Fn.Block){const f=this._context.viewModel.getViewLineData(n.lineNumber);t=i;const g=f.tokens.findTokenIndexAtOffset(n.column-1);d=f.tokens.getClassName(g)}let c=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===Fn.Underline||this._cursorStyle===Fn.UnderlineThin)&&(c+=this._lineHeight-2,u=2),new QT(c,a.left,l,u,t,d)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${Pc} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}h(eL,"ViewCursor");class Nf extends No{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(81),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new eL(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=nt(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Ki,this._cursorFlatBlinkInterval=new mg,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(81),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let i=0;i<n;i++){const o=new eL(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let i=0;i<n;i++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let i=0,o=e.selections.length;i<o;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=h(n=>{for(let i=0,o=e.ranges.length;i<o;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1},"shouldRender");if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Nf.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Nf.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Fn.Line:e+=" cursor-line-style";break;case Fn.Block:e+=" cursor-block-style";break;case Fn.Underline:e+=" cursor-underline-style";break;case Fn.LineThin:e+=" cursor-line-thin-style";break;case Fn.BlockOutline:e+=" cursor-block-outline-style";break;case Fn.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let o=0,r=this._secondaryCursors.length;o<r;o++){const a=this._secondaryCursors[o].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}h(Nf,"ViewCursors");Nf.BLINK_INTERVAL=500;It((s,e)=>{const t=s.getColor(RF);if(t){let n=s.getColor(lX);n||(n=t.opposite()),e.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${t}; }`),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),s.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const Ky=h(()=>{throw new Error("Invalid change accessor")},"invalidFunc$1");class D3 extends No{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(131);this._lineHeight=t.get(59),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=nt(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=nt(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace(i=>{const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],d=this._zones[l],c=this._computeWhitespaceProps(d.delegate);d.isInHiddenArea=c.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==c.afterViewLineNumber||u.height!==c.heightInPx)&&(i.changeOneWhitespace(l,c.afterViewLineNumber,c.heightInPx),this._safeCallOnComputedHeight(d.delegate,c.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131);return this._lineHeight=t.get(59),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(59)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new W(r,this._context.viewModel.model.getLineMaxColumn(r))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity),o=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:i.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const i={addZone:o=>(t=!0,this._addZone(n,o)),removeZone:o=>{!o||(t=this._removeZone(n,o)||t)},layoutZone:o=>{!o||(t=this._layoutZone(n,o)||t)}};nZ(e,i),i.addZone=Ky,i.removeZone=Ky,i.layoutZone=Ky}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:nt(t.domNode),marginDomNode:t.marginDomNode?nt(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Ne(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Ne(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(n[r.id]=r,i=!0);const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],d=this._zones[l];let c=0,u=0,f="none";n.hasOwnProperty(l)?(c=n[l].verticalOffset-e.bigNumbersDelta,u=n[l].height,f="block",d.isVisible||(d.domNode.setAttribute("monaco-visible-view-zone","true"),d.isVisible=!0),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(d.isVisible&&(d.domNode.removeAttribute("monaco-visible-view-zone"),d.isVisible=!1),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),d.domNode.setTop(c),d.domNode.setHeight(u),d.domNode.setDisplay(f),d.marginDomNode&&(d.marginDomNode.setTop(c),d.marginDomNode.setHeight(u),d.marginDomNode.setDisplay(f))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}h(D3,"ViewZones");function nZ(s,e){try{return s(e)}catch(t){Ne(t)}}h(nZ,"safeInvoke1Arg");class I3{constructor(e){this._theme=e}get type(){return this._theme.type}get value(){return this._theme}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}h(I3,"EditorTheme");class N3{constructor(e,t,n){this.configuration=e,this.theme=new I3(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}h(N3,"ViewContext");class A3{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new T(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}h(A3,"ViewportData");class M3 extends yg{constructor(e,t,n,i,o,r){super();this._selections=[new oe(1,1,1,1)],this._renderAnimationFrame=null;const a=new YF(t,i,o,e);this._context=new N3(t,n,i),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new UF(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=nt(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=nt(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=nt(document.createElement("div")),or.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new d3(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new B_(this._context,this._linesContent),this._viewZones=new D3(this._context),this._viewParts.push(this._viewZones);const l=new y3(this._context);this._viewParts.push(l);const d=new L3(this._context);this._viewParts.push(d);const c=new ZF(this._context);this._viewParts.push(c),c.addDynamicOverlay(new t3(this._context)),c.addDynamicOverlay(new Kt(this._context)),c.addDynamicOverlay(new f3(this._context)),c.addDynamicOverlay(new i3(this._context));const u=new JF(this._context);this._viewParts.push(u),u.addDynamicOverlay(new n3(this._context)),u.addDynamicOverlay(new c3(this._context)),u.addDynamicOverlay(new b3(this._context)),u.addDynamicOverlay(new _3(this._context)),u.addDynamicOverlay(new ih(this._context));const f=new ld(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(u.getDomNode()),this._viewParts.push(f),this._contentWidgets=new QF(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Nf(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new w3(this._context),this._viewParts.push(this._overlayWidgets);const g=new T3(this._context);this._viewParts.push(g);const m=new v3(this._context);if(this._viewParts.push(m),l){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(l.getDomNode(),b.insertBefore)}this._linesContent.appendChild(c.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(m.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),r?r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new MF(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new TF(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new W(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(131);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(128)+" "+nC(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=_5(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){iZ(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!jD(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new A3(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const i=new vF(this._context.viewLayout,n,this._viewLines);for(const o of e)o.prepareRender(i);for(const o of e)o.render(i),o.onDidRender()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new W(i.lineNumber,i.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?V_.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new x3(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const i=e.position?e.position.position:null;i!==null&&(t=new T(i.lineNumber,i.column,i.lineNumber,i.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}h(M3,"View");function iZ(s){try{return s()}catch(e){Ne(e)}}h(iZ,"safeInvokeNoArg");class Im{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Dn(new T(1,1,1,1),0,new W(1,1),0),new Dn(new T(1,1,1,1),0,new W(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){!this._trackSelection||(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Be(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return oe.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,r),l=this._validatePositionWithCache(e,o,i,a);return n.equals(r)&&i.equals(a)&&o.equals(l)?t:new Dn(T.fromPositions(a,l),t.selectionStartLeftoverVisibleColumns+i.column-a.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=Im._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new Dn(i,o,r,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new Dn(i,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new Dn(i,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new W(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new W(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new T(i.lineNumber,i.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new Dn(r,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}h(Im,"Cursor");class tL{constructor(e){this.context=e,this.cursors=[new Im(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return Lj(this.cursors,Fv(e=>e.viewState.position,W.compare)).viewState.position}getBottomMostViewPosition(){return Tj(this.cursors,Fv(e=>e.viewState.position,W.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Be.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const i=n-t;for(let o=0;o<i;o++)this._addSecondaryCursor()}else if(t>n){const i=t-n;for(let o=0;o<i;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Im(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(Fv(n=>n.selection,T.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1],r=i.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const d=i.index<o.index?n:n+1,c=i.index<o.index?n+1:n,u=t[c].index,f=t[d].index,g=t[c].selection,m=t[d].selection;if(!g.equalsSelection(m)){const b=g.plusRange(m),v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn,C=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn;let w;u===this.lastAddedCursorIndex?(w=v,this.lastAddedCursorIndex=f):w=C;let y;w?y=new oe(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):y=new oe(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[d].selection=y;const S=Be.fromModelSelection(y);e[f].setState(this.context,S.modelState,S.viewState)}for(const b of t)b.index>u&&b.index--;e.splice(u,1),t.splice(c,1),this._removeSecondaryCursor(u-1),n--}}}}h(tL,"CursorCollection");class nL{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}h(nL,"CursorContext");class R3{constructor(){this.changeType=1}}h(R3,"ModelRawFlush");class ws{constructor(e,t,n,i,o){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const o of t)n+=e.substring(i,o.column-1),i=o.column-1,n+=o.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new ws(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new ws(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}}h(ws,"LineInjectedText");class iL{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}h(iL,"ModelRawLineChanged");class P3{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}h(P3,"ModelRawLinesDeleted");class O3{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}h(O3,"ModelRawLinesInserted");class F3{constructor(){this.changeType=5}}h(F3,"ModelRawEOLChanged");class jl{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new jl(n,i,o,r)}}h(jl,"ModelRawContentChangedEvent");class yI{constructor(e){this.changes=e}}h(yI,"ModelInjectedTextChangedEvent");class Nm{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=jl.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=Nm._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Nm(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush;return{changes:n,eol:i,versionId:o,isUndoing:r,isRedoing:a,isFlush:l}}}h(Nm,"InternalModelContentChangeEvent");class W3{constructor(){this.type=0}}h(W3,"ViewCompositionStartEvent");class V3{constructor(){this.type=1}}h(V3,"ViewCompositionEndEvent");class B3{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}h(B3,"ViewConfigurationChangedEvent");class H3{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}h(H3,"ViewCursorStateChangedEvent");class Xd{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}h(Xd,"ViewDecorationsChangedEvent");class bp{constructor(){this.type=5}}h(bp,"ViewFlushedEvent");class z3{constructor(e){this.type=6,this.isFocused=e}}h(z3,"ViewFocusChangedEvent");class K3{constructor(){this.type=7}}h(K3,"ViewLanguageConfigurationEvent");class vp{constructor(){this.type=8}}h(vp,"ViewLineMappingChangedEvent");class SI{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}h(SI,"ViewLinesChangedEvent");class fC{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}h(fC,"ViewLinesDeletedEvent");class gC{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}h(gC,"ViewLinesInsertedEvent");class Gp{constructor(e,t,n,i,o,r,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=o,this.revealHorizontal=r,this.scrollType=a,this.type=12}}h(Gp,"ViewRevealRangeRequestEvent");class U3{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}h(U3,"ViewScrollChangedEvent");class j3{constructor(e){this.theme=e,this.type=14}}h(j3,"ViewThemeChangedEvent");class G3{constructor(e){this.type=15,this.ranges=e}}h(G3,"ViewTokensChangedEvent");class $3{constructor(){this.type=16}}h($3,"ViewTokensColorsChangedEvent");class q3{constructor(){this.type=17}}h(q3,"ViewZonesChangedEvent$1");class Y3 extends z{constructor(){super();this._onEvent=this._register(new P),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new X3),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}h(Y3,"ViewModelEventDispatcher");class X3{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}h(X3,"ViewModelEventsCollector");class Z0{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new Z0(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}h(Z0,"ContentSizeChangedEvent");class J0{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new J0(this.oldHasFocus,e.hasFocus)}}h(J0,"FocusChangedEvent");class Q0{constructor(e,t,n,i,o,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new Q0(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}h(Q0,"ScrollChangedEvent");class oL{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}h(oL,"ViewZonesChangedEvent");class Am{constructor(e,t,n,i,o,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=o,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return Am._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new Am(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}h(Am,"CursorStateChangedEvent");class Z3{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}h(Z3,"ReadOnlyEditAttemptEvent");class oh extends z{constructor(e,t,n,i){super();this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new nL(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new tL(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=et(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new nL(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let o=!1;i!==null&&i.length>oh.MAX_CURSOR_COUNT&&(i=i.slice(0,oh.MAX_CURSOR_COUNT),o=!0);const r=ef.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,r,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i,o,r){const a=this._cursors.getViewPositions();let l=null,d=null;a.length>1?d=this._cursors.getViewSelections():l=T.fromPositions(a[0],a[0]),e.emitViewEvent(new Gp(t,n,l,d,i,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const r=t[i];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let d=a,c=l;r.selectionStart&&r.selectionStart.lineNumber&&(d=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(c=r.selectionStart.column),n.push({selectionStartLineNumber:d,selectionStartColumn:c,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Be.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof yI){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new tL(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const i=Be.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,i)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const i=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Be.fromModelSelections(i))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,Be.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new sL(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=J3.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let o=0;o<e.commands.length;o++){const r=e.commands[o];r instanceof gI&&r.enclosingRange&&r.closeCharacterRange&&(n.push(r.closeCharacterRange),i.push(r.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,o){const r=ef.from(this._model,this);if(r.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new H3(l,a)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some((d,c)=>!d.modelState.equals(i.cursorState[c].modelState))){const d=i?i.cursorState.map(u=>u.modelState.selection):null,c=i?i.modelVersionId:0;e.emitOutgoingEvent(new Am(d,a,c,r.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const o=e[n];if(!o.text||o.text.indexOf(`
`)>=0)return null;const r=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const d=l[0].open,c=o.text.length-r[2].length-1,u=o.text.lastIndexOf(d,c-1);if(u===-1)return null;t.push([u,c])}return t}executeEdits(e,t,n,i){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,d=>{if(o)for(let u=0,f=o.length;u<f;u++){const[g,m]=o[u],b=d[u],v=b.range.startLineNumber,C=b.range.startColumn-1+g,w=b.range.startColumn-1+m;r.push(new T(v,w+1,v,w+2)),a.push(new T(v,C+1,v,w+2))}const c=i(d);return c&&(this._isHandling=!0),c});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const o=ef.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Ne(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,o,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return sL.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(Rt.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let o=0;for(;o<i;){const r=kD(t,o),a=t.substr(o,r);this._executeEditOperation(Rt.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=r}}else this._executeEditOperation(Rt.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,o,r){if(t.length===0&&n===0&&i===0){if(o!==0){const a=this.getSelections().map(l=>{const d=l.getPosition();return new oe(d.lineNumber,d.column+o,d.lineNumber,d.column+o)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Rt.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,o))},e,r)}paste(e,t,n,i,o){this._executeEdit(()=>{this._executeEditOperation(Rt.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(dd.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Ni(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Ni(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}h(oh,"CursorsController");oh.MAX_CURSOR_COUNT=1e4;class ef{constructor(e,t){this.modelVersionId=e,this.cursorState=t}static from(e,t){return new ef(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}h(ef,"CursorModelState");class sL{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(T.compareRangesUsingStarts),e.sort(T.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}h(sL,"AutoClosedAction");class J3{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(i,n);for(let r=0,a=i.trackedRanges.length;r<a;r++)i.model._setTrackedRange(i.trackedRanges[r],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,o=this._getLoserCursorMap(i);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let d=0,c=i.length;d<c;d++)o.hasOwnProperty(i[d].identifier.major.toString())||r.push(i[d]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,d=>{const c=[];for(let g=0;g<e.selectionsBefore.length;g++)c[g]=[];for(const g of d)!g.identifier||c[g.identifier.major].push(g);const u=h((g,m)=>g.identifier.minor-m.identifier.minor,"minorBasedSorter"),f=[];for(let g=0;g<e.selectionsBefore.length;g++)c[g].length>0?(c[g].sort(u),f[g]=t[g].computeCursorState(e.model,{getInverseEditOperations:()=>c[g],getTrackedSelection:m=>{const b=parseInt(m,10),v=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new oe(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new oe(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn)}})):f[g]=e.selectionsBefore[g];return f});a||(a=e.selectionsBefore);const l=[];for(let d in o)o.hasOwnProperty(d)&&l.push(parseInt(d,10));l.sort((d,c)=>c-d);for(const d of l)a.splice(d,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const i=[];let o=0;const r=h((u,f,g=!1)=>{T.isEmpty(u)&&f===""||i.push({identifier:{major:t,minor:o++},range:u,text:f,forceMoveMarkers:g,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},"addEditOperation");let a=!1;const c={addEditOperation:r,addTrackedEditOperation:h((u,f,g)=>{a=!0,r(u,f,g)},"addTrackedEditOperation"),trackSelection:h((u,f)=>{const g=oe.liftSelection(u);let m;if(g.isEmpty())if(typeof f=="boolean")f?m=2:m=3;else{const C=e.model.getLineMaxColumn(g.startLineNumber);g.startColumn===C?m=2:m=3}else m=1;const b=e.trackedRanges.length,v=e.model._setTrackedRange(null,g,m);return e.trackedRanges[b]=v,e.trackedRangesDirection[b]=g.getDirection(),b.toString()},"trackSelection")};try{n.getEditOperations(e.model,c)}catch(u){return Ne(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-T.compareRangesUsingEnds(n.range,i.range));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],o=e[n];if(T.getStartPosition(i.range).isBefore(T.getEndPosition(o.range))){let r;i.identifier.major>o.identifier.major?r=i.identifier.major:r=o.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}h(J3,"CommandExecutor");class xI{constructor(e,t,n,i,o,r){this.id=e,this.label=t,this.alias=n,this._precondition=i,this._run=o,this._contextKeyService=r}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}h(xI,"InternalEditorAction");const zh={Configuration:"base.contributions.configuration"},Uy={properties:{},patternProperties:{}},jy={properties:{},patternProperties:{}},Gy={properties:{},patternProperties:{}},$y={properties:{},patternProperties:{}},qy={properties:{},patternProperties:{}},$b={properties:{},patternProperties:{}},Xg="vscode://schemas/settings/resourceLanguage",jM=dn.as(P0.JSONContribution);class Q3{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new P,this._onDidUpdateConfiguration=new P,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:p("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},jM.registerSchema(Xg,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);jM.registerSchema(Xg,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],i=[];for(const{overrides:o,source:r}of e)for(const a in o)if(n.push(a),Mm.test(a)){const l=Object.assign(Object.assign({},((t=this.configurationDefaultsOverrides.get(a))===null||t===void 0?void 0:t.value)||{}),o[a]);this.configurationDefaultsOverrides.set(a,{source:r,value:l});const d={type:"object",default:l,description:p("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",a),$ref:Xg,defaultDefaultValue:l,source:Yo(r)?void 0:r};i.push(...t7(a)),this.configurationProperties[a]=d,this.defaultLanguageConfigurationOverridesNode.properties[a]=d}else{this.configurationDefaultsOverrides.set(a,{value:o[a],source:r});const l=this.configurationProperties[a];l&&(this.updatePropertyDefaultValue(a,l),this.updateSchema(a,l))}this.registerOverrideIdentifiers(i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(i=>{n.push(...this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties)),this.configurationContributors.push(i),this.registerJSONConfiguration(i)}),n}validateAndRegisterProperties(e,t=!0,n,i,o=3){o=_o(e.scope)?o:e.scope;let r=[],a=e.properties;if(a)for(let d in a){if(t&&sZ(d)){delete a[d];continue}const c=a[d];if(c.source=n,c.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,c),Mm.test(d)?c.scope=void 0:(c.scope=_o(c.scope)?o:c.scope,c.restricted=_o(c.restricted)?!!i?.includes(d):c.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d];!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),r.push(d)}let l=e.allOf;if(l)for(let d of l)r.push(...this.validateAndRegisterProperties(d,t,n,i,o));return r}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=h(n=>{let i=n.properties;if(i)for(const r in i)this.updateSchema(r,i[r]);let o=n.allOf;o&&o.forEach(t)},"register");t(e)}updateSchema(e,t){switch(Uy.properties[e]=t,t.scope){case 1:jy.properties[e]=t;break;case 2:Gy.properties[e]=t;break;case 6:$y.properties[e]=t;break;case 3:qy.properties[e]=t;break;case 4:$b.properties[e]=t;break;case 5:$b.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:p("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Xg};this.updatePropertyDefaultValue(t,n),Uy.properties[t]=n,jy.properties[t]=n,Gy.properties[t]=n,$y.properties[t]=n,qy.properties[t]=n,$b.properties[t]=n}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){const e={type:"object",description:p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:p("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Xg};Uy.patternProperties[Zd]=e,jy.patternProperties[Zd]=e,Gy.patternProperties[Zd]=e,$y.patternProperties[Zd]=e,qy.patternProperties[Zd]=e,$b.patternProperties[Zd]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=n?.value,o=n?.source;Ji(i)&&(i=t.defaultDefaultValue,o=void 0),Ji(i)&&(i=oZ(t.type)),t.default=i,t.defaultValueSource=o}}h(Q3,"ConfigurationRegistry");const e7="\\[([^\\]]+)\\]",GM=new RegExp(e7,"g"),Zd=`^(${e7})+$`,Mm=new RegExp(Zd);function t7(s){const e=[];if(Mm.test(s)){let t=GM.exec(s);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=GM.exec(s)}}return Yl(e)}h(t7,"overrideIdentifiersFromKey");function oZ(s){switch(Array.isArray(s)?s[0]:s){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}h(oZ,"getDefaultValue");const n7=new Q3;dn.add(zh.Configuration,n7);function sZ(s){return s.trim()?Mm.test(s)?p("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",s):n7.getConfigurationProperties()[s]!==void 0?p("config.property.duplicate","Cannot register '{0}'. This property is already registered.",s):null:p("config.property.empty","Cannot register an empty property")}h(sZ,"validateProperty");const rZ={ModesRegistry:"editor.modesRegistry"};class i7{constructor(){this._onDidChangeLanguages=new P,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}h(i7,"EditorModesRegistry");const Af=new i7;dn.add(rZ.ModesRegistry,Af);const Zr="plaintext",aZ=".txt";Af.registerLanguage({id:Zr,extensions:[aZ],aliases:[p("plainText.alias","Plain Text"),"text"],mimetypes:[zs.text]});fn.register(Zr,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);dn.as(zh.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var lZ=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const $M={getInitialState:()=>mf,tokenizeEncoded:(s,e,t)=>OD(0,t)};function dZ(s,e,t){return lZ(this,void 0,void 0,function*(){if(!t)return qM(e,s.languageIdCodec,$M);const n=yield Ft.getOrCreate(t);return qM(e,s.languageIdCodec,n||$M)})}h(dZ,"tokenizeToString");function cZ(s,e,t,n,i,o,r){let a="<div>",l=n,d=0,c=!0;for(let u=0,f=e.getCount();u<f;u++){const g=e.getEndOffset(u);if(g<=n)continue;let m="";for(;l<g&&l<i;l++){const b=s.charCodeAt(l);switch(b){case 9:{let v=o-(l+d)%o;for(d+=v-1;v>0;)r&&c?(m+="&#160;",c=!1):(m+=" ",c=!0),v--;break}case 60:m+="&lt;",c=!1;break;case 62:m+="&gt;",c=!1;break;case 38:m+="&amp;",c=!1;break;case 0:m+="&#00;",c=!1;break;case 65279:case 8232:case 8233:case 133:m+="\uFFFD",c=!1;break;case 13:m+="&#8203",c=!1;break;case 32:r&&c?(m+="&#160;",c=!1):(m+=" ",c=!0);break;default:m+=String.fromCharCode(b),c=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${m}</span>`,g>i||l>=i)break}return a+="</div>",a}h(cZ,"tokenizeLineToHTML");function qM(s,e,t){let n='<div class="monaco-tokenized-source">';const i=zr(s);let o=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r];r>0&&(n+="<br/>");const d=t.tokenizeEncoded(l,!0,o);_n.convertToEndOffset(d.tokens,l.length);const u=new _n(d.tokens,l,e).inflate();let f=0;for(let g=0,m=u.getCount();g<m;g++){const b=u.getClassName(g),v=u.getEndOffset(g);n+=`<span class="${b}">${yD(l.substring(f,v))}</span>`,f=v}o=d.endState}return n+="</div>",n}h(qM,"_tokenizeToString");class o7{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}h(o7,"PendingChanges");class s7{constructor(e,t,n,i,o){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=o,this.prefixSum=0}}h(s7,"EditorWhitespace");class Mf{constructor(e,t,n,i){this._instanceId=KO(++Mf.INSTANCE_COUNT),this._pendingChanges=new o7,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,o=e.length;for(;i<o;){const r=i+o>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?o=r:i=r+1:t<e[r].afterLineNumber?o=r:i=r+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,o,r,a)=>{t=!0,i=i|0,o=o|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new s7(l,i,o,r,a)),l},changeOneWhitespace:(i,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:i,newAfterLineNumber:o,newHeight:r})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const d=this._findWhitespaceIndex(l.id);d!==-1&&this._removeWhitespace(d)}return}const i=new Set;for(const l of n)i.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const r=h(l=>{const d=[];for(const c of l)if(!i.has(c.id)){if(o.has(c.id)){const u=o.get(c.id);c.afterLineNumber=u.newAfterLineNumber,c.height=u.newHeight}d.push(c)}return d},"applyRemoveAndChange"),a=r(this._arr).concat(r(e));a.sort((l,d)=>l.afterLineNumber===d.afterLineNumber?l.ordinal-d.ordinal:l.afterLineNumber-d.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=Mf.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const o=this._arr[i];this._removeWhitespace(i),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const o=this._arr[n].afterLineNumber;e<=o&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const r=(i-n|0)/2|0,a=n+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,o=t;for(;i<o;){const r=(i+o)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+n)i=r+1;else{if(e>=a)return r;o=r}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(i)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let d,c;a===-1?(a=l,c=r+1,d=0):(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);let u=o,f=u;const g=5e5;let m=0;o>=g&&(m=Math.floor(o/g)*g,m=Math.floor(m/n)*n,f-=m);const b=[],v=e+(t-e)/2;let C=-1;for(let L=i;L<=r;L++){if(C===-1){const E=u,x=u+n;(E<=v&&v<x||E>v)&&(C=L)}for(u+=n,b[L-i]=f,f+=n;c===L;)f+=d,u+=d,a++,a>=l?c=r+1:(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){r=L;break}}C===-1&&(C=r);const w=this.getVerticalOffsetForLineNumber(r)|0;let y=i,S=r;return y<S&&o<e&&y++,y<S&&w+n>t&&S--,{bigNumbersDelta:m,startLineNumber:i,endLineNumber:r,relativeVerticalOffset:b,centeredLineNumber:C,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:S}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),o=this.getHeightForWhitespaceIndex(n);if(e>=i+o)return-1;for(;t<n;){const r=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;n=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const o=[];for(let r=n;r<=i;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}h(Mf,"LinesLayout");Mf.INSTANCE_COUNT=0;const hZ=125;class Mu{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}h(Mu,"EditorScrollDimensions");class r7 extends z{constructor(e,t){super();this._onDidContentSizeChange=this._register(new P),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new Mu(0,0,0,0),this._scrollable=this._register(new xg({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new Z0(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}h(r7,"EditorScrollable");class a7 extends z{constructor(e,t,n){super();this._configuration=e;const i=this._configuration.options,o=i.get(131),r=i.get(75);this._linesLayout=new Mf(t,i.get(59),r.top,r.bottom),this._scrollable=this._register(new r7(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Mu(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(103)?hZ:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(59)&&this._linesLayout.setLineHeight(t.get(59)),e.hasChanged(75)){const n=t.get(75);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(131)){const n=t.get(131),i=n.contentWidth,o=n.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new Mu(i,r.contentWidth,o,this._getContentHeight(i,o,a)))}else this._updateHeight();e.hasChanged(103)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(92);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return i.get(94)?o+=Math.max(0,t-i.get(59)-i.get(75).bottom):o+=this._getHorizontalScrollbarHeight(e,n),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new Mu(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new ET(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new ET(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(132),i=t.get(44);if(n.isViewportWrapping){const o=t.get(131),r=t.get(65);return e>o.contentWidth+i.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?e+o.verticalScrollbarWidth:e}else{const o=t.get(93)*i.typicalHalfwidthCharacterWidth,r=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+o,r)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Mu(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}h(a7,"ViewLayout");class l7{constructor(e,t,n,i,o){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,o=e.options;let r;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new W(i.startLineNumber,1),0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new W(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);r=new T(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new KD(r,o),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,Ww(this.configuration.options)),n=e.startLineNumber,i=e.endLineNumber,o=[];let r=0;const a=[];for(let l=n;l<=i;l++)a[l-n]=[];for(let l=0,d=t.length;l<d;l++){const c=t[l],u=c.options;if(!TI(this.model,c))continue;const f=this._getOrCreateViewModelDecoration(c),g=f.range;if(o[r++]=f,u.inlineClassName){const m=new zu(g,u.inlineClassName,u.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(n,g.startLineNumber),v=Math.min(i,g.endLineNumber);for(let C=b;C<=v;C++)a[C-n].push(m)}if(u.beforeContentClassName&&n<=g.startLineNumber&&g.startLineNumber<=i){const m=new zu(new T(g.startLineNumber,g.startColumn,g.startLineNumber,g.startColumn),u.beforeContentClassName,1);a[g.startLineNumber-n].push(m)}if(u.afterContentClassName&&n<=g.endLineNumber&&g.endLineNumber<=i){const m=new zu(new T(g.endLineNumber,g.endColumn,g.endLineNumber,g.endColumn),u.afterContentClassName,2);a[g.endLineNumber-n].push(m)}}return{decorations:o,inlineDecorations:a}}}h(l7,"ViewModelDecorations");function TI(s,e){return!(e.options.hideInCommentTokens&&LI(s,e)||e.options.hideInStringTokens&&kI(s,e))}h(TI,"isModelDecorationVisible");function LI(s,e){return d7(s,e.range,t=>t===1)}h(LI,"isModelDecorationInComment");function kI(s,e){return d7(s,e.range,t=>t===2)}h(kI,"isModelDecorationInString");function d7(s,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=s.getLineTokens(n),o=n===e.startLineNumber,r=n===e.endLineNumber;let a=o?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(r&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}h(d7,"testTokensInRange");class wp{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}h(wp,"BracketInfo");class c7{constructor(e,t,n,i){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i}}h(c7,"BracketPairInfo");class h7 extends c7{constructor(e,t,n,i,o){super(e,t,n,i);this.minVisibleColumnIndentation=o}}h(h7,"BracketPairWithMinIndentationInfo");class pC{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}h(pC,"LengthObj");pC.zero=new pC(0,0);function uZ(s,e,t,n){return s!==t?en(t-s,n):en(0,n-e)}h(uZ,"lengthDiff");const Kr=0;function fZ(s){return s===0}h(fZ,"lengthIsZero");const So=Math.pow(2,26);function en(s,e){return s*So+e}h(en,"toLength");function Gl(s){const e=s,t=Math.floor(e/So),n=e-t*So;return new pC(t,n)}h(Gl,"lengthToObj");function gZ(s){return Math.floor(s/So)}h(gZ,"lengthGetLineCount");function gn(s,e){return e<So?s+e:s-s%So+e}h(gn,"lengthAdd");function pZ(s,e){const t=s,n=e;if(n-t<=0)return Kr;const o=Math.floor(t/So),r=Math.floor(n/So),a=n-r*So;if(o===r){const l=t-o*So;return en(0,a-l)}else return en(r-o,a)}h(pZ,"lengthDiffNonNegative");function Qv(s,e){return s<e}h(Qv,"lengthLessThan");function wc(s,e){return s<=e}h(wc,"lengthLessThanEqual");function qb(s,e){return s>=e}h(qb,"lengthGreaterThanEqual");function Yb(s){return en(s.lineNumber-1,s.column-1)}h(Yb,"positionToLength");function Cc(s,e){const t=s,n=Math.floor(t/So),i=t-n*So,o=e,r=Math.floor(o/So),a=o-r*So;return new T(n+1,i+1,r+1,a+1)}h(Cc,"lengthsToRange");function mZ(s){const e=zr(s);return en(e.length-1,e[e.length-1].length)}h(mZ,"lengthOfString");class rL{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}h(rL,"TextEditInfo");class u7{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>e1.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return pZ(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?en(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):en(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Gl(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?en(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):en(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(wc(n,e)){this.nextEditIdx++;const i=Gl(n),o=Gl(this.translateOldToCur(t.endOffsetBeforeObj)),r=i.lineCount-o.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}h(u7,"BeforeEditPositionMapper");class e1{constructor(e,t,n){this.endOffsetBeforeObj=Gl(t),this.endOffsetAfterObj=Gl(gn(e,n)),this.offsetObj=Gl(e)}static from(e){return new e1(e.startOffset,e.endOffset,e.newLength)}}h(e1,"TextEditInfoCache");const ew=new Array;class rn{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=rn.cache[e];return n||(n=new rn(e,t),rn.cache[e]=n),n}return new rn(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const r=1<<n|this.items;return r===this.items?this:rn.create(r,this.additionalItems)}i--;const o=this.additionalItems.slice(0);for(;o.length<i;)o.push(0);return o[i]|=1<<(n&31),rn.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===ew&&e.additionalItems===ew)return t===this.items?this:t===e.items?e:rn.create(t,ew);const n=new Array;for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const o=this.additionalItems[i]||0,r=e.additionalItems[i]||0;n.push(o|r)}return rn.create(t,n)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}}h(rn,"SmallImmutableSet");rn.cache=new Array(129);rn.empty=rn.create(0,ew);const YM={getKey(s){return s}};class EI{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}h(EI,"DenseKeyProvider");class t1{constructor(e){this._length=e}get length(){return this._length}}h(t1,"BaseAstNode");class Rf extends t1{constructor(e,t,n,i,o){super(e);this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=o}static create(e,t,n){let i=e.length;return t&&(i=gn(i,t.length)),n&&(i=gn(i,n.length)),new Rf(i,e,t,n,t?t.missingOpeningBracketIds:rn.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Rf(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(gn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}h(Rf,"PairAstNode");class sr extends t1{constructor(e,t,n){super(e);this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,i=!1){let o=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=gn(o,t.length),r=r.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");o=gn(o,n.length),r=r.merge(n.missingOpeningBracketIds)}return i?new f7(o,e.listHeight+1,e,t,n,r):new Pf(o,e.listHeight+1,e,t,n,r)}static getEmpty(){return new g7(Kr,0,[],rn.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const o=this.getChild(i);t=gn(t,o.length),n=n.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let o=0;o<this.childrenLength;o++){const r=this.getChild(o);r&&(n=Math.min(n,r.computeMinIndentation(i,t)),i=gn(i,r.length))}return this.cachedMinIndentation=n,n}}h(sr,"ListAstNode");class Pf extends sr{constructor(e,t,n,i,o,r){super(e,t,r);this._item1=n,this._item2=i,this._item3=o}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new Pf(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}h(Pf,"TwoThreeListAstNode");class f7 extends Pf{toMutable(){return new Pf(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}h(f7,"Immutable23ListAstNode");class Rm extends sr{constructor(e,t,n,i){super(e,t,i);this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new Rm(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}h(Rm,"ArrayListAstNode");class g7 extends Rm{toMutable(){return new Rm(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}h(g7,"ImmutableArrayListAstNode");const _Z=[];class n1 extends t1{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return _Z}deepClone(){return this}}h(n1,"ImmutableLeafAstNode");class lc extends n1{get kind(){return 0}get missingOpeningBracketIds(){return rn.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=Gl(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=gZ(gn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=i;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(l===0)continue;const c=mn.visibleColumnFromColumn(d,l,t.getOptions().tabSize);r=Math.min(r,c)}return r}}h(lc,"TextAstNode");class Pm extends n1{constructor(e,t,n){super(e);this.languageId=t,this.bracketIds=n}static create(e,t,n){return new Pm(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return rn.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}h(Pm,"BracketAstNode");class p7 extends n1{constructor(e,t){super(t);this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}h(p7,"InvalidBracketAstNode");class Ta{constructor(e,t,n,i,o){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=o}}h(Ta,"Token$1");class DI{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new m7(this.textModel,this.bracketTokens),this._offset=Kr,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return en(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=gn(this._offset,e);const t=Gl(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=gn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}h(DI,"TextBufferTokenizer");class m7{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const o=this.lineTokens,r=o.getCount();let a=null;if(this.lineTokenOffset<r){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const d=Gn.getTokenType(l)===0,c=o.getEndOffset(this.lineTokenOffset);if(d&&c!==this.lineCharOffset){const u=o.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,c),g=this.bracketTokens.getSingleLanguageBracketTokens(u),m=g.regExpGlobal;if(m){m.lastIndex=0;const b=m.exec(f);b&&(a=g.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(n+=c-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=c}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=uZ(e,t,this.lineIdx,this.lineCharOffset);return new Ta(i,0,-1,rn.getEmpty(),new lc(i))}}h(m7,"NonPeekableTextBufferTokenizer");class _7{constructor(e,t){this.text=e,this._offset=Kr,this.idx=0;const i=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,o=[];let r,a=0,l=0,d=0,c=0;const u=new Array;for(let m=0;m<60;m++)u.push(new Ta(en(0,m),0,-1,rn.getEmpty(),new lc(en(0,m))));const f=new Array;for(let m=0;m<60;m++)f.push(new Ta(en(1,m),0,-1,rn.getEmpty(),new lc(en(1,m))));if(i)for(i.lastIndex=0;(r=i.exec(e))!==null;){const m=r.index,b=r[0];if(b===`
`)a++,l=m+1;else{if(d!==m){let v;if(c===a){const C=m-d;if(C<u.length)v=u[C];else{const w=en(0,C);v=new Ta(w,0,-1,rn.getEmpty(),new lc(w))}}else{const C=a-c,w=m-l;if(C===1&&w<f.length)v=f[w];else{const y=en(C,w);v=new Ta(y,0,-1,rn.getEmpty(),new lc(y))}}o.push(v)}o.push(t.getToken(b)),d=m+b.length,c=a}}const g=e.length;if(d!==g){const m=c===a?en(0,g-d):en(a-c,g-l);o.push(new Ta(m,0,-1,rn.getEmpty(),new lc(m)))}this.length=en(a,g-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new vO}}h(_7,"FastTokenizer");class Om{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(l,d){return t.getKey(`${l}:::${d}`)}h(n,"getId");const i=e.characterPair.getColorizedBrackets(),o=new Map,r=new Set;for(const[l,d]of i){r.add(l);let c=o.get(d);const u=n(e.languageId,l);c||(c={openingBrackets:rn.getEmpty(),first:u},o.set(d,c)),c.openingBrackets=c.openingBrackets.add(u,YM)}const a=new Map;for(const[l,d]of o){const c=en(0,l.length);a.set(l,new Ta(c,2,d.first,d.openingBrackets,Pm.create(c,e.languageId,d.openingBrackets)))}for(const l of r){const d=en(0,l.length),c=n(e.languageId,l),u=rn.getEmpty().add(c,YM);a.set(l,new Ta(d,1,c,u,Pm.create(d,e.languageId,u)))}return new Om(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>bZ(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}findClosingTokenText(e){for(const[t,n]of this.map)if(n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}h(Om,"BracketTokens");function bZ(s){const e=Xo(s);return/^[\w ]+$/.test(s)?`\\b${e}\\b`:e}h(bZ,"prepareBracketForRegExp");class II{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=Om.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=Om.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}h(II,"LanguageAgnosticBracketTokens");function vZ(s){if(s.length===0)return null;if(s.length===1)return s[0];let e=0;function t(){if(e>=s.length)return null;const r=e,a=s[r].listHeight;for(e++;e<s.length&&s[e].listHeight===a;)e++;return e-r>=2?b7(r===0&&e===s.length?s:s.slice(r,e),!1):s[r]}h(t,"readNode");let n=t(),i=t();if(!i)return n;for(let r=t();r;r=t())XM(n,i)<=XM(i,r)?(n=Yy(n,i),i=r):i=Yy(i,r);return Yy(n,i)}h(vZ,"concat23Trees");function b7(s,e=!1){if(s.length===0)return null;if(s.length===1)return s[0];let t=s.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const o=i<<1;s[i]=sr.create23(s[o],s[o+1],o+3===t?s[o+2]:null,e)}t=n}return sr.create23(s[0],s[1],t>=3?s[2]:null,e)}h(b7,"concat23TreesOfSameHeight");function XM(s,e){return Math.abs(s.listHeight-e.listHeight)}h(XM,"heightDiff");function Yy(s,e){return s.listHeight===e.listHeight?sr.create23(s,e,null,!1):s.listHeight>e.listHeight?wZ(s,e):CZ(e,s)}h(Yy,"concat$1");function wZ(s,e){s=s.toMutable();let t=s;const n=new Array;let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){const r=n[o];i?r.childrenLength>=3?i=sr.create23(r.unappendChild(),i,null,!1):(r.appendChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?sr.create23(s,i,null,!1):s}h(wZ,"append");function CZ(s,e){s=s.toMutable();let t=s;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let o=n.length-1;o>=0;o--){const r=n[o];i?r.childrenLength>=3?i=sr.create23(i,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?sr.create23(i,s,null,!1):s}h(CZ,"prepend");class v7{constructor(e){this.lastOffset=Kr,this.nextNodes=[e],this.offsets=[Kr],this.idxs=[]}readLongestNodeAt(e,t){if(Qv(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=Zg(this.nextNodes);if(!n)return;const i=Zg(this.offsets);if(Qv(e,i))return;if(Qv(i,e))if(gn(i,n.length)<=e)this.nextNodeAfterCurrent();else{const o=Xy(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const o=Xy(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=Zg(this.offsets),t=Zg(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=Zg(this.nextNodes),i=Xy(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(gn(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}}h(v7,"NodeReader");function Xy(s,e=-1){for(;;){if(e++,e>=s.childrenLength)return-1;if(s.getChild(e))return e}}h(Xy,"getNextChildIdx");function Zg(s){return s.length>0?s[s.length-1]:void 0}h(Zg,"lastOrUndefined");function aL(s,e,t,n){return new w7(s,e,t,n).parseDocument()}h(aL,"parseDocument");class w7{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new v7(n):void 0,this.positionMapper=new u7(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(rn.getEmpty());return e||(e=sr.getEmpty()),e}parseList(e){const t=new Array;for(;;){const i=this.tokenizer.peek();if(!i||i.kind===2&&i.bracketIds.intersects(e))break;const o=this.parseChild(e);o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?vZ(t):b7(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!fZ(n)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),o=>Qv(o.length,n)?o.canBeReused(e):!1);if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new p7(t.bracketIds,t.length);case 0:return t.astNode;case 1:{const n=e.merge(t.bracketIds),i=this.parseList(n),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===t.bracketId||o.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),Rf.create(t.astNode,i,o.astNode)):Rf.create(t.astNode,i,null)}default:throw new Error("unexpected")}}}h(w7,"Parser");class C7 extends z{constructor(e,t){super();if(this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new P,this.denseKeyProvider=new EI,this.brackets=new II(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new _7(this.textModel.getValue(),n);this.initialAstWithoutTokens=aL(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleDidChangeBackgroundTokenizationState(){if(this.textModel.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new rL(en(n.fromLineNumber-1,0),en(n.toLineNumber,0),en(n.toLineNumber-n.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=e.changes.map(n=>{const i=T.lift(n.range);return new rL(Yb(i.getStartPosition()),Yb(i.getEndPosition()),mZ(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const i=t,o=new DI(this.textModel,this.brackets);return aL(o,e,i,n)}getBracketsInRange(e){const t=en(e.startLineNumber-1,e.startColumn-1),n=en(e.endLineNumber-1,e.endColumn-1),i=new Array,o=this.initialAstWithoutTokens||this.astWithTokens;return lL(o,Kr,o.length,t,n,i),i}getBracketPairsInRange(e,t){const n=new Array,i=Yb(e.getStartPosition()),o=Yb(e.getEndPosition()),r=this.initialAstWithoutTokens||this.astWithTokens,a=new y7(n,t,this.textModel);return S7(r,Kr,r.length,i,o,a),n}}h(C7,"BracketPairsTree");function lL(s,e,t,n,i,o,r=0){if(s.kind===4)for(const a of s.children)t=gn(e,a.length),wc(e,i)&&qb(t,n)&&lL(a,e,t,n,i,o,r),e=t;else if(s.kind===2){r++;{const a=s.openingBracket;if(t=gn(e,a.length),wc(e,i)&&qb(t,n)){const l=Cc(e,t);o.push(new wp(l,r-1,!s.closingBracket))}e=t}if(s.child){const a=s.child;t=gn(e,a.length),wc(e,i)&&qb(t,n)&&lL(a,e,t,n,i,o,r),e=t}if(s.closingBracket){const a=s.closingBracket;if(t=gn(e,a.length),wc(e,i)&&qb(t,n)){const l=Cc(e,t);o.push(new wp(l,r-1,!1))}e=t}}else if(s.kind===3){const a=Cc(e,t);o.push(new wp(a,r-1,!0))}else if(s.kind===1){const a=Cc(e,t);o.push(new wp(a,r-1,!1))}}h(lL,"collectBrackets");class y7{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}h(y7,"CollectBracketPairsContext");function S7(s,e,t,n,i,o,r=0){var a;if(s.kind===2){const d=gn(e,s.openingBracket.length);let c=-1;o.includeMinIndentation&&(c=s.computeMinIndentation(e,o.textModel)),o.result.push(new h7(Cc(e,t),Cc(e,d),s.closingBracket?Cc(gn(d,((a=s.child)===null||a===void 0?void 0:a.length)||Kr),t):void 0,r,c)),r++}let l=e;for(const d of s.children){const c=l;l=gn(l,d.length),wc(c,i)&&wc(n,l)&&S7(d,c,l,n,i,o,r)}}h(S7,"collectBracketPairs");class x7 extends z{constructor(e,t){super();this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new hi),this.onDidChangeEmitter=new P,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(n=>{var i;(!n.languageId||((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.didLanguageChange(n.languageId)))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const e=new Q;this.bracketPairsTree.value=yZ(e.add(new C7(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t,n){const i=e.toLowerCase(),o=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(o.lineNumber,o.column),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[i];return l?Xb(this._findMatchingBracketUp(l,o,Zy(n))):null}matchBracket(e,t){const n=Zy(t);return this._matchBracket(this.textModel.validatePosition(e),n)}_establishBracketSearchOffsets(e,t,n,i){const o=t.getCount(),r=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let d=i-1;d>=0;d--){const c=t.getEndOffset(d);if(c<=a)break;if(Cr(t.getStandardTokenType(d))||t.getLanguageId(d)!==r){a=c;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let d=i+1;d<o;d++){const c=t.getStartOffset(d);if(c>=l)break;if(Cr(t.getStandardTokenType(d))||t.getLanguageId(d)!==r){l=c;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,i=this.textModel.getLineTokens(n),o=this.textModel.getLineContent(n),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(a&&!Cr(i.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:d}=this._establishBracketSearchOffsets(e,i,a,r),c=null;for(;;){const u=Oo.findNextBracketInRange(a.forwardRegex,n,o,l,d);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const f=o.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),g=this._matchFoundBracket(u,a.textIsBracket[f],a.textIsOpenBracket[f],t);if(g){if(g instanceof kr)return null;c=g}}l=u.endColumn-1}if(c)return c}if(r>0&&i.getStartOffset(r)===e.column-1){const l=r-1,d=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(l)).brackets;if(d&&!Cr(i.getStandardTokenType(l))){const{searchStartOffset:c,searchEndOffset:u}=this._establishBracketSearchOffsets(e,i,d,l),f=Oo.findPrevBracketInRange(d.reversedRegex,n,o,c,u);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn){const g=o.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),m=this._matchFoundBracket(f,d.textIsBracket[g],d.textIsOpenBracket[g],t);if(m)return m instanceof kr?null:m}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const o=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return o?o instanceof kr?o:[e,o]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,o=e.reversedRegex;let r=-1,a=0;const l=h((d,c,u,f)=>{for(;;){if(n&&++a%100===0&&!n())return kr.INSTANCE;const g=Oo.findPrevBracketInRange(o,d,c,u,f);if(!g)break;const m=c.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(m)?r++:e.isClose(m)&&r--,r===0)return g;f=g.startColumn-1}return null},"searchPrevMatchingBracketInRange");for(let d=t.lineNumber;d>=1;d--){const c=this.textModel.getLineTokens(d),u=c.getCount(),f=this.textModel.getLineContent(d);let g=u-1,m=f.length,b=f.length;d===t.lineNumber&&(g=c.findTokenIndexAtOffset(t.column-1),m=t.column-1,b=t.column-1);let v=!0;for(;g>=0;g--){const C=c.getLanguageId(g)===i&&!Cr(c.getStandardTokenType(g));if(C)v?m=c.getStartOffset(g):(m=c.getStartOffset(g),b=c.getEndOffset(g));else if(v&&m!==b){const w=l(d,f,m,b);if(w)return w}v=C}if(v&&m!==b){const C=l(d,f,m,b);if(C)return C}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,o=e.forwardRegex;let r=1,a=0;const l=h((c,u,f,g)=>{for(;;){if(n&&++a%100===0&&!n())return kr.INSTANCE;const m=Oo.findNextBracketInRange(o,c,u,f,g);if(!m)break;const b=u.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(b)?r++:e.isClose(b)&&r--,r===0)return m;f=m.endColumn-1}return null},"searchNextMatchingBracketInRange"),d=this.textModel.getLineCount();for(let c=t.lineNumber;c<=d;c++){const u=this.textModel.getLineTokens(c),f=u.getCount(),g=this.textModel.getLineContent(c);let m=0,b=0,v=0;c===t.lineNumber&&(m=u.findTokenIndexAtOffset(t.column-1),b=t.column-1,v=t.column-1);let C=!0;for(;m<f;m++){const w=u.getLanguageId(m)===i&&!Cr(u.getStandardTokenType(m));if(w)C||(b=u.getStartOffset(m)),v=u.getEndOffset(m);else if(C&&b!==v){const y=l(c,g,b,v);if(y)return y}C=w}if(C&&b!==v){const w=l(c,g,b,v);if(w)return w}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);let n=null,i=null;for(let o=t.lineNumber;o>=1;o--){const r=this.textModel.getLineTokens(o),a=r.getCount(),l=this.textModel.getLineContent(o);let d=a-1,c=l.length,u=l.length;if(o===t.lineNumber){d=r.findTokenIndexAtOffset(t.column-1),c=t.column-1,u=t.column-1;const g=r.getLanguageId(d);n!==g&&(n=g,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets)}let f=!0;for(;d>=0;d--){const g=r.getLanguageId(d);if(n!==g){if(i&&f&&c!==u){const b=Oo.findPrevBracketInRange(i.reversedRegex,o,l,c,u);if(b)return this._toFoundBracket(i,b);f=!1}n=g,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets}const m=!!i&&!Cr(r.getStandardTokenType(d));if(m)f?c=r.getStartOffset(d):(c=r.getStartOffset(d),u=r.getEndOffset(d));else if(i&&f&&c!==u){const b=Oo.findPrevBracketInRange(i.reversedRegex,o,l,c,u);if(b)return this._toFoundBracket(i,b)}f=m}if(i&&f&&c!==u){const g=Oo.findPrevBracketInRange(i.reversedRegex,o,l,c,u);if(g)return this._toFoundBracket(i,g)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e),n=this.textModel.getLineCount();let i=null,o=null;for(let r=t.lineNumber;r<=n;r++){const a=this.textModel.getLineTokens(r),l=a.getCount(),d=this.textModel.getLineContent(r);let c=0,u=0,f=0;if(r===t.lineNumber){c=a.findTokenIndexAtOffset(t.column-1),u=t.column-1,f=t.column-1;const m=a.getLanguageId(c);i!==m&&(i=m,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets)}let g=!0;for(;c<l;c++){const m=a.getLanguageId(c);if(i!==m){if(o&&g&&u!==f){const v=Oo.findNextBracketInRange(o.forwardRegex,r,d,u,f);if(v)return this._toFoundBracket(o,v);g=!1}i=m,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets}const b=!!o&&!Cr(a.getStandardTokenType(c));if(b)g||(u=a.getStartOffset(c)),f=a.getEndOffset(c);else if(o&&g&&u!==f){const v=Oo.findNextBracketInRange(o.forwardRegex,r,d,u,f);if(v)return this._toFoundBracket(o,v)}g=b}if(o&&g&&u!==f){const m=Oo.findNextBracketInRange(o.forwardRegex,r,d,u,f);if(m)return this._toFoundBracket(o,m)}}return null}findEnclosingBrackets(e,t){const n=Zy(t),i=this.textModel.validatePosition(e),o=this.textModel.getLineCount(),r=new Map;let a=[];const l=h((g,m)=>{if(!r.has(g)){const b=[];for(let v=0,C=m?m.brackets.length:0;v<C;v++)b[v]=0;r.set(g,b)}a=r.get(g)},"resetCounts");let d=0;const c=h((g,m,b,v,C)=>{for(;;){if(n&&++d%100===0&&!n())return kr.INSTANCE;const w=Oo.findNextBracketInRange(g.forwardRegex,m,b,v,C);if(!w)break;const y=b.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),S=g.textIsBracket[y];if(S&&(S.isOpen(y)?a[S.index]++:S.isClose(y)&&a[S.index]--,a[S.index]===-1))return this._matchFoundBracket(w,S,!1,n);v=w.endColumn-1}return null},"searchInRange");let u=null,f=null;for(let g=i.lineNumber;g<=o;g++){const m=this.textModel.getLineTokens(g),b=m.getCount(),v=this.textModel.getLineContent(g);let C=0,w=0,y=0;if(g===i.lineNumber){C=m.findTokenIndexAtOffset(i.column-1),w=i.column-1,y=i.column-1;const L=m.getLanguageId(C);u!==L&&(u=L,f=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,f))}let S=!0;for(;C<b;C++){const L=m.getLanguageId(C);if(u!==L){if(f&&S&&w!==y){const x=c(f,g,v,w,y);if(x)return Xb(x);S=!1}u=L,f=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,f)}const E=!!f&&!Cr(m.getStandardTokenType(C));if(E)S||(w=m.getStartOffset(C)),y=m.getEndOffset(C);else if(f&&S&&w!==y){const x=c(f,g,v,w,y);if(x)return Xb(x)}S=E}if(f&&S&&w!==y){const L=c(f,g,v,w,y);if(L)return Xb(L)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null}}h(x7,"BracketPairsTextModelPart");function yZ(s,e){return{object:s,dispose:()=>e?.dispose()}}h(yZ,"createDisposableRef$1");function Zy(s){if(typeof s>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=s}}h(Zy,"createTimeBasedContinueBracketSearchPredicate");class kr{constructor(){this._searchCanceledBrand=void 0}}h(kr,"BracketSearchCanceled");kr.INSTANCE=new kr;function Xb(s){return s instanceof kr?null:s}h(Xb,"stripBracketSearchCanceled");class T7 extends z{constructor(e){super();this.textModel=e,this.colorProvider=new NI,this.onDidChangeEmitter=new P,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const i=new Array,o=this.textModel.bracketPairs.getBracketsInRange(e);for(const r of o)i.push({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r)},ownerId:0,range:r.range});return i}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new T(1,1,this.textModel.getLineCount(),1),e,t):[]}}h(T7,"ColorizedBracketPairsDecorationProvider");class NI{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}h(NI,"ColorProvider");It((s,e)=>{const t=[FF,WF,VF,BF,HF,zF],n=new NI;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${s.getColor(xX)}; }`);const i=t.map(o=>s.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const r=i[o%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${r}; }`)}});function Zb(s){return s.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}h(Zb,"escapeNewLine");class On{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Zb(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Zb(this.oldText)}")`:`(replace@${this.oldPosition} "${Zb(this.oldText)}" with "${Zb(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;Es(e,i,n),n+=4;for(let o=0;o<i;o++)FG(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){const n=ks(e,t);return t+=4,dT(e,t,n)}writeSize(){return 4+4+On._writeStringSize(this.oldText)+On._writeStringSize(this.newText)}write(e,t){return Es(e,this.oldPosition,t),t+=4,Es(e,this.newPosition,t),t+=4,t=On._writeString(e,this.oldText,t),t=On._writeString(e,this.newText,t),t}static read(e,t,n){const i=ks(e,t);t+=4;const o=ks(e,t);t+=4;const r=On._readString(e,t);t+=On._writeStringSize(r);const a=On._readString(e,t);return t+=On._writeStringSize(a),n.push(new On(i,r,o,a)),t}}h(On,"TextChange");function SZ(s,e){return s===null||s.length===0?e:new Ds(s,e).compress()}h(SZ,"compressConsecutiveTextChanges");class Ds{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[d,c]=Ds._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(d),i=c;continue}if(n.newPosition<i.oldPosition){const[d,c]=Ds._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(d),n=c;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[d,c]=Ds._splitPrev(n,i.oldLength);a=d,l=i,n=c,i=this._getCurr(++t)}else{const[d,c]=Ds._splitCurr(i,n.newLength);a=n,l=d,n=this._getPrev(++e),i=c}this._result[this._resultLen++]=new On(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=Ds._merge(this._result);return Ds._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=Ds._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Ds._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new On(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new On(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new On(e.oldPosition,e.oldText,e.newPosition,n),new On(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new On(e.oldPosition,n,e.newPosition,e.newText),new On(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,i=e[0];for(let o=1;o<e.length;o++){const r=e[o];i.oldEnd===r.oldPosition?i=new On(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const o=e[i];o.oldText!==o.newText&&(t[n++]=o)}return t}}h(Ds,"TextChangeCompressor");function hl(s){return s===47||s===92}h(hl,"isPathSeparator");function L7(s){return s.replace(/[\\/]/g,an.sep)}h(L7,"toSlashes");function xZ(s){return s.indexOf("/")===-1&&(s=L7(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}h(xZ,"toPosixPath");function ZM(s,e=an.sep){if(!s)return"";const t=s.length,n=s.charCodeAt(0);if(hl(n)){if(hl(s.charCodeAt(1))&&!hl(s.charCodeAt(2))){let o=3;const r=o;for(;o<t&&!hl(s.charCodeAt(o));o++);if(r!==o&&!hl(s.charCodeAt(o+1))){for(o+=1;o<t;o++)if(hl(s.charCodeAt(o)))return s.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(k7(n)&&s.charCodeAt(1)===58)return hl(s.charCodeAt(2))?s.slice(0,2)+e:s.slice(0,2);let i=s.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(hl(s.charCodeAt(i)))return s.slice(0,i+1)}return""}h(ZM,"getRoot");function dL(s,e,t,n=Pr){if(s===e)return!0;if(!s||!e||e.length>s.length)return!1;if(t){if(!TD(s,e))return!1;if(e.length===s.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,s.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),s.indexOf(e)===0}h(dL,"isEqualOrParent");function k7(s){return s>=65&&s<=90||s>=97&&s<=122}h(k7,"isWindowsDriveLetter");function TZ(s){const e=CD(s);return Vn?s.length>3?!1:E7(e)&&(s.length===2||e.charCodeAt(2)===92):e===an.sep}h(TZ,"isRootOrDriveLetter");function E7(s,e){return(e!==void 0?e:Vn)?k7(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}h(E7,"hasDriveLetter");function yr(s){return Hw(s,!0)}h(yr,"originalFSPath");class i1{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:hm(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===Me.file)return dL(yr(e),yr(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(QM(e.authority,t.authority))return dL(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ce.joinPath(e,...t)}basenameOrAuthority(e){return ts(e)||e.authority}basename(e){return an.basename(e.path)}extname(e){return an.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Me.file?t=Ce.file(EO(yr(e))).path:(t=an.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Me.file?t=Ce.file(CD(yr(e))).path:t=an.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!QM(e.authority,t.authority))return;if(e.scheme===Me.file){const o=tG(yr(e),yr(t));return Vn?L7(o):o}let n=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(const r=Math.min(n.length,i.length);o<r&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return an.relative(n,i)}resolvePath(e,t){if(e.scheme===Me.file){const n=Ce.file(eG(yr(e),t));return e.with({authority:n.authority,path:n.path})}return t=xZ(t),e.with({path:an.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Iu(e,t)}hasTrailingPathSeparator(e,t=Pr){if(e.scheme===Me.file){const n=yr(e);return n.length>ZM(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Pr){return e2(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Pr){let n=!1;if(e.scheme===Me.file){const i=yr(e);n=i!==void 0&&i.length===ZM(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!e2(e,t)?e.with({path:e.path+"/"}):e}}h(i1,"ExtUri");const Dt=new i1(()=>!1);new i1(s=>s.scheme===Me.file?!ni:!0);new i1(s=>!0);const D7=Dt.isEqual.bind(Dt);Dt.isEqualOrParent.bind(Dt);Dt.getComparisonKey.bind(Dt);const LZ=Dt.basenameOrAuthority.bind(Dt),ts=Dt.basename.bind(Dt),kZ=Dt.extname.bind(Dt),o1=Dt.dirname.bind(Dt),EZ=Dt.joinPath.bind(Dt),DZ=Dt.normalizePath.bind(Dt);Dt.relativePath.bind(Dt);const JM=Dt.resolvePath.bind(Dt);Dt.isAbsolutePath.bind(Dt);const QM=Dt.isEqualAuthority.bind(Dt),e2=Dt.hasTrailingPathSeparator.bind(Dt);Dt.removeTrailingPathSeparator.bind(Dt);Dt.addTrailingPathSeparator.bind(Dt);var cd;(function(s){s.META_DATA_LABEL="label",s.META_DATA_DESCRIPTION="description",s.META_DATA_SIZE="size",s.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&n.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&n.set(s.META_DATA_MIME,o),n}h(e,"parseMetaData"),s.parseMetaData=e})(cd||(cd={}));function cu(s){return s.toString()}h(cu,"uriGetComparisonKey");class wn{constructor(e,t,n,i,o,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=o,this.afterCursorState=r,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),i=cL(e);return new wn(n,n,i,i,t,t,[])}append(e,t,n,i,o){t.length>0&&(this.changes=SZ(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Es(e,t?t.length:0,n),n+=4,t)for(const i of t)Es(e,i.selectionStartLineNumber,n),n+=4,Es(e,i.selectionStartColumn,n),n+=4,Es(e,i.positionLineNumber,n),n+=4,Es(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=ks(e,t);t+=4;for(let o=0;o<i;o++){const r=ks(e,t);t+=4;const a=ks(e,t);t+=4;const l=ks(e,t);t+=4;const d=ks(e,t);t+=4,n.push(new oe(r,a,l,d))}return t}serialize(){let e=10+wn._writeSelectionsSize(this.beforeCursorState)+wn._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;Es(t,this.beforeVersionId,n),n+=4,Es(t,this.afterVersionId,n),n+=4,sM(t,this.beforeEOL,n),n+=1,sM(t,this.afterEOL,n),n+=1,n=wn._writeSelections(t,this.beforeCursorState,n),n=wn._writeSelections(t,this.afterCursorState,n),Es(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=ks(t,n);n+=4;const o=ks(t,n);n+=4;const r=oM(t,n);n+=1;const a=oM(t,n);n+=1;const l=[];n=wn._readSelections(t,n,l);const d=[];n=wn._readSelections(t,n,d);const c=ks(t,n);n+=4;const u=[];for(let f=0;f<c;f++)n=On.read(t,n,u);return new wn(i,o,r,a,l,d,u)}}h(wn,"SingleModelEditStackData");class AI{constructor(e,t){this.model=e,this._data=wn.create(e,t)}get type(){return 0}get resource(){return Ce.isUri(this.model)?this.model:this.model.uri}get label(){return p("edit","Typing")}toString(){return(this._data instanceof wn?this._data:wn.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ce.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof wn}append(e,t,n,i,o){this._data instanceof wn&&this._data.append(e,t,n,i,o)}close(){this._data instanceof wn&&(this._data=this._data.serialize())}open(){this._data instanceof wn||(this._data=wn.deserialize(this._data))}undo(){if(Ce.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof wn&&(this._data=this._data.serialize());const e=wn.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ce.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof wn&&(this._data=this._data.serialize());const e=wn.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof wn&&(this._data=this._data.serialize()),this._data.byteLength+168}}h(AI,"SingleModelEditStackElement");class I7{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const i=cu(n.resource);this._editStackElementsMap.set(i,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=cu(e);return this._editStackElementsMap.has(t)}setModel(e){const t=cu(Ce.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=cu(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,o){const r=cu(e.uri);this._editStackElementsMap.get(r).append(e,t,n,i,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=cu(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${ts(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}h(I7,"MultiModelEditStackElement");function cL(s){return s.getEOL()===`
`?0:1}h(cL,"getModelEOL");function va(s){return s?s instanceof AI||s instanceof I7:!1}h(va,"isEditStackElement");class s1{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);va(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);va(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(va(t)&&t.canAppend(this._model))return t;const n=new AI(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],cL(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),o=this._model.applyEdits(t,!0),r=s1._computeCursorState(n,o),a=o.map((l,d)=>({index:d,textChange:l.textChange}));return a.sort((l,d)=>l.textChange.oldPosition===d.textChange.oldPosition?l.index-d.index:l.textChange.oldPosition-d.textChange.oldPosition),i.append(this._model,a.map(l=>l.textChange),cL(this._model),this._model.getAlternativeVersionId(),r),r}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ne(n),null}}}h(s1,"EditStack");class N7{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}h(N7,"SpacesDiffResult");function IZ(s,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){const f=s.charCodeAt(o),g=t.charCodeAt(o);if(f!==g)break}let r=0,a=0;for(let f=o;f<e;f++)s.charCodeAt(f)===32?r++:a++;let l=0,d=0;for(let f=o;f<n;f++)t.charCodeAt(f)===32?l++:d++;if(r>0&&a>0||l>0&&d>0)return;const c=Math.abs(a-d),u=Math.abs(r-l);if(c===0){i.spacesDiff=u,u>0&&0<=l-1&&l-1<s.length&&l<t.length&&t.charCodeAt(l)!==32&&s.charCodeAt(l-1)===32&&s.charCodeAt(s.length-1)===44&&(i.looksLikeAlignment=!0);return}if(u%c===0){i.spacesDiff=u/c;return}}h(IZ,"spacesDiff");function t2(s,e,t){const n=Math.min(s.getLineCount(),1e4);let i=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],d=8,c=[0,0,0,0,0,0,0,0,0],u=new N7;for(let m=1;m<=n;m++){const b=s.getLineLength(m),v=s.getLineContent(m),C=b<=65536;let w=!1,y=0,S=0,L=0;for(let x=0,k=b;x<k;x++){const N=C?v.charCodeAt(x):s.getLineCharCode(m,x);if(N===9)L++;else if(N===32)S++;else{w=!0,y=x;break}}if(!w||(L>0?i++:S>1&&o++,IZ(r,a,v,y,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const E=u.spacesDiff;E<=d&&c[E]++,r=v,a=y}let f=t;i!==o&&(f=i<o);let g=e;if(f){let m=f?0:.1*n;l.forEach(b=>{const v=c[b];v>m&&(m=v,g=b)}),g===4&&c[4]>0&&c[2]>0&&c[2]>=c[4]/2&&(g=2)}return{insertSpaces:f,tabSize:g}}h(t2,"guessIndentation");function Ii(s){return(s.metadata&1)>>>0}h(Ii,"getNodeColor");function St(s,e){s.metadata=s.metadata&254|e<<0}h(St,"setNodeColor");function Yn(s){return(s.metadata&2)>>>1===1}h(Yn,"getNodeIsVisited");function Ct(s,e){s.metadata=s.metadata&253|(e?1:0)<<1}h(Ct,"setNodeIsVisited");function A7(s){return(s.metadata&4)>>>2===1}h(A7,"getNodeIsForValidation");function n2(s,e){s.metadata=s.metadata&251|(e?1:0)<<2}h(n2,"setNodeIsForValidation");function NZ(s){return(s.metadata&24)>>>3}h(NZ,"getNodeStickiness");function i2(s,e){s.metadata=s.metadata&231|e<<3}h(i2,"_setNodeStickiness");function AZ(s){return(s.metadata&32)>>>5===1}h(AZ,"getCollapseOnReplaceEdit");function o2(s,e){s.metadata=s.metadata&223|(e?1:0)<<5}h(o2,"setCollapseOnReplaceEdit");class MI{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,St(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,n2(this,!1),i2(this,1),o2(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Ct(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;const t=this.options.className;n2(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),i2(this,this.options.stickiness),o2(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}h(MI,"IntervalNode");const Re=new MI(null,0,0);Re.parent=Re;Re.left=Re;Re.right=Re;St(Re,0);class tw{constructor(){this.root=Re,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,o){return this.root===Re?[]:BZ(this,e,t,n,i,o)}search(e,t,n){return this.root===Re?[]:VZ(this,e,t,n)}collectNodesFromOwner(e){return FZ(this,e)}collectNodesPostOrder(){return WZ(this)}insert(e){s2(this,e),this._normalizeDeltaIfNecessary()}delete(e){r2(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const o=n.start+i,r=n.end+i;n.setCachedOffsets(o,r,t)}acceptReplace(e,t,n,i){const o=PZ(this,e,e+t);for(let r=0,a=o.length;r<a;r++){const l=o[r];r2(this,l)}this._normalizeDeltaIfNecessary(),OZ(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,a=o.length;r<a;r++){const l=o[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,RZ(l,e,e+t,n,i),l.maxEnd=l.end,s2(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){!this.requestNormalizeDelta||(this.requestNormalizeDelta=!1,MZ(this))}}h(tw,"IntervalTree");function MZ(s){let e=s.root,t=0;for(;e!==Re;){if(e.left!==Re&&!Yn(e.left)){e=e.left;continue}if(e.right!==Re&&!Yn(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,hd(e),Ct(e,!0),Ct(e.left,!1),Ct(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ct(s.root,!1)}h(MZ,"normalizeDelta");function hu(s,e,t,n){return s<t?!0:s>t||n===1?!1:n===2?!0:e}h(hu,"adjustMarkerBeforeColumn");function RZ(s,e,t,n,i){const o=NZ(s),r=o===0||o===2,a=o===1||o===2,l=t-e,d=n,c=Math.min(l,d),u=s.start;let f=!1;const g=s.end;let m=!1;e<=u&&g<=t&&AZ(s)&&(s.start=e,f=!0,s.end=e,m=!0);{const v=i?1:l>0?2:0;!f&&hu(u,r,e,v)&&(f=!0),!m&&hu(g,a,e,v)&&(m=!0)}if(c>0&&!i){const v=l>d?2:0;!f&&hu(u,r,e+c,v)&&(f=!0),!m&&hu(g,a,e+c,v)&&(m=!0)}{const v=i?1:0;!f&&hu(u,r,t,v)&&(s.start=e+d,f=!0),!m&&hu(g,a,t,v)&&(s.end=e+d,m=!0)}const b=d-l;f||(s.start=Math.max(0,u+b)),m||(s.end=Math.max(0,g+b)),s.start>s.end&&(s.end=s.start)}h(RZ,"nodeAcceptEdit");function PZ(s,e,t){let n=s.root,i=0,o=0,r=0,a=0;const l=[];let d=0;for(;n!==Re;){if(Yn(n)){Ct(n.left,!1),Ct(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!Yn(n.left)){if(o=i+n.maxEnd,o<e){Ct(n,!0);continue}if(n.left!==Re){n=n.left;continue}}if(r=i+n.start,r>t){Ct(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(r,a,0),l[d++]=n),Ct(n,!0),n.right!==Re&&!Yn(n.right)){i+=n.delta,n=n.right;continue}}return Ct(s.root,!1),l}h(PZ,"searchForEditing");function OZ(s,e,t,n){let i=s.root,o=0,r=0,a=0;const l=n-(t-e);for(;i!==Re;){if(Yn(i)){Ct(i.left,!1),Ct(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),hd(i),i=i.parent;continue}if(!Yn(i.left)){if(r=o+i.maxEnd,r<e){Ct(i,!0);continue}if(i.left!==Re){i=i.left;continue}}if(a=o+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0),Ct(i,!0);continue}if(Ct(i,!0),i.right!==Re&&!Yn(i.right)){o+=i.delta,i=i.right;continue}}Ct(s.root,!1)}h(OZ,"noOverlapReplace");function FZ(s,e){let t=s.root;const n=[];let i=0;for(;t!==Re;){if(Yn(t)){Ct(t.left,!1),Ct(t.right,!1),t=t.parent;continue}if(t.left!==Re&&!Yn(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Ct(t,!0),t.right!==Re&&!Yn(t.right)){t=t.right;continue}}return Ct(s.root,!1),n}h(FZ,"collectNodesFromOwner");function WZ(s){let e=s.root;const t=[];let n=0;for(;e!==Re;){if(Yn(e)){Ct(e.left,!1),Ct(e.right,!1),e=e.parent;continue}if(e.left!==Re&&!Yn(e.left)){e=e.left;continue}if(e.right!==Re&&!Yn(e.right)){e=e.right;continue}t[n++]=e,Ct(e,!0)}return Ct(s.root,!1),t}h(WZ,"collectNodesPostOrder");function VZ(s,e,t,n){let i=s.root,o=0,r=0,a=0;const l=[];let d=0;for(;i!==Re;){if(Yn(i)){Ct(i.left,!1),Ct(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),i=i.parent;continue}if(i.left!==Re&&!Yn(i.left)){i=i.left;continue}r=o+i.start,a=o+i.end,i.setCachedOffsets(r,a,n);let c=!0;if(e&&i.ownerId&&i.ownerId!==e&&(c=!1),t&&A7(i)&&(c=!1),c&&(l[d++]=i),Ct(i,!0),i.right!==Re&&!Yn(i.right)){o+=i.delta,i=i.right;continue}}return Ct(s.root,!1),l}h(VZ,"search");function BZ(s,e,t,n,i,o){let r=s.root,a=0,l=0,d=0,c=0;const u=[];let f=0;for(;r!==Re;){if(Yn(r)){Ct(r.left,!1),Ct(r.right,!1),r===r.parent.right&&(a-=r.parent.delta),r=r.parent;continue}if(!Yn(r.left)){if(l=a+r.maxEnd,l<e){Ct(r,!0);continue}if(r.left!==Re){r=r.left;continue}}if(d=a+r.start,d>t){Ct(r,!0);continue}if(c=a+r.end,c>=e){r.setCachedOffsets(d,c,o);let g=!0;n&&r.ownerId&&r.ownerId!==n&&(g=!1),i&&A7(r)&&(g=!1),g&&(u[f++]=r)}if(Ct(r,!0),r.right!==Re&&!Yn(r.right)){a+=r.delta,r=r.right;continue}}return Ct(s.root,!1),u}h(BZ,"intervalSearch");function s2(s,e){if(s.root===Re)return e.parent=Re,e.left=Re,e.right=Re,St(e,0),s.root=e,s.root;HZ(s,e),bl(e.parent);let t=e;for(;t!==s.root&&Ii(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Ii(n)===1?(St(t.parent,0),St(n,0),St(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,$p(s,t)),St(t.parent,0),St(t.parent.parent,1),qp(s,t.parent.parent))}else{const n=t.parent.parent.left;Ii(n)===1?(St(t.parent,0),St(n,0),St(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,qp(s,t)),St(t.parent,0),St(t.parent.parent,1),$p(s,t.parent.parent))}return St(s.root,0),e}h(s2,"rbTreeInsert");function HZ(s,e){let t=0,n=s.root;const i=e.start,o=e.end;for(;;)if(KZ(i,o,n.start+t,n.end+t)<0)if(n.left===Re){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Re){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Re,e.right=Re,St(e,1)}h(HZ,"treeInsert");function r2(s,e){let t,n;if(e.left===Re?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Re?(t=e.left,n=e):(n=zZ(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(s.requestNormalizeDelta=!0)),n===s.root){s.root=t,St(t,0),e.detach(),Jy(),hd(t),s.root.parent=Re;return}const i=Ii(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,St(n,Ii(e)),e===s.root?s.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Re&&(n.left.parent=n),n.right!==Re&&(n.right.parent=n)),e.detach(),i){bl(t.parent),n!==e&&(bl(n),bl(n.parent)),Jy();return}bl(t),bl(t.parent),n!==e&&(bl(n),bl(n.parent));let o;for(;t!==s.root&&Ii(t)===0;)t===t.parent.left?(o=t.parent.right,Ii(o)===1&&(St(o,0),St(t.parent,1),$p(s,t.parent),o=t.parent.right),Ii(o.left)===0&&Ii(o.right)===0?(St(o,1),t=t.parent):(Ii(o.right)===0&&(St(o.left,0),St(o,1),qp(s,o),o=t.parent.right),St(o,Ii(t.parent)),St(t.parent,0),St(o.right,0),$p(s,t.parent),t=s.root)):(o=t.parent.left,Ii(o)===1&&(St(o,0),St(t.parent,1),qp(s,t.parent),o=t.parent.left),Ii(o.left)===0&&Ii(o.right)===0?(St(o,1),t=t.parent):(Ii(o.left)===0&&(St(o.right,0),St(o,1),$p(s,o),o=t.parent.left),St(o,Ii(t.parent)),St(t.parent,0),St(o.left,0),qp(s,t.parent),t=s.root));St(t,0),Jy()}h(r2,"rbTreeDelete");function zZ(s){for(;s.left!==Re;)s=s.left;return s}h(zZ,"leftest$1");function Jy(){Re.parent=Re,Re.delta=0,Re.start=0,Re.end=0}h(Jy,"resetSentinel$1");function $p(s,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Re&&(t.left.parent=e),t.parent=e.parent,e.parent===Re?s.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,hd(e),hd(t)}h($p,"leftRotate$1");function qp(s,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(s.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Re&&(t.right.parent=e),t.parent=e.parent,e.parent===Re?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,hd(e),hd(t)}h(qp,"rightRotate$1");function M7(s){let e=s.end;if(s.left!==Re){const t=s.left.maxEnd;t>e&&(e=t)}if(s.right!==Re){const t=s.right.maxEnd+s.delta;t>e&&(e=t)}return e}h(M7,"computeMaxEnd");function hd(s){s.maxEnd=M7(s)}h(hd,"recomputeMaxEnd");function bl(s){for(;s!==Re;){const e=M7(s);if(s.maxEnd===e)return;s.maxEnd=e,s=s.parent}}h(bl,"recomputeMaxEndWalkToRoot");function KZ(s,e,t,n){return s===t?e-n:s-t}h(KZ,"intervalCompare");class mC{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ke)return RI(this.right);let e=this;for(;e.parent!==ke&&e.parent.left!==e;)e=e.parent;return e.parent===ke?ke:e.parent}prev(){if(this.left!==ke)return R7(this.left);let e=this;for(;e.parent!==ke&&e.parent.right!==e;)e=e.parent;return e.parent===ke?ke:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}h(mC,"TreeNode");const ke=new mC(null,0);ke.parent=ke;ke.left=ke;ke.right=ke;ke.color=0;function RI(s){for(;s.left!==ke;)s=s.left;return s}h(RI,"leftest");function R7(s){for(;s.right!==ke;)s=s.right;return s}h(R7,"righttest");function PI(s){return s===ke?0:s.size_left+s.piece.length+PI(s.right)}h(PI,"calculateSize");function OI(s){return s===ke?0:s.lf_left+s.piece.lineFeedCnt+OI(s.right)}h(OI,"calculateLF");function Qy(){ke.parent=ke}h(Qy,"resetSentinel");function Yp(s,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==ke&&(t.left.parent=e),t.parent=e.parent,e.parent===ke?s.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}h(Yp,"leftRotate");function Xp(s,e){const t=e.left;e.left=t.right,t.right!==ke&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===ke?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}h(Xp,"rightRotate");function Jb(s,e){let t,n;if(e.left===ke?(n=e,t=n.right):e.right===ke?(n=e,t=n.left):(n=RI(e.right),t=n.right),n===s.root){s.root=t,t.color=0,e.detach(),Qy(),s.root.parent=ke;return}const i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,Cp(s,t)):(n.parent===e?t.parent=n:t.parent=n.parent,Cp(s,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===s.root?s.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==ke&&(n.left.parent=n),n.right!==ke&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,Cp(s,n)),e.detach(),t.parent.left===t){const r=PI(t),a=OI(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,ca(s,t.parent,l,d)}}if(Cp(s,t.parent),i){Qy();return}let o;for(;t!==s.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,Yp(s,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,Xp(s,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,Yp(s,t.parent),t=s.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,Xp(s,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,Yp(s,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,Xp(s,t.parent),t=s.root));t.color=0,Qy()}h(Jb,"rbDelete");function a2(s,e){for(Cp(s,e);e!==s.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Yp(s,e)),e.parent.color=0,e.parent.parent.color=1,Xp(s,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,Xp(s,e)),e.parent.color=0,e.parent.parent.color=1,Yp(s,e.parent.parent))}s.root.color=0}h(a2,"fixInsert");function ca(s,e,t,n){for(;e!==s.root&&e!==ke;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}h(ca,"updateTreeMetadata");function Cp(s,e){let t=0,n=0;if(e!==s.root){for(;e!==s.root&&e===e.parent.right;)e=e.parent;if(e!==s.root)for(e=e.parent,t=PI(e.left)-e.size_left,n=OI(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==s.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}h(Cp,"recomputeTreeMetadata");const ia=65535;function P7(s){let e;return s[s.length-1]<65536?e=new Uint16Array(s.length):e=new Uint32Array(s.length),e.set(s,0),e}h(P7,"createUintArray");class O7{constructor(e,t,n,i,o){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=o}}h(O7,"LineStarts");function ga(s,e=!0){const t=[0];let n=1;for(let i=0,o=s.length;i<o;i++){const r=s.charCodeAt(i);r===13?i+1<o&&s.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:r===10&&(t[n++]=i+1)}return e?P7(t):t}h(ga,"createLineStartsFast");function UZ(s,e){s.length=0,s[0]=0;let t=1,n=0,i=0,o=0,r=!0;for(let l=0,d=e.length;l<d;l++){const c=e.charCodeAt(l);c===13?l+1<d&&e.charCodeAt(l+1)===10?(o++,s[t++]=l+2,l++):(n++,s[t++]=l+1):c===10?(i++,s[t++]=l+1):r&&c!==9&&(c<32||c>126)&&(r=!1)}const a=new O7(P7(s),n,i,o,r);return s.length=0,a}h(UZ,"createLineStarts");class Di{constructor(e,t,n,i,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=o}}h(Di,"Piece");class xl{constructor(e,t){this.buffer=e,this.lineStarts=t}}h(xl,"StringBuffer");class F7{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==ke&&e.iterate(e.root,n=>(n!==ke&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}h(F7,"PieceTreeSnapshot");class W7{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const o=n[i];if(o.node.parent===null||o.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){const i=[];for(const o of n)o!==null&&i.push(o);this._cache=i}}}h(W7,"PieceTreeSearchCache");class V7{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new xl("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=ke,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let o=0,r=e.length;o<r;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=ga(e[o].buffer));const a=new Di(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),i=this.rbInsertRight(i,a)}this._searchCache=new W7(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=ia,n=t-Math.floor(t/3),i=n*2;let o="",r=0;const a=[];if(this.iterate(this.root,l=>{const d=this.getNodeContent(l),c=d.length;if(r<=n||r+c<i)return o+=d,r+=c,!0;const u=o.replace(/\r\n|\r|\n/g,e);return a.push(new xl(u,ga(u))),o=d,r=c,!0}),r>0){const l=o.replace(/\r\n|\r|\n/g,e);a.push(new xl(l,ga(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new F7(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==ke;)if(i.left!==ke&&i.lf_left+1>=e)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt+1>=e)return n+=i.size_left,n+=this.getAccumulatedValue(i,e-i.lf_left-2)+t-1;e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const i=e;for(;t!==ke;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){const r=this.getOffsetAt(n+1,1),a=i-r;return new W(n+1,a+1)}return new W(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===ke){const o=this.getOffsetAt(n+1,1),r=i-e-o;return new W(n+1,r+1)}else t=t.right;return new W(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(d+e.remainder,d+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let r=i.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==ke;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,n.piece.length);n=n.next()}return r}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,o=>{if(o===ke)return!0;const r=o.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,d=this._buffers[r.bufferIndex].lineStarts,c=r.start.line,u=r.end.line;let f=d[c]+r.start.column;if(i&&(l.charCodeAt(f)===10&&(f++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(c===u)return!this._EOLNormalized&&l.charCodeAt(f+a-1)===13?(i=!0,n+=l.substr(f,a-1)):n+=l.substr(f,a),!0;n+=this._EOLNormalized?l.substring(f,Math.max(f,d[c+1]-this._EOLLength)):l.substring(f,d[c+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let g=c+1;g<u;g++)n=this._EOLNormalized?l.substring(d[g],d[g+1]-this._EOLLength):l.substring(d[g],d[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(d[u]+r.end.column-1)===13?(i=!0,r.end.column===0?t--:n=l.substr(d[u],r.end.column-1)):n=l.substr(d[u],r.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,o,r,a,l,d,c,u){const f=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),m=this.offsetInBuffer(e.piece.bufferIndex,o),b=this.offsetInBuffer(e.piece.bufferIndex,r);let v;const C={line:0,column:0};let w,y;t._wordSeparators?(w=f.buffer.substring(m,b),y=h(S=>S+m,"offsetInBuffer"),t.reset(0)):(w=f.buffer,y=h(S=>S,"offsetInBuffer"),t.reset(m));do if(v=t.next(w),v){if(y(v.index)>=b)return c;this.positionInBuffer(e,y(v.index)-g,C);const S=this.getLineFeedCnt(e.piece.bufferIndex,o,C),L=C.line===o.line?C.column-o.column+i:C.column+1,E=L+v[0].length;if(u[c++]=oc(new T(n+S,L,n+S,E),v,l),y(v.index)+v[0].length>=b||c>=d)return c}while(v);return c}findMatchesLineByLine(e,t,n,i){const o=[];let r=0;const a=new mc(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let c=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(d.node,d.remainder);if(l.node===d.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,c,u,t,n,i,r,o),o;let f=e.startLineNumber,g=l.node;for(;g!==d.node;){const b=this.getLineFeedCnt(g.piece.bufferIndex,c,g.piece.end);if(b>=1){const C=this._buffers[g.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),y=C[c.line+b],S=f===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(g,a,f,S,c,this.positionInBuffer(g,y-w),t,n,i,r,o),r>=i)return o;f+=b}const v=f===e.startLineNumber?e.startColumn-1:0;if(f===e.endLineNumber){const C=this.getLineContent(f).substring(v,e.endColumn-1);return r=this._findMatchesInLine(t,a,C,e.endLineNumber,v,r,o,n,i),o}if(r=this._findMatchesInLine(t,a,this.getLineContent(f).substr(v),f,v,r,o,n,i),r>=i)return o;f++,l=this.nodeAt2(f,1),g=l.node,c=this.positionInBuffer(l.node,l.remainder)}if(f===e.endLineNumber){const b=f===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(f).substring(b,e.endColumn-1);return r=this._findMatchesInLine(t,a,v,e.endLineNumber,b,r,o,n,i),o}const m=f===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(d.node,a,f,m,c,u,t,n,i,r,o),o}_findMatchesInLine(e,t,n,i,o,r,a,l,d){const c=e.wordSeparators;if(!l&&e.simpleSearch){const f=e.simpleSearch,g=f.length,m=n.length;let b=-g;for(;(b=n.indexOf(f,b+g))!==-1;)if((!c||BD(c,n,m,b,g))&&(a[r++]=new gf(new T(i,b+1+o,i,b+1+g+o),null),r>=d))return r;return r}let u;t.reset(0);do if(u=t.next(n),u&&(a[r++]=oc(new T(i,u.index+1+o,i,u.index+1+u[0].length+o),u,l),r>=d))return r;while(u);return r}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==ke){const{node:i,remainder:o,nodeStartOffset:r}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,d=this.positionInBuffer(i,o);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<ia){this.appendToNode(i,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(r+i.piece.length>e){const c=[];let u=new Di(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,o)===10){const b={line:u.start.line+1,column:0};u=new Di(u.bufferIndex,b,u.end,this.getLineFeedCnt(u.bufferIndex,b,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,o-1)===13){const b=this.positionInBuffer(i,o-1);this.deleteNodeTail(i,b),t="\r"+t,i.piece.length===0&&c.push(i)}else this.deleteNodeTail(i,d);else this.deleteNodeTail(i,d);const f=this.createNewPieces(t);u.length>0&&this.rbInsertRight(i,u);let g=i;for(let m=0;m<f.length;m++)g=this.rbInsertRight(g,f[m]);this.deleteNodes(c)}else this.insertContentToNodeRight(t,i)}else{const i=this.createNewPieces(t);let o=this.rbInsertLeft(null,i[0]);for(let r=1;r<i.length;r++)o=this.rbInsertRight(o,i[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===ke)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),o=n.node,r=i.node;if(o===r){const f=this.positionInBuffer(o,n.remainder),g=this.positionInBuffer(o,i.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){const m=o.next();Jb(this,o),this.validateCRLFWithPrevNode(m),this.computeBufferMetadata();return}this.deleteNodeHead(o,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,f),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,f,g),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);const d=this.positionInBuffer(r,i.remainder);this.deleteNodeHead(r,d),r.piece.length===0&&a.push(r);const c=o.next();for(let f=c;f!==ke&&f!==r;f=f.next())a.push(f);const u=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new Di(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,ca(this,t,-1,-1),t.piece.length===0&&n.push(t)}const i=this.createNewPieces(e);let o=this.rbInsertLeft(t,i[i.length-1]);for(let r=i.length-2;r>=0;r--)o=this.rbInsertLeft(o,i[r]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let o=i;for(let r=1;r<n.length;r++)o=this.rbInsertRight(o,n[r]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,l=r[i.start.line]+i.start.column+t;let d=i.start.line,c=i.end.line,u=0,f=0,g=0;for(;d<=c&&(u=d+(c-d)/2|0,g=r[u],u!==c);)if(f=r[u+1],l<g)c=u-1;else if(l>=f)d=u+1;else break;return n?(n.line=u,n.column=l-g,null):{line:u,column:l-g}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const o=i[n.line+1],r=i[n.line]+n.column;if(o>r+1)return n.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Jb(this,e[t])}createNewPieces(e){if(e.length>ia){const c=[];for(;e.length>ia;){const f=e.charCodeAt(ia-1);let g;f===13||f>=55296&&f<=56319?(g=e.substring(0,ia-1),e=e.substring(ia-1)):(g=e.substring(0,ia),e=e.substring(ia));const m=ga(g);c.push(new Di(this._buffers.length,{line:0,column:0},{line:m.length-1,column:g.length-m[m.length-1]},m.length-1,g.length)),this._buffers.push(new xl(g,m))}const u=ga(e);return c.push(new Di(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new xl(e,u)),c}let t=this._buffers[0].buffer.length;const n=ga(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let c=0;c<n.length;c++)n[c]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let c=0;c<n.length;c++)n[c]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[r],l={line:r,column:a},d=new Di(0,i,l,this.getLineFeedCnt(0,i,l),o-t);return this._lastChangeBufferPos=l,[d]}getLineRawContent(e,t=0){let n=this.root,i="";const o=this._searchCache.get2(e);if(o){n=o.node;const r=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+r,l+n.piece.length);else{const d=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(l+r,l+d-t)}}else{let r=0;const a=e;for(;n!==ke;)if(n.left!==ke&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),c=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-n.lf_left)}),c.substring(u+l,u+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,c=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=d.substring(c+l,c+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==ke;){const r=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=r.substring(l,l+a-t),i}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=r.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==ke;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),o=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(r!==o)return{index:r,remainder:0}}return{index:o,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[o]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),r=t,a=this.offsetInBuffer(n.bufferIndex,r),l=this.getLineFeedCnt(n.bufferIndex,n.start,r),d=l-i,c=a-o,u=n.length+c;e.piece=new Di(n.bufferIndex,n.start,r,l,u),ca(this,e,c,d)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),r=t,a=this.getLineFeedCnt(n.bufferIndex,r,n.end),l=this.offsetInBuffer(n.bufferIndex,r),d=a-i,c=o-l,u=n.length+c;e.piece=new Di(n.bufferIndex,r,n.end,a,u),ca(this,e,c,d)}shrinkNode(e,t,n){const i=e.piece,o=i.start,r=i.end,a=i.length,l=i.lineFeedCnt,d=t,c=this.getLineFeedCnt(i.bufferIndex,i.start,d),u=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,o);e.piece=new Di(i.bufferIndex,i.start,d,c,u),ca(this,e,u-a,c-l);const f=new Di(i.bufferIndex,n,r,this.getLineFeedCnt(i.bufferIndex,n,r),this.offsetInBuffer(i.bufferIndex,r)-this.offsetInBuffer(i.bufferIndex,n)),g=this.rbInsertRight(e,f);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=ga(t,!1);for(let g=0;g<o.length;g++)o[g]+=i;if(n){const g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},d=e.piece.length+t.length,c=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),f=u-c;e.piece=new Di(e.piece.bufferIndex,e.piece.start,l,u,d),this._lastChangeBufferPos=l,ca(this,e,t.length,f)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==ke;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const o={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==ke;)if(n.left!==ke&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const o=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(o+t-1,r),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:i};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==ke;){if(n.piece.lineFeedCnt>0){const o=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:r}}else if(n.piece.length>=t-1){const o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ke||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,o=n[i]+t.start.column;return i===n.length-1||n[i+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ke||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Di(e.piece.bufferIndex,e.piece.start,o,a,r),ca(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},d=t.piece.length-1,c=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Di(t.piece.bufferIndex,l,t.piece.end,c,d),ca(this,t,-1,-1),t.piece.length===0&&n.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let f=0;f<n.length;f++)Jb(this,n[f])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)Jb(this,n);else{const i=n.piece,o={line:i.start.line+1,column:0},r=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,o,i.end);n.piece=new Di(i.bufferIndex,o,i.end,a,r),ca(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ke)return t(ke);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===ke)return"";const t=this._buffers[e.piece.bufferIndex];let n;const i=e.piece,o=this.offsetInBuffer(i.bufferIndex,i.start),r=this.offsetInBuffer(i.bufferIndex,i.end);return n=t.buffer.substring(o,r),n}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new mC(t,1);if(n.left=ke,n.right=ke,n.parent=ke,n.size_left=0,n.lf_left=0,this.root===ke)this.root=n,n.color=0;else if(e.right===ke)e.right=n,n.parent=e;else{const o=RI(e.right);o.left=n,n.parent=o}return a2(this,n),n}rbInsertLeft(e,t){const n=new mC(t,1);if(n.left=ke,n.right=ke,n.parent=ke,n.size_left=0,n.lf_left=0,this.root===ke)this.root=n,n.color=0;else if(e.left===ke)e.left=n,n.parent=e;else{const i=R7(e.left);i.right=n,n.parent=i}return a2(this,n),n}}h(V7,"PieceTreeBase");function sh(s){let e=0,t=0,n=0,i=0;for(let o=0,r=s.length;o<r;o++){const a=s.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<r&&s.charCodeAt(o+1)===10?(i|=2,o++):i|=3,n=o+1):a===10&&(i|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=s.length),[e,t,s.length-n,i]}h(sh,"countEOL");class Fc extends z{constructor(e,t,n,i,o,r,a){super();this._onDidChangeContent=this._register(new P),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._pieceTree=new V7(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),o=this.getPositionAt(n);return new T(i.lineNumber,i.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,o=e.endLineNumber;for(let r=i;r<=o;r++){const a=this.getLineContent(r),l=r===i?e.startColumn-1:0,d=r===o?e.endColumn-1:a.length;for(let c=l;c<d;c++)Cn(a.charCodeAt(c))?(n=n+1,c=c+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=bi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Fr(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let b=0;b<e.length;b++){const v=e[b];a&&v._isTracked&&(a=!1);const C=v.range;if(v.text){let E=!0;r||(E=!p0(v.text),r=E),!i&&E&&(i=g0(v.text)),!o&&E&&(o=zO(v.text))}let w="",y=0,S=0,L=0;if(v.text){let E;[y,S,L,E]=sh(v.text);const x=this.getEOL();E===0||E===(x===`\r
`?2:1)?w=v.text:w=v.text.replace(/\r\n|\r|\n/g,x)}l[b]={sortIndex:b,identifier:v.identifier||null,range:C,rangeOffset:this.getOffsetAt(C.startLineNumber,C.startColumn),rangeLength:this.getValueLengthInRange(C),text:w,eolCount:y,firstLineLength:S,lastLineLength:L,forceMoveMarkers:Boolean(v.forceMoveMarkers),isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}l.sort(Fc._sortOpsAscending);let d=!1;for(let b=0,v=l.length-1;b<v;b++){const C=l[b].range.getEndPosition(),w=l[b+1].range.getStartPosition();if(w.isBeforeOrEqual(C)){if(w.isBefore(C))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(l=this._reduceOperations(l));const c=n||t?Fc._getInverseEditRanges(l):[],u=[];if(t)for(let b=0;b<l.length;b++){const v=l[b],C=c[b];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let w=C.startLineNumber;w<=C.endLineNumber;w++){let y="";w===C.startLineNumber&&(y=this.getLineContent(v.range.startLineNumber),bi(y)!==-1)||u.push({lineNumber:w,oldContent:y})}}let f=null;if(n){let b=0;f=[];for(let v=0;v<l.length;v++){const C=l[v],w=c[v],y=this.getValueInRange(C.range),S=C.rangeOffset+b;b+=C.text.length-y.length,f[v]={sortIndex:C.sortIndex,identifier:C.identifier,range:w,text:y,textChange:new On(C.rangeOffset,y,S,C.text)}}d||f.sort((v,C)=>v.sortIndex-C.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;const g=this._doApplyEdits(l);let m=null;if(t&&u.length>0){u.sort((b,v)=>v.lineNumber-b.lineNumber),m=[];for(let b=0,v=u.length;b<v;b++){const C=u[b].lineNumber;if(b>0&&u[b-1].lineNumber===C)continue;const w=u[b].oldContent,y=this.getLineContent(C);y.length===0||y===w||bi(y)!==-1||m.push(C)}}return this._onDidChangeContent.fire(),new QO(f,g,m)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,o=new T(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let r=n.startLineNumber,a=n.startColumn;const l=[];for(let g=0,m=e.length;g<m;g++){const b=e[g],v=b.range;t=t||b.forceMoveMarkers,l.push(this.getValueInRange(new T(r,a,v.startLineNumber,v.startColumn))),b.text.length>0&&l.push(b.text),r=v.endLineNumber,a=v.endColumn}const d=l.join(""),[c,u,f]=sh(d);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:d,eolCount:c,firstLineLength:u,lastLineLength:f,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Fc._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],o=i.range.startLineNumber,r=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(o===a&&r===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const d=new T(o,r,a,l);t.push({range:d,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,o=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let d,c;o?o.range.endLineNumber===l.range.startLineNumber?(d=n,c=i+(l.range.startColumn-o.range.endColumn)):(d=n+(l.range.startLineNumber-o.range.endLineNumber),c=l.range.startColumn):(d=l.range.startLineNumber,c=l.range.startColumn);let u;if(l.text.length>0){const f=l.eolCount+1;f===1?u=new T(d,c,d,c+l.firstLineLength):u=new T(d,c,d+f-1,l.lastLineLength+1)}else u=new T(d,c,d,c);n=u.endLineNumber,i=u.endColumn,t.push(u),o=l}return t}static _sortOpsAscending(e,t){const n=T.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=T.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}h(Fc,"PieceTreeTextBuffer");class B7{constructor(e,t,n,i,o,r,a,l,d){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=d}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,r=n.length;o<r;o++){const a=n[o].buffer.replace(/\r\n|\r|\n/g,t),l=ga(a);n[o]=new xl(a,l)}const i=new Fc(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}h(B7,"PieceTreeTextBufferFactory");class H7{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&DD(e)&&(this.BOM=CG,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=UZ(this._tmpLineStarts,e);this.chunks.push(new xl(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=g0(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=zO(e))}finish(e=!0){return this._finish(),new B7(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=ga(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}h(H7,"PieceTreeTextBufferBuilder");class z7{constructor(e,t){this._startLineNumber=e,this._tokens=t}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}h(z7,"ContiguousMultilineTokens");class nw{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new z7(e,[t]))}finalize(){return this._tokens}}h(nw,"ContiguousMultilineTokensBuilder");class hL{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=a0(this._store,e,n)}}h(hL,"ContiguousGrowingArray");class K7{constructor(e,t){this.tokenizationSupport=e,this.initialState=t,this._lineBeginState=new hL(null),this._lineNeedsTokenization=new hL(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(e){this._lineNeedsTokenization.set(e,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,e)}getBeginState(e){return this._lineBeginState.get(e)}setEndState(e,t,n){if(this._lineNeedsTokenization.set(t,!1),this._firstLineNeedsTokenization=t+1,t===e-1)return;const i=this._lineBeginState.get(t+1);if(i===null||!n.equals(i)){this._lineBeginState.set(t+1,n),this.markMustBeTokenized(t+1);return}let o=t+1;for(;o<e&&!this._lineNeedsTokenization.get(o);)o++;this._firstLineNeedsTokenization=o}applyEdits(e,t){this.markMustBeTokenized(e.startLineNumber-1),this._lineBeginState.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineNeedsTokenization.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineBeginState.insert(e.startLineNumber,t),this._lineNeedsTokenization.insert(e.startLineNumber,t)}}h(K7,"TokenizationStateStore");class U7 extends z{constructor(e,t){super();this._textModel=e,this._languageIdCodec=t,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(Ft.onDidChange(n=>{const i=this._textModel.getLanguageId();n.changedLanguages.indexOf(i)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(e){if(e.isFlush){this._resetTokenizationState();return}if(this._tokenizationStateStore)for(let t=0,n=e.changes.length;t<n;t++){const i=e.changes[t],[o]=sh(i.text);this._tokenizationStateStore.applyEdits(i.range,o)}this._beginBackgroundTokenization()}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(e){this._resetTokenizationState(),this._textModel.clearTokens()}_resetTokenizationState(){const[e,t]=jZ(this._textModel);e&&t?this._tokenizationStateStore=new K7(e,t):this._tokenizationStateStore=null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,gm(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=h(()=>{this._isDisposed||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?IP(n):this._beginBackgroundTokenization())},"execute");n()}_backgroundTokenizeForAtLeast1ms(){const e=this._textModel.getLineCount(),t=new nw,n=wi.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._textModel.setTokens(t.finalize(),!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new nw;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.finalize(),!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new nw;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.finalize(),!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationStateStore)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const i=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=Jg(this._languageIdCodec,i,this._tokenizationStateStore.tokenizationSupport,r,!0,n),l=new _n(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const d=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(d)}tokenizeLineWithEdit(e,t,n){const i=e.lineNumber,o=e.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(i);const r=this._tokenizationStateStore.getBeginState(i-1);if(!r)return null;const a=this._textModel.getLineContent(i),l=a.substring(0,o-1)+n+a.substring(o-1+t),d=this._textModel.getLanguageIdAtPosition(i,0),c=Jg(this._languageIdCodec,d,this._tokenizationStateStore.tokenizationSupport,l,!0,r);return new _n(c.tokens,l,this._languageIdCodec)}isCheapToTokenize(e){if(!this._tokenizationStateStore)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationStateStore)return;const n=this._textModel.getLanguageId(),i=this._textModel.getLineCount(),o=t-1;for(let r=this._tokenizationStateStore.invalidLineStartIndex;r<=o;r++){const a=this._textModel.getLineContent(r+1),l=this._tokenizationStateStore.getBeginState(r),d=Jg(this._languageIdCodec,n,this._tokenizationStateStore.tokenizationSupport,a,!0,l);e.add(r+1,d.tokens),this._tokenizationStateStore.setEndState(i,r,d.endState),r=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationStateStore||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let i=this._textModel.getLineFirstNonWhitespaceColumn(t);const o=[];let r=null;for(let d=t-1;i>1&&d>=1;d--){const c=this._textModel.getLineFirstNonWhitespaceColumn(d);if(c!==0&&c<i){if(r=this._tokenizationStateStore.getBeginState(d-1),r)break;o.push(this._textModel.getLineContent(d)),i=c}}r||(r=this._tokenizationStateStore.initialState);const a=this._textModel.getLanguageId();let l=r;for(let d=o.length-1;d>=0;d--)l=Jg(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,o[d],!1,l).endState;for(let d=t;d<=n;d++){const c=this._textModel.getLineContent(d),u=Jg(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,c,!0,l);e.add(d,u.tokens),this._tokenizationStateStore.markMustBeTokenized(d-1),l=u.endState}}}h(U7,"TextModelTokenization");function jZ(s){if(s.isTooLargeForTokenization())return[null,null];const e=Ft.get(s.getLanguageId());if(!e)return[null,null];let t;try{t=e.getInitialState()}catch(n){return Ne(n),[null,null]}return[e,t]}h(jZ,"initializeTokenization");function Jg(s,e,t,n,i,o){let r=null;if(t)try{r=t.tokenizeEncoded(n,i,o.clone())}catch(a){Ne(a)}return r||(r=OD(s.encodeLanguageId(e),o)),_n.convertToEndOffset(r.tokens,n.length),r}h(Jg,"safeTokenize");const pa=new Uint32Array(0).buffer;class Ns{static deleteBeginning(e,t){return e===null||e===pa?e:Ns.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===pa)return e;const n=La(e),i=n[n.length-2];return Ns.delete(e,t,i)}static delete(e,t,n){if(e===null||e===pa||t===n)return e;const i=La(e),o=i.length>>>1;if(t===0&&i[i.length-2]===n)return pa;const r=_n.findIndexInTokensArray(i,t),a=r>0?i[r-1<<1]:0,l=i[r<<1];if(n<l){const g=n-t;for(let m=r;m<o;m++)i[m<<1]-=g;return e}let d,c;a!==t?(i[r<<1]=t,d=r+1<<1,c=t):(d=r<<1,c=a);const u=n-t;for(let g=r+1;g<o;g++){const m=i[g<<1]-u;m>c&&(i[d++]=m,i[d++]=i[(g<<1)+1],c=m)}if(d===i.length)return e;const f=new Uint32Array(d);return f.set(i.subarray(0,d),0),f.buffer}static append(e,t){if(t===pa)return e;if(e===pa)return t;if(e===null)return e;if(t===null)return null;const n=La(e),i=La(t),o=i.length>>>1,r=new Uint32Array(n.length+i.length);r.set(n,0);let a=n.length;const l=n[n.length-2];for(let d=0;d<o;d++)r[a++]=i[d<<1]+l,r[a++]=i[(d<<1)+1];return r.buffer}static insert(e,t,n){if(e===null||e===pa)return e;const i=La(e),o=i.length>>>1;let r=_n.findIndexInTokensArray(i,t);r>0&&i[r-1<<1]===t&&r--;for(let a=r;a<o;a++)i[a<<1]+=n;return e}}h(Ns,"ContiguousTokensEditing");function La(s){return s instanceof Uint32Array?s:new Uint32Array(s)}h(La,"toUint32Array");class Fm{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==pa)return new _n(La(i),n,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=n.length,o[1]=l2(this._languageIdCodec.encodeLanguageId(e)),new _n(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?La(n):null;if(t===0){let o=!1;if(i&&i.length>1&&(o=Gn.getLanguageId(i[1])!==e),!o)return pa}if(!i||i.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=l2(e),o.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=a0(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,o){const r=Fm._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,o?!Fm._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=La(e),i=La(t);if(n.length!==i.length)return!1;for(let o=0,r=n.length;o<r;o++)if(n[o]!==i[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new W(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Ns.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Ns.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=Ns.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Ns.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=Ns.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=Ns.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=Ns.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}}h(Fm,"ContiguousTokensStore");function l2(s){return(s<<0|0<<8|0<<10|1<<14|2<<23)>>>0}h(l2,"getDefaultMetadata");class r1{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const o=t[0].getRange(),r=t[t.length-1].getRange();if(!o||!r)return e;n=e.plusRange(o).plusRange(r)}let i=null;for(let o=0,r=this._pieces.length;o<r;o++){const a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,r--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};continue}const[l,d]=a.split(n);if(l.isEmpty()){i=i||{index:o};continue}d.isEmpty()||(this._pieces.splice(o,1,l,d),o++,r++,i=i||{index:o})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=a0(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){const n=this._pieces;if(n.length===0)return t;const i=r1._findFirstPieceWithLine(n,e),o=n[i].getLineTokens(e);if(!o)return t;const r=t.getCount(),a=o.getCount();let l=0;const d=[];let c=0,u=0;const f=h((g,m)=>{g!==u&&(u=g,d[c++]=g,d[c++]=m)},"emitToken");for(let g=0;g<a;g++){const m=o.getStartCharacter(g),b=o.getEndCharacter(g),v=o.getMetadata(g),C=((v&1?1024:0)|(v&2?2048:0)|(v&4?4096:0)|(v&8?8192:0)|(v&16?8372224:0)|(v&32?4286578688:0))>>>0,w=~C>>>0;for(;l<r&&t.getEndOffset(l)<=m;)f(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<m&&f(m,t.getMetadata(l));l<r&&t.getEndOffset(l)<b;)f(t.getEndOffset(l),t.getMetadata(l)&w|v&C),l++;if(l<r)f(b,t.getMetadata(l)&w|v&C),t.getEndOffset(l)===b&&l++;else{const y=Math.min(Math.max(0,l-1),r-1);f(b,t.getMetadata(y)&w|v&C)}}for(;l<r;)f(t.getEndOffset(l),t.getMetadata(l)),l++;return new _n(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let o=n+Math.floor((i-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)i=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,i,o){for(const r of this._pieces)r.acceptEdit(e,t,n,i,o)}}h(r1,"SparseTokensStore");const a1=Xe("undoRedoService");class FI{constructor(e,t){this.resource=e,this.elements=t}}h(FI,"ResourceEditStackSnapshot");class rh{constructor(){this.id=rh._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}h(rh,"UndoRedoGroup");rh._ID=0;rh.None=new rh;class Ks{constructor(){this.id=Ks._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}h(Ks,"UndoRedoSource");Ks._ID=0;Ks.None=new Ks;var GZ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},eS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};function $Z(){return new H7}h($Z,"createTextBufferBuilder");function qZ(s){const e=$Z();return e.acceptChunk(s),e.finish()}h(qZ,"createTextBufferFactory");function d2(s,e){return(typeof s=="string"?qZ(s):s).create(e)}h(d2,"createTextBuffer");let Qb=0;const YZ=999,XZ=1e4;class j7{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}h(j7,"TextModelSnapshot");const Qg=h(()=>{throw new Error("Invalid change accessor")},"invalidFunc");let Ga=h(class Jd extends z{constructor(e,t,n,i=null,o,r,a){super();this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this._onWillDispose=this._register(new P),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new q7(f=>this.handleBeforeFireDecorationsChangedEvent(f))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new P),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new P),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new P),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new P),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new P),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new P),this._eventEmitter=this._register(new Y7),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new P),Qb++,this.id="$model"+Qb,this.isForSimpleWidget=n.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=Ce.parse("inmemory://model/"+Qb):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:l,disposable:d}=d2(e,n.defaultEOL);this._buffer=l,this._bufferDisposable=d,this._options=Jd.resolveOptions(this._buffer,n);const c=this._buffer.getLineCount(),u=this._buffer.getValueLengthInRange(new T(1,1,c,this._buffer.getLineLength(c)+1),0);n.largeFileOptimizations?this._isTooLargeForTokenization=u>Jd.LARGE_FILE_SIZE_THRESHOLD||c>Jd.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=u>Jd.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=t,this._languageRegistryListener=this._languageConfigurationService.onDidChange(f=>{f.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=KO(Qb),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new uL,this._commandManager=new s1(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Fm(this._languageService.languageIdCodec),this._semanticTokens=new r1(this._languageService.languageIdCodec),this._tokenization=new U7(this,this._languageService.languageIdCodec),this._bracketPairColorizer=this._register(new x7(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new u3(this,this._languageConfigurationService)),this._decorationProvider=this._register(new T7(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=t2(e,t.tabSize,t.insertSpaces);return new Fp({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Fp({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Ma(this._eventEmitter.fastEvent(t=>e(t.rawContentChangedEvent)),this._onDidChangeInjectedText.event(t=>e(t)))}get bracketPairs(){return this._bracketPairColorizer}get guides(){return this._guidesTextModelPart}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._bracketPairColorizer.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new Fc([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=z.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._isDisposing||(this._bracketPairColorizer.handleDidChangeContent(t),this._tokenization.handleDidChangeContent(t),this._eventEmitter.fire(new Nm(e,t)))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=d2(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,o,r,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:o,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._semanticTokens.flush(),this._decorations=Object.create(null),this._decorationsTree=new uL,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new jl([new R3],this._versionId,!1,!1),this._createContentChanged2(new T(1,1,o,r),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new jl([new F3],this._versionId,!1,!1),this._createContentChanged2(new T(1,1,o,r),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const o=t[n],r=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),d=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=d,o.cachedVersionId=e,o.start=l-a,o.end=d-a,hd(o)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenization.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenization.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const o=this._buffer.getLineLength(i);o>=XZ?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new Fp({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairColorizer.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=t2(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),aC(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(HO.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new j7(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(o<1)o=1,r=1;else if(o>t)o=t,r=this.getLineMaxColumn(o);else if(r<=1)r=1;else{const u=this.getLineMaxColumn(o);r>=u&&(r=u)}const a=e.endLineNumber,l=e.endColumn;let d=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),c=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(d<1)d=1,c=1;else if(d>t)d=t,c=this.getLineMaxColumn(d);else if(c<=1)c=1;else{const u=this.getLineMaxColumn(d);c>=u&&(c=u)}return n===o&&i===r&&a===d&&l===c&&e instanceof T&&!(e instanceof oe)?e:new T(o,r,d,c)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(n===1){const r=this._buffer.getLineCharCode(e,t-2);if(Cn(r))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(i<1)return new W(1,1);if(i>r)return new W(r,this.getLineMaxColumn(r));if(o<=1)return new W(i,1);const a=this.getLineMaxColumn(i);if(o>=a)return new W(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,o-2);if(Cn(l))return new W(i,o-1)}return new W(i,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof W&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(o,r,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,d=Cn(a),c=Cn(l);return!d&&!c}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof T&&!(e instanceof oe)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),o=n.lineNumber,r=n.column,a=i.lineNumber,l=i.column;{const d=r>1?this._buffer.getLineCharCode(o,r-2):0,c=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=Cn(d),f=Cn(c);return!u&&!f?new T(o,r,a,l):o===a&&r===l?new T(o,r-1,a,l-1):u&&f?new T(o,r-1,a,l+1):u?new T(o,r-1,a,l):new T(o,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new T(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,o,r,a=YZ){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>T.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,f)=>u.startLineNumber-f.startLineNumber||u.startColumn-f.startColumn);const d=[];d.push(l.reduce((u,f)=>T.areIntersecting(u,f)?u.plusRange(f):(d.push(u),f)));let c;if(!n&&e.indexOf(`
`)<0){const f=new wl(e,n,i,o).parseSearchRequest();if(!f)return[];c=h(g=>this.findMatchesLineByLine(g,f,r,a),"matchMapper")}else c=h(u=>pp.findMatches(this,new wl(e,n,i,o),u,r,a),"matchMapper");return d.map(c).reduce((u,f)=>u.concat(f),[])}findNextMatch(e,t,n,i,o,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const d=new wl(e,n,i,o).parseSearchRequest();if(!d)return null;const c=this.getLineCount();let u=new T(a.lineNumber,a.column,c,this.getLineMaxColumn(c)),f=this.findMatchesLineByLine(u,d,r,1);return pp.findNextMatch(this,new wl(e,n,i,o),a,r),f.length>0||(u=new T(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),f=this.findMatchesLineByLine(u,d,r,1),f.length>0)?f[0]:null}return pp.findNextMatch(this,new wl(e,n,i,o),a,r)}findPreviousMatch(e,t,n,i,o,r){this._assertNotDisposed();const a=this.validatePosition(t);return pp.findPreviousMatch(this,new wl(e,n,i,o),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof Bv?e:new Bv(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const i=t.map(r=>({range:this.validateRange(r.range),text:r.text}));let o=!0;if(e)for(let r=0,a=e.length;r<a;r++){const l=e[r];let d=!1;for(let c=0,u=i.length;c<u;c++){const f=i[c].range,g=f.startLineNumber>l.endLineNumber,m=l.startLineNumber>f.endLineNumber;if(!g&&!m){d=!0;break}}if(!d){o=!1;break}}if(o)for(let r=0,a=this._trimAutoWhitespaceLines.length;r<a;r++){const l=this._trimAutoWhitespaceLines[r],d=this.getLineMaxColumn(l);let c=!0;for(let u=0,f=i.length;u<f;u++){const g=i[u].range,m=i[u].text;if(!(l<g.startLineNumber||l>g.endLineNumber)&&!(l===g.startLineNumber&&g.startColumn===d&&g.isEmpty()&&m&&m.length>0&&m.charAt(0)===`
`)&&!(l===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&m&&m.length>0&&m.charAt(m.length-1)===`
`)){c=!1;break}}if(c){const u=new T(l,1,l,d);t.push(new Bv(null,u,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const o=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new T(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const o=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new T(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(o,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,o,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,r.length!==0){for(let d=0,c=r.length;d<c;d++){const u=r[d],[f,g,m]=sh(u.text);this._tokens.acceptEdit(u.range,f,g),this._semanticTokens.acceptEdit(u.range,f,g,m,u.text.length>0?u.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let d=0,c=r.length;d<c;d++){const u=r[d],[f]=sh(u.text);this._onDidChangeDecorations.fire();const g=u.range.startLineNumber,m=u.range.endLineNumber,b=m-g,v=f,C=Math.min(b,v),w=v-b,y=o-l-w+g,S=y,L=y+v,E=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new W(S,1)),this.getOffsetAt(new W(L,this.getLineMaxColumn(L))),0),x=ws.fromDecorations(E),k=new jc(x);for(let N=C;N>=0;N--){const V=g+N,F=y+N;k.takeFromEndWhile($=>$.lineNumber>F);const G=k.takeFromEndWhile($=>$.lineNumber===F);a.push(new iL(V,this.getLineContent(F),G))}if(C<b){const N=g+C;a.push(new P3(N+1,m))}if(C<v){const N=new jc(x),V=g+C,F=v-C,G=o-l-F+V+1,$=[],ue=[];for(let de=0;de<F;de++){const ye=G+de;ue[de]=this.getLineContent(ye),N.takeWhile(Ee=>Ee.lineNumber<ye),$[de]=N.takeWhile(Ee=>Ee.lineNumber===ye)}a.push(new O3(V+1,g+v,ue,$))}l+=w}this._emitContentChangedEvent(new jl(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(i=>new iL(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeInjectedText.fire(new yI(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(o,r)=>this._deltaDecorationsImpl(e,[],[{range:o,options:r}])[0],changeDecoration:(o,r)=>{this._changeDecorationImpl(o,r)},changeDecorationOptions:(o,r)=>{this._changeDecorationOptionsImpl(o,h2(r))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,r)=>o.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,o,r)};let i=null;try{i=t(n)}catch(o){Ne(o)}return n.addDecoration=Qg,n.changeDecoration=Qg,n.changeDecorationOptions=Qg,n.removeDecoration=Qg,n.deltaDecorations=Qg,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:c2[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,a,o),i.setOptions(c2[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const o=t[n];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1){const o=this.getLineCount(),r=Math.min(o,Math.max(1,e)),a=Math.min(o,Math.max(1,t)),l=this.getLineMaxColumn(a),d=new T(r,1,a,l),c=this._getDecorationsInRange(d,n,i);return c.push(...this._decorationProvider.getDecorationsInRange(d,n,i)),c}getDecorationsInRange(e,t=0,n=!1){const i=this.validateRange(e),o=this._getDecorationsInRange(i,t,n);return o.push(...this._decorationProvider.getDecorationsInRange(i,t,n)),o}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return ws.fromDecorations(i).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,i,o,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(n.options.before||t.before){const r=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}i!==o?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),o=t.length;let r=0;const a=n.length;let l=0;const d=new Array(a);for(;r<o||l<a;){let c=null;if(r<o){do c=this._decorations[t[r++]];while(!c&&r<o);if(c){if(c.options.after){const u=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber)}if(c.options.before){const u=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber)}this._decorationsTree.delete(c),this._onDidChangeDecorations.checkAffectedAndFire(c.options)}}if(l<a){if(!c){const v=++this._lastDecorationId,C=`${this._instanceId};${v}`;c=new MI(C,0,0),this._decorations[C]=c}const u=n[l],f=this._validateRangeRelaxedNoAllocations(u.range),g=h2(u.options),m=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),b=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);c.ownerId=e,c.reset(i,m,b,f),c.setOptions(g),c.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),c.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(c),d[l]=c.id,l++}else c&&delete this._decorations[c.id]}return d}setTokens(e,t=!1){if(e.length!==0){const n=[];for(let i=0,o=e.length;i<o;i++){const r=e[i];let a=0,l=0,d=!1;for(let c=r.startLineNumber;c<=r.endLineNumber;c++)d?(this._tokens.setTokens(this._languageId,c-1,this._buffer.getLineLength(c),r.getLineTokens(c),!1),l=c):this._tokens.setTokens(this._languageId,c-1,this._buffer.getLineLength(c),r.getLineTokens(c),!0)&&(d=!0,a=c,l=c);d&&n.push({fromLineNumber:a,toLineNumber:l})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||(this._bracketPairColorizer.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._semanticTokens.addSparseTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;const t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._bracketPairColorizer.handleDidChangeLanguage(t),this._tokenization.handleDidChangeLanguage(t),this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new W(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}getTokenTypeIfInsertingCharacter(e,t,n){const i=this.validatePosition(new W(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t,n){const i=this.validatePosition(e);return this._tokenization.tokenizeLineWithEdit(i,t,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),o=i.findTokenIndexAtOffset(t.column-1),[r,a]=Jd._findLanguageBoundaries(i,o),l=am(t.column,this.getLanguageConfiguration(i.getLanguageId(o)).getWordDefinition(),n.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&r===t.column-1){const[d,c]=Jd._findLanguageBoundaries(i,o-1),u=am(t.column,this.getLanguageConfiguration(i.getLanguageId(o-1)).getWordDefinition(),n.substring(d,c),d);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let o=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===n;r++)o=e.getEndOffset(r);return[i,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}normalizePosition(e,t){return e}getLineIndentColumn(e){return ZZ(this.getLineContent(e))+1}},"TextModel");Ga.MODEL_SYNC_LIMIT=50*1024*1024;Ga.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Ga.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Ga.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:ri.tabSize,indentSize:ri.indentSize,insertSpaces:ri.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:ri.trimAutoWhitespace,largeFileOptimizations:ri.largeFileOptimizations,bracketPairColorizationOptions:ri.bracketPairColorizationOptions};Ga=GZ([eS(4,a1),eS(5,Vt),eS(6,oi)],Ga);function ZZ(s){let e=0;for(const t of s)if(t===" "||t==="	")e++;else break;return e}h(ZZ,"indentOfLine");function tS(s){return!!(s.options.overviewRuler&&s.options.overviewRuler.color)}h(tS,"isNodeInOverviewRuler");function nS(s){return!!s.options.after||!!s.options.before}h(nS,"isNodeInjectedText");class uL{constructor(){this._decorationsTree0=new tw,this._decorationsTree1=new tw,this._injectedTextDecorationsTree=new tw}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,o){const r=e.getVersionId(),a=this._intervalSearch(t,n,i,o,r);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,i,o){const r=this._decorationsTree0.intervalSearch(e,t,n,i,o),a=this._decorationsTree1.intervalSearch(e,t,n,i,o),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,o);return r.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){const o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,o);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,i).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,i){const o=e.getVersionId(),r=this._search(t,n,i,o);return this._ensureNodesHaveRanges(e,r)}_search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const o=this._decorationsTree0.search(e,t,i),r=this._decorationsTree1.search(e,t,i),a=this._injectedTextDecorationsTree.search(e,t,i);return o.concat(r).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){nS(e)?this._injectedTextDecorationsTree.insert(e):tS(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){nS(e)?this._injectedTextDecorationsTree.delete(e):tS(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){nS(e)?this._injectedTextDecorationsTree.resolveNode(e,t):tS(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}h(uL,"DecorationsTrees");function ul(s){return s.replace(/[^a-z0-9\-_]/gi," ")}h(ul,"cleanClassName");class WI{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}h(WI,"DecorationOptions");class G7 extends WI{constructor(e){super(e);this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Jo.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}h(G7,"ModelDecorationOverviewRulerOptions");class $7 extends WI{constructor(e){super(e);this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?H.fromHex(e):t.getColor(e.id)}}h($7,"ModelDecorationMinimapOptions");class ud{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}static from(e){return e instanceof ud?e:new ud(e)}}h(ud,"ModelDecorationInjectedTextOptions");class Pe{constructor(e){var t,n;this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?ul(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new G7(e.overviewRuler):null,this.minimap=e.minimap?new $7(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?ul(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?ul(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?ul(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?ul(e.marginClassName):null,this.inlineClassName=e.inlineClassName?ul(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?ul(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?ul(e.afterContentClassName):null,this.after=e.after?ud.from(e.after):null,this.before=e.before?ud.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1,this.hideInStringTokens=(n=e.hideInStringTokens)!==null&&n!==void 0?n:!1}static register(e){return new Pe(e)}static createDynamic(e){return new Pe(e)}}h(Pe,"ModelDecorationOptions");Pe.EMPTY=Pe.register({description:"empty"});const c2=[Pe.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Pe.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Pe.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Pe.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function h2(s){return s instanceof Pe?s:Pe.createDynamic(s)}h(h2,"_normalizeOptions");class q7 extends z{constructor(e){super();this.handleBeforeFire=e,this._actual=this._register(new P),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}h(q7,"DidChangeDecorationsEmitter");class Y7 extends z{constructor(){super();this._fastEmitter=this._register(new P),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new P),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}h(Y7,"DidChangeContentEmitter");function iS(s,e){return s===null?e?Wm.INSTANCE:Vm.INSTANCE:new X7(s,e)}h(iS,"createModelLineProjection");class X7{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,o=this._projectionData.breakOffsets[n];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((d,c)=>new ws(0,0,d+1,this._projectionData.injectionOptions[c],0));r=ws.applyInjectedText(e.getLineContent(t),a).substring(i,o)}else r=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:o+1});return n>0&&(r=u2(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,o,r,a){this._assertVisible();const l=this._projectionData,d=l.injectionOffsets,c=l.injectionOptions;let u=null;if(d){u=[];let g=0,m=0;for(let b=0;b<l.getOutputLineCount();b++){const v=new Array;u[b]=v;const C=b>0?l.breakOffsets[b-1]:0,w=l.breakOffsets[b];for(;m<d.length;){const y=c[m].content.length,S=d[m]+g,L=S+y;if(S>w)break;if(C<L){const E=c[m];if(E.inlineClassName){const x=b>0?l.wrappedTextIndentLength:0,k=x+Math.max(S-C,0),N=x+Math.min(L-C,w);k!==N&&v.push(new r5(k,N,E.inlineClassName,E.inlineClassNameAffectsLetterSpacing))}}if(L<=w)g+=y,m++;else break}}}let f;d?f=e.getLineTokens(t).withInserted(d.map((g,m)=>({offset:g,text:c[m].content,tokenMetadata:_n.defaultTokenMetadata}))):f=e.getLineTokens(t);for(let g=n;g<n+i;g++){const m=o+g-n;if(!r[m]){a[m]=null;continue}a[m]=this._getViewLineData(f,u?u[g]:null,g)}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,o=n>0?i.wrappedTextIndentLength:0,r=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],l=e.sliceAndInflate(r,a,o);let d=l.getLineContent();n>0&&(d=u2(i.wrappedTextIndentLength)+d);const c=this._projectionData.getMinOutputOffset(n)+1,u=d.length+1,f=n+1<this.getViewLineCount(),g=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new L0(d,f,c,u,g,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}h(X7,"ModelLineProjection");class Wm{constructor(){}isVisible(){return!0}setVisible(e){return e?this:Vm.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.getLineTokens(t),o=i.getLineContent();return new L0(o,!1,1,o.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,o,r,a){if(!r[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new W(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}h(Wm,"IdentityModelLineProjection");Wm.INSTANCE=new Wm;class Vm{constructor(){}isVisible(){return!1}setVisible(e){return e?Wm.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,o,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}h(Vm,"HiddenModelLineProjection");Vm.INSTANCE=new Vm;let oS=[""];function u2(s){if(s>=oS.length)for(let e=1;e<=s;e++)oS[e]=JZ(e);return oS[s]}h(u2,"spaces");function JZ(s){return new Array(s+1).join(" ")}h(JZ,"_makeSpaces");class Z7{constructor(e,t,n,i,o,r,a,l,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new J7(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),o=n.length,r=this.createLineBreaksComputer(),a=new jc(ws.fromDecorations(i));for(let b=0;b<o;b++){const v=a.takeWhile(C=>C.lineNumber===b+1);r.addRequest(n[b],v,t?t[b]:null)}const l=r.finalize(),d=[],c=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(T.compareRangesUsingStarts);let u=1,f=0,g=-1,m=g+1<c.length?f+1:o+2;for(let b=0;b<o;b++){const v=b+1;v===m&&(g++,u=c[g].startLineNumber,f=c[g].endLineNumber,m=g+1<c.length?f+1:o+2);const C=v>=u&&v<=f,w=iS(l[b],!C);d[b]=w.getViewLineCount(),this.modelLineProjections[b]=w}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new V4(d)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(f=>this.model.validateRange(f)),n=QZ(t),i=this.hiddenAreasDecorationIds.map(f=>this.model.getDecorationRange(f)).sort(T.compareRangesUsingStarts);if(n.length===i.length){let f=!1;for(let g=0;g<n.length;g++)if(!n[g].equalsRange(i[g])){f=!0;break}if(!f)return!1}const o=n.map(f=>({range:f,options:Pe.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);const r=n;let a=1,l=0,d=-1,c=d+1<r.length?l+1:this.modelLineProjections.length+2,u=!1;for(let f=0;f<this.modelLineProjections.length;f++){const g=f+1;g===c&&(d++,a=r[d].startLineNumber,l=r[d].endLineNumber,c=d+1<r.length?l+1:this.modelLineProjections.length+2);let m=!1;if(g>=a&&g<=l?this.modelLineProjections[f].isVisible()&&(this.modelLineProjections[f]=this.modelLineProjections[f].setVisible(!1),m=!0):(u=!0,this.modelLineProjections[f].isVisible()||(this.modelLineProjections[f]=this.modelLineProjections[f].setVisible(!0),m=!0)),m){const b=this.modelLineProjections[f].getViewLineCount();this.projectedModelLineLineCounts.setValue(f,b)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i){const o=this.fontInfo.equals(e),r=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i;if(o&&r&&a&&l)return!1;const d=o&&r&&!a&&l;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i;let c=null;if(d){c=[];for(let u=0,f=this.modelLineProjections.length;u<f;u++)c[u]=this.modelLineProjections[u].getProjectionData()}return this._constructLines(!1,c),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new fC(i,o)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],d=[];for(let c=0,u=i.length;c<u;c++){const f=iS(i[c],!o);l.push(f);const g=f.getViewLineCount();a+=g,d[c]=g}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,d),new gC(r,r+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,o=this.modelLineProjections[i].getViewLineCount(),r=this.modelLineProjections[i].isVisible(),a=iS(n,r);this.modelLineProjections[i]=a;const l=this.modelLineProjections[i].getViewLineCount();let d=!1,c=0,u=-1,f=0,g=-1,m=0,b=-1;o>l?(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=c+l-1,m=u+1,b=m+(o-l)-1,d=!0):o<l?(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=c+o-1,f=u+1,g=f+(l-o)-1,d=!0):(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=c+l-1),this.projectedModelLineLineCounts.setValue(i,l);const v=c<=u?new SI(c,u):null,C=f<=g?new gC(f,g):null,w=m<=b?new fC(m,b):null;return[d,v,C,w]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),d=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:d.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new fL(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new W(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new W(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),o=new Array;let r=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const d=this.modelLineProjections[l-1];if(d.isVisible()){const c=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,u=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:d.getViewLineCount();for(let f=c;f<u;f++)a.push(new fL(l,f))}if(!d.isVisible()&&r){const c=new W(l-1,this.model.getLineMaxColumn(l-1)+1),u=T.fromPositions(r,c);o.push(new gL(u,a)),a=[],r=null}else d.isVisible()&&!r&&(r=new W(l,1))}if(r){const l=T.fromPositions(r,this.getModelEndPositionOfViewLine(i));o.push(new gL(l,a))}return o}getViewLinesBracketGuides(e,t,n,i){const o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,d=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,i);for(const c of a.viewLines)if(c.isWrappedLineContinuation&&this.getMinColumnOfViewLine(c)===1)r.push([]);else{let u=d[c.modelLineNumber-l];u=u.map(f=>f.horizontalLine?new vc(f.visibleColumn,f.className,new uC(f.horizontalLine.top,this.convertModelPositionToViewPosition(c.modelLineNumber,f.horizontalLine.endColumn).column)):f),r.push(u)}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[];const r=[],a=[],l=n.lineNumber-1,d=i.lineNumber-1;let c=null;for(let m=l;m<=d;m++){const b=this.modelLineProjections[m];if(b.isVisible()){const v=b.getViewLineNumberOfModelPosition(0,m===l?n.column:1),C=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(m+1)),w=C-v+1;let y=0;w>1&&b.getViewLineMinColumn(this.model,m+1,C)===1&&(y=v===0?1:2),r.push(w),a.push(y),c===null&&(c=new W(m+1,0))}else c!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,m)),c=null)}c!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,i.lineNumber)),c=null);const u=t-e+1,f=new Array(u);let g=0;for(let m=0,b=o.length;m<b;m++){let v=o[m];const C=Math.min(u-g,r[m]),w=a[m];let y;w===2?y=0:w===1?y=1:y=C;for(let S=0;S<C;S++)S===y&&(v=0),f[g++]=v}return f}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const r=i.index,a=i.remainder,l=[];for(let d=r,c=this.model.getLineCount();d<c;d++){const u=this.modelLineProjections[d];if(!u.isVisible())continue;const f=d===r?a:0;let g=u.getViewLineCount()-f,m=!1;if(o+g>t&&(m=!0,g=t-o+1),u.getViewLinesData(this.model,d+1,f,g,o-e,n,l),o+=g,m)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=i.index,r=i.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,r),d=a.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>d&&(t=d);const c=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new W(o+1,c)).equals(n)?new W(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new T(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new W(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new T(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const i=this.model.validatePosition(new W(e,t)),o=i.lineNumber,r=i.column;let a=o-1,l=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,l=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new W(1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(a);let c;return l?c=this.modelLineProjections[a].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(a+1),n):c=this.modelLineProjections[o-1].getViewPositionOfModelPosition(d,r,n),c}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return T.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new T(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-i.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new T(i.lineNumber,1,o.lineNumber,o.column),t,n);let r=[];const a=i.lineNumber-1,l=o.lineNumber-1;let d=null;for(let g=a;g<=l;g++)if(this.modelLineProjections[g].isVisible())d===null&&(d=new W(g+1,g===a?i.column:1));else if(d!==null){const b=this.model.getLineMaxColumn(g);r=r.concat(this.model.getDecorationsInRange(new T(d.lineNumber,d.column,g,b),t,n)),d=null}d!==null&&(r=r.concat(this.model.getDecorationsInRange(new T(d.lineNumber,d.column,o.lineNumber,o.column),t,n)),d=null),r.sort((g,m)=>{const b=T.compareRangesUsingStarts(g.range,m.range);return b===0?g.id<m.id?-1:g.id>m.id?1:0:b});let c=[],u=0,f=null;for(const g of r){const m=g.id;f!==m&&(f=m,c[u++]=g)}return c}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}h(Z7,"ViewModelLinesFromProjectedModel");function QZ(s){if(s.length===0)return[];const e=s.slice();e.sort(T.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let o=1,r=e.length;o<r;o++){const a=e[o];a.startLineNumber>i+1?(t.push(new T(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new T(n,1,i,1)),t}h(QZ,"normalizeLineRanges");class fL{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}h(fL,"ViewLineInfo");class gL{constructor(e,t){this.modelRange=e,this.viewLines=t}}h(gL,"ViewLineInfoGroupedByModelRange");class J7{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}h(J7,"CoordinatesConverter");class Q7{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new e9(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new fC(t,n)}onModelLinesInserted(e,t,n,i){return new gC(t,n)}onModelLineChanged(e,t,n){return[!1,new SI(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let o=0;o<n;o++)i[o]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.getLineTokens(e),n=t.getLineContent();return new L0(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const o=[];for(let r=e;r<=t;r++){const a=r-e;o[a]=n[a]?this.getViewLineData(r):null}return o}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}h(Q7,"ViewModelLinesFromModelAsIs");class e9{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}h(e9,"IdentityCoordinatesConverter");class t9 extends z{constructor(e,t,n,i,o,r,a,l){super();if(this.languageConfigurationService=a,this._themeService=l,this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new Y3,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Yd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new gt(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new gt(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new Q7(this.model);else{const d=this._configuration.options,c=d.get(44),u=d.get(125),f=d.get(132),g=d.get(124);this._lines=new Z7(this._editorId,this.model,i,o,c,this.model.getOptions().tabSize,u,f.wrappingColumn,g)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new oh(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new a7(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new U3(d)),this._eventDispatcher.emitOutgoingEvent(new Q0(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new l7(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const c=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(c,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(Lg.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new $3)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new j3(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new T(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const i of n)this.model.tokenizeViewport(i.startLineNumber,i.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new z3(e)),this._eventDispatcher.emitOutgoingEvent(new J0(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new W3)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new V3)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){const c=new W(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(c)}let i=!1;const o=this._configuration.options,r=o.get(44),a=o.get(125),l=o.get(132),d=o.get(124);if(this._lines.setWrappingSettings(r,a,l.wrappingColumn,d)&&(e.emitViewEvent(new bp),e.emitViewEvent(new vp),e.emitViewEvent(new Xd(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(i=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(81)&&(this._decorations.reset(),e.emitViewEvent(new Xd(null))),e.emitViewEvent(new B3(t)),this.viewLayout.onConfigurationChanged(t),i&&n){const c=this.coordinatesConverter.convertModelPositionToViewPosition(n),u=this.viewLayout.getVerticalOffsetForLineNumber(c.lineNumber);this.viewLayout.setScrollPosition({scrollTop:u+this._viewportStartLineDelta},1)}Yd.shouldRecreate(t)&&(this.cursorConfig=new Yd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,i=!1;const o=e.changes,r=e instanceof jl?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const c of o)switch(c.changeType){case 4:{for(let u=0;u<c.detail.length;u++){const f=c.detail[u];let g=c.injectedTexts[u];g&&(g=g.filter(m=>!m.ownerId||m.ownerId===this._editorId)),a.addRequest(f,g,null)}break}case 2:{let u=null;c.injectedText&&(u=c.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),a.addRequest(c.detail,u,null);break}}const l=a.finalize(),d=new jc(l);for(const c of o)switch(c.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new bp),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const u=this._lines.onModelLinesDeleted(r,c.fromLineNumber,c.toLineNumber);u!==null&&(t.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),n=!0;break}case 4:{const u=d.takeCount(c.detail.length),f=this._lines.onModelLinesInserted(r,c.fromLineNumber,c.toLineNumber,u);f!==null&&(t.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),n=!0;break}case 2:{const u=d.dequeue(),[f,g,m,b]=this._lines.onModelLineChanged(r,c.lineNumber,u);i=f,g&&t.emitViewEvent(g),m&&(t.emitViewEvent(m),this.viewLayout.onLinesInserted(m.fromLineNumber,m.toLineNumber)),b&&(t.emitViewEvent(b),this.viewLayout.onLinesDeleted(b.fromLineNumber,b.toLineNumber));break}case 5:break}r!==null&&this._lines.acceptVersionId(r),this.viewLayout.onHeightMaybeChanged(),!n&&i&&(t.emitViewEvent(new vp),t.emitViewEvent(new Xd(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:i+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const o=e.ranges[n],r=this.coordinatesConverter.convertModelPositionToViewPosition(new W(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new W(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[n]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new G3(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new K3),this.cursorConfig=new Yd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Yd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new bp),t.emitViewEvent(new vp),t.emitViewEvent(new Xd(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Yd(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Xd(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new bp),n.emitViewEvent(new vp),n.emitViewEvent(new Xd(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new oL)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(131),t=this._configuration.options.get(59),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),o=Math.max(1,i.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new T(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const i=[];let o=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,d=t.endColumn;for(let c=0,u=n.length;c<u;c++){const f=n[c].startLineNumber,g=n[c].endLineNumber;g<r||f>l||(r<f&&(i[o++]=new T(r,a,f-1,this.model.getLineMaxColumn(f-1))),r=g+1,a=1)}return(r<l||r===l&&a<d)&&(i[o++]=new T(r,a,l,d)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new T(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new T(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new W(n,this.getLineMinColumn(n))),o=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;const i=this.coordinatesConverter.convertViewPositionToModelPosition(new W(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new T(i.lineNumber,i.column,i.lineNumber,i.column),1);const o=this.viewLayout.getVerticalOffsetForLineNumber(e),r=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=r-o}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=bi(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Fr(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(t);let l=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return r.inlineDecorations&&(l=[...l,...r.inlineDecorations.map(d=>d.toInlineDecoration(t))]),new oo(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,n,i,r.tokens,l,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new s5(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,Ww(this._configuration.options)),n=new n9;for(const i of t){const o=i.options,r=o.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,o.zIndex,d,c,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor();const i=t.options.minimap;i&&i.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const r=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(T.compareRangesUsingStarts);let o=!1,r=!1;for(const l of e)l.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";const l=e.map(c=>c.startLineNumber);let d="";for(let c=0;c<l.length;c++)c>0&&l[c-1]===l[c]||(d+=this.model.getLineContent(l[c])+i);return d}if(o&&t){const l=[];let d=0;for(const c of e){const u=c.startLineNumber;c.isEmpty()?u!==d&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(c,n?2:0)),d=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===Zr||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const c=i.startLineNumber;i=new T(c,this.model.getLineMinColumn(c),c,this.model.getLineMaxColumn(c))}const o=this._configuration.options.get(44),r=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===di.fontFamily;let d;return l?d=di.fontFamily:(d=o.fontFamily,d=d.replace(/"/g,"'"),/[,']/.test(d)||/[+ ]/.test(d)&&(d=`'${d}'`),d=`${d}, ${di.fontFamily}`),{mode:n,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${d};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,r)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let d=n;d<=o;d++){const c=this.model.getLineTokens(d),u=c.getLineContent(),f=d===n?i-1:0,g=d===o?r-1:u.length;u===""?l+="<br>":l+=cZ(u,c.inflate(),t,f,g,a,Vn)}return l}_getColorMap(){const e=Ft.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=H.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Z3);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,n,i,o))}paste(e,t,n,i){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new T(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Gp(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new T(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new Gp(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,i,o){this._withViewEventsCollector(r=>r.emitViewEvent(new Gp(e,!1,n,null,i,t,o)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new q3),this._eventDispatcher.emitOutgoingEvent(new oL))}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}h(t9,"ViewModel");class n9{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,o){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],d=a[a.length-1];if(l===o&&d+1>=n){i>d&&(a[a.length-1]=i);return}a.push(o,n,i)}else{const a=new UD(e,t,[o,n,i]);this._asMap[e]=a,this.asArray.push(a)}}}h(n9,"OverviewRulerDecorations");class H_{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}h(H_,"ServiceCollection");var Bm;(function(s){s[s.Ignore=0]="Ignore",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error"})(Bm||(Bm={}));(function(s){const e="error",t="warning",n="warn",i="info",o="ignore";function r(l){return l?Iu(e,l)?s.Error:Iu(t,l)||Iu(n,l)?s.Warning:Iu(i,l)?s.Info:s.Ignore:s.Ignore}h(r,"fromValue"),s.fromValue=r;function a(l){switch(l){case s.Error:return e;case s.Warning:return t;case s.Info:return i;default:return o}}h(a,"toString"),s.toString=a})(Bm||(Bm={}));var Ot=Bm,i9=Ot;const cn=Xe("notificationService");class o9{}h(o9,"NoOpNotification");class tf{constructor(e,t,n,i,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&i>this.injectionOffsets[o];o++)i<this.injectionOffsets[o]+this.injectionOptions[o].content.length?i=this.injectionOffsets[o]:i-=this.injectionOptions[o].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,o=0,r=0;for(;n<=i;){o=n+(i-n)/2|0;const l=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=r)i=o-1;else if(e>l)n=o+1;else break;else if(e<r)i=o-1;else if(e>=l)n=o+1;else break}let a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new yp(o,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(o!==i)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new yp(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new yp(e+1,this.getMinOutputOffset(e+1))}return new yp(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&f2(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let i=n.offsetInInputWithInjections;if(g2(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;let o=n.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[n.injectedTextIndex]&&!(f2(this.injectionOptions[o].cursorStops)||(i-=this.injectionOptions[o].content.length,g2(this.injectionOptions[o].cursorStops)));)o--;return i}}else if(t===1){let i=n.offsetInInputWithInjections+n.length,o=n.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)i+=this.injectionOptions[o+1].content.length,o++;return i}else if(t===0){let i=n.offsetInInputWithInjections,o=n.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)i-=this.injectionOptions[o-1].content.length,o--;return i}gD()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let o=0;o<t.length;o++){const r=n[o].content.length,a=t[o]+i,l=t[o]+i+r;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:r};i+=r}}}}h(tf,"ModelLineProjectionData");function f2(s){return s==null?!0:s===Ar.Right||s===Ar.Both}h(f2,"hasRightCursorStop");function g2(s){return s==null?!0:s===Ar.Left||s===Ar.Both}h(g2,"hasLeftCursorStop");class yp{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new W(e+this.outputLineIndex,this.outputOffset+1)}}h(yp,"OutputPosition");class l1{constructor(e,t){this.classifier=new s9(e,t)}static create(e){return new l1(e.get(120),e.get(119))}createLineBreaksComputer(e,t,n,i){const o=[],r=[],a=[];return{addRequest:(l,d,c)=>{o.push(l),r.push(d),a.push(c)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let c=0,u=o.length;c<u;c++){const f=r[c],g=a[c];g&&!g.injectionOptions&&!f?d[c]=eJ(this.classifier,g,o[c],t,n,l,i):d[c]=tJ(this.classifier,o[c],f,t,n,l,i)}return pL.length=0,mL.length=0,d}}}}h(l1,"MonospaceLineBreaksComputerFactory");class s9 extends Oh{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}h(s9,"WrappingCharacterClassifier");let pL=[],mL=[];function eJ(s,e,t,n,i,o,r){if(i===-1)return null;const a=t.length;if(a<=1)return null;const l=e.breakOffsets,d=e.breakOffsetsVisibleColumn,c=r9(t,n,i,o,r),u=i-c,f=pL,g=mL;let m=0,b=0,v=0,C=i;const w=l.length;let y=0;if(y>=0){let S=Math.abs(d[y]-C);for(;y+1<w;){const L=Math.abs(d[y+1]-C);if(L>=S)break;S=L,y++}}for(;y<w;){let S=y<0?0:l[y],L=y<0?0:d[y];b>S&&(S=b,L=v);let E=0,x=0,k=0,N=0;if(L<=C){let F=L,G=S===0?0:t.charCodeAt(S-1),$=S===0?0:s.get(G),ue=!0;for(let de=S;de<a;de++){const ye=de,Ee=t.charCodeAt(de);let Le,Fe;if(Cn(Ee)?(de++,Le=0,Fe=2):(Le=s.get(Ee),Fe=Zp(Ee,F,n,o)),ye>b&&_L(G,$,Ee,Le)&&(E=ye,x=F),F+=Fe,F>C){ye>b?(k=ye,N=F-Fe):(k=de+1,N=F),F-x>u&&(E=0),ue=!1;break}G=Ee,$=Le}if(ue){m>0&&(f[m]=l[l.length-1],g[m]=d[l.length-1],m++);break}}if(E===0){let F=L,G=t.charCodeAt(S),$=s.get(G),ue=!1;for(let de=S-1;de>=b;de--){const ye=de+1,Ee=t.charCodeAt(de);if(Ee===9){ue=!0;break}let Le,Fe;if(qc(Ee)?(de--,Le=0,Fe=2):(Le=s.get(Ee),Fe=Xl(Ee)?o:1),F<=C){if(k===0&&(k=ye,N=F),F<=C-u)break;if(_L(Ee,Le,G,$)){E=ye,x=F;break}}F-=Fe,G=Ee,$=Le}if(E!==0){const de=u-(N-x);if(de<=n){const ye=t.charCodeAt(k);let Ee;Cn(ye)?Ee=2:Ee=Zp(ye,N,n,o),de-Ee<0&&(E=0)}}if(ue){y--;continue}}if(E===0&&(E=k,x=N),E<=b){const F=t.charCodeAt(b);Cn(F)?(E=b+2,x=v+2):(E=b+1,x=v+Zp(F,v,n,o))}for(b=E,f[m]=E,v=x,g[m]=x,m++,C=x+u;y<0||y<w&&d[y]<x;)y++;let V=Math.abs(d[y]-C);for(;y+1<w;){const F=Math.abs(d[y+1]-C);if(F>=V)break;V=F,y++}}return m===0?null:(f.length=m,g.length=m,pL=e.breakOffsets,mL=e.breakOffsetsVisibleColumn,e.breakOffsets=f,e.breakOffsetsVisibleColumn=g,e.wrappedTextIndentLength=c,e)}h(eJ,"createLineBreaksFromPreviousLineBreaks");function tJ(s,e,t,n,i,o,r){const a=ws.applyInjectedText(e,t);let l,d;if(t&&t.length>0?(l=t.map(x=>x.options),d=t.map(x=>x.column-1)):(l=null,d=null),i===-1)return l?new tf(d,l,[a.length],[],0):null;const c=a.length;if(c<=1)return l?new tf(d,l,[a.length],[],0):null;const u=r9(a,n,i,o,r),f=i-u,g=[],m=[];let b=0,v=0,C=0,w=i,y=a.charCodeAt(0),S=s.get(y),L=Zp(y,0,n,o),E=1;Cn(y)&&(L+=1,y=a.charCodeAt(1),S=s.get(y),E++);for(let x=E;x<c;x++){const k=x,N=a.charCodeAt(x);let V,F;Cn(N)?(x++,V=0,F=2):(V=s.get(N),F=Zp(N,L,n,o)),_L(y,S,N,V)&&(v=k,C=L),L+=F,L>w&&((v===0||L-C>f)&&(v=k,C=L-F),g[b]=v,m[b]=C,b++,w=C+f,v=0),y=N,S=V}return b===0&&(!t||t.length===0)?null:(g[b]=c,m[b]=L,new tf(d,l,g,m,u))}h(tJ,"createLineBreaks$1");function Zp(s,e,t,n){return s===9?t-e%t:Xl(s)||s<32?n:1}h(Zp,"computeCharWidth");function p2(s,e){return e-s%e}h(p2,"tabCharacterWidth");function _L(s,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}h(_L,"canBreak");function r9(s,e,t,n,i){let o=0;if(i!==0){const r=bi(s);if(r!==-1){for(let l=0;l<r;l++)o+=s.charCodeAt(l)===9?p2(o,e):1;const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++)o+=p2(o,e);o+n>t&&(o=0)}}return o}h(r9,"computeWrappedTextIndentLength");var sS;const rS=(sS=window.trustedTypes)===null||sS===void 0?void 0:sS.createPolicy("domLineBreaksComputer",{createHTML:s=>s});class d1{static create(){return new d1}constructor(){}createLineBreaksComputer(e,t,n,i){const o=[],r=[];return{addRequest:(a,l,d)=>{o.push(a),r.push(l)},finalize:()=>nJ(o,e,t,n,i,r)}}}h(d1,"DOMLineBreaksComputerFactory");function nJ(s,e,t,n,i,o){var r;function a(k){const N=o[k];if(N){const V=ws.applyInjectedText(s[k],N),F=N.map($=>$.options),G=N.map($=>$.column-1);return new tf(G,F,[V.length],[],0)}else return null}if(h(a,"createEmptyLineBreakWithPossiblyInjectedText"),n===-1){const k=[];for(let N=0,V=s.length;N<V;N++)k[N]=a(N);return k}const l=Math.round(n*e.typicalHalfwidthCharacterWidth),c=Math.round(t*(i===3?2:i===2?1:0)),u=Math.ceil(e.spaceWidth*c),f=document.createElement("div");ti(f,e);const g=Yc(1e4),m=[],b=[],v=[],C=[],w=[];for(let k=0;k<s.length;k++){const N=ws.applyInjectedText(s[k],o[k]);let V=0,F=0,G=l;if(i!==0)if(V=bi(N),V===-1)V=0;else{for(let ye=0;ye<V;ye++)F+=N.charCodeAt(ye)===9?t-F%t:1;const de=Math.ceil(e.spaceWidth*F);de+e.typicalFullwidthCharacterWidth>l?(V=0,F=0):G=l-de}const $=N.substr(V),ue=iJ($,F,t,G,g,u);m[k]=V,b[k]=F,v[k]=$,C[k]=ue[0],w[k]=ue[1]}const y=g.build(),S=(r=rS?.createHTML(y))!==null&&r!==void 0?r:y;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",f.style.wordWrap="break-word",document.body.appendChild(f);const L=document.createRange(),E=Array.prototype.slice.call(f.children,0),x=[];for(let k=0;k<s.length;k++){const N=E[k],V=oJ(L,N,v[k],C[k]);if(V===null){x[k]=a(k);continue}const F=m[k],G=b[k]+c,$=w[k],ue=[];for(let Le=0,Fe=V.length;Le<Fe;Le++)ue[Le]=$[V[Le]];if(F!==0)for(let Le=0,Fe=V.length;Le<Fe;Le++)V[Le]+=F;let de,ye;const Ee=o[k];Ee?(de=Ee.map(Le=>Le.options),ye=Ee.map(Le=>Le.column-1)):(de=null,ye=null),x[k]=new tf(ye,de,V,ue,G)}return document.body.removeChild(f),x}h(nJ,"createLineBreaks");function iJ(s,e,t,n,i,o){if(o!==0){const f=String(o);i.appendASCIIString('<div style="text-indent: -'),i.appendASCIIString(f),i.appendASCIIString("px; padding-left: "),i.appendASCIIString(f),i.appendASCIIString("px; box-sizing: border-box; width:")}else i.appendASCIIString('<div style="width:');i.appendASCIIString(String(n)),i.appendASCIIString('px;">');const r=s.length;let a=e,l=0;const d=[],c=[];let u=0<r?s.charCodeAt(0):0;i.appendASCIIString("<span>");for(let f=0;f<r;f++){f!==0&&f%16384===0&&i.appendASCIIString("</span><span>"),d[f]=l,c[f]=a;const g=u;u=f+1<r?s.charCodeAt(f+1):0;let m=1,b=1;switch(g){case 9:m=t-a%t,b=m;for(let v=1;v<=m;v++)v<m?i.write1(160):i.appendASCII(32);break;case 32:u===32?i.write1(160):i.appendASCII(32);break;case 60:i.appendASCIIString("&lt;");break;case 62:i.appendASCIIString("&gt;");break;case 38:i.appendASCIIString("&amp;");break;case 0:i.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.write1(65533);break;default:Xl(g)&&b++,g<32?i.write1(9216+g):i.write1(g)}l+=m,a+=b}return i.appendASCIIString("</span>"),d[s.length]=l,c[s.length]=a,i.appendASCIIString("</div>"),[d,c]}h(iJ,"renderLine");function oJ(s,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),o=[];try{bL(s,i,n,0,null,t.length-1,null,o)}catch(r){return console.log(r),null}return o.length===0?null:(o.push(t.length),o)}h(oJ,"readLineBreaks");function bL(s,e,t,n,i,o,r,a){if(n===o||(i=i||aS(s,e,t[n],t[n+1]),r=r||aS(s,e,t[o],t[o+1]),Math.abs(i[0].top-r[0].top)<=.1))return;if(n+1===o){a.push(o);return}const l=n+(o-n)/2|0,d=aS(s,e,t[l],t[l+1]);bL(s,e,t,n,i,l,d,a),bL(s,e,t,l,d,o,r,a)}h(bL,"discoverBreaks");function aS(s,e,t,n){return s.setStart(e[t/16384|0].firstChild,t%16384),s.setEnd(e[n/16384|0].firstChild,n%16384),s.getClientRects()}h(aS,"readClientRect");var sJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},oa=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let rJ=0;class a9{constructor(e,t,n,i,o){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=o}dispose(){et(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}h(a9,"ModelData$1");let Hm=h(class iw extends z{constructor(e,t,n,i,o,r,a,l,d,c,u,f){super();this.languageConfigurationService=u,this._onDidDispose=this._register(new P),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new P),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new P),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new P),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new P),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new P),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new P),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new P),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new P),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new P),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new P),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new P),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new vL),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new vL),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new P),this.onWillType=this._onWillType.event,this._onDidType=this._register(new P),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new P),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new P),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new P),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new P),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new P),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new P),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new P),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new P),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new P),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new P),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new P),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new P),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new P),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new P),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new P),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new P),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new P),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new P),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const g=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++rJ,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,g,c)),this._register(this._configuration.onDidChange(b=>{this._onDidChangeConfiguration.fire(b);const v=this._configuration.options;if(b.hasChanged(131)){const C=v.get(131);this._onDidLayoutChange.fire(C)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=d,this._codeEditorService=o,this._commandService=r,this._themeService=l,this._register(new l9(this,this._contextKeyService)),this._register(new d9(this,this._contextKeyService,f)),this._instantiationService=i.createChild(new H_([De,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new c9(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let m;Array.isArray(n.contributions)?m=n.contributions:m=Ec.getEditorContributions();for(const b of m){if(this._contributions[b.id]){Ne(new Error(`Cannot have two contributions with the same id ${b.id}`));continue}try{const v=this._instantiationService.createInstance(b.ctor,this);this._contributions[b.id]=v}catch(v){Ne(v)}}Ec.getEditorActions().forEach(b=>{if(this._actions[b.id]){Ne(new Error(`Cannot have two actions with the same id ${b.id}`));return}const v=new xI(b.id,b.label,b.alias,Qi(b.precondition),()=>this._instantiationService.invokeFunction(C=>Promise.resolve(b.runEditorCommand(C,this,null))),this._contextKeyService);this._actions[v.id]=v}),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,t,n){return new OT(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return C_.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const i=e[t];this._contributions[i].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Je.getWordAtPosition(this._modelData.model,this._configuration.options.get(117),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){!this._modelData||this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),i=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const o={oldModelUrl:i?i.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(i)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const i=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}getTopForLineNumber(e){return this._modelData?iw._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?iw._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>T.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return mn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(!!this._modelData){if(!W.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!T.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",n,r,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new T(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!W.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new T(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=oe.isISelection(e),i=T.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){const o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new oe(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new T(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!T.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(T.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(!!this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,o=e.length;i<o;i++)if(!oe.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){!this._modelData||this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const o of t){const r=this._contributions[o];typeof r.saveViewState=="function"&&(e[o]=r.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:n,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const i=t.contributionsState||{},o=Object.keys(this._contributions);for(let a=0,l=o.length;a<l;a++){const d=o[a],c=this._contributions[d];typeof c.restoreViewState=="function"&&c.restoreViewState(i[d])}const r=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(r)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=n;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=n;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=n;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=n;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run()).then(void 0,Ne);return}!this._modelData||this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n)}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){!this._modelData||(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){!this._modelData||(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,o){!this._modelData||this._modelData.viewModel.compositionType(t,n,i,o,e)}_paste(e,t,n,i,o){if(!this._modelData||t.length===0)return;const r=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,i,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new T(r.lineNumber,r.column,a.lineNumber,a.column),languageId:o})}_cut(e){!this._modelData||this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=Ec.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(i.runEditorCommand(o,this,n)).then(void 0,Ne)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(81)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(81)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(81))return!1;let i;return n?Array.isArray(n)?i=h(()=>n,"cursorStateComputer"):i=n:i=h(()=>null,"cursorStateComputer"),this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){!this._modelData||this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){!this._modelData||this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,Ww(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,Ww(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(131)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(131),o=iw._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:o,left:r,height:n.get(59)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){ti(e,this._configuration.options.get(44))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();const n=new t9(this._id,this._configuration,e,d1.create(),l1.create(this._configuration.options),r=>ir(r),this.languageConfigurationService,this._themeService);t.push(e.onDidChangeDecorations(r=>this._onDidChangeModelDecorations.fire(r))),t.push(e.onDidChangeLanguage(r=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(r)})),t.push(e.onDidChangeLanguageConfiguration(r=>this._onDidChangeModelLanguageConfiguration.fire(r))),t.push(e.onDidChangeContent(r=>this._onDidChangeModelContent.fire(r))),t.push(e.onDidChangeOptions(r=>this._onDidChangeModelOptions.fire(r))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(r=>{switch(r.kind){case 0:this._onDidContentSizeChange.fire(r);break;case 1:this._editorTextFocus.setValue(r.hasFocus);break;case 2:this._onDidScrollChange.fire(r);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{r.reachedMaxCursorCount&&this._notificationService.warn(p("cursors.maximum","The number of cursors has been limited to {0}.",oh.MAX_CURSOR_COUNT));const a=[];for(let c=0,u=r.selections.length;c<u;c++)a[c]=r.selections[c].getPosition();const l={position:a[0],secondaryPositions:a.slice(1),reason:r.reason,source:r.source};this._onDidChangeCursorPosition.fire(l);const d={selection:r.selections[0],secondarySelections:r.selections.slice(1),modelVersionId:r.modelVersionId,oldSelections:r.oldSelections,oldModelVersionId:r.oldModelVersionId,source:r.source,reason:r.reason};this._onDidChangeCursorSelection.fire(d);break}}}));const[i,o]=this._createView(n);if(o){this._domElement.appendChild(i.domNode.domNode);let r=Object.keys(this._contentWidgets);for(let a=0,l=r.length;a<l;a++){const d=r[a];i.addContentWidget(this._contentWidgets[d])}r=Object.keys(this._overlayWidgets);for(let a=0,l=r.length;a<l;a++){const d=r[a];i.addOverlayWidget(this._overlayWidgets[d])}i.render(!1,!0),i.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new a9(e,n,i,o,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,r,a,l)=>{this._paste("keyboard",o,r,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,r,a,l)=>{this._compositionType("keyboard",o,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,r,a,l)=>{const d={text:o,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",d)},type:o=>{const r={text:o};this._commandService.executeCommand("type",r)},compositionType:(o,r,a,l)=>{if(a||l){const d={text:o,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",d)}else{const d={text:o,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",d)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new V_(e.coordinatesConverter);return n.onKeyDown=o=>this._onKeyDown.fire(o),n.onKeyUp=o=>this._onKeyUp.fire(o),n.onContextMenu=o=>this._onContextMenu.fire(o),n.onMouseMove=o=>this._onMouseMove.fire(o),n.onMouseLeave=o=>this._onMouseLeave.fire(o),n.onMouseDown=o=>this._onMouseDown.fire(o),n.onMouseUp=o=>this._onMouseUp.fire(o),n.onMouseDrag=o=>this._onMouseDrag.fire(o),n.onMouseDrop=o=>this._onMouseDrop.fire(o),n.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),n.onMouseWheel=o=>this._onMouseWheel.fire(o),[new M3(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}},"CodeEditorWidget");Hm=sJ([oa(3,Ge),oa(4,ht),oa(5,ln),oa(6,De),oa(7,Mt),oa(8,cn),oa(9,lo),oa(10,oi),oa(11,ce)],Hm);class vL extends z{constructor(){super();this._onDidChangeToTrue=this._register(new P),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new P),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}h(vL,"BooleanEventEmitter");class l9 extends z{constructor(e,t){super();this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=I.editorSimpleInput.bindTo(t),this._editorFocus=I.focus.bindTo(t),this._textInputFocus=I.textInputFocus.bindTo(t),this._editorTextFocus=I.editorTextFocus.bindTo(t),this._editorTabMovesFocus=I.tabMovesFocus.bindTo(t),this._editorReadonly=I.readOnly.bindTo(t),this._inDiffEditor=I.inDiffEditor.bindTo(t),this._editorColumnSelection=I.columnSelection.bindTo(t),this._hasMultipleSelections=I.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=I.hasNonEmptySelection.bindTo(t),this._canUndo=I.canUndo.bindTo(t),this._canRedo=I.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(130)),this._editorReadonly.set(e.get(81)),this._inDiffEditor.set(e.get(54)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}h(l9,"EditorContextKeysManager");class d9 extends z{constructor(e,t,n){super();this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=I.languageId.bindTo(t),this._hasCompletionItemProvider=I.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=I.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=I.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=I.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=I.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=I.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=I.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=I.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=I.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=I.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=I.hasReferenceProvider.bindTo(t),this._hasRenameProvider=I.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=I.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=I.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=I.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=I.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=I.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=I.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=I.isInWalkThroughSnippet.bindTo(t);const i=h(()=>this._update(),"update");this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(n.completionProvider.onDidChange(i)),this._register(n.codeActionProvider.onDidChange(i)),this._register(n.codeLensProvider.onDidChange(i)),this._register(n.definitionProvider.onDidChange(i)),this._register(n.declarationProvider.onDidChange(i)),this._register(n.implementationProvider.onDidChange(i)),this._register(n.typeDefinitionProvider.onDidChange(i)),this._register(n.hoverProvider.onDidChange(i)),this._register(n.documentHighlightProvider.onDidChange(i)),this._register(n.documentSymbolProvider.onDidChange(i)),this._register(n.referenceProvider.onDidChange(i)),this._register(n.renameProvider.onDidChange(i)),this._register(n.documentFormattingEditProvider.onDidChange(i)),this._register(n.documentRangeFormattingEditProvider.onDidChange(i)),this._register(n.signatureHelpProvider.onDidChange(i)),this._register(n.inlayHintsProvider.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Me.walkThroughSnippet)})}}h(d9,"EditorModeContext");class c9 extends z{constructor(e){super();this._onChange=this._register(new P),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(wf(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}h(c9,"CodeEditorWidgetFocusTracker");const aJ=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),lJ=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function lS(s){return aJ+encodeURIComponent(s.toString())+lJ}h(lS,"getSquigglySVGData");const dJ=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),cJ=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function hJ(s){return dJ+encodeURIComponent(s.toString())+cJ}h(hJ,"getDotDotDotSVGData");It((s,e)=>{const t=s.getColor(iF);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=s.getColor(Vl);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${lS(n)}") repeat-x bottom left; }`);const i=s.getColor(Aq);i&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${i}; }`);const o=s.getColor(V0);o&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${o}; }`);const r=s.getColor(gs);r&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${lS(r)}") repeat-x bottom left; }`);const a=s.getColor(Mq);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const l=s.getColor(oI);l&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${l}; }`);const d=s.getColor(ko);d&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${lS(d)}") repeat-x bottom left; }`);const c=s.getColor(Rq);c&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${c}; }`);const u=s.getColor(Oq);u&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const f=s.getColor(Pq);f&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${hJ(f)}") no-repeat bottom left; }`);const g=s.getColor(mX);g&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${g.rgba.a}; }`);const m=s.getColor(pX);m&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${m}; }`);const b=s.getColor(Bl)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${b}}`)});class ft{constructor(e,t,n){const i=h(o=>this.emitter.fire(o),"fn");this.emitter=new P({onFirstListenerAdd:()=>e.addEventListener(t,i,n),onLastListenerRemove:()=>e.removeEventListener(t,i,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}h(ft,"DomEmitter");function m2(s){return s.preventDefault(),s.stopPropagation(),s}h(m2,"stopEvent");var kg=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};let uJ=!1;var _C;(function(s){s.North="north",s.South="south",s.East="east",s.West="west"})(_C||(_C={}));let fJ=4;const gJ=new P;let pJ=300;const mJ=new P;class c1{constructor(){this.disposables=new Q}get onPointerMove(){return this.disposables.add(new ft(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new ft(window,"mouseup")).event}dispose(){this.disposables.dispose()}}h(c1,"MouseEventFactory");kg([vn],c1.prototype,"onPointerMove",null);kg([vn],c1.prototype,"onPointerUp",null);class h1{constructor(e){this.el=e,this.disposables=new Q}get onPointerMove(){return this.disposables.add(new ft(this.el,kt.Change)).event}get onPointerUp(){return this.disposables.add(new ft(this.el,kt.End)).event}dispose(){this.disposables.dispose()}}h(h1,"GestureEventFactory");kg([vn],h1.prototype,"onPointerMove",null);kg([vn],h1.prototype,"onPointerUp",null);class zm{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}h(zm,"OrthogonalPointerEventFactory");kg([vn],zm.prototype,"onPointerMove",null);kg([vn],zm.prototype,"onPointerUp",null);const _2="pointer-events-disabled";class jn extends z{constructor(e,t,n){super();this.hoverDelay=pJ,this.hoverDelayer=this._register(new nr(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new P),this._onDidStart=this._register(new P),this._onDidChange=this._register(new P),this._onDidReset=this._register(new P),this._onDidEnd=this._register(new P),this.orthogonalStartSashDisposables=this._register(new Q),this.orthogonalStartDragHandleDisposables=this._register(new Q),this.orthogonalEndSashDisposables=this._register(new Q),this.orthogonalEndDragHandleDisposables=this._register(new Q),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=j(e,X(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Ke&&this.el.classList.add("mac");const i=this._register(new ft(this.el,"mousedown")).event;this._register(i(u=>this.onPointerStart(u,new c1),this));const o=this._register(new ft(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const r=this._register(new ft(this.el,"mouseenter")).event;this._register(r(()=>jn.onMouseEnter(this)));const a=this._register(new ft(this.el,"mouseleave")).event;this._register(a(()=>jn.onMouseLeave(this))),this._register(dt.addTarget(this.el));const l=fe.map(this._register(new ft(this.el,kt.Start)).event,u=>{var f;return Object.assign(Object.assign({},u),{target:(f=u.initialTarget)!==null&&f!==void 0?f:null})});this._register(l(u=>this.onPointerStart(u,new h1(this.el)),this));const d=this._register(new ft(this.el,kt.Tap)).event,c=fe.map(fe.filter(fe.debounce(d,(u,f)=>{var g;return{event:f,count:((g=u?.count)!==null&&g!==void 0?g:0)+1}},250),({count:u})=>u===2),({event:u})=>{var f;return Object.assign(Object.assign({},u),{target:(f=u.initialTarget)!==null&&f!==void 0?f:null})});this._register(c(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=fJ,this._register(gJ.event(u=>{this.size=u,this.layout()}))),this._register(mJ.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",uJ),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=h(n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=j(this.el,X(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(He(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new ft(this._orthogonalStartDragHandle,"mouseenter")).event(()=>jn.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new ft(this._orthogonalStartDragHandle,"mouseleave")).event(()=>jn.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))},"onChange");this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=h(n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=j(this.el,X(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(He(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new ft(this._orthogonalEndDragHandle,"mouseenter")).event(()=>jn.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new ft(this._orthogonalEndDragHandle,"mouseleave")).event(()=>jn.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))},"onChange");this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){ct.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const m=this.getOrthogonalSash(e);m&&(n=!0,e.__orthogonalSashEvent=!0,m.onPointerStart(e,new zm(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new zm(t))),!this.state)return;const i=oq("iframe");for(const m of i)m.classList.add(_2);const o=e.pageX,r=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const d=es(this.el),c=h(()=>{let m="";n?m="all-scroll":this.orientation===1?this.state===1?m="s-resize":this.state===2?m="n-resize":m=Ke?"row-resize":"ns-resize":this.state===1?m="e-resize":this.state===2?m="w-resize":m=Ke?"col-resize":"ew-resize",d.textContent=`* { cursor: ${m} !important; }`},"updateStyle"),u=new Q;c(),n||this.onDidEnablementChange.event(c,null,u);const f=h(m=>{ct.stop(m,!1);const b={startX:o,currentX:m.pageX,startY:r,currentY:m.pageY,altKey:a};this._onDidChange.fire(b)},"onPointerMove"),g=h(m=>{ct.stop(m,!1),this.el.removeChild(d),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const b of i)b.classList.remove(_2)},"onPointerUp");t.onPointerMove(f,null,u),t.onPointerUp(g,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&jn.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&jn.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){jn.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}h(jn,"Sash");class $a{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-o}}return new $a(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}h($a,"StableEditorScrollState");const h9={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:zs.text,TERMINALS:"Terminals"};class u9{constructor(e){this.data=e}update(){}getData(){return this.data}}h(u9,"DragAndDropData");const ma={CurrentDragAndDropData:void 0};class Fs extends z{constructor(e,t,n={}){super();this.options=n,this._context=e||this,this._action=t,t instanceof Vi&&this._register(t.onDidChange(i=>{!this.element||this.handleActionChangeEvent(i)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Qc)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(dt.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Eo&&this._register(J(e,be.DRAG_START,i=>{var o;return(o=i.dataTransfer)===null||o===void 0?void 0:o.setData(h9.TEXT,this._action.label)}))),this._register(J(t,kt.Tap,i=>this.onClick(i,!0))),this._register(J(t,be.MOUSE_DOWN,i=>{n||ct.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),Ke&&this._register(J(t,be.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register(J(t,be.CLICK,i=>{ct.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register(J(t,be.DBLCLICK,i=>{ct.stop(i,!0)})),[be.MOUSE_UP,be.MOUSE_OUT].forEach(i=>{this._register(J(t,i,o=>{ct.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var n;ct.stop(e,!0);const i=_o(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}h(Fs,"BaseActionViewItem");class Of extends Fs{constructor(e,t,n={}){super(e,t,n);this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=j(this.element,X("a.action-label"))),this.label&&(this._action.id===To.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(j(this.element,X("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=p({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}h(Of,"ActionViewItem");var _J=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class rr extends z{constructor(e,t={}){var n,i,o,r,a,l;super();this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new P),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new P({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new P),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new P),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(i=this.options.orientation)!==null&&i!==void 0?i:0,this._triggerKeys={keyDown:(r=(o=this.options.triggerKeys)===null||o===void 0?void 0:o.keyDown)!==null&&r!==void 0?r:!1,keys:(l=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&l!==void 0?l:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Qc,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(u=>this._onDidRun.fire(u))),this._register(this._actionRunner.onBeforeRun(u=>this._onBeforeRun.fire(u))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let d,c;switch(this._orientation){case 0:d=[15],c=[17];break;case 1:d=[16],c=[18],this.domNode.className+=" vertical";break}this._register(J(this.domNode,be.KEY_DOWN,u=>{const f=new Et(u);let g=!0;const m=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;d&&(f.equals(d[0])||f.equals(d[1]))?g=this.focusPrevious():c&&(f.equals(c[0])||f.equals(c[1]))?g=this.focusNext():f.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():f.equals(14)?g=this.focusFirst():f.equals(13)?g=this.focusLast():f.equals(2)&&m instanceof Fs&&m.trapsArrowNavigation?g=this.focusNext():this.isTriggerKeyEvent(f)?this._triggerKeys.keyDown?this.doTrigger(f):this.triggerKeyDown=!0:g=!1,g&&(f.preventDefault(),f.stopPropagation())})),this._register(J(this.domNode,be.KEY_UP,u=>{const f=new Et(u);this.isTriggerKeyEvent(f)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(f)),f.preventDefault(),f.stopPropagation()):(f.equals(2)||f.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(wf(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Uu()===this.domNode||!Oa(Uu(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role","toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof Fs&&n.isEnabled());t instanceof Fs&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Fs&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Oa(Uu(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=Gc(t.index)?t.index:null;n.forEach(o=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(J(r,be.CONTEXT_MENU,l=>{ct.stop(l,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o)),a||(a=new Of(this.context,o,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof Fs&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a),this._actionIds.push(o.id)):(this.actionsList.insertBefore(r,this.actionsList.children[i]),this.viewItems.splice(i,0,a),this._actionIds.splice(i,0,o.id),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){et(this.viewItems),this.viewItems=[],this._actionIds=[],Sn(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var i;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((i=this.viewItems[this.previouslyFocusedItem])===null||i===void 0||i.blur());const o=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(o){let r=!0;Fw(o.focus)||(r=!1),this.options.focusOnlyEnabledItems&&Fw(o.isEnabled)&&!o.isEnabled()&&(r=!1),r?(n||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Fs){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return _J(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){et(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}h(rr,"ActionBar");const bJ={IconContribution:"base.contributions.icons"};var b2;(function(s){function e(t,n){let i=t.defaults;for(;vt.isThemeIcon(i);){const o=Kh.getIcon(i.id);if(!o)return;i=o.defaults}return i}h(e,"getDefinition"),s.getDefinition=e})(b2||(b2={}));class f9{constructor(){this._onDidChange=new P,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:p("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${_i.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return o}let r={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=r;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=h((o,r)=>o.id.localeCompare(r.id),"sorter"),t=h(o=>{for(;vt.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},"classNames");let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of i.filter(r=>!!r.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${vt.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const o of i.filter(r=>!vt.isThemeIcon(r.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}}h(f9,"IconRegistry");const Kh=new f9;dn.add(bJ.IconContribution,Kh);function xn(s,e,t,n){return Kh.registerIcon(s,e,t,n)}h(xn,"registerIcon");function g9(){return Kh}h(g9,"getIconRegistry");function vJ(){for(const s of _.getAll())Kh.registerIcon(s.id,s.definition,s.description)}h(vJ,"initialize");vJ();const p9="vscode://schemas/icons";let m9=dn.as(P0.JSONContribution);m9.registerSchema(p9,Kh.getIconSchema());const v2=new gt(()=>m9.notifySchemaChanged(p9),200);Kh.onDidChange(()=>{v2.isScheduled()||v2.schedule()});const _9=xn("widget-close",_.close,p("widgetClose","Icon for the close action in widgets."));xn("goto-previous-location",_.arrowUp,p("previousChangeIcon","Icon for goto previous editor location."));xn("goto-next-location",_.arrowDown,p("nextChangeIcon","Icon for goto next editor location."));vt.modify(_.sync,"spin");vt.modify(_.loading,"spin");var wJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},CJ=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},yJ=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},dS;const ev=3;class xu{constructor(e,t,n,i){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=i}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}h(xu,"DiffEntry");class ow{constructor(e){this.entries=e}}h(ow,"Diff");const SJ=xn("diff-review-insert",_.add,p("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),xJ=xn("diff-review-remove",_.remove,p("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),TJ=xn("diff-review-close",_.close,p("diffReviewCloseIcon","Icon for 'Close' in diff review."));let bC=h(class Qd extends z{constructor(e,t){super();this._languageService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=nt(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=nt(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new rr(this.actionBarContainer.domNode)),this._actionBar.push(new Vi("diffreview.close",p("label.close","Close"),"close-diff-review "+vt.asClassName(TJ),!0,()=>yJ(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=nt(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=nt(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new Tg(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{!this._isVisible||(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{!this._isVisible||this._render()})),this._register(Wn(this.domNode.domNode,"click",n=>{n.preventDefault();const i=w5(n.target,"diff-review-row");i&&this._goToRow(i)})),this._register(Wn(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new W(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let i=0,o=this._diffs.length;i<o;i++)if(this._diffs[i]===this._currentDiff){n=i;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new W(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1;const t=this._getCurrentFocusedRow();if(t){const n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new W(e,1)),this._diffEditor.revealPosition(new W(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){const t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:Qd._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];const i=[];let o=0;for(let d=0,c=e.length;d<c;d++){const u=e[d],f=u.originalStartLineNumber,g=u.originalEndLineNumber,m=u.modifiedStartLineNumber,b=u.modifiedEndLineNumber,v=[];let C=0;{const w=g===0?f:f-1,y=b===0?m:m-1;let S=1,L=1;if(d>0){const k=e[d-1];k.originalEndLineNumber===0?S=k.originalStartLineNumber+1:S=k.originalEndLineNumber+1,k.modifiedEndLineNumber===0?L=k.modifiedStartLineNumber+1:L=k.modifiedEndLineNumber+1}let E=w-ev+1,x=y-ev+1;if(E<S){const k=S-E;E=E+k,x=x+k}if(x<L){const k=L-x;E=E+k,x=x+k}v[C++]=new xu(E,w,x,y)}g!==0&&(v[C++]=new xu(f,g,0,0)),b!==0&&(v[C++]=new xu(0,0,m,b));{const w=g===0?f+1:g+1,y=b===0?m+1:b+1;let S=t,L=n;if(d+1<c){const k=e[d+1];k.originalEndLineNumber===0?S=k.originalStartLineNumber:S=k.originalStartLineNumber-1,k.modifiedEndLineNumber===0?L=k.modifiedStartLineNumber:L=k.modifiedStartLineNumber-1}let E=w+ev-1,x=y+ev-1;if(E>S){const k=S-E;E=E+k,x=x+k}if(x>L){const k=L-x;E=E+k,x=x+k}v[C++]=new xu(w,E,y,x)}i[o++]=new ow(v)}let r=i[0].entries;const a=[];let l=0;for(let d=1,c=i.length;d<c;d++){const u=i[d].entries,f=r[r.length-1],g=u[0];if(f.getType()===0&&g.getType()===0&&g.originalLineStart<=f.originalLineEnd){r[r.length-1]=new xu(f.originalLineStart,g.originalLineEnd,f.modifiedLineStart,g.modifiedLineEnd),r=r.concat(u.slice(1));continue}a[l++]=new ow(r),r=u}return a[l++]=new ow(r),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,i=this._diffs.length;n<i;n++){const o=this._diffs[n].entries,r=o[o.length-1].modifiedLineEnd;if(t<=r)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),i=this._diffEditor.getModifiedEditor().getModel(),o=n.getOptions(),r=i.getOptions();if(!this._isVisible||!n||!i){Sn(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const l=this._diffs[a].entries,d=document.createElement("div");d.className="diff-review-table",d.setAttribute("role","list"),d.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),ti(d,t.get(44));let c=0,u=0,f=0,g=0;for(let x=0,k=l.length;x<k;x++){const N=l[x],V=N.originalLineStart,F=N.originalLineEnd,G=N.modifiedLineStart,$=N.modifiedLineEnd;V!==0&&(c===0||V<c)&&(c=V),F!==0&&(u===0||F>u)&&(u=F),G!==0&&(f===0||G<f)&&(f=G),$!==0&&(g===0||$>g)&&(g=$)}const m=document.createElement("div");m.className="diff-review-row";const b=document.createElement("div");b.className="diff-review-cell diff-review-summary";const v=u-c+1,C=g-f+1;b.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${c},${v} +${f},${C} @@`)),m.setAttribute("data-line",String(f));const w=h(x=>x===0?p("no_lines_changed","no lines changed"):x===1?p("one_line_changed","1 line changed"):p("more_lines_changed","{0} lines changed",x),"getAriaLines"),y=w(v),S=w(C);m.setAttribute("aria-label",p({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,c,y,f,S)),m.appendChild(b),m.setAttribute("role","listitem"),d.appendChild(m);const L=t.get(59);let E=f;for(let x=0,k=l.length;x<k;x++){const N=l[x];Qd._renderSection(d,N,E,L,this._width,e,n,o,t,i,r,this._languageService.languageIdCodec),N.modifiedLineStart!==0&&(E=N.modifiedLineEnd)}Sn(this._content.domNode),this._content.domNode.appendChild(d),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,i,o,r,a,l,d,c,u,f){const g=t.getType();let m="diff-review-row",b="";const v="diff-review-spacer";let C=null;switch(g){case 1:m="diff-review-row line-insert",b=" char-insert",C=SJ;break;case 2:m="diff-review-row line-delete",b=" char-delete",C=xJ;break}const w=t.originalLineStart,y=t.originalLineEnd,S=t.modifiedLineStart,L=t.modifiedLineEnd,E=Math.max(L-S,y-w),x=r.get(131),k=x.glyphMarginWidth+x.lineNumbersWidth,N=d.get(131),V=10+N.glyphMarginWidth+N.lineNumbersWidth;for(let F=0;F<=E;F++){const G=w===0?0:w+F,$=S===0?0:S+F,ue=document.createElement("div");ue.style.minWidth=o+"px",ue.className=m,ue.setAttribute("role","listitem"),$!==0&&(n=$),ue.setAttribute("data-line",String(n));const de=document.createElement("div");de.className="diff-review-cell",de.style.height=`${i}px`,ue.appendChild(de);const ye=document.createElement("span");ye.style.width=k+"px",ye.style.minWidth=k+"px",ye.className="diff-review-line-number"+b,G!==0?ye.appendChild(document.createTextNode(String(G))):ye.innerText="\xA0",de.appendChild(ye);const Ee=document.createElement("span");Ee.style.width=V+"px",Ee.style.minWidth=V+"px",Ee.style.paddingRight="10px",Ee.className="diff-review-line-number"+b,$!==0?Ee.appendChild(document.createTextNode(String($))):Ee.innerText="\xA0",de.appendChild(Ee);const Le=document.createElement("span");if(Le.className=v,C){const yt=document.createElement("span");yt.className=vt.asClassName(C),yt.innerText="\xA0\xA0",Le.appendChild(yt)}else Le.innerText="\xA0\xA0";de.appendChild(Le);let Fe;if($!==0){let yt=this._renderLine(c,d,u.tabSize,$,f);Qd._ttPolicy&&(yt=Qd._ttPolicy.createHTML(yt)),de.insertAdjacentHTML("beforeend",yt),Fe=c.getLineContent($)}else{let yt=this._renderLine(a,r,l.tabSize,G,f);Qd._ttPolicy&&(yt=Qd._ttPolicy.createHTML(yt)),de.insertAdjacentHTML("beforeend",yt),Fe=a.getLineContent(G)}Fe.length===0&&(Fe=p("blankLine","blank"));let Ht="";switch(g){case 0:G===$?Ht=p({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",Fe,G):Ht=p("equalLine","{0} original line {1} modified line {2}",Fe,G,$);break;case 1:Ht=p("insertLine","+ {0} modified line {1}",Fe,$);break;case 2:Ht=p("deleteLine","- {0} original line {1}",Fe,G);break}ue.setAttribute("aria-label",Ht),e.appendChild(ue)}}static _renderLine(e,t,n,i,o){const r=e.getLineContent(i),a=t.get(44),l=_n.createEmpty(r,o),d=oo.isBasicASCII(r,e.mightContainNonBasicASCII()),c=oo.containsRTL(r,d,e.mightContainRTL());return T0(new Id(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,r,!1,d,c,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(105),t.get(88),t.get(83),t.get(45)!==Yi.OFF,null)).html}},"DiffReview");bC._ttPolicy=(dS=window.trustedTypes)===null||dS===void 0?void 0:dS.createPolicy("diffReview",{createHTML:s=>s});bC=wJ([CJ(1,Vt)],bC);It((s,e)=>{const t=s.getColor(PF);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=s.getColor(vg);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class b9 extends le{constructor(){super({id:"editor.action.diffReview.next",label:p("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:se.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=w9(e);n&&n.diffReviewNext()}}h(b9,"DiffReviewNext");class v9 extends le{constructor(){super({id:"editor.action.diffReview.prev",label:p("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:se.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=w9(e);n&&n.diffReviewPrev()}}h(v9,"DiffReviewPrev");function w9(s){const e=s.get(ht),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let i=0,o=t.length;i<o;i++){const r=t[i];if(r.getModifiedEditor().getId()===n.getId()||r.getOriginalEditor().getId()===n.getId())return r}return null}h(w9,"findFocusedDiffEditor");ne(b9);ne(v9);const LJ="editorWorkerService",is=Xe(LJ),z_=Xe("contextViewService"),Ad=Xe("contextMenuService");var cS=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class C9 extends z{constructor(e,t,n,i,o,r){super();this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=i,this._contextMenuService=o,this._clipboardService=r,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=_.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(59),l=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const d=[],c=i.modifiedEndLineNumber===0;d.push(new Vi("diff.clipboard.copyDeletedContent",c?i.originalEndLineNumber>i.modifiedStartLineNumber?p("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):p("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.originalEndLineNumber>i.modifiedStartLineNumber?p("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):p("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>cS(this,void 0,void 0,function*(){const b=new T(i.originalStartLineNumber,1,i.originalEndLineNumber+1,1),v=i.originalModel.getValueInRange(b);yield this._clipboardService.writeText(v)})));let u=0,f;i.originalEndLineNumber>i.modifiedStartLineNumber&&(f=new Vi("diff.clipboard.copyDeletedLineContent",c?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber),void 0,!0,()=>cS(this,void 0,void 0,function*(){const b=i.originalModel.getLineContent(i.originalStartLineNumber+u);if(b===""){const v=i.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(v===0?`
`:`\r
`)}else yield this._clipboardService.writeText(b)})),d.push(f)),n.getOption(81)||d.push(new Vi("diff.inline.revertChange",p("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>cS(this,void 0,void 0,function*(){const b=new T(i.originalStartLineNumber,1,i.originalEndLineNumber,i.originalModel.getLineMaxColumn(i.originalEndLineNumber)),v=i.originalModel.getValueInRange(b);if(i.modifiedEndLineNumber===0){const C=n.getModel().getLineMaxColumn(i.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new T(i.modifiedStartLineNumber,C,i.modifiedStartLineNumber,C),text:l+v}])}else{const C=n.getModel().getLineMaxColumn(i.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new T(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber,C),text:v}])}})));const m=h((b,v)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:b,y:v}),getActions:()=>(f&&(f.label=c?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.originalStartLineNumber+u):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.originalStartLineNumber+u)),d),autoSelectFirstItem:!0})},"showContextMenu");this._register(Wn(this._diffActions,"mousedown",b=>{const{top:v,height:C}=$n(this._diffActions),w=Math.floor(a/3);b.preventDefault(),m(b.posx,v+C+w)})),this._register(n.onMouseMove(b=>{b.target.type===8||b.target.type===5?b.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,u=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(b=>{!b.event.rightButton||(b.target.type===8||b.target.type===5)&&b.target.detail.viewZoneId===this._viewZoneId&&(b.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a),m(b.event.posx,b.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:i}=$n(e),o=t-i,r=Math.floor(o/n),a=r*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let l=0;for(let d=0;d<this.diff.viewLineCounts.length;d++)if(l+=this.diff.viewLineCounts[d],r<l)return d}return r}}h(C9,"InlineDiffMargin");const Uh=Xe("clipboardService");Object.freeze({total(){},worked(){},done(){}});class Md{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}h(Md,"Progress");Md.None=Object.freeze({report(){}});const Rd=Xe("editorProgressService");var kJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sa=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},hS;class wL{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,i){const o=i?$a.capture(e):null;e.changeViewZones(r=>{var a;for(const l of this._zones)r.removeZone(l);for(const l of this._inlineDiffMargins)l.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let l=0,d=n.zones.length;l<d;l++){const c=n.zones[l];c.suppressMouseDown=!0;const u=r.addZone(c);this._zones.push(u),this._zonesMap[String(u)]=!0,n.zones[l].diff&&c.marginDomNode&&(c.suppressMouseDown=!1,((a=n.zones[l].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new C9(u,c.marginDomNode,e,n.zones[l].diff,this._contextMenuService,this._clipboardService)))}}),o&&o.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}h(wL,"VisualEditorState");let EJ=0;const DJ=xn("diff-insert",_.add,p("diffInsertIcon","Line decoration for inserts in the diff editor.")),y9=xn("diff-remove",_.remove,p("diffRemoveIcon","Line decoration for removals in the diff editor.")),w2=(hS=window.trustedTypes)===null||hS===void 0?void 0:hS.createPolicy("diffEditorWidget",{createHTML:s=>s});let fd=h(class Zn extends z{constructor(e,t,n,i,o,r,a,l,d,c,u,f){super();this._editorProgressService=f,this._onDidDispose=this._register(new P),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new P),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new P),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=o,this._codeEditorService=l,this._contextKeyService=this._register(r.createScoped(e)),this._instantiationService=a.createChild(new H_([De,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=d,this._notificationService=c,this._id=++EJ,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=C2(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new gt(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Zn._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=nt(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(Wn(this._overviewDomElement,"mousedown",m=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(m)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new wL(u,i),this._modifiedEditorState=new wL(u,i),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new eI(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(bC,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new Nr(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new yL(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(d.onDidColorThemeChange(m=>{this._strategy&&this._strategy.applyColors(m)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Zn._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const g=Ec.getDiffEditorContributions();for(const m of g)try{this._register(a.createInstance(m.ctor,this))}catch(b){Ne(b)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=nC(e.type),n}_recreateOverviewRulers(){!this._options.renderOverviewRuler||(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{!n.getModel()||(o.hasChanged(44)&&this._updateDecorationsRunner.schedule(),o.hasChanged(132)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const i=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(o=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Zn.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{!n.getModel()||(o.hasChanged(44)&&this._updateDecorationsRunner.schedule(),o.hasChanged(132)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(o=>{o.tabSize&&this._updateDecorationsRunner.schedule()}));const i=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>i.set(!0))),this._register(n.onDidBlurEditorWidget(()=>i.set(!1))),this._register(n.onDidContentSizeChange(o=>{const r=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Zn.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:r,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createInnerEditor(e,t,n,i){return e.createInstance(Hm,t,n,i)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return C_.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=C2(e,this._options),n=NJ(this._options,t);this._options=t;const i=n.ignoreTrimWhitespace||n.renderIndicators,o=this._isVisible&&(n.maxComputationTime||n.maxFileSize);i?this._beginUpdateDecorations():o&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Nr(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new yL(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Zn._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,t="api"){this._modifiedEditor.setPosition(e,t)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,t="api"){this._modifiedEditor.setSelection(e,t)}setSelections(e,t="api"){this._modifiedEditor.setSelections(e,t)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._modifiedEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=Zn.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Zn.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Zn.ONE_OVERVIEW_WIDTH,right:n+Zn.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Zn.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Zn.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,i=this._options.maxFileSize*1024*1024,o=h(r=>{const a=r.getValueLength();return i===0||a<=i},"canSyncModelForDiff");if(!o(e)||!o(t)){(!Zn._equals(e.uri,this._lastOriginalWarning)||!Zn._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(p("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=r,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},r=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),i=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,i.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,i.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:(t.wordWrapOverride1="off",t.wordWrapOverride2="off"),e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=cr.revealHorizontalRightPadding.defaultValue+Zn.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),i=this._strategy.layout();this._originalDomNode.style.width=i+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-i+"px",this._modifiedDomNode.style.left=i+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=Zn.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Zn.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Zn.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:i,height:t-n}),this._modifiedEditor.layout({width:e-i-(this._options.renderOverviewRuler?Zn.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),i=Math.max(0,e.height),o=Math.max(0,i-2*0),r=n>0?o/n:0,a=Math.max(0,Math.floor(e.height*r)),l=Math.floor(t*r);return{height:a,top:l}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let i=0,o=n.length-1;for(;i<o;){const r=Math.floor((i+o)/2),a=t(n[r]),l=r+1<=o?t(n[r+1]):1073741824;e<a?o=r-1:e>=l?i=r+1:(i=r,o=r)}return n[i]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=o?i+Math.min(a,r):i+r-o+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,l=>l.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),i=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,r=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-i;return a<=r?n+Math.min(a,o):n+o-r+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}},"DiffEditorWidget");fd.ONE_OVERVIEW_WIDTH=15;fd.ENTIRE_DIFF_OVERVIEW_WIDTH=30;fd.UPDATE_DIFF_DECORATIONS_DELAY=200;fd=kJ([sa(3,Uh),sa(4,is),sa(5,De),sa(6,Ge),sa(7,ht),sa(8,Mt),sa(9,cn),sa(10,Ad),sa(11,Rd)],fd);class VI extends z{constructor(e){super();this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=e.getColor(cY)||(e.getColor(oF)||HT).transparent(2),n=e.getColor(hY)||(e.getColor(sF)||zT).transparent(2),i=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,i}getEditorsDiffDecorations(e,t,n,i,o){o=o.sort((d,c)=>d.afterLineNumber-c.afterLineNumber),i=i.sort((d,c)=>d.afterLineNumber-c.afterLineNumber);const r=this._getViewZones(e,i,o,n),a=this._getOriginalEditorDecorations(r,e,t,n),l=this._getModifiedEditorDecorations(r,e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:r.original},modified:{decorations:l.decorations,overviewZones:l.overviewZones,zones:r.modified}}}}h(VI,"DiffEditorWidgetStyle");class CL{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}h(CL,"ForeignViewZonesIterator");class Il{constructor(e,t,n,i,o){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=i,this._modifiedEditor=o}static _getViewLineCount(e,t,n){const i=e.getModel(),o=e._getViewModel();if(i&&o){const r=Km(i,o,t,n);return r.endLineNumber-r.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(59),t=this._modifiedEditor.getOption(59),n=this._originalEditor.getOption(132).wrappingColumn!==-1,i=this._modifiedEditor.getOption(132).wrappingColumn!==-1,o=n||i,r=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,l=this._modifiedEditor._getViewModel().coordinatesConverter,d={original:[],modified:[]};let c=0,u=0,f=0,g=0,m=0,b=0;const v=h((E,x)=>E.afterLineNumber-x.afterLineNumber,"sortMyViewZones"),C=h((E,x)=>{if(x.domNode===null&&E.length>0){const k=E[E.length-1];if(k.afterLineNumber===x.afterLineNumber&&k.domNode===null){k.heightInLines+=x.heightInLines;return}}E.push(x)},"addAndCombineIfPossible"),w=new CL(this._modifiedForeignVZ),y=new CL(this._originalForeignVZ);let S=1,L=1;for(let E=0,x=this._lineChanges.length;E<=x;E++){const k=E<x?this._lineChanges[E]:null;k!==null?(f=k.originalStartLineNumber+(k.originalEndLineNumber>0?-1:0),g=k.modifiedStartLineNumber+(k.modifiedEndLineNumber>0?-1:0),u=k.originalEndLineNumber>0?Il._getViewLineCount(this._originalEditor,k.originalStartLineNumber,k.originalEndLineNumber):0,c=k.modifiedEndLineNumber>0?Il._getViewLineCount(this._modifiedEditor,k.modifiedStartLineNumber,k.modifiedEndLineNumber):0,m=Math.max(k.originalStartLineNumber,k.originalEndLineNumber),b=Math.max(k.modifiedStartLineNumber,k.modifiedEndLineNumber)):(f+=1e7+u,g+=1e7+c,m=f,b=g);let N=[],V=[];if(o){let $;k?k.originalEndLineNumber>0?$=k.originalStartLineNumber-S:$=k.modifiedStartLineNumber-L:$=r.getLineCount()-S+1;for(let ue=0;ue<$;ue++){const de=S+ue,ye=L+ue,Ee=a.getModelLineViewLineCount(de),Le=l.getModelLineViewLineCount(ye);Ee<Le?N.push({afterLineNumber:de,heightInLines:Le-Ee,domNode:null,marginDomNode:null}):Ee>Le&&V.push({afterLineNumber:ye,heightInLines:Ee-Le,domNode:null,marginDomNode:null})}k&&(S=(k.originalEndLineNumber>0?k.originalEndLineNumber:k.originalStartLineNumber)+1,L=(k.modifiedEndLineNumber>0?k.modifiedEndLineNumber:k.modifiedStartLineNumber)+1)}for(;w.current&&w.current.afterLineNumber<=b;){let $;w.current.afterLineNumber<=g?$=f-g+w.current.afterLineNumber:$=m;let ue=null;k&&k.modifiedStartLineNumber<=w.current.afterLineNumber&&w.current.afterLineNumber<=k.modifiedEndLineNumber&&(ue=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),N.push({afterLineNumber:$,heightInLines:w.current.height/t,domNode:null,marginDomNode:ue}),w.advance()}for(;y.current&&y.current.afterLineNumber<=m;){let $;y.current.afterLineNumber<=f?$=g-f+y.current.afterLineNumber:$=b,V.push({afterLineNumber:$,heightInLines:y.current.height/e,domNode:null}),y.advance()}if(k!==null&&nf(k)){const $=this._produceOriginalFromDiff(k,u,c);$&&N.push($)}if(k!==null&&of(k)){const $=this._produceModifiedFromDiff(k,u,c);$&&V.push($)}let F=0,G=0;for(N=N.sort(v),V=V.sort(v);F<N.length&&G<V.length;){const $=N[F],ue=V[G],de=$.afterLineNumber-f,ye=ue.afterLineNumber-g;de<ye?(C(d.original,$),F++):ye<de?(C(d.modified,ue),G++):$.shouldNotShrink?(C(d.original,$),F++):ue.shouldNotShrink?(C(d.modified,ue),G++):$.heightInLines>=ue.heightInLines?($.heightInLines-=ue.heightInLines,G++):(ue.heightInLines-=$.heightInLines,F++)}for(;F<N.length;)C(d.original,N[F]),F++;for(;G<V.length;)C(d.modified,V[G]),G++}return{original:Il._ensureDomNodes(d.original),modified:Il._ensureDomNodes(d.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=T9()),t))}}h(Il,"ViewZonesComputer");function wa(s,e,t,n,i){return{range:new T(s,e,t,n),options:i}}h(wa,"createDecoration");const Ai={charDelete:Pe.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Pe.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Pe.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Pe.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Pe.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:Pe.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+vt.asClassName(DJ),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:Pe.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:Pe.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+vt.asClassName(y9),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:Pe.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class Nr extends VI{constructor(e,t){super(e);this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new jn(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?fd.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let i=Math.floor((e||.5)*n);const o=Math.floor(.5*n);return i=this._disableSash?o:i||o,n>Nr.MINIMUM_EDITOR_WIDTH*2?(i<Nr.MINIMUM_EDITOR_WIDTH&&(i=Nr.MINIMUM_EDITOR_WIDTH),i>n-Nr.MINIMUM_EDITOR_WIDTH&&(i=n-Nr.MINIMUM_EDITOR_WIDTH)):i=o,this._sashPosition!==i&&(this._sashPosition=i),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?fd.ENTIRE_DIFF_OVERVIEW_WIDTH:0),i=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=i/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const i=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new S9(e,t,n,i,o).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const o=this._dataSource.getOriginalEditor(),r=String(this._removeColor),a={decorations:[],overviewZones:[]},l=o.getModel(),d=o._getViewModel();for(const c of t)if(of(c)){a.decorations.push({range:new T(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824),options:i?Ai.lineDeleteWithSign:Ai.lineDelete}),(!nf(c)||!c.charChanges)&&a.decorations.push(wa(c.originalStartLineNumber,1,c.originalEndLineNumber,1073741824,Ai.charDeleteWholeLine));const u=Km(l,d,c.originalStartLineNumber,c.originalEndLineNumber);if(a.overviewZones.push(new If(u.startLineNumber,u.endLineNumber,0,r)),c.charChanges){for(const f of c.charChanges)if(of(f))if(n)for(let g=f.originalStartLineNumber;g<=f.originalEndLineNumber;g++){let m,b;g===f.originalStartLineNumber?m=f.originalStartColumn:m=l.getLineFirstNonWhitespaceColumn(g),g===f.originalEndLineNumber?b=f.originalEndColumn:b=l.getLineLastNonWhitespaceColumn(g),a.decorations.push(wa(g,m,g,b,Ai.charDelete))}else a.decorations.push(wa(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn,Ai.charDelete))}}return a}_getModifiedEditorDecorations(e,t,n,i){const o=this._dataSource.getModifiedEditor(),r=String(this._insertColor),a={decorations:[],overviewZones:[]},l=o.getModel(),d=o._getViewModel();for(const c of t)if(nf(c)){a.decorations.push({range:new T(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:i?Ai.lineInsertWithSign:Ai.lineInsert}),(!of(c)||!c.charChanges)&&a.decorations.push(wa(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,Ai.charInsertWholeLine));const u=Km(l,d,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(a.overviewZones.push(new If(u.startLineNumber,u.endLineNumber,0,r)),c.charChanges){for(const f of c.charChanges)if(nf(f))if(n)for(let g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){let m,b;g===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=l.getLineFirstNonWhitespaceColumn(g),g===f.modifiedEndLineNumber?b=f.modifiedEndColumn:b=l.getLineLastNonWhitespaceColumn(g),a.decorations.push(wa(g,m,g,b,Ai.charInsert))}else a.decorations.push(wa(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Ai.charInsert))}}return a}}h(Nr,"DiffEditorWidgetSideBySide");Nr.MINIMUM_EDITOR_WIDTH=100;class S9 extends Il{constructor(e,t,n,i,o){super(e,t,n,i,o)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}h(S9,"SideBySideViewZonesComputer");class yL extends VI{constructor(e,t){super(e);this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,i){const o=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new x9(e,t,n,o,r,i).getViewZones()}_getOriginalEditorDecorations(e,t,n,i){const o=String(this._removeColor),r={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),l=a.getModel(),d=a._getViewModel();let c=0;for(const u of t)if(of(u)){for(r.decorations.push({range:new T(u.originalStartLineNumber,1,u.originalEndLineNumber,1073741824),options:Ai.lineDeleteMargin});c<e.modified.length;){const m=e.modified[c];if(m.diff&&m.diff.originalStartLineNumber>=u.originalStartLineNumber)break;c++}let f=0;if(c<e.modified.length){const m=e.modified[c];m.diff&&m.diff.originalStartLineNumber===u.originalStartLineNumber&&m.diff.originalEndLineNumber===u.originalEndLineNumber&&m.diff.modifiedStartLineNumber===u.modifiedStartLineNumber&&m.diff.modifiedEndLineNumber===u.modifiedEndLineNumber&&(f=m.heightInLines)}const g=Km(l,d,u.originalStartLineNumber,u.originalEndLineNumber);r.overviewZones.push(new If(g.startLineNumber,g.endLineNumber,f,o))}return r}_getModifiedEditorDecorations(e,t,n,i){const o=this._dataSource.getModifiedEditor(),r=String(this._insertColor),a={decorations:[],overviewZones:[]},l=o.getModel(),d=o._getViewModel();for(const c of t)if(nf(c)){a.decorations.push({range:new T(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824),options:i?Ai.lineInsertWithSign:Ai.lineInsert});const u=Km(l,d,c.modifiedStartLineNumber,c.modifiedEndLineNumber);if(a.overviewZones.push(new If(u.startLineNumber,u.endLineNumber,0,r)),c.charChanges){for(const f of c.charChanges)if(nf(f))if(n)for(let g=f.modifiedStartLineNumber;g<=f.modifiedEndLineNumber;g++){let m,b;g===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=l.getLineFirstNonWhitespaceColumn(g),g===f.modifiedEndLineNumber?b=f.modifiedEndColumn:b=l.getLineLastNonWhitespaceColumn(g),a.decorations.push(wa(g,m,g,b,Ai.charInsert))}else a.decorations.push(wa(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Ai.charInsert))}else a.decorations.push(wa(c.modifiedStartLineNumber,1,c.modifiedEndLineNumber,1073741824,Ai.charInsertWholeLine))}return a}layout(){return Math.max(5,this._decorationsLeft)}}h(yL,"DiffEditorWidgetInline");class x9 extends Il{constructor(e,t,n,i,o,r){super(e,t,n,i,o);this._originalModel=i.getModel(),this._renderIndicators=r,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const i=document.createElement("div");return i.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:i}}_produceModifiedFromDiff(e,t,n){const i=document.createElement("div");i.className=`view-lines line-delete ${Pc}`;const o=document.createElement("div");o.className="inline-deleted-margin-view-zone";const r={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:i,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,i=t.get(44),o=t.get(29),r=i.typicalHalfwidthCharacterWidth,a=t.get(93),l=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),c=t.get(59),f=t.get(131).decorationsWidth,g=t.get(105),m=t.get(88),b=t.get(83),v=t.get(45),C=this._lineBreaksComputer.finalize();let w=0;for(let y=0;y<this._pendingLineChange.length;y++){const S=this._pendingLineChange[y],L=this._pendingViewZones[y],E=L.domNode;ti(E,i);const x=L.marginDomNode;ti(x,i);const k=[];if(S.charChanges)for(const ye of S.charChanges)of(ye)&&k.push(new zu(new T(ye.originalStartLineNumber,ye.originalStartColumn,ye.originalEndLineNumber,ye.originalEndColumn),"char-delete",0));const N=k.length>0,V=Yc(1e4);let F=0,G=0,$=null;for(let ye=S.originalStartLineNumber;ye<=S.originalEndLineNumber;ye++){const Ee=ye-S.originalStartLineNumber,Le=this._originalModel.getLineTokens(ye),Fe=Le.getLineContent(),Ht=C[w++],yt=no.filter(k,ye,1,Fe.length+1);if(Ht){let me=0;for(const _t of Ht.breakOffsets){const ji=Le.sliceAndInflate(me,_t,0),Ti=Fe.substring(me,_t);F=Math.max(F,this._renderOriginalLine(G++,Ti,ji,no.extractWrapped(yt,me,_t),N,l,d,i,o,c,f,g,m,b,v,n,V,x)),me=_t}for($||($=[]);$.length<Ee;)$[$.length]=1;$[Ee]=Ht.breakOffsets.length,L.heightInLines+=Ht.breakOffsets.length-1;const pe=document.createElement("div");pe.className="gutter-delete",e.original.push({afterLineNumber:ye,afterColumn:0,heightInLines:Ht.breakOffsets.length-1,domNode:T9(),marginDomNode:pe})}else F=Math.max(F,this._renderOriginalLine(G++,Fe,Le,yt,N,l,d,i,o,c,f,g,m,b,v,n,V,x))}F+=a;const ue=V.build(),de=w2?w2.createHTML(ue):ue;if(E.innerHTML=de,L.minWidthInPx=F*r,$){const ye=S.originalEndLineNumber-S.originalStartLineNumber;for(;$.length<=ye;)$[$.length]=1}L.diff.viewLineCounts=$}e.original.sort((y,S)=>y.afterLineNumber-S.afterLineNumber)}_renderOriginalLine(e,t,n,i,o,r,a,l,d,c,u,f,g,m,b,v,C,w){C.appendASCIIString('<div class="view-line'),o||C.appendASCIIString(" char-delete"),C.appendASCIIString('" style="top:'),C.appendASCIIString(String(e*c)),C.appendASCIIString('px;width:1000000px;">');const y=oo.isBasicASCII(t,r),S=oo.containsRTL(t,y,a),L=x0(new Id(l.isMonospace&&!d,l.canUseHalfwidthRightwardsArrow,t,!1,y,S,0,n,i,v,0,l.spaceWidth,l.middotWidth,l.wsmiddotWidth,f,g,m,b!==Yi.OFF,null),C);if(C.appendASCIIString("</div>"),this._renderIndicators){const E=document.createElement("div");E.className=`delete-sign ${vt.asClassName(y9)}`,E.setAttribute("style",`position:absolute;top:${e*c}px;width:${u}px;height:${c}px;right:0;`),w.appendChild(E)}return L.characterMapping.getAbsoluteOffset(L.characterMapping.length)}}h(x9,"InlineViewZonesComputer");function IJ(s,e){return Pi(s,e,["off","on","inherit"])}h(IJ,"validateDiffWordWrap");function nf(s){return s.modifiedEndLineNumber>0}h(nf,"isChangeOrInsert");function of(s){return s.originalEndLineNumber>0}h(of,"isChangeOrDelete");function T9(){const s=document.createElement("div");return s.className="diagonal-fill",s}h(T9,"createFakeLinesDiv");function Km(s,e,t,n){const i=s.getLineCount();return t=Math.min(i,Math.max(1,t)),n=Math.min(i,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new T(t,s.getLineMinColumn(t),n,s.getLineMaxColumn(n)))}h(Km,"getViewRange");function C2(s,e){return{enableSplitViewResizing:we(s.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:we(s.renderSideBySide,e.renderSideBySide),maxComputationTime:ux(s.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:ux(s.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:we(s.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:we(s.renderIndicators,e.renderIndicators),originalEditable:we(s.originalEditable,e.originalEditable),diffCodeLens:we(s.diffCodeLens,e.diffCodeLens),renderOverviewRuler:we(s.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:IJ(s.diffWordWrap,e.diffWordWrap)}}h(C2,"validateDiffEditorOptions");function NJ(s,e){return{enableSplitViewResizing:s.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:s.renderSideBySide!==e.renderSideBySide,maxComputationTime:s.maxComputationTime!==e.maxComputationTime,maxFileSize:s.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:s.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:s.renderIndicators!==e.renderIndicators,originalEditable:s.originalEditable!==e.originalEditable,diffCodeLens:s.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:s.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:s.diffWordWrap!==e.diffWordWrap}}h(NJ,"changedDiffEditorOptions");It((s,e)=>{const t=s.getColor(oF);t&&e.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`);const n=s.getColor(rY)||t;n&&e.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${n}; }`);const i=s.getColor(lY)||n;i&&(e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${i}; }`),e.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${i}; }`));const o=s.getColor(sF);o&&e.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${o}; }`);const r=s.getColor(aY)||o;r&&e.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${r}; }`);const a=s.getColor(dY)||r;a&&(e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${a}; }`),e.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${a}; }`));const l=s.getColor(uY);l&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${s.type==="hc"?"dashed":"solid"} ${l}; }`);const d=s.getColor(fY);d&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${s.type==="hc"?"dashed":"solid"} ${d}; }`);const c=s.getColor(vg);c&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${c}; }`);const u=s.getColor(gY);u&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${u}; }`);const f=s.getColor(Gu);f&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${f};
			}
		`);const g=s.getColor($u);g&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${g};
			}
		`);const m=s.getColor(qu);m&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${m};
			}
		`);const b=s.getColor(pY);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${b} 12.5%,
			#0000 12.5%, #0000 50%,
			${b} 50%, ${b} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var AJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},MJ=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let SL=h(class extends z{constructor(e){super();this._themeService=e,this._onCodeEditorAdd=this._register(new P),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new P),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new P),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new P),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}setModelProperty(e,t,n){const i=e.toString();let o;this._modelProperties.has(i)?o=this._modelProperties.get(i):(o=new Map,this._modelProperties.set(i,o)),o.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}},"AbstractCodeEditorService");SL=AJ([MJ(0,Mt)],SL);var RJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},y2=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let vC=h(class extends SL{constructor(e,t){super(t);this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===Me.http||o===Me.https)return T5(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const o={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}},"StandaloneCodeEditorService");vC=RJ([y2(0,De),y2(1,Mt)],vC);it(ht,vC);const K_=Xe("layoutService");var L9=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},k9=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let wC=h(class{constructor(e){this._codeEditorService=e,this.onDidLayout=fe.None}get dimension(){return this._dimension||(this._dimension=D0(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}},"StandaloneLayoutService");wC=L9([k9(0,ht)],wC);let xL=h(class extends wC{constructor(e,t){super(t);this._container=e}get hasContainer(){return!1}get container(){return this._container}},"EditorScopedLayoutService");xL=L9([k9(1,ht)],xL);it(K_,wC);const U_=Xe("dialogService");var PJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},S2=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},tv=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function nv(s){return s.scheme===Me.file?s.fsPath:s.path}h(nv,"getResourceLabel");let E9=0;class Sp{constructor(e,t,n,i,o,r,a){this.id=++E9,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}h(Sp,"ResourceStackElement");class TL{constructor(e,t){this.resourceLabel=e,this.reason=t}}h(TL,"ResourceReasonPair");class LL{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);let n=[];return e.length>0&&n.push(p({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(p({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}h(LL,"RemovedResources");class D9{constructor(e,t,n,i,o,r,a){this.id=++E9,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new LL),this.removedResources.has(t)||this.removedResources.set(t,new TL(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new LL),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new TL(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}h(D9,"WorkspaceStackElement");class BI{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new FI(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const d=this._past[a];n&&(i>=t||d.id!==e.elements[i])&&(n=!1,o=0),!n&&d.type===1&&d.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,r=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}h(BI,"ResourceEditStack");class sw{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}h(sw,"EditStackSnapshot");const I9=new BI("","");I9.locked=!0;let kL=h(class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=rh.None,n=Ks.None){if(e.type===0){const i=nv(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new Sp(e,i,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,o=[],r=[];for(const a of e.resources){const l=nv(a),d=this.getUriComparisonKey(a);i.has(d)||(i.add(d),o.push(l),r.push(d))}o.length===1?this._pushElement(new Sp(e,o[0],r[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new D9(e,o,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],o=e.strResources[t];let r;this._editStacks.has(o)?r=this._editStacks.get(o):(r=new BI(i,o),this._editStacks.set(o,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const o of n){const r=nv(o.resource),a=this.getUriComparisonKey(o.resource),l=new Sp(o,r,a,0,0,0,0);i.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const o of n){const r=nv(o.resource),a=this.getUriComparisonKey(o.resource),l=new Sp(o,r,a,0,0,0,0);i.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new FI(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestPastElement();!r||r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,n=i)}return[t,n]}canUndo(e){if(e instanceof Ks){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Ne(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,o){const r=this._acquireLocks(n);let a;try{a=t()}catch(l){return r(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),i.dispose(),o()),l=>(r(),i.dispose(),this._onError(l,e))):(r(),i.dispose(),o())}_invokeWorkspacePrepare(e){return tv(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return z.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?z.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(z.None);const n=e.actual.prepareUndoRedo();return n?bD(n)?t(n):n.then(i=>t(i)):t(z.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||I9);return new sw(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new xp(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(i),new xp}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,i,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(!!n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,i){return tv(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Ot.Info,p("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[p({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),p("nok","Undo this File"),p("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const l=this._checkWorkspaceUndo(e,t,n,!1);if(l)return l.returnValue;i=!0}let o;try{o=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,n,!0);if(r)return o.dispose(),r.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,o,()=>this._continueUndoInGroup(t.groupId,i))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=p({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new sw([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestPastElement();!r||r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Ks){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),o=i.getClosestPastElement();if(!o)return;if(o.groupId){const[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,n)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,n):this._resourceUndo(i,o,n)}finally{}}_confirmAndContinueUndo(e,t,n){return tv(this,void 0,void 0,function*(){if((yield this._dialogService.show(Ot.Info,p("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[p("confirmDifferentSource.yes","Yes"),p("confirmDifferentSource.no","No")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestFutureElement();!r||r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,n=i)}return[t,n]}canRedo(e){if(e instanceof Ks){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new xp(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(i),new xp}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return tv(this,void 0,void 0,function*(){let i;try{i=yield this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const o=this._checkWorkspaceRedo(e,t,n,!0);if(o)return i.dispose(),o.returnValue;for(const r of n.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=p({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new sw([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestFutureElement();!r||r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Ks){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(!!n){if(n.groupId){const[i,o]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&o)return this._redo(o)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}},"UndoRedoService");kL=PJ([S2(0,U_),S2(1,cn)],kL);class xp{constructor(e){this.returnValue=e}}h(xp,"WorkspaceVerificationError");it(a1,kL);var x2,T2;class N9{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}h(N9,"StringIterator");class A9{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?xD(e,this._value,0,e.length,this._from,this._to):w_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}h(A9,"ConfigKeysIterator");class M9{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?xD(e,this._value,0,e.length,this._from,this._to):w_(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}h(M9,"PathIterator");class R9{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new M9(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return rT(e,this._value.scheme);if(this._states[this._stateIdx]===2)return rT(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return hm(e,this._value.query);if(this._states[this._stateIdx]===5)return hm(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}h(R9,"UriIterator");class Tp{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}h(Tp,"TernarySearchTreeNode");class Wc{constructor(e){this._iter=e}static forUris(e=()=>!1){return new Wc(new R9(e))}static forStrings(){return new Wc(new N9)}static forConfigKeys(){return new Wc(new A9)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new Tp,this._root.segment=n.value());const o=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new Tp,i.left.segment=n.value()),o.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new Tp,i.right.segment=n.value()),o.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new Tp,i.mid.segment=n.value()),o.push([0,i]),i=i.mid;else break}const r=i.value;i.value=t,i.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const d=l.balanceFactor();if(d<-1||d>1){const c=o[a][0],u=o[a+1][0];if(c===1&&u===1)o[a][1]=l.rotateLeft();else if(c===-1&&u===-1)o[a][1]=l.rotateRight();else if(c===1&&u===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(c===-1&&u===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return r}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),o=[];let r=this._root;for(;r;){const a=i.cmp(r.segment);if(a>0)o.push([-1,r]),r=r.left;else if(a<0)o.push([1,r]),r=r.right;else if(i.hasNext())i.next(),o.push([0,r]),r=r.mid;else break}if(!!r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const a=this._min(r.right),{key:l,value:d,segment:c}=a;this._delete(a.key,!1),r.key=l,r.value=d,r.segment=c}else{const a=(n=r.left)!==null&&n!==void 0?n:r.right;if(o.length>0){const[l,d]=o[o.length-1];switch(l){case-1:d.left=a;break;case 0:d.mid=a;break;case 1:d.right=a;break}}else this._root=a}for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const d=l.balanceFactor();if(d>1?(l.right.balanceFactor()>=0||(l.right=l.right.rotateRight()),o[a][1]=l.rotateLeft()):d<-1&&(l.left.balanceFactor()<=0||(l.left=l.left.rotateLeft()),o[a][1]=l.rotateRight()),a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){!e||(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}h(Wc,"TernarySearchTree");class P9{constructor(e,t){this.uri=e,this.value=t}}h(P9,"ResourceMapEntry");class li{constructor(e,t){this[x2]="ResourceMap",e instanceof li?(this.map=new Map(e.map),this.toKey=t??li.defaultToKey):(this.map=new Map,this.toKey=e??li.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new P9(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(x2=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}h(li,"ResourceMap");li.defaultToKey=s=>s.toString();class O9{constructor(){this[T2]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(!!n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(T2=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}h(O9,"LinkedMap");class Qa extends O9{constructor(e,t=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}h(Qa,"LRUCache");function qi(s,e,t){return Math.min(Math.max(s,e),t)}h(qi,"clamp");class HI{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}h(HI,"MovingAverage");class F9{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}h(F9,"SlidingWindowAverage");var OJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},FJ=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const os=Xe("ILanguageFeatureDebounceService");var CC;(function(s){const e=new WeakMap;let t=0;function n(i){let o=e.get(i);return o===void 0&&(o=++t,e.set(i,o)),o}h(n,"of"),s.of=n})(CC||(CC={}));class W9{constructor(e,t,n,i,o,r){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=o,this._max=r,this._cache=new Qa(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>w0(CC.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?qi(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let i=this._cache.get(n);i||(i=new F9(6),this._cache.set(n,i));const o=qi(i.update(t),this._min,this._max);return this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){const e=new HI;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return qi(e,this._min,this._max)}}h(W9,"FeatureDebounceInformation");let EL=h(class{constructor(e){this._logService=e,this._data=new Map}for(e,t,n){var i,o,r;const a=(i=n?.min)!==null&&i!==void 0?i:50,l=(o=n?.max)!==null&&o!==void 0?o:Math.pow(a,2),d=(r=n?.key)!==null&&r!==void 0?r:void 0,c=`${CC.of(e)},${a}${d?","+d:""}`;let u=this._data.get(c);return u||(u=new W9(this._logService,t,e,this._overallAverage()|0||a*1.5,a,l),this._data.set(c,u)),u}_overallAverage(){let e=new HI;for(let t of this._data.values())e.update(t.default());return e.value}},"LanguageFeatureDebounceService");EL=OJ([FJ(0,Cs)],EL);it(os,EL,!0);const zI=Xe("IWorkspaceEditService");function WJ(s){return Wi(s)&&(Boolean(s.newUri)||Boolean(s.oldUri))}h(WJ,"isWorkspaceFileEdit");function VJ(s){return Wi(s)&&Ce.isUri(s.resource)&&Wi(s.edit)}h(VJ,"isWorkspaceTextEdit");class j_{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(VJ(t))return new KI(t.resource,t.edit,t.modelVersionId,t.metadata);if(WJ(t))return new V9(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}h(j_,"ResourceEdit");class KI extends j_{constructor(e,t,n,i){super(i);this.resource=e,this.textEdit=t,this.versionId=n}}h(KI,"ResourceTextEdit");class V9 extends j_{constructor(e,t,n,i){super(i);this.oldResource=e,this.newResource=t,this.options=n}}h(V9,"ResourceFileEdit");const BJ=Object.freeze({id:"editor",order:5,type:"object",title:p("editorConfigurationTitle","Editor"),scope:5}),yC=Object.assign(Object.assign({},BJ),{properties:{"editor.tabSize":{type:"number",default:ri.tabSize,minimum:1,markdownDescription:p("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:ri.insertSpaces,markdownDescription:p("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:ri.detectIndentation,markdownDescription:p("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:ri.trimAutoWhitespace,description:p("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:ri.largeFileOptimizations,description:p("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:p("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[p("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),p("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),p("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:p("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[p("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),p("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),p("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:p("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:p("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:p("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:p("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:p("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:p("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:p("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:p("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:p("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:p("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:p("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function HJ(s){return typeof s.type<"u"||typeof s.anyOf<"u"}h(HJ,"isConfigurationPropertySchema");for(const s of Du){const e=s.schema;if(typeof e<"u")if(HJ(e))yC.properties[`editor.${s.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(yC.properties[t]=e[t])}let iv=null;function B9(){return iv===null&&(iv=Object.create(null),Object.keys(yC.properties).forEach(s=>{iv[s]=!0})),iv}h(B9,"getEditorConfigurationKeys");function zJ(s){return B9()[`editor.${s}`]||!1}h(zJ,"isEditorConfigurationKey");function KJ(s){return B9()[`diffEditor.${s}`]||!1}h(KJ,"isDiffEditorConfigurationKey");const UJ=dn.as(zh.Configuration);UJ.registerConfiguration(yC);class jt{static insert(e,t){return{range:new T(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}h(jt,"EditOperation");class mo{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?rM(this.contents,e):this.contents}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?rM(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=ba(this.contents),n=ba(this.overrides),i=[...this.keys];for(const o of e){this.mergeContents(t,o.contents);for(const r of o.overrides){const[a]=n.filter(l=>xo(l.identifiers,r.identifiers));a?(this.mergeContents(a.contents,r.contents),a.keys.push(...r.keys),a.keys=Yl(a.keys)):n.push(ba(r))}for(const r of o.keys)i.indexOf(r)===-1&&i.push(r)}return new mo(t,i,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const i of Yl([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[i],r=t[i];r&&(typeof o=="object"&&typeof r=="object"?(o=ba(o),this.mergeContents(o,r)):o=r),n[i]=o}return new mo(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Wi(e[n])&&Wi(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=ba(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?Aj(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=h(o=>{o&&(n?this.mergeContents(n,o):n=ba(o))},"mergeContents");for(const o of this.overrides)xo(o.identifiers,[e])?t=o.contents:o.identifiers.includes(e)&&i(o.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),PD(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&GG(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}h(mo,"ConfigurationModel");class H9 extends mo{constructor(e={}){const t=dn.as(zh.Configuration).getConfigurationProperties(),n=Object.keys(t),i=Object.create(null),o=[];for(const r in t){const a=e[r],l=a!==void 0?a:t[r].default;PD(i,r,l,d=>console.error(`Conflict in default settings: ${d}`))}for(const r of Object.keys(i))Mm.test(r)&&o.push({identifiers:t7(r),keys:Object.keys(i[r]),contents:f4(i[r],a=>console.error(`Conflict in default settings file: ${a}`))});super(i,n,o)}}h(H9,"DefaultConfigurationModel");class G_{constructor(e,t,n=new mo,i=new mo,o=new li,r=new mo,a=new li,l=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=i,this._folderConfigurations=o,this._memoryConfiguration=r,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new li,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=new mo,this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidateConfigurationModel(t,n),o=this.getFolderConfigurationModelForResource(t.resource,n),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),l=t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),d=t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),c=t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),u=n?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,f=o?t.overrideIdentifier?o.freeze().override(t.overrideIdentifier).getValue(e):o.freeze().getValue(e):void 0,g=t.overrideIdentifier?r.override(t.overrideIdentifier).getValue(e):r.getValue(e),m=i.getValue(e),b=Yl(hD(i.overrides.map(v=>v.identifiers))).filter(v=>i.getOverrideValue(e,v)!==void 0);return{defaultValue:a,userValue:l,userLocalValue:d,userRemoteValue:c,workspaceValue:u,workspaceFolderValue:f,memoryValue:g,value:m,default:a!==void 0?{value:this._defaultConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,user:l!==void 0?{value:this.userConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userLocal:d!==void 0?{value:this.localUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,userRemote:c!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspace:u!==void 0?{value:this._workspaceConfiguration.freeze().getValue(e),override:t.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,workspaceFolder:f!==void 0?{value:o?.freeze().getValue(e),override:t.overrideIdentifier?o?.freeze().getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,memory:g!==void 0?{value:r.getValue(e),override:t.overrideIdentifier?r.getOverrideValue(e,t.overrideIdentifier):void 0}:void 0,overrideIdentifiers:b.length?b:void 0}}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const o=this._memoryConfigurationByResource.get(e);o&&(n=n.merge(o))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:o}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),i=this.parseConfigurationModel(e.workspace),o=e.folders.reduce((r,a)=>(r.set(Ce.revive(a[0]),this.parseConfigurationModel(a[1])),r),new li);return new G_(t,n,new mo,i,o,new mo,new li,!1)}static parseConfigurationModel(e){return new mo(e.contents,e.keys,e.overrides).freeze()}}h(G_,"Configuration");class z9{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._previousConfiguration=void 0;const o=new Set;e.keys.forEach(a=>o.add(a)),e.overrides.forEach(([,a])=>a.forEach(l=>o.add(l))),this.affectedKeys=[...o.values()];const r=new mo;this.affectedKeys.forEach(a=>r.setValue(a,{})),this.affectedKeysTree=r.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=G_.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const i=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,o=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Go(i,o)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=f4({[t]:!0},()=>{}),i;for(;typeof n=="object"&&(i=Object.keys(n)[0]);){if(e=e[i],!e)return!1;n=n[i]}return!0}}h(z9,"ConfigurationChangeEvent");const jJ=/^(cursor|delete)/;class K9 extends z{constructor(e,t,n,i,o){super();this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=o,this._onDidUpdateKeybindings=this._register(new P),this._currentChord=null,this._currentChordChecker=new mg,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=yc.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Ki,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:fe.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(!!n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[i]=n.getDispatchParts();if(i===null)return null;const o=this._contextKeyService.getContext(t),r=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(o,r,i)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(p("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchParts();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=yc.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=yc.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=n.getParts();return this._ignoreSingleModifiers=new yc(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let i=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let o=null,r=null;if(n){const[c]=e.getSingleModifierDispatchParts();o=c,r=c}else[o]=e.getDispatchParts(),r=this._currentChord?this._currentChord.keypress:null;if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(t),l=e.getLabel(),d=this._getResolver().resolve(a,r,o);return this._logService.trace("KeybindingService#dispatch",l,d?.commandId),d&&d.enterChord?(i=!0,this._enterChordMode(o,l),i):(this._currentChord&&(!d||!d.commandId)&&(this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,l),{hideAfter:10*1e3}),i=!0),this._leaveChordMode(),d&&d.commandId&&(d.bubble||(i=!0),typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,c=>this._notificationService.warn(c)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,c=>this._notificationService.warn(c)),jJ.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding"})),i)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}h(K9,"AbstractKeybindingService");class yc{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}h(yc,"KeybindingModifierSet");yc.EMPTY=new yc(null);const Xt=Xe("keybindingService");class sf{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const i of e){const o=i.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=sf.handleRemovals([].concat(e).concat(t));for(let i=0,o=this._keybindings.length;i<o;i++){let r=this._keybindings[i];r.keypressParts.length!==0&&(r.when&&r.when.type===0||this._addKeyPress(r.keypressParts[0],r))}}static _isTargetedForRemoval(e,t,n,i){return!(t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||i&&(!e.when||!dq(i,e.when)))}static handleRemovals(e){const t=new Map;for(let i=0,o=e.length;i<o;i++){const r=e[i];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const n=[];for(let i=0,o=e.length;i<o;i++){const r=e[i];if(!r.command||r.command.length===0){n.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){n.push(r);continue}let l=!1;for(const d of a){const c=d.keypressParts[0],u=d.keypressParts[1],f=d.when;if(this._isTargetedForRemoval(r,c,u,f)){l=!0;break}}if(!l){n.push(r);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){let o=n[i];if(o.command===t.command)continue;const r=o.keypressParts.length>1,a=t.keypressParts.length>1;r&&a&&o.keypressParts[1]!==t.keypressParts[1]||sf.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:E5(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const o=n[i];if(t.contextMatchesRules(o.when))return o}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let i=null;if(t!==null){const r=this._map.get(t);if(typeof r>"u")return this._log("\\ No keybinding entries."),null;i=[];for(let a=0,l=r.length;a<l;a++){let d=r[a];d.keypressParts[1]===n&&i.push(d)}}else{const r=this._map.get(n);if(typeof r>"u")return this._log("\\ No keybinding entries."),null;i=r}let o=this._findCommand(e,i);return o?t===null&&o.keypressParts.length>1&&o.keypressParts[1]!==null?(this._log(`\\ From ${i.length} keybinding entries, matched chord, when: ${L2(o.when)}, source: ${k2(o)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${i.length} keybinding entries, matched ${o.command}, when: ${L2(o.when)}, source: ${k2(o)}.`),{enterChord:!1,leaveChord:o.keypressParts.length>1,commandId:o.command,commandArgs:o.commandArgs,bubble:o.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let i=t[n];if(!!sf._contextMatchesRules(e,i.when))return i}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}h(sf,"KeybindingResolver");function L2(s){return s?`${s.serialize()}`:"no when condition"}h(L2,"printWhenExplanation");function k2(s){return s.extensionId?s.isBuiltinExtension?`built-in extension ${s.extensionId}`:`user extension ${s.extensionId}`:s.isDefault?"built-in":"user"}h(k2,"printSourceExplanation");class DL{constructor(e,t,n,i,o,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?IL(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=IL(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=a}}h(DL,"ResolvedKeybindingItem");function IL(s){let e=[];for(let t=0,n=s.length;t<n;t++){const i=s[t];if(!i)return e;e.push(i)}return e}h(IL,"removeElementsAfterNulls");class $_{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=n(a);if(l===null)return null;i[o]=qJ(a,l,this.modifierLabels[e])}return i.join(" ")}}h($_,"ModifierLabelProvider");const UI=new $_({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),GJ=new $_({ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:p({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),$J=new $_({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new $_({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function qJ(s,e,t){if(e===null)return"";const n=[];return s.ctrlKey&&n.push(t.ctrlKey),s.shiftKey&&n.push(t.shiftKey),s.altKey&&n.push(t.altKey),s.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}h(qJ,"_simpleAsString");class U9 extends h5{constructor(e,t){super();if(t.length===0)throw Js("parts");this._os=e,this._parts=t}getLabel(){return UI.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return GJ.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:$J.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new c5(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}h(U9,"BaseResolvedKeybinding");class Ff extends U9{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return fc.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":fc.toString(e.keyCode)}_getElectronAccelerator(e){return fc.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return Ff.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=fc.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=vD[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Ql)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Ql(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=IL(e.map(i=>this._resolveSimpleUserBinding(i)));return n.length>0?[new Ff(new bm(n),t)]:[]}}h(Ff,"USLayoutResolvedKeybinding");const q_=Xe("labelService"),j9=Xe("contextService");function E2(s){const e=s;return typeof e?.id=="string"&&Ce.isUri(e.uri)}h(E2,"isSingleFolderWorkspaceIdentifier");function YJ(s){if(s.configuration)return{id:s.id,configPath:s.configuration};if(s.folders.length===1)return{id:s.id,uri:s.folders[0].uri}}h(YJ,"toWorkspaceIdentifier");class G9{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}h(G9,"WorkspaceFolder");const NL="code-workspace";p("codeWorkspace","Code Workspace");var un;(function(s){s.noSelection=p("noSelection","No selection"),s.singleSelectionRange=p("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),s.singleSelection=p("singleSelection","Line {0}, Column {1}"),s.multiSelectionRange=p("multiSelectionRange","{0} selections ({1} characters selected)"),s.multiSelection=p("multiSelection","{0} selections"),s.emergencyConfOn=p("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),s.openingDocs=p("openingDocs","Now opening the Editor Accessibility documentation page."),s.readonlyDiffEditor=p("readonlyDiffEditor"," in a read-only pane of a diff editor."),s.editableDiffEditor=p("editableDiffEditor"," in a pane of a diff editor."),s.readonlyEditor=p("readonlyEditor"," in a read-only code editor"),s.editableEditor=p("editableEditor"," in a code editor"),s.changeConfigToOnMac=p("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),s.changeConfigToOnWinLinux=p("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),s.auto_on=p("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),s.auto_off=p("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),s.tabFocusModeOnMsg=p("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),s.tabFocusModeOnMsgNoKb=p("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),s.tabFocusModeOffMsg=p("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),s.tabFocusModeOffMsgNoKb=p("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),s.openDocMac=p("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),s.openDocWinLinux=p("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),s.outroMsg=p("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),s.showAccessibilityHelpAction=p("showAccessibilityHelpAction","Show Accessibility Help")})(un||(un={}));var AL;(function(s){s.inspectTokensAction=p("inspectTokens","Developer: Inspect Tokens")})(AL||(AL={}));var SC;(function(s){s.gotoLineActionLabel=p("gotoLineActionLabel","Go to Line/Column...")})(SC||(SC={}));var ML;(function(s){s.helpQuickAccessActionLabel=p("helpQuickAccess","Show all Quick Access Providers")})(ML||(ML={}));var xC;(function(s){s.quickCommandActionLabel=p("quickCommandActionLabel","Command Palette"),s.quickCommandHelp=p("quickCommandActionHelp","Show And Run Commands")})(xC||(xC={}));var Um;(function(s){s.quickOutlineActionLabel=p("quickOutlineActionLabel","Go to Symbol..."),s.quickOutlineByCategoryActionLabel=p("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(Um||(Um={}));var TC;(function(s){s.editorViewAccessibleLabel=p("editorViewAccessibleLabel","Editor content"),s.accessibilityHelpMessage=p("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(TC||(TC={}));var RL;(function(s){s.toggleHighContrast=p("toggleHighContrast","Toggle High Contrast Theme")})(RL||(RL={}));var PL;(function(s){s.bulkEditServiceSummary=p("bulkEditServiceSummary","Made {0} edits in {1} files")})(PL||(PL={}));const $9=Xe("workspaceTrustManagementService");var Jn;(function(s){function e(o,r){if(o.start>=r.end||r.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,r.start),l=Math.min(o.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}h(e,"intersect"),s.intersect=e;function t(o){return o.end-o.start<=0}h(t,"isEmpty"),s.isEmpty=t;function n(o,r){return!t(e(o,r))}h(n,"intersects"),s.intersects=n;function i(o,r){const a=[],l={start:o.start,end:Math.min(r.start,o.end)},d={start:Math.max(r.end,o.start),end:o.end};return t(l)||a.push(l),t(d)||a.push(d),a}h(i,"relativeComplement"),s.relativeComplement=i})(Jn||(Jn={}));var Nl;(function(s){s[s.AVOID=0]="AVOID",s[s.ALIGN=1]="ALIGN"})(Nl||(Nl={}));function Ru(s,e,t){const n=t.mode===Nl.ALIGN?t.offset:t.offset+t.size,i=t.mode===Nl.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=s-n?n:e<=i?i-e:Math.max(s-e,0):e<=i?i-e:e<=s-n?n:0}h(Ru,"layout");class ah extends z{constructor(e,t){super();this.container=null,this.delegate=null,this.toDisposeOnClean=z.None,this.toDisposeOnSetContainer=z.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=X(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,Oi(this.view),this.setContainer(e,t),this._register(He(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=X(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=XJ,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(X("slot"))}else this.container.appendChild(this.view);const i=new Q;ah.BUBBLE_UP_EVENTS.forEach(o=>{i.add(Wn(this.container,o,r=>{this.onDOMEvent(r,!1)}))}),ah.BUBBLE_DOWN_EVENTS.forEach(o=>{i.add(Wn(this.container,o,r=>{this.onDOMEvent(r,!0)},!0))}),this.toDisposeOnSetContainer=i}}show(e){this.isVisible()&&this.hide(),Sn(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",bo(this.view),this.toDisposeOnClean=e.render(this.view)||z.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(!!this.isVisible()){if(this.delegate.canRelayout===!1&&!(tr&&E0.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(S5(e)){let u=$n(e);t={top:u.top,left:u.left,width:u.width,height:u.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=ds(this.view),i=NT(this.view),o=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,d;if(a===0){const u={offset:t.top-window.pageYOffset,size:t.height,position:o===0?0:1},f={offset:t.left,size:t.width,position:r===0?0:1,mode:Nl.ALIGN};l=Ru(window.innerHeight,i,u)+window.pageYOffset,Jn.intersects({start:l,end:l+i},{start:u.offset,end:u.offset+u.size})&&(f.mode=Nl.AVOID),d=Ru(window.innerWidth,n,f)}else{const u={offset:t.left,size:t.width,position:r===0?0:1},f={offset:t.top,size:t.height,position:o===0?0:1,mode:Nl.ALIGN};d=Ru(window.innerWidth,n,u),Jn.intersects({start:d,end:d+n},{start:u.offset,end:u.offset+u.size})&&(f.mode=Nl.AVOID),l=Ru(window.innerHeight,i,f)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const c=$n(this.container);this.view.style.top=`${l-(this.useFixedPosition?$n(this.view).top:c.top)}px`,this.view.style.left=`${d-(this.useFixedPosition?$n(this.view).left:c.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Oi(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!Oa(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}h(ah,"ContextView");ah.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];ah.BUBBLE_DOWN_EVENTS=["click"];let XJ=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var ZJ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},JJ=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let OL=h(class extends z{constructor(e){super();this.layoutService=e,this.currentViewDisposable=z.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new ah(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const i=He(()=>{this.currentViewDisposable===i&&this.hideContextView()});return this.currentViewDisposable=i,i}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}},"ContextViewService");OL=ZJ([JJ(0,K_)],OL);const uS="**",D2="/",rw="[/\\\\]",aw="[^/\\\\]",QJ=/\//g;function I2(s){switch(s){case 0:return"";case 1:return`${aw}*?`;default:return`(?:${rw}|${aw}+${rw}|${rw}${aw}+)*?`}}h(I2,"starsToRegExp");function N2(s,e){if(!s)return[];const t=[];let n=!1,i=!1,o="";for(const r of s){switch(r){case e:if(!n&&!i){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=r}return o&&t.push(o),t}h(N2,"splitGlobAware");function q9(s){if(!s)return"";let e="";const t=N2(s,D2);if(t.every(n=>n===uS))e=".*";else{let n=!1;t.forEach((i,o)=>{if(i===uS){n||(e+=I2(2),n=!0);return}let r=!1,a="",l=!1,d="";for(const c of i){if(c!=="}"&&r){a+=c;continue}if(l&&(c!=="]"||!d)){let u;c==="-"?u=c:(c==="^"||c==="!")&&!d?u="^":c===D2?u="":u=Xo(c),d+=u;continue}switch(c){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{e+=`(?:${N2(a,",").map(g=>q9(g)).join("|")})`,r=!1,a="";break}case"]":e+="["+d+"]",l=!1,d="";break;case"?":e+=aw;continue;case"*":e+=I2(1);continue;default:e+=Xo(c)}}o<t.length-1&&(t[o+1]!==uS||o+2<t.length)&&(e+=rw),n=!1})}return e}h(q9,"parseRegExp");const eQ=/^\*\*\/\*\.[\w\.-]+$/,tQ=/^\*\*\/([\w\.-]+)\/?$/,nQ=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,iQ=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,oQ=/^\*\*((\/[\w\.-]+)+)\/?$/,sQ=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,A2=new Qa(1e4),M2=h(function(){return!1},"FALSE"),Vr=h(function(){return null},"NULL");function jI(s,e){if(!s)return Vr;let t;typeof s!="string"?t=s.pattern:t=s,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=A2.get(n);if(i)return R2(i,s);let o;if(eQ.test(t)){const r=t.substr(4);i=h(function(a,l){return typeof a=="string"&&a.endsWith(r)?t:null},"parsedPattern")}else(o=tQ.exec(fS(t,e)))?i=rQ(o[1],t):(e.trimForExclusions?iQ:nQ).test(t)?i=aQ(t,e):(o=oQ.exec(fS(t,e)))?i=P2(o[1].substr(1),t,!0):(o=sQ.exec(fS(t,e)))?i=P2(o[1],t,!1):i=lQ(t);return A2.set(n,i),R2(i,s)}h(jI,"parsePattern");function R2(s,e){return typeof e=="string"?s:function(t,n){return dL(t,e.base,!ni)?s(t.substr(e.base.length+1),n):null}}h(R2,"wrapRelativePattern");function fS(s,e){return e.trimForExclusions&&s.endsWith("/**")?s.substr(0,s.length-2):s}h(fS,"trimForExclusions");function rQ(s,e){const t=`/${s}`,n=`\\${s}`,i=h(function(r,a){return typeof r!="string"?null:a?a===s?e:null:r===s||r.endsWith(t)||r.endsWith(n)?e:null},"parsedPattern"),o=[s];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}h(rQ,"trivia2");function aQ(s,e){const t=X9(s.slice(1,-1).split(",").map(a=>jI(a,e)).filter(a=>a!==Vr),s),n=t.length;if(!n)return Vr;if(n===1)return t[0];const i=h(function(a,l){for(let d=0,c=t.length;d<c;d++)if(t[d](a,l))return s;return null},"parsedPattern"),o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}h(aQ,"trivia3");function P2(s,e,t){const n=Pr===an.sep,i=n?s:s.replace(QJ,Pr),o=Pr+i,r=an.sep+s,a=t?function(l,d){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===s||l.endsWith(r)))?e:null}:function(l,d){return typeof l=="string"&&(l===i||!n&&l===s)?e:null};return a.allPaths=[(t?"*/":"./")+s],a}h(P2,"trivia4and5");function lQ(s){try{const e=new RegExp(`^${q9(s)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?s:null}}catch{return Vr}}h(lQ,"toRegExp");function dQ(s,e,t){return!s||typeof e!="string"?!1:Y9(s)(e,void 0,t)}h(dQ,"match");function Y9(s,e={}){if(!s)return M2;if(typeof s=="string"||cQ(s)){const t=jI(s,e);if(t===Vr)return M2;const n=h(function(i,o){return!!t(i,o)},"resultPattern");return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return hQ(s,e)}h(Y9,"parse$1");function cQ(s){const e=s;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}h(cQ,"isRelativePattern");function hQ(s,e){const t=X9(Object.getOwnPropertyNames(s).map(a=>uQ(a,s[a],e)).filter(a=>a!==Vr)),n=t.length;if(!n)return Vr;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=h(function(c,u){for(let f=0,g=t.length;f<g;f++){const m=t[f](c,u);if(m)return m}return null},"resultExpression"),l=t.find(c=>!!c.allBasenames);l&&(a.allBasenames=l.allBasenames);const d=t.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return d.length&&(a.allPaths=d),a}const i=h(function(a,l,d){let c;for(let u=0,f=t.length;u<f;u++){const g=t[u];g.requiresSiblings&&d&&(l||(l=Lc(a)),c||(c=l.substr(0,l.length-nG(a).length)));const m=g(a,l,c,d);if(m)return m}return null},"resultExpression"),o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}h(hQ,"parsedExpression");function uQ(s,e,t){if(e===!1)return Vr;const n=jI(s,t);if(n===Vr)return Vr;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const o=h((r,a,l,d)=>{if(!d||!n(r,a))return null;const c=i.replace("$(basename)",l),u=d(c);return XG(u)?u.then(f=>f?s:null):u?s:null},"result");return o.requiresSiblings=!0,o}}return n}h(uQ,"parseExpressionPattern");function X9(s,e){const t=s.filter(a=>!!a.basenames);if(t.length<2)return s;const n=t.reduce((a,l)=>{const d=l.basenames;return d?a.concat(d):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const d=l.patterns;return d?a.concat(d):a},[]);const o=h(function(a,l){if(typeof a!="string")return null;if(!l){let c;for(c=a.length;c>0;c--){const u=a.charCodeAt(c-1);if(u===47||u===92)break}l=a.substr(c)}const d=n.indexOf(l);return d!==-1?i[d]:null},"aggregate");o.basenames=n,o.patterns=i,o.allBasenames=n;const r=s.filter(a=>!a.basenames);return r.push(o),r}h(X9,"aggregateBasenameMatches");let Wf=[],GI=[],Z9=[];function ov(s,e=!1){fQ(s,!1,e)}h(ov,"registerPlatformLanguageAssociation");function fQ(s,e,t){const n=gQ(s,e);Wf.push(n),n.userConfigured?Z9.push(n):GI.push(n),t&&!n.userConfigured&&Wf.forEach(i=>{i.mime===n.mime||i.userConfigured||(n.extension&&i.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&i.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&i.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&i.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}h(fQ,"_registerLanguageAssociation");function gQ(s,e){return{id:s.id,mime:s.mime,filename:s.filename,extension:s.extension,filepattern:s.filepattern,firstline:s.firstline,userConfigured:e,filenameLowercase:s.filename?s.filename.toLowerCase():void 0,extensionLowercase:s.extension?s.extension.toLowerCase():void 0,filepatternLowercase:s.filepattern?Y9(s.filepattern.toLowerCase()):void 0,filepatternOnPath:s.filepattern?s.filepattern.indexOf(an.sep)>=0:!1}}h(gQ,"toLanguageAssociationItem");function pQ(){Wf=Wf.filter(s=>s.userConfigured),GI=[]}h(pQ,"clearPlatformLanguageAssociations");function mQ(s,e){let t;if(s)switch(s.scheme){case Me.file:t=s.fsPath;break;case Me.data:{t=cd.parseMetaData(s).get(cd.META_DATA_LABEL);break}default:t=s.path}if(!t)return[zs.unknown];t=t.toLowerCase();const n=Lc(t),i=O2(t,n,Z9);if(i)return[i,zs.text];const o=O2(t,n,GI);if(o)return[o,zs.text];if(e){const r=_Q(e);if(r)return[r,zs.text]}return[zs.unknown]}h(mQ,"getMimeTypes");function O2(s,e,t){var n;let i,o,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!o||l.filepattern.length>o.filepattern.length)){const d=l.filepatternOnPath?s:e;!((n=l.filepatternLowercase)===null||n===void 0)&&n.call(l,d)&&(o=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(i)return i.mime;if(o)return o.mime;if(r)return r.mime}h(O2,"getMimeByPath");function _Q(s){if(DD(s)&&(s=s.substr(1)),s.length>0)for(let e=Wf.length-1;e>=0;e--){const t=Wf[e];if(!t.firstline)continue;const n=s.match(t.firstline);if(n&&n.length>0)return t.mime}}h(_Q,"getMimeByFirstline");const sv=Object.prototype.hasOwnProperty,FL="vs.editor.nullLanguage";fn.register(FL,{});class J9{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(FL,0),this._register(Zr,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||FL}}h(J9,"LanguageIdCodec");class Vf extends z{constructor(e=!0,t=!1){super();this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,Vf.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new J9,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Af.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){Vf.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},pQ();const e=[].concat(Af.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),dn.as(zh.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;sv.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)ov({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)ov({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)ov({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);mG(l)||ov({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){Ne(l)}}e.aliases.push(n);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);const r=o!==null&&o.length>0;if(!(r&&o[0]===null)){const a=(r?o[0]:null)||n;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?sv.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return sv.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&sv.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){if(!e&&!t)return[];const n=mQ(e,t);return Mh(n.map(i=>this.getLanguageIdByMimeType(i)))}}h(Vf,"LanguagesRegistry");Vf.instanceCount=0;class Bf extends z{constructor(e=!1){super();this._onDidEncounterLanguage=this._register(new P),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new P({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,Bf.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new Vf(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){Bf.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return FP(n,null)}createById(e){return new WL(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new WL(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Zr),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),Ft.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}}h(Bf,"LanguageService");Bf.instanceCount=0;class WL{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new P({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._emitter&&this._emitter.fire(this.languageId))}}h(WL,"LanguageSelection");function F2(s){let e=s.definition;for(;e instanceof _;)e=e.definition;return`.codicon-${s.id}:before { content: '${e.fontCharacter}'; }`}h(F2,"formatRule");function $I(...s){return function(e,t){for(let n=0,i=s.length;n<i;n++){const o=s[n](e,t);if(o)return o}return null}}h($I,"or");Q9.bind(void 0,!1);const u1=Q9.bind(void 0,!0);function Q9(s,e,t){if(!t||t.length<e.length)return null;let n;return s?n=TD(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}h(Q9,"_matchesPrefix");function e8(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t===-1?null:[{start:t,end:t+s.length}]}h(e8,"matchesContiguousSubString");function bQ(s,e){return VL(s.toLowerCase(),e.toLowerCase(),0,0)}h(bQ,"matchesSubString");function VL(s,e,t,n){if(t===s.length)return[];if(n===e.length)return null;if(s[t]===e[n]){let i=null;return(i=VL(s,e,t+1,n+1))?XI({start:n,end:n+1},i):null}return VL(s,e,t,n+1)}h(VL,"_matchesSubString");function qI(s){return 97<=s&&s<=122}h(qI,"isLower");function f1(s){return 65<=s&&s<=90}h(f1,"isUpper");function YI(s){return 48<=s&&s<=57}h(YI,"isNumber");function t8(s){return s===32||s===9||s===10||s===13}h(t8,"isWhitespace");const n8=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(s=>n8.add(s.charCodeAt(0)));function LC(s){return t8(s)||n8.has(s)}h(LC,"isWordSeparator");function vQ(s,e){return s===e||LC(s)&&LC(e)}h(vQ,"charactersMatch");function i8(s){return qI(s)||f1(s)||YI(s)}h(i8,"isAlphanumeric");function XI(s,e){return e.length===0?e=[s]:s.end===e[0].start?e[0].start=s.start:e.unshift(s),e}h(XI,"join");function o8(s,e){for(let t=e;t<s.length;t++){const n=s.charCodeAt(t);if(f1(n)||YI(n)||t>0&&!i8(s.charCodeAt(t-1)))return t}return s.length}h(o8,"nextAnchor");function BL(s,e,t,n){if(t===s.length)return[];if(n===e.length)return null;if(s[t]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=BL(s,e,t+1,n+1);!i&&(o=o8(e,o))<e.length;)i=BL(s,e,t+1,o),o++;return i===null?null:XI({start:n,end:n+1},i)}}h(BL,"_matchesCamelCase");function wQ(s){let e=0,t=0,n=0,i=0,o=0;for(let c=0;c<s.length;c++)o=s.charCodeAt(c),f1(o)&&e++,qI(o)&&t++,i8(o)&&n++,YI(o)&&i++;const r=e/s.length,a=t/s.length,l=n/s.length,d=i/s.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:d}}h(wQ,"analyzeCamelCaseWord");function CQ(s){const{upperPercent:e,lowerPercent:t}=s;return t===0&&e>.6}h(CQ,"isUpperCaseWord");function yQ(s){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=s;return t>.2&&e<.8&&n>.6&&i<.2}h(yQ,"isCamelCaseWord");function SQ(s){let e=0,t=0,n=0,i=0;for(let o=0;o<s.length;o++)n=s.charCodeAt(o),f1(n)&&e++,qI(n)&&t++,t8(n)&&i++;return(e===0||t===0)&&i===0?s.length<=30:e<=5}h(SQ,"isCamelCasePattern");function s8(s,e){if(!e||(e=e.trim(),e.length===0)||!SQ(s)||e.length>60)return null;const t=wQ(e);if(!yQ(t)){if(!CQ(t))return null;e=e.toLowerCase()}let n=null,i=0;for(s=s.toLowerCase();i<e.length&&(n=BL(s,e,0,i))===null;)i=o8(e,i+1);return n}h(s8,"matchesCamelCase");function xQ(s,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(s=s.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=HL(s,e,0,i,t))===null;)i=r8(e,i+1);return n}h(xQ,"matchesWords");function HL(s,e,t,n,i){if(t===s.length)return[];if(n===e.length)return null;if(vQ(s.charCodeAt(t),e.charCodeAt(n))){let o=null,r=n+1;if(o=HL(s,e,t+1,n+1,i),!i)for(;!o&&(r=r8(e,r))<e.length;)o=HL(s,e,t+1,r,i),r++;return o===null?null:XI({start:n,end:n+1},o)}else return null}h(HL,"_matchesWords");function r8(s,e){for(let t=e;t<s.length;t++)if(LC(s.charCodeAt(t))||t>0&&LC(s.charCodeAt(t-1)))return t;return s.length}h(r8,"nextWord");const TQ=$I(u1,s8,e8),LQ=$I(u1,s8,bQ),W2=new Qa(1e4);function V2(s,e,t=!1){if(typeof s!="string"||typeof e!="string")return null;let n=W2.get(s);n||(n=new RegExp(gG(s),"i"),W2.set(s,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?LQ(s,e):TQ(s,e)}h(V2,"matchesFuzzy");function kQ(s,e,t,n,i,o){const r=Math.min(13,s.length);for(;t<r;t++){const a=Hf(s,e,t,n,i,o,!1);if(a)return a}return[0,o]}h(kQ,"anyScore");function g1(s){if(typeof s>"u")return[];const e=[],t=s[1];for(let n=s.length-1;n>1;n--){const i=s[n]+t,o=e[e.length-1];o&&o.end===i?o.end=i+1:e.push({start:i,end:i+1})}return e}h(g1,"createMatches");const Al=128;function ZI(){const s=[],e=[];for(let t=0;t<=Al;t++)e[t]=0;for(let t=0;t<=Al;t++)s.push(e.slice(0));return s}h(ZI,"initTable");function a8(s){const e=[];for(let t=0;t<=s;t++)e[t]=0;return e}h(a8,"initArr");const l8=a8(2*Al),zL=a8(2*Al),ra=ZI(),zd=ZI(),rv=ZI();function av(s,e){if(e<0||e>=s.length)return!1;const t=s.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!ED(t)}}h(av,"isSeparatorAtPos");function B2(s,e){if(e<0||e>=s.length)return!1;switch(s.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}h(B2,"isWhitespaceAtPos");function lw(s,e,t){return e[s]!==t[s]}h(lw,"isUpperCaseAtPos");function EQ(s,e,t,n,i,o,r=!1){for(;e<t&&i<o;)s[e]===n[i]&&(r&&(l8[e]=i),e+=1),i+=1;return e===t}h(EQ,"isPatternInWord");var er;(function(s){s.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}h(e,"isDefault"),s.isDefault=e})(er||(er={}));function Hf(s,e,t,n,i,o,r){const a=s.length>Al?Al:s.length,l=n.length>Al?Al:n.length;if(t>=a||o>=l||a-t>l-o||!EQ(e,t,a,i,o,l,!0))return;DQ(a,l,t,o,e,i);let d=1,c=1,u=t,f=o;const g=[!1];for(d=1,u=t;u<a;d++,u++){const w=l8[u],y=zL[u],S=u+1<a?zL[u+1]:l;for(c=w-o+1,f=w;f<S;c++,f++){let L=Number.MIN_SAFE_INTEGER,E=!1;f<=y&&(L=IQ(s,e,u,t,n,i,f,l,o,ra[d-1][c-1]===0,g));let x=0;L!==Number.MAX_SAFE_INTEGER&&(E=!0,x=L+zd[d-1][c-1]);const k=f>w,N=k?zd[d][c-1]+(ra[d][c-1]>0?-5:0):0,V=f>w+1&&ra[d][c-1]>0,F=V?zd[d][c-2]+(ra[d][c-2]>0?-5:0):0;if(V&&(!k||F>=N)&&(!E||F>=x))zd[d][c]=F,rv[d][c]=3,ra[d][c]=0;else if(k&&(!E||N>=x))zd[d][c]=N,rv[d][c]=2,ra[d][c]=0;else if(E)zd[d][c]=x,rv[d][c]=1,ra[d][c]=ra[d-1][c-1]+1;else throw new Error("not possible")}}if(!g[0]&&!r)return;d--,c--;const m=[zd[d][c],o];let b=0,v=0;for(;d>=1;){let w=c;do{const y=rv[d][w];if(y===3)w=w-2;else if(y===2)w=w-1;else break}while(w>=1);b>1&&e[t+d-1]===i[o+c-1]&&!lw(w+o-1,n,i)&&b+1>ra[d][w]&&(w=c),w===c?b++:b=1,v||(v=w),d--,c=w-1,m.push(c)}l===a&&(m[0]+=2);const C=v-a;return m[0]-=C,m}h(Hf,"fuzzyScore");function DQ(s,e,t,n,i,o){let r=s-1,a=e-1;for(;r>=t&&a>=n;)i[r]===o[a]&&(zL[r]=a,r--),a--}h(DQ,"_fillInMaxWordMatchPos");function IQ(s,e,t,n,i,o,r,a,l,d,c){if(e[t]!==o[r])return Number.MIN_SAFE_INTEGER;let u=1,f=!1;return r===t-n?u=s[t]===i[r]?7:5:lw(r,i,o)&&(r===0||!lw(r-1,i,o))?(u=s[t]===i[r]?7:5,f=!0):av(o,r)&&(r===0||!av(o,r-1))?u=5:(av(o,r-1)||B2(o,r-1))&&(u=5,f=!0),u>1&&t===n&&(c[0]=!0),f||(f=lw(r,i,o)||av(o,r-1)||B2(o,r-1)),t===n?r>l&&(u-=f?3:5):d?u+=f?2:0:u+=f?0:1,r+1===a&&(u-=f?3:5),u}h(IQ,"_doScore");function NQ(s,e,t,n,i,o,r){return AQ(s,e,t,n,i,o,!0,r)}h(NQ,"fuzzyScoreGracefulAggressive");function AQ(s,e,t,n,i,o,r,a){let l=Hf(s,e,t,n,i,o,a);if(l&&!r)return l;if(s.length>=3){const d=Math.min(7,s.length-1);for(let c=t+1;c<d;c++){const u=MQ(s,c);if(u){const f=Hf(u,u.toLowerCase(),t,n,i,o,a);f&&(f[0]-=3,(!l||f[0]>l[0])&&(l=f))}}}return l}h(AQ,"fuzzyScoreWithPermutations");function MQ(s,e){if(e+1>=s.length)return;const t=s[e],n=s[e+1];if(t!==n)return s.slice(0,e)+n+t+s.slice(e+2)}h(MQ,"nextTypoPermutation");const Jp="$(",JI=new RegExp(`\\$\\(${_i.iconNameExpression}(?:${_i.iconModifierExpression})?\\)`,"g"),RQ=new RegExp(_i.iconNameCharacter),PQ=new RegExp(`(\\\\)?${JI.source}`,"g");function OQ(s){return s.replace(PQ,(e,t)=>t?e:`\\${e}`)}h(OQ,"escapeIcons");const FQ=new RegExp(`\\\\${JI.source}`,"g");function WQ(s){return s.replace(FQ,e=>`\\${e}`)}h(WQ,"markdownEscapeEscapedIcons");const VQ=new RegExp(`(\\s)?(\\\\)?${JI.source}(\\s)?`,"g");function QI(s){return s.indexOf(Jp)===-1?s:s.replace(VQ,(e,t,n,i)=>n?e:t||i||"")}h(QI,"stripIcons");function lv(s){const e=s.indexOf(Jp);return e===-1?{text:s}:BQ(s,e)}h(lv,"parseLabelWithIcons");function BQ(s,e){const t=[];let n="";function i(f){if(f){n+=f;for(const g of f)t.push(a)}}h(i,"appendChars");let o=-1,r="",a=0,l,d,c=e;const u=s.length;for(i(s.substr(0,e));c<u;)l=s[c],d=s[c+1],l===Jp[0]&&d===Jp[1]?(o=c,i(r),r=Jp,c++):l===")"&&o!==-1?(a+=c-o+1,o=-1,r=""):o!==-1?RQ.test(l)?r+=l:(i(r),o=-1,r=""):i(l),c++;return i(r),{text:n,iconOffsets:t}}h(BQ,"doParseLabelWithIcons");function dv(s,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return V2(s,n,t);const o=SD(n," "),r=n.length-o.length,a=V2(s,o,t);if(a)for(const l of a){const d=i[l.start+r]+r;l.start+=d,l.end+=d}return a}h(dv,"matchesFuzzyIconAware");const KL=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,gS=/(&amp;)?(&amp;)([^\s&])/g;var kC;(function(s){s[s.Right=0]="Right",s[s.Left=1]="Left"})(kC||(kC={}));class Vc extends rr{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const i=document.createElement("div");i.classList.add("monaco-menu"),i.setAttribute("role","presentation");super(i,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Ke||ni?[10]:[]],keyDown:!0}});this.menuElement=i,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Q),this.initializeOrUpdateStyleSheet(e,{}),this._register(dt.addTarget(i)),J(i,be.KEY_DOWN,a=>{new Et(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(J(i,be.KEY_DOWN,a=>{const l=a.key.toLocaleLowerCase();if(this.mnemonics.has(l)){ct.stop(a,!0);const d=this.mnemonics.get(l);if(d.length===1&&(d[0]instanceof UL&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(a)),d.length>1){const c=d.shift();c&&c.container&&(this.focusItemByElement(c.container),d.push(c)),this.mnemonics.set(l,d)}}})),ni&&this._register(J(i,be.KEY_DOWN,a=>{const l=new Et(a);l.equals(14)||l.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),ct.stop(a,!0)):(l.equals(13)||l.equals(12))&&(this.focusedItem=0,this.focusPrevious(),ct.stop(a,!0))})),this._register(J(this.domNode,be.MOUSE_OUT,a=>{let l=a.relatedTarget;Oa(l,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(J(this.actionsList,be.MOUSE_OVER,a=>{let l=a.target;if(!(!l||!Oa(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(l),d!==this.focusedItem&&this.updateFocus()}}})),this._register(dt.addTarget(this.actionsList)),this._register(J(this.actionsList,kt.Tap,a=>{let l=a.initialTarget;if(!(!l||!Oa(l,this.actionsList)||l===this.actionsList)){for(;l.parentElement!==this.actionsList&&l.parentElement!==null;)l=l.parentElement;if(l.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(l),d!==this.focusedItem&&this.updateFocus()}}}));let o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new Tg(i,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const r=this.scrollableElement.getDomNode();r.style.position="",this._register(J(i,kt.Change,a=>{ct.stop(a,!0);const l=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:l-a.translationY})})),this._register(J(r,be.MOUSE_UP,a=>{a.preventDefault()})),i.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var l;return!((l=n.submenuIds)===null||l===void 0)&&l.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof dw)).forEach((a,l,d)=>{a.updatePositionInSet(l+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(vm(e)?this.styleSheet=es(e):(Vc.globalStyleSheet||(Vc.globalStyleSheet=es()),this.styleSheet=Vc.globalStyleSheet)),this.styleSheet.textContent=zQ(t,vm(e))}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",i=e.backgroundColor?`${e.backgroundColor}`:"",o=e.borderColor?`1px solid ${e.borderColor}`:"",r=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=o,this.domNode.style.color=n,this.domNode.style.backgroundColor=i,t.style.boxShadow=r,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof EC||a instanceof dw)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof To)return new dw(t.context,e,{icon:!0});if(e instanceof L_){const i=new UL(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const o=i.getMnemonic();if(o&&i.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(i),this.mnemonics.set(o,r)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(i.keybinding=a)}}const o=new EC(t.context,e,i);if(t.enableMnemonics){const r=o.getMnemonic();if(r&&o.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(o),this.mnemonics.set(r,a)}}return o}}}h(Vc,"Menu$1");class EC extends Fs{constructor(e,t,n={}){n.isMenu=!0;super(t,t,n);if(this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let i=this.getAction().label;if(i){let o=KL.exec(i);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new gt(()=>{!this.element||(this._register(J(this.element,be.MOUSE_UP,i=>{if(ct.stop(i,!0),Eo){if(new Co(i).rightButton)return;this.onClick(i)}else setTimeout(()=>{this.onClick(i)},0)})),this._register(J(this.element,be.CONTEXT_MENU,i=>{ct.stop(i,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=j(this.element,X("a.action-menu-item")),this._action.id===To.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=j(this.item,X("span.menu-item-check"+_.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=j(this.item,X("span.action-label")),this.options.label&&this.options.keybinding&&(j(this.item,X("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(!!this.label&&this.options.label){Sn(this.label);let e=QI(this.getAction().label);if(e){const t=HQ(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=KL.exec(e);if(n){e=yD(e),gS.lastIndex=0;let i=gS.exec(e);for(;i&&i[1];)i=gS.exec(e);const o=h(r=>r.replace(/&amp;&amp;/g,"&amp;"),"replaceDoubleEscapes");i?this.label.append(SD(o(e.substr(0,i.index))," "),X("u",{"aria-hidden":"true"},i[3]),WO(o(e.substr(i.index+i[0].length))," ")):this.label.innerText=o(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=i)}style(e){this.menuStyle=e,this.applyStyle()}}h(EC,"BaseMenuActionViewItem");class UL extends EC{constructor(e,t,n,i){super(e,e,i);this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new Q),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:kC.Right,this.showScheduler=new gt(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new gt(()=>{this.element&&!Oa(Uu(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=j(this.item,X("span.submenu-indicator"+_.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(J(this.element,be.KEY_UP,t=>{let n=new Et(t);(n.equals(17)||n.equals(3))&&(ct.stop(t,!0),this.createSubmenu(!0))})),this._register(J(this.element,be.KEY_DOWN,t=>{let n=new Et(t);Uu()===this.item&&(n.equals(17)||n.equals(3))&&ct.stop(t,!0)})),this._register(J(this.element,be.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(J(this.element,be.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(J(this.element,be.FOCUS_OUT,t=>{this.element&&!Oa(Uu(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){ct.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const o={top:0,left:0};return o.left=Ru(e.width,t.width,{position:i===kC.Right?0:1,offset:n.left,size:n.width}),o.left>=n.left&&o.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(o.left=n.left+10),n.top+=10,n.height=0),o.top=Ru(e.height,t.height,{position:0,offset:n.top,size:0}),o.top+t.height===n.top&&o.top+n.height+t.height<=e.height&&(o.top+=n.height),o}createSubmenu(e=!0){if(!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=j(this.element,X("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Vc(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new k_],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const i=this.element.getBoundingClientRect(),o={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},r=this.submenuContainer.getBoundingClientRect(),{top:a,left:l}=this.calculateSubmenuMenuLayout(new mt(window.innerWidth,window.innerHeight),mt.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${l-r.left}px`,this.submenuContainer.style.top=`${a-r.top}px`,this.submenuDisposables.add(J(this.submenuContainer,be.KEY_UP,d=>{new Et(d).equals(15)&&(ct.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(J(this.submenuContainer,be.KEY_DOWN,d=>{new Et(d).equals(15)&&ct.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}h(UL,"SubmenuMenuActionViewItem");class dw extends Of{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}h(dw,"MenuSeparatorActionViewItem");function HQ(s){const e=KL,t=e.exec(s);if(!t)return s;const n=!t[1];return s.replace(e,n?"$2$3":"").trim()}h(HQ,"cleanMnemonic");function zQ(s,e){let t=`
.monaco-menu {
	font-size: 13px;

}

${F2(_.menuSelection)}
${F2(_.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=s.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const i=s.scrollbarSliderBackground;i&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${i};
				}
			`);const o=s.scrollbarSliderHoverBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);const r=s.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}h(zQ,"getMenuWidgetCSS");function As(s,e){const t=Object.create(null);for(let n in e){const i=e[n];i&&(t[n]=ua(i,s))}return t}h(As,"computeStyles");function eN(s,e,t){function n(){const i=As(s.getColorTheme(),e);typeof t=="function"?t(i):t.style(i)}return h(n,"applyStyles"),n(),s.onDidColorThemeChange(n)}h(eN,"attachStyler");function KQ(s,e,t){return eN(e,{badgeBackground:t?.badgeBackground||Vp,badgeForeground:t?.badgeForeground||Bp,badgeBorder:Pt},s)}h(KQ,"attachBadgeStyler");function lh(s,e,t){return eN(e,Object.assign(Object.assign({},p1),t||{}),s)}h(lh,"attachListStyler");const p1={listFocusBackground:mY,listFocusForeground:_Y,listFocusOutline:bY,listActiveSelectionBackground:Kl,listActiveSelectionForeground:Ul,listActiveSelectionIconForeground:$v,listFocusAndSelectionBackground:Kl,listFocusAndSelectionForeground:Ul,listInactiveSelectionBackground:vY,listInactiveSelectionIconForeground:CY,listInactiveSelectionForeground:wY,listInactiveFocusBackground:yY,listInactiveFocusOutline:SY,listHoverBackground:xY,listHoverForeground:TY,listDropBackground:LY,listSelectionOutline:ci,listHoverOutline:ci,listFilterWidgetBackground:kY,listFilterWidgetOutline:EY,listFilterWidgetNoMatchesOutline:DY,listMatchesShadow:od,treeIndentGuidesStroke:IY,tableColumnsBorder:NY,tableOddRowsBackgroundColor:AY},UQ={shadowColor:od,borderColor:MY,foregroundColor:RY,backgroundColor:PY,selectionForegroundColor:OY,selectionBackgroundColor:FY,selectionBorderColor:WY,separatorColor:VY,scrollbarShadow:vg,scrollbarSliderBackground:Gu,scrollbarSliderHoverBackground:$u,scrollbarSliderActiveBackground:qu};function jQ(s,e,t){return eN(e,Object.assign(Object.assign({},UQ),t),s)}h(jQ,"attachMenuStyler");class d8{constructor(e,t,n,i,o){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.themeService=o,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,i=S5(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{let r=e.getMenuClassName?e.getMenuClassName():"";r&&(o.className+=" "+r),this.options.blockMouse&&(this.block=o.appendChild(X(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",J(this.block,be.MOUSE_DOWN,d=>d.stopPropagation()));const a=new Q,l=e.actionRunner||new Qc;return l.onBeforeRun(this.onActionRun,this,a),l.onDidRun(this.onDidActionRun,this,a),n=new Vc(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)}),a.add(jQ(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(J(window,be.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(J(window,be.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;let c=new Co(d),u=c.target;if(!c.rightButton){for(;u;){if(u===o)return;u=u.parentElement}this.contextViewService.hideContextView(!0)}})),Ma(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:o=>{e.onHide&&e.onHide(!!o),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},i,!!i)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!qr(e.error)&&this.notificationService.error(e.error)}}h(d8,"ContextMenuHandler");var GQ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ep=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let jL=h(class extends z{constructor(e,t,n,i,o){super();this._onDidShowContextMenu=new P,this._onDidHideContextMenu=new P,this.contextMenuHandler=new d8(n,e,t,i,o)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{e.onHide&&e.onHide(t),this._onDidHideContextMenu.fire()}})),El.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}},"ContextMenuService");jL=GQ([ep(0,Yr),ep(1,cn),ep(2,z_),ep(3,Xt),ep(4,Mt)],jL);function GL(s){let e=JSON.parse(s);return e=$L(e),e}h(GL,"parse");function $L(s,e=0){if(!s||e>200)return s;if(typeof s=="object"){switch(s.$mid){case 1:return Ce.revive(s);case 2:return new RegExp(s.source,s.flags);case 14:return new Date(s.source)}if(s instanceof S_||s instanceof Uint8Array)return s;if(Array.isArray(s))for(let t=0;t<s.length;++t)s[t]=$L(s[t],e+1);else for(const t in s)Object.hasOwnProperty.call(s,t)&&(s[t]=$L(s[t],e+1))}return s}h($L,"revive");var DC;(function(s){s[s.API=0]="API",s[s.USER=1]="USER"})(DC||(DC={}));var H2=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const ss=Xe("openerService"),$Q=Object.freeze({_serviceBrand:void 0,registerOpener(){return z.None},registerValidator(){return z.None},registerExternalUriResolver(){return z.None},setDefaultExternalOpener(){},registerExternalOpener(){return z.None},open(){return H2(this,void 0,void 0,function*(){return!1})},resolveExternalUri(s){return H2(this,void 0,void 0,function*(){return{resolved:s,dispose(){}}})}});function c8(s,e){return Ce.isUri(s)?Iu(s.scheme,e):TD(s,e+":")}h(c8,"matchesScheme");function z2(s,...e){return e.some(t=>c8(s,t))}h(z2,"matchesSomeScheme");function qQ(s){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(s.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},s=s.with({fragment:""})),{selection:e,uri:s}}h(qQ,"extractSelection");var tN=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},IC=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},dc=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let qL=h(class{constructor(e){this._commandService=e}open(e,t){return dc(this,void 0,void 0,function*(){if(!c8(e,Me.command))return!1;if(!t?.allowCommands)return!0;typeof e=="string"&&(e=Ce.parse(e));let n=[];try{n=GL(decodeURIComponent(e.query))}catch{try{n=GL(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}},"CommandOpener");qL=tN([IC(0,ln)],qL);let YL=h(class{constructor(e){this._editorService=e}open(e,t){return dc(this,void 0,void 0,function*(){typeof e=="string"&&(e=Ce.parse(e));const{selection:n,uri:i}=qQ(e);return e=i,e.scheme===Me.file&&(e=DZ(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,source:t?.fromUserGesture?DC.USER:DC.API},t?.editorOptions)},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0})}},"EditorOpener");YL=tN([IC(0,ht)],YL);let XL=h(class{constructor(e,t){this._openers=new eo,this._validators=new eo,this._resolvers=new eo,this._resolvedUriTargets=new li(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new eo,this._defaultExternalOpener={openExternal:n=>dc(this,void 0,void 0,function*(){return z2(n,Me.http,Me.https)?T5(n):window.location.href=n,!0})},this._openers.push({open:(n,i)=>dc(this,void 0,void 0,function*(){return i?.openExternal||z2(n,Me.mailto,Me.http,Me.https,Me.vsls)?(yield this._doOpenExternal(n,i),!0):!1})}),this._openers.push(new qL(t)),this._openers.push(new YL(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return dc(this,void 0,void 0,function*(){const i=typeof e=="string"?Ce.parse(e):e,o=(n=this._resolvedUriTargets.get(i))!==null&&n!==void 0?n:e;for(const r of this._validators)if(!(yield r.shouldOpen(o)))return!1;for(const r of this._openers)if(yield r.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return dc(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const i=yield n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return dc(this,void 0,void 0,function*(){const n=typeof e=="string"?Ce.parse(e):e;let i;try{i=(yield this.resolveExternalUri(n,t)).resolved}catch{i=n}let o;if(typeof e=="string"&&n.toString()===i.toString()?o=e:o=encodeURI(i.toString(!0)),t?.allowContributedOpeners){const r=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(o,{sourceUri:n,preferredOpenerId:r},je.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:n},je.None)})}dispose(){this._validators.clear()}},"OpenerService");XL=tN([IC(0,ht),IC(1,ln)],XL);var Wt;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(Wt||(Wt={}));(function(s){function e(r,a){return a-r}h(e,"compare"),s.compare=e;const t=Object.create(null);t[s.Error]=p("sev.error","Error"),t[s.Warning]=p("sev.warning","Warning"),t[s.Info]=p("sev.info","Info");function n(r){return t[r]||""}h(n,"toString"),s.toString=n;function i(r){switch(r){case Ot.Error:return s.Error;case Ot.Warning:return s.Warning;case Ot.Info:return s.Info;case Ot.Ignore:return s.Hint}}h(i,"fromSeverity"),s.fromSeverity=i;function o(r){switch(r){case s.Error:return Ot.Error;case s.Warning:return Ot.Warning;case s.Info:return Ot.Info;case s.Hint:return Ot.Ignore}}h(o,"toSeverity"),s.toSeverity=o})(Wt||(Wt={}));var NC;(function(s){const e="";function t(i){return n(i,!0)}h(t,"makeKey"),s.makeKey=t;function n(i,o){let r=[e];return i.source?r.push(i.source.replace("\xA6","\\\xA6")):r.push(e),i.code?typeof i.code=="string"?r.push(i.code.replace("\xA6","\\\xA6")):r.push(i.code.value.replace("\xA6","\\\xA6")):r.push(e),i.severity!==void 0&&i.severity!==null?r.push(Wt.toString(i.severity)):r.push(e),i.message&&o?r.push(i.message.replace("\xA6","\\\xA6")):r.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?r.push(i.startLineNumber.toString()):r.push(e),i.startColumn!==void 0&&i.startColumn!==null?r.push(i.startColumn.toString()):r.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?r.push(i.endLineNumber.toString()):r.push(e),i.endColumn!==void 0&&i.endColumn!==null?r.push(i.endColumn.toString()):r.push(e),r.push(e),r.join("\xA6")}h(n,"makeKeyOptionalMessage"),s.makeKeyOptionalMessage=n})(NC||(NC={}));const el=Xe("markerService");var YQ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},K2=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class h8 extends z{constructor(e){super();this.model=e,this._markersData=new Map,this._register(He(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const i=this.model.deltaDecorations(n,t);for(let o=0;o<i.length;o++)this._markersData.set(i[o],e[o]);return n.length!==0||i.length!==0}getMarker(e){return this._markersData.get(e.id)}}h(h8,"MarkerDecorations");let ZL=h(class extends z{constructor(e,t){super();this._markerService=t,this._onDidChangeMarker=this._register(new P),this._markerDecorations=new li,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new h8(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Me.inMemory||e.uri.scheme===Me.internal||e.uri.scheme===Me.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500}),n=t.map(i=>({range:this._createDecorationRange(e.model,i),options:this._createDecorationOption(i)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=T.lift(t);if(t.severity===Wt.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const i=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(i===1||n.endColumn>=i)return n;const o=e.getWordAtPosition(n.getStartPosition());o&&(n=new T(n.startLineNumber,o.startColumn,n.endLineNumber,o.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){let i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new T(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,o,r;switch(e.severity){case Wt.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case Wt.Warning:t="squiggly-warning",n=Yt(yX),i=20,r={color:Yt(HY),position:$o.Inline};break;case Wt.Info:t="squiggly-info",n=Yt(SX),i=10;break;case Wt.Error:default:t="squiggly-error",n=Yt(CX),i=30,r={color:Yt(BY),position:$o.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Jo.Right},minimap:r,zIndex:i,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}},"MarkerDecorationsService");ZL=YQ([K2(0,Bt),K2(1,el)],ZL);class rf{constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(e,t){return new rf(e,new jm(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new T(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,o,r]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new rf(this._startLineNumber,i),new rf(this._startLineNumber+r,o)]}applyEdit(e,t){const[n,i,o]=sh(t);this.acceptEdit(e,n,i,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,o){this._acceptDeleteRange(e),this._acceptInsertText(new W(e.startLineNumber,e.startColumn),t,n,i,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const o=n-t;this._startLineNumber-=o;return}const i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,o){if(t===0&&n===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,n,i,o)}}h(rf,"SparseMultilineTokens");class jm{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new T(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),o=this._getDeltaLine(i);if(o<e)t=i+1;else if(o>e)n=i-1;else{let r=i;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new JL(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new JL(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const o=this._tokens,r=this._tokenCount;let a=0,l=!1,d=0;for(let c=0;c<r;c++){const u=4*c,f=o[u],g=o[u+1],m=o[u+2],b=o[u+3];if((f>e||f===e&&m>=t)&&(f<n||f===n&&g<=i))l=!0;else{if(a===0&&(d=f),l){const v=4*a;o[v]=f-d,o[v+1]=g,o[v+2]=m,o[v+3]=b}a++}}return this._tokenCount=a,d}split(e,t,n,i){const o=this._tokens,r=this._tokenCount,a=[],l=[];let d=a,c=0,u=0;for(let f=0;f<r;f++){const g=4*f,m=o[g],b=o[g+1],v=o[g+2],C=o[g+3];if(m>e||m===e&&v>=t){if(m<n||m===n&&b<=i)continue;d!==l&&(d=l,c=0,u=m)}d[c++]=m-u,d[c++]=b,d[c++]=v,d[c++]=C}return[new jm(new Uint32Array(a)),new jm(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,i,o){const r=this._tokens,a=this._tokenCount,l=i-t;let d=0,c=!1;for(let u=0;u<a;u++){const f=4*u;let g=r[f],m=r[f+1],b=r[f+2];const v=r[f+3];if(g<t||g===t&&b<=n){d++;continue}else if(g===t&&m<n)g===i&&b>o?b-=o-n:b=n;else if(g===t&&m===n)if(g===i&&b>o)b-=o-n;else{c=!0;continue}else if(g<i||g===i&&m<o)if(g===i&&b>o)g===t?(m=n,b=m+(b-o)):(m=0,b=m+(b-o));else{c=!0;continue}else if(g>i){if(l===0&&!c){d=a;break}g-=l}else if(g===i&&m>=o)e&&g===0&&(m+=e,b+=e),g-=l,m-=o-n,b-=o-n;else throw new Error("Not possible!");const C=4*d;r[C]=g,r[C+1]=m,r[C+2]=b,r[C+3]=v,d++}this._tokenCount=d}acceptInsertText(e,t,n,i,o,r){const a=n===0&&i===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,d=this._tokenCount;for(let c=0;c<d;c++){const u=4*c;let f=l[u],g=l[u+1],m=l[u+2];if(!(f<e||f===e&&m<t)){if(f===e&&m===t)if(a)m+=1;else continue;else if(f===e&&g<t&&t<m)n===0?m+=i:m=t;else{if(f===e&&g===t&&a)continue;if(f===e)if(f+=n,n===0)g+=i,m+=i;else{const b=m-g;g=o+(g-t),m=g+b}else f+=n}l[u]=f,l[u+1]=g,l[u+2]=m}}}}h(jm,"SparseMultilineTokensStorage");class JL{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}h(JL,"SparseLineTokens");var XQ=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let QL=h(class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hashTable=new Er,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const i=this._languageService.languageIdCodec.encodeLanguageId(n),o=this._hashTable.get(e,t,i);let r;if(o)r=o.metadata,this._logService.getLevel()===$s.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${Gn.getForeground(r)}, fontStyle ${Gn.getFontStyle(r).toString(2)}`);else{let a=this._legend.tokenTypes[e];const l=[];if(a){let d=t;for(let u=0;d>0&&u<this._legend.tokenModifiers.length;u++)d&1&&l.push(this._legend.tokenModifiers[u]),d=d>>1;d>0&&this._logService.getLevel()===$s.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),l.push("not-in-legend"));const c=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);typeof c>"u"?r=2147483647:(r=0,typeof c.italic<"u"&&(r|=(c.italic?1:0)<<10|1),typeof c.bold<"u"&&(r|=(c.bold?2:0)<<10|2),typeof c.underline<"u"&&(r|=(c.underline?4:0)<<10|4),typeof c.strikethrough<"u"&&(r|=(c.strikethrough?8:0)<<10|8),c.foreground&&(r|=c.foreground<<14|16),r===0&&(r=2147483647))}else this._logService.getLevel()===$s.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),r=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,r),this._logService.getLevel()===$s.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${l.join(" ")}): foreground ${Gn.getForeground(r)}, fontStyle ${Gn.getFontStyle(r).toString(2)}`)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}},"SemanticTokensProviderStyling");QL=XQ([pS(1,Mt),pS(2,Vt),pS(3,Cs)],QL);function u8(s,e,t){const n=s.data,i=s.data.length/5|0,o=Math.max(Math.ceil(i/1024),400),r=[];let a=0,l=1,d=0;for(;a<i;){const c=a;let u=Math.min(c+o,i);if(u<i){let y=u;for(;y-1>c&&n[5*y]===0;)y--;if(y-1===c){let S=u;for(;S+1<i&&n[5*S]===0;)S++;u=S}else u=y}let f=new Uint32Array((u-c)*4),g=0,m=0,b=0,v=0,C=0;for(;a<u;){const y=5*a,S=n[y],L=n[y+1],E=l+S|0,x=S===0?d+L|0:L,k=n[y+2],N=n[y+3],V=n[y+4],F=e.getMetadata(N,V,t);F!==2147483647&&(m===0&&(m=E),b===E&&C>x&&(e.warnOverlappingSemanticTokens(E,x+1),v<x?f[g-4+2]=x:g-=4),f[g]=E-m,f[g+1]=x,f[g+2]=x+k,f[g+3]=F,g+=4,b=E,v=x,C=x+k),l=E,d=x,a++}g!==f.length&&(f=f.subarray(0,g));const w=rf.create(m,f);r.push(w)}return r}h(u8,"toMultilineTokens2");class f8{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}h(f8,"HashTableEntry");class Er{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Er._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Er._SIZES.length?2/3*this._currentLength:0),this._elements=[],Er._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let o=this._elements[i];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===n)return o;o=o.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=Er._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Er._SIZES.length?2/3*this._currentLength:0),this._elements=[],Er._nullOutEntries(this._elements,this._currentLength);for(const r of o){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new f8(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}h(Er,"HashTable");Er._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function ZQ(s){for(let e=0,t=s.length;e<t;e+=4){const n=s[e+0],i=s[e+1],o=s[e+2],r=s[e+3];s[e+0]=r,s[e+1]=o,s[e+2]=i,s[e+3]=n}}h(ZQ,"reverseEndianness");function JQ(s){const e=new Uint8Array(s.buffer,s.byteOffset,s.length*4);return NP()||ZQ(e),S_.wrap(e)}h(JQ,"toLittleEndianBuffer");function g8(s){const e=new Uint32Array(QQ(s));let t=0;if(e[t++]=s.id,s.type==="full")e[t++]=1,e[t++]=s.data.length,e.set(s.data,t),t+=s.data.length;else{e[t++]=2,e[t++]=s.deltas.length;for(const n of s.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return JQ(e)}h(g8,"encodeSemanticTokensDto");function QQ(s){let e=0;if(e+=1+1,s.type==="full")e+=1+s.data.length;else{e+=1,e+=(1+1+1)*s.deltas.length;for(const t of s.deltas)t.data&&(e+=t.data.length)}return e}h(QQ,"encodeSemanticTokensDtoSize");var gd=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function m1(s){return s&&!!s.data}h(m1,"isSemanticTokens");function p8(s){return s&&Array.isArray(s.edits)}h(p8,"isSemanticTokensEdits");class m8{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}h(m8,"DocumentSemanticTokensResult");function _8(s,e){return s.has(e)}h(_8,"hasDocumentSemanticTokensProvider");function eee(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:[]}h(eee,"getDocumentSemanticTokensProviders");function b8(s,e,t,n,i){return gd(this,void 0,void 0,function*(){const o=eee(s,e),r=yield Promise.all(o.map(a=>gd(this,void 0,void 0,function*(){let l,d=null;try{l=yield a.provideDocumentSemanticTokens(e,a===t?n:null,i)}catch(c){d=c,l=null}return(!l||!m1(l)&&!p8(l))&&(l=null),new m8(a,l,d)})));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null})}h(b8,"getDocumentSemanticTokens");function tee(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:null}h(tee,"_getDocumentSemanticTokensProviderHighestGroup");class v8{constructor(e,t){this.provider=e,this.tokens=t}}h(v8,"DocumentRangeSemanticTokensResult");function nee(s,e){return s.has(e)}h(nee,"hasDocumentRangeSemanticTokensProvider");function w8(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:[]}h(w8,"getDocumentRangeSemanticTokensProviders");function nN(s,e,t,n){return gd(this,void 0,void 0,function*(){const i=w8(s,e),o=yield Promise.all(i.map(r=>gd(this,void 0,void 0,function*(){let a;try{a=yield r.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){Nn(l),a=null}return(!a||!m1(a))&&(a=null),new v8(r,a)})));for(const r of o)if(r.tokens)return r;return o.length>0?o[0]:null})}h(nN,"getDocumentRangeSemanticTokens");tt.registerCommand("_provideDocumentSemanticTokensLegend",(s,...e)=>gd(void 0,void 0,void 0,function*(){const[t]=e;bt(t instanceof Ce);const n=s.get(Bt).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=s.get(ce),o=tee(i,n);return o?o[0].getLegend():s.get(ln).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));tt.registerCommand("_provideDocumentSemanticTokens",(s,...e)=>gd(void 0,void 0,void 0,function*(){const[t]=e;bt(t instanceof Ce);const n=s.get(Bt).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=s.get(ce);if(!_8(i,n))return s.get(ln).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const o=yield b8(i,n,null,null,je.None);if(!o)return;const{provider:r,tokens:a}=o;if(!a||!m1(a))return;const l=g8({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l}));tt.registerCommand("_provideDocumentRangeSemanticTokensLegend",(s,...e)=>gd(void 0,void 0,void 0,function*(){const[t,n]=e;bt(t instanceof Ce);const i=s.get(Bt).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:o}=s.get(ce),r=w8(o,i);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!T.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=yield nN(o,i,T.lift(n),je.None);if(!!a)return a.provider.getLegend()}));tt.registerCommand("_provideDocumentRangeSemanticTokens",(s,...e)=>gd(void 0,void 0,void 0,function*(){const[t,n]=e;bt(t instanceof Ce),bt(T.isIRange(n));const i=s.get(Bt).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:o}=s.get(ce),r=yield nN(o,i,T.lift(n),je.None);if(!(!r||!r.tokens))return g8({id:0,type:"full",data:r.tokens.data})}));var iN=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mi=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};function fl(s){return s.toString()}h(fl,"MODEL_ID");function U2(s){const e=new T_,t=s.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}h(U2,"computeModelSha1");class C8{constructor(e,t,n){this._modelEventListeners=new Q,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}h(C8,"ModelData");const iee=ni||Ke?1:2;class y8{constructor(e,t,n,i,o,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=o,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}h(y8,"DisposedModelInfo");let AC=h(class Lp extends z{constructor(e,t,n,i,o,r,a,l,d){super();this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=i,this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this._languageFeatureDebounceService=l,this._onModelAdded=this._register(new P),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new P),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new P),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new S8(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new tk(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,d))}static _readModelOptions(e,t){var n;let i=ri.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const g=parseInt(e.editor.tabSize,10);isNaN(g)||(i=g),i<1&&(i=1)}let o=i;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const g=parseInt(e.editor.indentSize,10);isNaN(g)||(o=g),o<1&&(o=1)}let r=ri.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let a=iee;const l=e.eol;l===`\r
`?a=2:l===`
`&&(a=1);let d=ri.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(d=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let c=ri.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let u=ri.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations));let f=ri.bracketPairColorizationOptions;return((n=e.editor)===null||n===void 0?void 0:n.bracketPairColorization)&&typeof e.editor.bracketPairColorization=="object"&&(f={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:i,indentSize:o,insertSpaces:r,detectIndentation:c,defaultEOL:a,trimAutoWhitespace:d,largeFileOptimizations:u,bracketPairColorizationOptions:f}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:Bo===3||Bo===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let i=this._modelCreationOptionsByLanguageAndResource[e+t];if(!i){const o=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),r=this._getEOL(t,e);i=Lp._readModelOptions({editor:o,eol:r},n),this._modelCreationOptionsByLanguageAndResource[e+t]=i}return i}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const o=t[n],r=this._models[o],a=r.model.getLanguageId(),l=r.model.uri,d=e[a+l],c=this.getCreationOptions(a,l,r.model.isForSimpleWidget);Lp._setModelOptionsForModel(r.model,c,d)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Go(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(fl(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(fl(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(fl(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const o=this.getCreationOptions(t,n,i),r=new Ga(e,t,o,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(fl(n))){const d=this._removeDisposedModel(n),c=this._undoRedoService.getElements(n),u=U2(r)===d.sha1;if(u||d.sharesUndoRedoStack){for(const f of c.past)va(f)&&f.matchesResource(n)&&f.setModel(r);for(const f of c.future)va(f)&&f.matchesResource(n)&&f.setModel(r);this._undoRedoService.setElementsValidFlag(n,!0,f=>va(f)&&f.matchesResource(n)),u&&(r._overwriteVersionId(d.versionId),r._overwriteAlternativeVersionId(d.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(d.initialUndoRedoSnapshot))}else d.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(d.initialUndoRedoSnapshot)}const a=fl(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new C8(r,d=>this._onWillDispose(d),(d,c)=>this._onDidChangeLanguage(d,c));return this._models[a]=l,l}createModel(e,t,n,i=!1){let o;return t?(o=this._createModelData(e,t.languageId,n,i),this.setMode(o.model,t)):o=this._createModelData(e,Zr,n,i),this._onModelAdded.fire(o.model),o.model}setMode(e,t){if(!t)return;const n=this._models[fl(e.uri)];!n||n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push(this._models[o].model)}return e}getModel(e){const t=fl(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Me.file||e.scheme===Me.vscodeRemote||e.scheme===Me.userData||e.scheme===Me.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=fl(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,r=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const l=this._undoRedoService.getElements(e.uri);if(l.past.length>0||l.future.length>0){for(const d of l.past)va(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of l.future)va(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=Lp.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(o)if(!i&&r>a){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,l=>va(l)&&l.matchesResource(e.uri)),this._insertDisposedModel(new y8(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,r,U2(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const l=n.model.getInitialUndoRedoSnapshot();l!==null&&this._undoRedoService.restoreSnapshot(l)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);Lp._setModelOptionsForModel(e,r,o),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}},"ModelService");AC.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;AC=iN([mi(0,wt),mi(1,j4),mi(2,Mt),mi(3,Cs),mi(4,a1),mi(5,Vt),mi(6,oi),mi(7,os),mi(8,ce)],AC);const oN="editor.semanticHighlighting";function ek(s,e,t){var n;const i=(n=t.getValue(oN,{overrideIdentifier:s.getLanguageId(),resource:s.uri}))===null||n===void 0?void 0:n.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}h(ek,"isSemanticColoringEnabled");let tk=h(class extends z{constructor(e,t,n,i,o,r){super();this._watchers=Object.create(null),this._semanticStyling=e;const a=h(c=>{this._watchers[c.uri.toString()]=new Gm(c,this._semanticStyling,n,o,r)},"register"),l=h((c,u)=>{u.dispose(),delete this._watchers[c.uri.toString()]},"deregister"),d=h(()=>{for(let c of t.getModels()){const u=this._watchers[c.uri.toString()];ek(c,n,i)?u||a(c):u&&l(c,u)}},"handleSettingOrThemeChange");this._register(t.onModelAdded(c=>{ek(c,n,i)&&a(c)})),this._register(t.onModelRemoved(c=>{const u=this._watchers[c.uri.toString()];u&&l(c,u)})),this._register(i.onDidChangeConfiguration(c=>{c.affectsConfiguration(oN)&&d()})),this._register(n.onDidColorThemeChange(d))}},"SemanticColoringFeature");tk=iN([mi(1,Bt),mi(2,Mt),mi(3,wt),mi(4,os),mi(5,ce)],tk);class S8 extends z{constructor(e,t,n){super();this._themeService=e,this._languageService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new QL(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}}h(S8,"SemanticStyling");class x8{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}h(x8,"SemanticTokensResponse");let Gm=h(class ec extends z{constructor(e,t,n,i,o){super();this._isDisposed=!1,this._model=e,this._semanticStyling=t,this._provider=o.documentSemanticTokensProvider,this._debounceInformation=i.for(this._provider,"DocumentSemanticTokens",{min:ec.REQUEST_MIN_DELAY,max:ec.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new gt(()=>this._fetchDocumentSemanticTokensNow(),ec.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=h(()=>{et(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))},"bindDocumentChangeListeners");r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!_8(this._provider,this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new Bn,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=b8(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const o=[],r=this._model.onDidChangeContent(l=>{o.push(l)}),a=new wi(!1);i.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:d,tokens:c}=l,u=this._semanticStyling.get(d);this._setDocumentSemanticTokens(d,c||null,u,o)}},l=>{l&&(qr(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||Ne(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),o.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,i,o){for(let r=0;r<o;r++)n[i+r]=e[t+r]}_setDocumentSemanticTokens(e,t,n,i){const o=this._currentDocumentResponse,r=h(()=>{i.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))},"rescheduleIfNeeded");if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),r();return}if(p8(t)){if(!o){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const f of t.edits)a+=(f.data?f.data.length:0)-f.deleteCount;const l=o.data,d=new Uint32Array(l.length+a);let c=l.length,u=d.length;for(let f=t.edits.length-1;f>=0;f--){const g=t.edits[f],m=c-(g.start+g.deleteCount);m>0&&(ec._copy(l,c-m,d,u-m,m),u-=m),g.data&&(ec._copy(g.data,0,d,u-g.data.length,g.data.length),u-=g.data.length),c=g.start}c>0&&ec._copy(l,0,d,0,c),t={resultId:t.resultId,data:d}}}if(m1(t)){this._currentDocumentResponse=new x8(e,t.resultId,t.data);const a=u8(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const d of a)for(const c of l.changes)d.applyEdit(c.range,c.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);r()}},"ModelSemanticColoring");Gm.REQUEST_MIN_DELAY=300;Gm.REQUEST_MAX_DELAY=2e3;Gm=iN([mi(2,Mt),mi(3,os),mi(4,ce)],Gm);const oee=new RegExp(`(\\\\)?\\$\\((${_i.iconNameExpression}(?:${_i.iconModifierExpression})?)\\)`,"g");function Bc(s){const e=new Array;let t,n=0,i=0;for(;(t=oee.exec(s))!==null;){i=t.index||0,e.push(s.substring(n,i)),n=(t.index||0)+t[0].length;const[,o,r]=t;e.push(o?`$(${r})`:see({id:r}))}return n<s.length&&e.push(s.substring(n)),e}h(Bc,"renderLabelWithIcons");function see(s){const e=X("span");return e.classList.add(..._i.asClassNameArray(s)),e}h(see,"renderIcon");const ree={buttonBackground:H.fromHex("#0E639C"),buttonHoverBackground:H.fromHex("#006BB3"),buttonForeground:H.white};class nk extends z{constructor(e,t){super();this._onDidClick=this._register(new P),this.options=t||Object.create(null),$r(this.options,ree,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(dt.addTarget(this._element)),[be.CLICK,kt.Tap].forEach(n=>{this._register(J(this._element,n,i=>{if(!this.enabled){ct.stop(i);return}this._onDidClick.fire(i)}))}),this._register(J(this._element,be.KEY_DOWN,n=>{const i=new Et(n);let o=!1;this.enabled&&(i.equals(3)||i.equals(10))?(this._onDidClick.fire(n),o=!0):i.equals(9)&&(this._element.blur(),o=!0),o&&ct.stop(i,!0)})),this._register(J(this._element,be.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(J(this._element,be.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(wf(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?td(this._element,...Bc(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}h(nk,"Button");const aee={badgeBackground:H.fromHex("#4D4D4D"),badgeForeground:H.fromHex("#FFFFFF")};class MC{constructor(e,t){this.count=0,this.options=t||Object.create(null),$r(this.options,aee,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=j(e,X(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=jo(this.countFormat,this.count),this.element.title=jo(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}h(MC,"CountBadge");const j2="done",G2="active",mS="infinite",_S="infinite-long-running",$2="discrete",lee={progressBarBackground:H.fromHex("#0E70C0")};class Y_ extends z{constructor(e,t){super();this.options=t||Object.create(null),$r(this.options,lee,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new gt(()=>bo(this.element),0)),this.longRunningScheduler=this._register(new gt(()=>this.infiniteLongRunning(),Y_.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(G2,mS,_S,$2),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(j2),this.element.classList.contains(mS)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove($2,j2,_S),this.element.classList.add(G2,mS),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(_S)}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}h(Y_,"ProgressBar");Y_.LONG_RUNNING_INFINITE_THRESHOLD=1e4;class _1{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}h(_1,"IdGenerator");const T8=new _1("id#");const bS={},dee=new _1("quick-input-button-icon-");function ik(s){if(!s)return;let e;const t=s.dark.toString();return bS[t]?e=bS[t]:(e=dee.nextId(),AT(`.${e}`,`background-image: ${Jc(s.light||s.dark)}`),AT(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Jc(s.dark)}`),bS[t]=e),e}h(ik,"getIconClass");const cee={ctrlCmd:!1,alt:!1};var $m;(function(s){s[s.Blur=1]="Blur",s[s.Gesture=2]="Gesture",s[s.Other=3]="Other"})($m||($m={}));var Is;(function(s){s[s.NONE=0]="NONE",s[s.FIRST=1]="FIRST",s[s.SECOND=2]="SECOND",s[s.LAST=3]="LAST"})(Is||(Is={}));function hee(s,e={}){const t=sN(e);return t.textContent=s,t}h(hee,"renderText");function L8(s,e={}){const t=sN(e);return E8(t,uee(s,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}h(L8,"renderFormattedText");function sN(s){const e=s.inline?"span":"div",t=document.createElement(e);return s.className&&(t.className=s.className),t}h(sN,"createElement");class k8{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}h(k8,"StringStream");function E8(s,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");t.disposables.add(Wn(o,"click",r=>{t.callback(String(e.index),r)})),i=o}else e.type===8?i=document.createElement("br"):e.type===1&&(i=s);i&&s!==i&&s.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(o=>{E8(i,o,t,n)})}h(E8,"_renderFormattedText");function uee(s,e){const t={type:1,children:[]};let n=0,i=t;const o=[],r=new k8(s);for(;!r.eos();){let a=r.next();const l=a==="\\"&&ok(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&fee(a,e)&&a===r.peek()){r.advance(),i.type===2&&(i=o.pop());const d=ok(a,e);if(i.type===d||i.type===5&&d===6)i=o.pop();else{const c={type:d,children:[]};d===5&&(c.index=n,n++),i.children.push(c),o.push(i),i=c}}else if(a===`
`)i.type===2&&(i=o.pop()),i.children.push({type:8});else if(i.type!==2){const d={type:2,content:a};i.children.push(d),o.push(i),i=d}else i.content+=a}return i.type===2&&(i=o.pop()),t}h(uee,"parseFormattedText");function fee(s,e){return ok(s,e)!==0}h(fee,"isFormatTag");function ok(s,e){switch(s){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}h(ok,"formatTagType");class D8{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}h(D8,"ArrayNavigator");class I8{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new D8(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}h(I8,"HistoryNavigator");const tp=X,gee={inputBackground:H.fromHex("#3C3C3C"),inputForeground:H.fromHex("#CCCCCC"),inputValidationInfoBorder:H.fromHex("#55AAFF"),inputValidationInfoBackground:H.fromHex("#063B49"),inputValidationWarningBorder:H.fromHex("#B89500"),inputValidationWarningBackground:H.fromHex("#352A05"),inputValidationErrorBorder:H.fromHex("#BE1100"),inputValidationErrorBackground:H.fromHex("#5A1D1D")};class rN extends ns{constructor(e,t,n){var i;super();this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new P),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new P),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),$r(this.options,gee,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(i=this.options.tooltip)!==null&&i!==void 0?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=j(e,tp(".monaco-inputbox.idle"));let o=this.options.flexibleHeight?"textarea":"input",r=j(this.element,tp(".ibwrapper"));if(this.input=j(r,tp(o+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=j(r,tp("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new wI(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),j(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(d=>this.input.scrollTop=d.scrollTop));const a=this._register(new ft(document,"selectionchange")),l=fe.filter(a.event,()=>{const d=document.getSelection();return d?.anchorNode===r});this._register(l(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new rr(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:NT(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return ds(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=h(()=>e.style.width=ds(this.element)+"px","layout");this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=j(i,tp(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?L8(this.message.content,o):hee(this.message.content,o);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background?a.background.toString():"",r.style.color=a.foreground?a.foreground.toString():"",r.style.border=a.border?`1px solid ${a.border}`:"",j(e,r),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=p("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=p("alertWarningMessage","Warning: {0}",this.message.content):n=p("alertInfoMessage","Info: {0}",this.message.content),qn(n),this.state="open"}_hideMessage(){!this.contextViewProvider||(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="\xA0",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=NT(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,o=t.value;n!==null&&i!==null&&(this.value=o.substr(0,n)+e+o.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}h(rN,"InputBox");class aN extends rN{constructor(e,t,n){const i=p({key:"history.inputbox.hint",comment:["Text will be prefixed with \u21C5 plus a single space, then used as a hint where input field keeps history"]},"for history"),o=` or \u21C5 ${i}`,r=` (\u21C5 ${i})`;super(e,t,n);this.history=new I8(n.history,100);const a=h(()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const l=this.placeholder.endsWith(")")?o:r,d=this.placeholder+l;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=d:this.setPlaceHolder(d)}},"addSuffix");this.observer=new MutationObserver((l,d)=>{l.forEach(c=>{c.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const l=h(d=>{if(this.placeholder.endsWith(d)){const c=this.placeholder.slice(0,this.placeholder.length-d.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1},"resetPlaceholder");l(r)||l(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,Jw(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Jw(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}h(aN,"HistoryInputBox");const pee=X;class N8 extends z{constructor(e){super();this.parent=e,this.onKeyDown=t=>J(this.inputBox.inputElement,be.KEY_DOWN,n=>{t(new Et(n))}),this.onMouseDown=t=>J(this.inputBox.inputElement,be.MOUSE_DOWN,n=>{t(new Co(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=j(this.parent,pee(".quick-input-box")),this.inputBox=this._register(new rN(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Ot.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Ot.Info?1:e===Ot.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Ot.Info?1:e===Ot.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}h(N8,"QuickInputBox");class pd{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t?.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=j(e,X("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=pd.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Go(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const r=this.text.substring(t,n.start);e.push(X("span",void 0,...this.supportIcons?Bc(r):[r])),t=n.end}const i=this.text.substring(n.start,n.end),o=X("span.highlight",void 0,...this.supportIcons?Bc(i):[i]);n.extraClasses&&o.classList.add(...n.extraClasses),e.push(o),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(X("span",void 0,...this.supportIcons?Bc(n):[n]))}td(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(o,r)=>{i=o===`\r
`?-1:0,r+=n;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=i),a.end>=r&&(a.end+=i));return n+=i,"\u23CE"})}}h(pd,"HighlightedLabel");class Zi{constructor(e="",t=!1){var n,i,o;if(this.value=e,typeof this.value!="string")throw Js("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(i=t.supportThemeIcons)!==null&&i!==void 0?i:!1,this.supportHtml=(o=t.supportHtml)!==null&&o!==void 0?o:!1)}appendText(e,t=0){return this.value+=mee(this.supportThemeIcons?OQ(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}h(Zi,"MarkdownString");function zf(s){return A8(s)?!s.value:Array.isArray(s)?s.every(zf):!0}h(zf,"isEmptyMarkdownString");function A8(s){return s instanceof Zi?!0:s&&typeof s=="object"?typeof s.value=="string"&&(typeof s.isTrusted=="boolean"||s.isTrusted===void 0)&&(typeof s.supportThemeIcons=="boolean"||s.supportThemeIcons===void 0):!1}h(A8,"isMarkdownString");function mee(s){return s.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}h(mee,"escapeMarkdownSyntaxTokens");function vS(s){return s&&s.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}h(vS,"removeMarkdownEscapes");function _ee(s){const e=[],t=s.split("|").map(i=>i.trim());s=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),r=i?i[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),d=isFinite(parseInt(r));l&&e.push(`width="${a}"`),d&&e.push(`height="${r}"`)}return{href:s,dimensions:e}}h(_ee,"parseHrefAndDimensions");var sk=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function bee(s,e){Yo(e)?s.title=QI(e):e?.markdownNotSupportedFallback?s.title=e.markdownNotSupportedFallback:s.removeAttribute("title")}h(bee,"setupNativeHover");class M8{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return sk(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let i;if(e===void 0||Yo(e)||e instanceof HTMLElement)i=e;else if(!Fw(e.markdown))i=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(p("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Bn;const o=this._cancellationTokenSource.token;if(i=yield e.markdown(o),i===void 0&&(i=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}this.show(i,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const i={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(i,t)}n?.dispose()}hasContent(e){return e?A8(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}h(M8,"UpdatableHoverWidget");function vee(s,e,t){let n,i;const o=h((c,u)=>{var f;c&&(i?.dispose(),i=void 0),u&&(n?.dispose(),n=void 0),(f=s.onDidHideHover)===null||f===void 0||f.call(s)},"hideHover"),r=h((c,u,f)=>new Ki(()=>sk(this,void 0,void 0,function*(){(!i||i.isDisposed)&&(i=new M8(s,f||e,c>0),yield i.update(t,u))}),c),"triggerShowHover"),a=h(()=>{if(n)return;const c=new Q,u=h(m=>o(!1,m.fromElement===e),"onMouseLeave");c.add(J(e,be.MOUSE_LEAVE,u,!0));const f=h(()=>o(!0,!0),"onMouseDown");c.add(J(e,be.MOUSE_DOWN,f,!0));const g={targetElements:[e],dispose:()=>{}};if(s.placement===void 0||s.placement==="mouse"){const m=h(b=>g.x=b.x+10,"onMouseMove");c.add(J(e,be.MOUSE_MOVE,m,!0))}c.add(r(s.delay,!1,g)),n=c},"onMouseOver"),l=J(e,be.MOUSE_OVER,a,!0);return{show:c=>{o(!1,!0),r(0,c)},hide:()=>{o(!0,!0)},update:c=>sk(this,void 0,void 0,function*(){t=c,yield i?.update(t)}),dispose:()=>{l.dispose(),o(!0,!0)}}}h(vee,"setupCustomHover");class cw{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}h(cw,"FastLabelNode");class qm extends z{constructor(e,t){super();this.customHovers=new Map,this.domNode=this._register(new cw(j(e,X(".monaco-icon-label")))),this.labelContainer=j(this.domNode.element,X(".monaco-icon-label-container"));const n=j(this.labelContainer,X("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new cw(j(this.labelContainer,X("span.monaco-icon-description-container")))),t?.supportHighlights||t?.supportIcons?this.nameNode=new P8(n,!!t.supportIcons):this.nameNode=new R8(n),t?.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new pd(j(this.descriptionContainer.element,X("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new cw(j(this.descriptionContainer.element,X("span.label-description")))),this.hoverDelegate=t?.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"];n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough")),this.domNode.className=i.join(" "),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof pd?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n?.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,n?.descriptionTitle||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)bee(e,t);else{const i=vee(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}h(qm,"IconLabel");class R8{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Go(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=j(this.container,X("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],o=t?.domId&&`${t?.domId}_${n}`;j(this.container,X("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&j(this.container,X("span.label-separator",void 0,t?.separator||"/"))}}}}h(R8,"Label");function wee(s,e,t){if(!t)return;let n=0;return s.map(i=>{const o={start:n,end:n+i.length},r=t.map(a=>Jn.intersect(o,a)).filter(a=>!Jn.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=o.end+e.length,r})}h(wee,"splitMatches");class P8{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Go(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new pd(j(this.container,X("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=t?.separator||"/",i=wee(e,n,t?.matches);for(let o=0;o<e.length;o++){const r=e[o],a=i?i[o]:void 0,l=t?.domId&&`${t?.domId}_${o}`,d=X("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});new pd(j(this.container,d),{supportIcons:this.supportIcons}).set(r,a,void 0,t?.labelEscapeNewLines),o<e.length-1&&j(d,X("span.label-separator",void 0,n))}}}}h(P8,"LabelWithHighlights");const cv=X;class b1{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=j(e,cv(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&b1.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(j(this.domNode,cv("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){Sn(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const i=UI.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(n?.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(n?.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(n?.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(n?.metaKey),i.separator);const o=t.keyLabel;o&&this.renderKey(e,o,Boolean(n?.keyCode),"")}renderKey(e,t,n,i){j(e,this.createKeyElement(t,n?".highlight":"")),i&&j(e,cv("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){j(e,this.createKeyElement(p("unbound","Unbound")))}createKeyElement(e,t=""){const n=cv("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Go(e.firstPart,t.firstPart)&&Go(e.chordPart,t.chordPart)}}h(b1,"KeybindingLabel");const q2=new Ra(()=>{const s=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:s,collatorIsNumeric:s.resolvedOptions().numeric}});new Ra(()=>({collator:new Intl.Collator(void 0,{numeric:!0})}));new Ra(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function Cee(s,e,t=!1){const n=s||"",i=e||"",o=q2.value.collator.compare(n,i);return q2.value.collatorIsNumeric&&o===0&&n!==i?n<i?-1:1:o}h(Cee,"compareFileNames");function yee(s,e,t){const n=s.toLowerCase(),i=e.toLowerCase(),o=See(s,e,t);if(o)return o;const r=n.endsWith(t),a=i.endsWith(t);if(r!==a)return r?-1:1;const l=Cee(n,i);return l!==0?l:n.localeCompare(i)}h(yee,"compareAnything");function See(s,e,t){const n=s.toLowerCase(),i=e.toLowerCase(),o=n.startsWith(t),r=i.startsWith(t);if(o!==r)return o?-1:1;if(o&&r){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}h(See,"compareByPrefix");var O8=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xee=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const Sr=X;class F8{constructor(e){this.hidden=!1,this._onChecked=new P,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}h(F8,"ListElement");class Eg{get templateId(){return Eg.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=j(e,Sr(".quick-input-list-entry"));const n=j(t.entry,Sr("label.quick-input-list-label"));t.toDisposeTemplate.push(Wn(n,be.CLICK,d=>{t.checkbox.offsetParent||d.preventDefault()})),t.checkbox=j(n,Sr("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Wn(t.checkbox,be.CHANGE,d=>{t.element.checked=t.checkbox.checked}));const i=j(n,Sr(".quick-input-list-rows")),o=j(i,Sr(".quick-input-list-row")),r=j(i,Sr(".quick-input-list-row"));t.label=new qm(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=j(o,Sr(".quick-input-list-entry-keybinding"));t.keybinding=new b1(a,Bo);const l=j(r,Sr(".quick-input-list-label-meta"));return t.detail=new qm(l,{supportHighlights:!0,supportIcons:!0}),t.separator=j(t.entry,Sr(".quick-input-list-separator")),t.actionBar=new rr(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=et(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(d=>n.checkbox.checked=d));const{labelHighlights:i,descriptionHighlights:o,detailHighlights:r}=e,a=Object.create(null);a.matches=i||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=o||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:r,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const l=e.item.buttons;l&&l.length?(n.actionBar.push(l.map((d,c)=>{let u=d.iconClass||(d.iconPath?ik(d.iconPath):void 0);d.alwaysVisible&&(u=u?`${u} always-visible`:"always-visible");const f=new Vi(`id-${c}`,"",u,!0,()=>xee(this,void 0,void 0,function*(){e.fireButtonTriggered({button:d,item:e.item})}));return f.tooltip=d.tooltip||"",f}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=et(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=et(e.toDisposeElement),e.toDisposeTemplate=et(e.toDisposeTemplate)}}h(Eg,"ListElementRenderer");Eg.ID="listelement";class W8{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return Eg.ID}}h(W8,"ListElementDelegate");var on;(function(s){s[s.First=1]="First",s[s.Second=2]="Second",s[s.Last=3]="Last",s[s.Next=4]="Next",s[s.Previous=5]="Previous",s[s.NextPage=6]="NextPage",s[s.PreviousPage=7]="PreviousPage"})(on||(on={}));class v1{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new P,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new P,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new P,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new P,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new P,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new P,this.onKeyDown=this._onKeyDown.event,this._onLeave=new P,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=j(this.parent,Sr(".quick-input-list"));const i=new W8,o=new V8;this.list=n.createList("QuickInput",this.container,i,[new Eg],{identityProvider:{getId:r=>r.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:o}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(r=>{const a=new Et(r);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(Ke?r.metaKey:r.ctrlKey)&&this.list.setFocus(fi(this.list.length));break;case 16:{const l=this.list.getFocus();l.length===1&&l[0]===0&&this._onLeave.fire();break}case 18:{const l=this.list.getFocus();l.length===1&&l[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(r=>{r.browserEvent.button!==2&&r.browserEvent.preventDefault()})),this.disposables.push(J(this.container,be.CLICK,r=>{(r.x||r.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(r=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(r=>{typeof r.index=="number"&&(r.browserEvent.preventDefault(),this.list.setSelection([r.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return fe.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return fe.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const o=e[n];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=et(this.elementDisposables);const t=h(n=>this.fireButtonTriggered(n),"fireButtonTriggered");this.inputElements=e,this.elements=e.reduce((n,i,o)=>{var r,a,l;if(i.type!=="separator"){const d=o&&e[o-1],c=i.label&&i.label.replace(/\r?\n/g," "),u=i.meta&&i.meta.replace(/\r?\n/g," "),f=i.description&&i.description.replace(/\r?\n/g," "),g=i.detail&&i.detail.replace(/\r?\n/g," "),m=i.ariaLabel||[c,f,g].map(v=>cG(v)).filter(v=>!!v).join(", "),b=this.parent.classList.contains("show-checkboxes");n.push(new F8({hasCheckbox:b,index:o,item:i,saneLabel:c,saneMeta:u,saneAriaLabel:m,saneDescription:f,saneDetail:g,labelHighlights:(r=i.highlights)===null||r===void 0?void 0:r.label,descriptionHighlights:(a=i.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(l=i.highlights)===null||l===void 0?void 0:l.detail,checked:!1,separator:d&&d.type==="separator"?d:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,i,o)=>(n.set(i.item,o),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===on.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=on.First),e===on.Previous&&this.list.getFocus()[0]===0&&(e=on.Last),e===on.Second&&this.list.length<2&&(e=on.First),e){case on.First:this.list.focusFirst();break;case on.Second:this.list.focusNth(1);break;case on.Last:this.list.focusLast();break;case on.Next:this.list.focusNext();break;case on.Previous:this.list.focusPrevious();break;case on.NextPage:this.list.focusNextPage();break;case on.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const i=n.index&&this.inputElements[n.index-1];n.separator=i&&i.type==="separator"?i:void 0});else{let n;this.elements.forEach(i=>{const o=this.matchOnLabel?Qi(dv(e,lv(i.saneLabel))):void 0,r=this.matchOnDescription?Qi(dv(e,lv(i.saneDescription||""))):void 0,a=this.matchOnDetail?Qi(dv(e,lv(i.saneDetail||""))):void 0,l=this.matchOnMeta?Qi(dv(e,lv(i.saneMeta||""))):void 0;if(o||r||a||l?(i.labelHighlights=o,i.descriptionHighlights=r,i.detailHighlights=a,i.hidden=!1):(i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!i.item.alwaysShow),i.separator=void 0,!this.sortByLabel){const d=i.index&&this.inputElements[i.index-1];n=d&&d.type==="separator"?d:n,n&&!i.hidden&&(i.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((i,o)=>Tee(i,o,n))}return this.elementsToIndexes=t.reduce((n,i,o)=>(n.set(i.item,o),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=et(this.elementDisposables),this.disposables=et(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}h(v1,"QuickInputList");O8([vn],v1.prototype,"onDidChangeFocus",null);O8([vn],v1.prototype,"onDidChangeSelection",null);function Tee(s,e,t){const n=s.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:yee(s.saneLabel,e.saneLabel,t)}h(Tee,"compareEntries");class V8{getWidgetAriaLabel(){return p("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!!e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}h(V8,"QuickInputAccessibilityProvider");var Y2=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const uo=X,rk={iconClass:_.quickInputBack.classNames,tooltip:p("quickInput.back","Back"),handle:-1};class X_ extends z{constructor(e){super();this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=X_.noPromptMessage,this._severity=Ot.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new P),this.onDidHideEmitter=this._register(new P),this.onDisposeEmitter=this._register(new P),this.visibleDisposables=this._register(new Q),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!tr;this._ignoreFocusOut=e&&!tr,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){!this.visible||this.ui.hide()}didHide(e=$m.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Ki,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const i=this.buttons.filter(r=>r===rk);this.ui.leftActionBar.push(i.map((r,a)=>{const l=new Vi(`id-${a}`,"",r.iconClass||ik(r.iconPath),!0,()=>Y2(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(r)}));return l.tooltip=r.tooltip||"",l}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this.buttons.filter(r=>r!==rk);this.ui.rightActionBar.push(o.map((r,a)=>{const l=new Vi(`id-${a}`,"",r.iconClass||ik(r.iconPath),!0,()=>Y2(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(r)}));return l.tooltip=r.tooltip||"",l}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,td(this.ui.message,...Bc(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?p("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ot.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}h(X_,"QuickInput");X_.noPromptMessage=p("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class Kf extends X_{constructor(){super(...arguments);this._value="",this.onDidChangeValueEmitter=this._register(new P),this.onWillAcceptEmitter=this._register(new P),this.onDidAcceptEmitter=this._register(new P),this.onDidCustomEmitter=this._register(new P),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Is.NONE:Is.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new P),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new P),this.onDidTriggerItemButtonEmitter=this._register(new P),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?cee:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(on.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(on.Next),this.canSelectMany&&this.ui.list.domFocus(),ct.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(on.Previous):this.ui.list.focus(on.Last),this.canSelectMany&&this.ui.list.domFocus(),ct.stop(e,!0);break;case 12:this.ui.list.focus(on.NextPage),this.canSelectMany&&this.ui.list.domFocus(),ct.stop(e,!0);break;case 11:this.ui.list.focus(on.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),ct.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(on.First),ct.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(on.Last),ct.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&xo(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&xo(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&xo(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return J(this.ui.container,be.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Et(e),n=t.keyCode;this._quickNavigate.keybindings.some(r=>{const[a,l]=r.getParts();return l?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const i=this.ariaLabel||this.placeholder||Kf.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==i&&(this.ui.inputBox.ariaLabel=i),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Is.NONE:this._itemActivation=Is.FIRST;break;case Is.SECOND:this.ui.list.focus(on.Second),this._itemActivation=Is.FIRST;break;case Is.LAST:this.ui.list.focus(on.Last),this._itemActivation=Is.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(on.First)),this.keepScrollPosition&&(this.scrollTop=e)}}h(Kf,"QuickPick");Kf.DEFAULT_ARIA_LABEL=p("quickInputBox.ariaLabel","Type to narrow down results.");class Z_ extends z{constructor(e){super();this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new P),this.onDidCustomEmitter=this._register(new P),this.onDidTriggerButtonEmitter=this._register(new P),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new P),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new P),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=h(t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey},"listener");this._register(J(window,be.KEY_DOWN,e,!0)),this._register(J(window,be.KEY_UP,e,!0)),this._register(J(window,be.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=j(this.parentElement,uo(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=es(e),n=j(e,uo(".quick-input-titlebar")),i=this._register(new rr(n));i.domNode.classList.add("quick-input-left-action-bar");const o=j(n,uo(".quick-input-title")),r=this._register(new rr(n));r.domNode.classList.add("quick-input-right-action-bar");const a=j(e,uo(".quick-input-description")),l=j(e,uo(".quick-input-header")),d=j(l,uo("input.quick-input-check-all"));d.type="checkbox",this._register(Wn(d,be.CHANGE,V=>{const F=d.checked;x.setAllVisibleChecked(F)})),this._register(J(d,be.CLICK,V=>{(V.x||V.y)&&g.setFocus()}));const c=j(l,uo(".quick-input-description")),u=j(l,uo(".quick-input-and-message")),f=j(u,uo(".quick-input-filter")),g=this._register(new N8(f));g.setAttribute("aria-describedby",`${this.idPrefix}message`);const m=j(f,uo(".quick-input-visible-count"));m.setAttribute("aria-live","polite"),m.setAttribute("aria-atomic","true");const b=new MC(m,{countFormat:p({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),v=j(f,uo(".quick-input-count"));v.setAttribute("aria-live","polite");const C=new MC(v,{countFormat:p({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),w=j(l,uo(".quick-input-action")),y=new nk(w);y.label=p("ok","OK"),this._register(y.onDidClick(V=>{this.onDidAcceptEmitter.fire()}));const S=j(l,uo(".quick-input-action")),L=new nk(S);L.label=p("custom","Custom"),this._register(L.onDidClick(V=>{this.onDidCustomEmitter.fire()}));const E=j(u,uo(`#${this.idPrefix}message.quick-input-message`)),x=this._register(new v1(e,this.idPrefix+"list",this.options));this._register(x.onChangedAllVisibleChecked(V=>{d.checked=V})),this._register(x.onChangedVisibleCount(V=>{b.setCount(V)})),this._register(x.onChangedCheckedCount(V=>{C.setCount(V)})),this._register(x.onLeave(()=>{setTimeout(()=>{g.setFocus(),this.controller instanceof Kf&&this.controller.canSelectMany&&x.clearFocus()},0)})),this._register(x.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const k=new Y_(e);k.getContainer().classList.add("quick-input-progress");const N=wf(e);return this._register(N),this._register(J(e,be.FOCUS,V=>{this.previousFocusElement=V.relatedTarget instanceof HTMLElement?V.relatedTarget:void 0},!0)),this._register(N.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide($m.Blur),this.previousFocusElement=void 0})),this._register(J(e,be.FOCUS,V=>{g.setFocus()})),this._register(J(e,be.KEY_DOWN,V=>{const F=new Et(V);switch(F.keyCode){case 3:ct.stop(V,!0),this.onDidAcceptEmitter.fire();break;case 9:ct.stop(V,!0),this.hide($m.Gesture);break;case 2:if(!F.altKey&&!F.ctrlKey&&!F.metaKey){const G=[".action-label.codicon"];e.classList.contains("show-checkboxes")?G.push("input"):G.push("input[type=text]"),this.getUI().list.isDisplayed()&&G.push(".monaco-list");const $=e.querySelectorAll(G.join(", "));F.shiftKey&&F.target===$[0]?(ct.stop(V,!0),$[$.length-1].focus()):!F.shiftKey&&F.target===$[$.length-1]&&(ct.stop(V,!0),$[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:i,titleBar:n,title:o,description1:a,description2:c,rightActionBar:r,checkAll:d,filterContainer:f,inputBox:g,visibleCountContainer:m,visibleCount:b,countContainer:v,count:C,okContainer:w,ok:y,message:E,customButtonContainer:S,customButton:L,list:x,progressBar:k,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:V=>this.show(V),hide:()=>this.hide(),setVisibilities:V=>this.setVisibilities(V),setComboboxAccessibility:V=>this.setComboboxAccessibility(V),setEnabled:V=>this.setEnabled(V),setContextKey:V=>this.options.setContextKey(V)},this.updateStyles(),this.ui}pick(e,t={},n=je.None){return new Promise((i,o)=>{let r=h(c=>{r=i,t.onKeyMods&&t.onKeyMods(a.keyMods),i(c)},"resolve");if(n.isCancellationRequested){r(void 0);return}const a=this.createQuickPick();let l;const d=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const c=a.activeItems[0];c&&(r(c),a.hide())}}),a.onDidChangeActive(c=>{const u=c[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(c=>{if(!a.canSelectMany){const u=c[0];u&&(r(u),a.hide())}}),a.onDidTriggerItemButton(c=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},c),{removeItem:()=>{const u=a.items.indexOf(c.item);if(u!==-1){const f=a.items.slice(),g=f.splice(u,1),m=a.activeItems.filter(v=>v!==g[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=f,m&&(a.activeItems=m),a.keepScrollPosition=b}}}))),a.onDidChangeValue(c=>{l&&!c&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{et(d),r(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([c,u])=>{l=u,a.busy=!1,a.items=c,a.canSelectMany&&(a.selectedItems=c.filter(f=>f.type!=="separator"&&f.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,c=>{o(c),a.hide()})})}createQuickPick(){const e=this.getUI();return new Kf(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ot.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),td(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const i=this.options.backKeybindingLabel();rk.tooltip=i?p("quickInput.backWithKeybinding","Back ({0})",i):p("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const i=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!i){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=Qi(o.parentElement);o?.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Z_.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:i,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const r=[];this.styles.list.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}h(Z_,"QuickInputController");Z_.MAX_WIDTH=600;class B8{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}h(B8,"CombinedSpliceable");class vl extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}h(vl,"ListError");function X2(s,e){const t=[];for(let n of e){if(s.start>=n.range.end)continue;if(s.end<n.range.start)break;const i=Jn.intersect(s,n.range);Jn.isEmpty(i)||t.push({range:i,size:n.size})}return t}h(X2,"groupIntersect");function ak({start:s,end:e},t){return{start:s+t,end:e+t}}h(ak,"shift");function Lee(s){const e=[];let t=null;for(let n of s){const i=n.range.start,o=n.range.end,r=n.size;if(t&&r===t.size){t.range.end=o;continue}t={range:{start:i,end:o},size:r},e.push(t)}return e}h(Lee,"consolidate");function kee(...s){return Lee(s.reduce((e,t)=>e.concat(t),[]))}h(kee,"concat");class lk{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const i=n.length-t,o=X2({start:0,end:e},this.groups),r=X2({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:ak(l.range,i),size:l.size})),a=n.map((l,d)=>({range:{start:e+d,end:e+d+1},size:l.size}));this.groups=kee(o,a,r),this._size=this.groups.reduce((l,d)=>l+d.size*(d.range.end-d.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const o=i.range.end-i.range.start,r=n+o*i.size;if(e<r)return t+Math.floor((e-n)/i.size);t+=o,n=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){const o=i.range.end-i.range.start,r=n+o;if(e<r)return t+(e-n)*i.size;t+=o*i.size,n=r}return-1}}h(lk,"RangeMap");function Eee(s){try{s.parentElement&&s.parentElement.removeChild(s)}catch{}}h(Eee,"removeFromParent");class H8{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=X(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:o}}return t}release(e){!e||this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),Eee(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}h(H8,"RowCache");var jh=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};const _r={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(s){return[s]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class Dg{constructor(e){this.elements=e}update(){}getData(){return this.elements}}h(Dg,"ElementsDragAndDropData");class z8{constructor(e){this.elements=e}update(){}getData(){return this.elements}}h(z8,"ExternalElementsDragAndDropData");class K8{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}h(K8,"NativeDragAndDropData");function Dee(s,e){return Array.isArray(s)&&Array.isArray(e)?xo(s,e):s===e}h(Dee,"equalsDragFeedback");class U8{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}h(U8,"ListViewAccessibilityProvider");class ys{constructor(e,t,n,i=_r){if(this.virtualDelegate=t,this.domId=`list_id_${++ys.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new nr(50),this.splicing=!1,this.dragOverAnimationStopDisposable=z.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=z.None,this.onDragLeaveTimeout=z.None,this.disposables=new Q,this._onDidChangeContentHeight=new P,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new lk;for(const r of n)this.renderers.set(r.templateId,r);this.cache=this.disposables.add(new H8(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=mr(i,r=>r.horizontalScrolling,_r.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof i.additionalScrollHeight>"u"?0:i.additionalScrollHeight,this.accessibilityProvider=new U8(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",mr(i,r=>r.transformOptimization,_r.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(dt.addTarget(this.rowsContainer)),this.scrollable=new xg({forceIntegerValues:!0,smoothScrollDuration:mr(i,r=>r.smoothScrolling,!1)?125:0,scheduleAtNextAnimationFrame:r=>ir(r)}),this.scrollableElement=this.disposables.add(new $0(this.rowsContainer,{alwaysConsumeMouseWheel:mr(i,r=>r.alwaysConsumeMouseWheel,_r.alwaysConsumeMouseWheel),horizontal:1,vertical:mr(i,r=>r.verticalScrollMode,_r.verticalScrollMode),useShadows:mr(i,r=>r.useShadows,_r.useShadows),mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(J(this.rowsContainer,kt.Change,r=>this.onTouchChange(r))),this.disposables.add(J(this.scrollableElement.getDomNode(),"scroll",r=>r.target.scrollTop=0)),this.disposables.add(J(this.domNode,"dragover",r=>this.onDragOver(this.toDragEvent(r)))),this.disposables.add(J(this.domNode,"drop",r=>this.onDrop(this.toDragEvent(r)))),this.disposables.add(J(this.domNode,"dragleave",r=>this.onDragLeave(this.toDragEvent(r)))),this.disposables.add(J(this.domNode,"dragend",r=>this.onDragEnd(r))),this.setRowLineHeight=mr(i,r=>r.setRowLineHeight,_r.setRowLineHeight),this.setRowHeight=mr(i,r=>r.setRowHeight,_r.setRowHeight),this.supportDynamicHeights=mr(i,r=>r.supportDynamicHeights,_r.supportDynamicHeights),this.dnd=mr(i,r=>r.dnd,_r.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Iy(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=Jn.intersect(i,o),a=new Map;for(let E=r.end-1;E>=r.start;E--){const x=this.items[E];if(x.dragStartDisposable.dispose(),x.row){let k=a.get(x.templateId);k||(k=[],a.set(x.templateId,k));const N=this.renderers.get(x.templateId);N&&N.disposeElement&&N.disposeElement(x.element,E,x.row.templateData,x.size),k.push(x.row)}x.row=null}const l={start:e+t,end:this.items.length},d=Jn.intersect(l,i),c=Jn.relativeComplement(l,i),u=n.map(E=>({id:String(this.itemId++),element:E,templateId:this.virtualDelegate.getTemplateId(E),size:this.virtualDelegate.getHeight(E),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(E),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:z.None,checkedDisposable:z.None}));let f;e===0&&t>=this.items.length?(this.rangeMap=new lk,this.rangeMap.splice(0,0,u),f=this.items,this.items=u):(this.rangeMap.splice(e,t,u),f=this.items.splice(e,t,...u));const g=n.length-t,m=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=ak(d,g),v=Jn.intersect(m,b);for(let E=v.start;E<v.end;E++)this.updateItemInDOM(this.items[E],E);const C=Jn.relativeComplement(b,m);for(const E of C)for(let x=E.start;x<E.end;x++)this.removeItemFromDOM(x);const w=c.map(E=>ak(E,g)),S=[{start:e,end:e+n.length},...w].map(E=>Jn.intersect(m,E)),L=this.getNextToLastElement(S);for(const E of S)for(let x=E.start;x<E.end;x++){const k=this.items[x],N=a.get(k.templateId),V=N?.pop();this.insertItemInDOM(x,L,V)}for(const E of a.values())for(const x of E)this.cache.release(x);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),f.map(E=>E.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=ir(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(!!this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:J$(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:Iy(this.domNode)})}render(e,t,n,i,o,r=!1){const a=this.getRenderRange(t,n),l=Jn.relativeComplement(a,e),d=Jn.relativeComplement(e,a),c=this.getNextToLastElement(l);if(r){const u=Jn.intersect(e,a);for(let f=u.start;f<u.end;f++)this.updateItemInDOM(this.items[f],f)}for(const u of l)for(let f=u.start;f<u.end;f++)this.insertItemInDOM(f,c);for(const u of d)for(let f=u.start;f<u.end;f++)this.removeItemFromDOM(f);i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];i.row||(i.row=n??this.cache.alloc(i.templateId));const o=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",o);const r=this.accessibilityProvider.isChecked(i.element);if(typeof r=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const d=h(c=>i.row.domNode.setAttribute("aria-checked",String(!!c)),"update");d(r.value),i.checkedDisposable=r.onDidChange(d)}i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const a=this.renderers.get(i.templateId);if(!a)throw new Error(`No renderer found for template id ${i.templateId}`);a&&a.renderElement(i.element,e,i.row.templateData,i.size);const l=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!l,l&&(i.dragStartDisposable=J(i.row.domNode,"dragstart",d=>this.onDragStart(i.element,l,d))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=Eo?"-moz-fit-content":"fit-content",e.width=Iy(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return fe.map(this.disposables.add(new ft(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return fe.map(this.disposables.add(new ft(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return fe.filter(fe.map(this.disposables.add(new ft(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return fe.map(this.disposables.add(new ft(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return fe.any(fe.map(this.disposables.add(new ft(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),fe.map(this.disposables.add(new ft(this.domNode,kt.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return fe.map(this.disposables.add(new ft(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return fe.map(this.disposables.add(new ft(this.rowsContainer,kt.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(h9.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(i,n)),typeof o>"u"&&(o=String(i.length));const r=X(".monaco-drag-image");r.textContent=o,document.body.appendChild(r),n.dataTransfer.setDragImage(r,-10,-10),setTimeout(()=>document.body.removeChild(r),0)}this.currentDragData=new Dg(i),ma.CurrentDragAndDropData=new z8(i),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),ma.CurrentDragAndDropData&&ma.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(ma.CurrentDragAndDropData)this.currentDragData=ma.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new K8}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Yl(n).filter(i=>i>=-1&&i<this.length).sort((i,o)=>i-o),n=n[0]===-1?[-1]:n,Dee(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=He(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const i of n){const o=this.items[i];o.dropTarget=!0,o.row&&o.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=He(()=>{for(const i of n){const o=this.items[i];o.dropTarget=!1,o.row&&o.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Xc(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,ma.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,ma.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=z.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=v5(this.domNode).top;this.dragOverAnimationDisposable=sq(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Xc(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const o=Number(i);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let o,r;e===this.elementTop(i.start)?(o=i.start,r=0):i.end-i.start>1&&(o=i.start+1,r=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let d=!1;for(let c=l.start;c<l.end;c++){const u=this.probeDynamicHeight(c);u!==0&&this.rangeMap.splice(c,1,[this.items[c]]),a+=u,d=d||u!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();const c=Jn.relativeComplement(i,l);for(const f of c)for(let g=f.start;g<f.end;g++)this.items[g].row&&this.removeItemFromDOM(g);const u=Jn.relativeComplement(l,i);for(const f of u)for(let g=f.start;g<f.end;g++){const m=g+1,b=m<this.items.length?this.items[m].row:null,v=b?b.domNode:null;this.insertItemInDOM(g,v)}for(let f=l.start;f<l.end;f++)this.items[f].row&&this.updateItemInDOM(this.items[f],f);if(typeof o=="number"){const f=this.scrollable.getFutureScrollPosition().scrollTop-e,g=this.elementTop(o)-r+f;this.setScrollTop(g,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const r=this.virtualDelegate.getDynamicHeight(t.element);if(r!==null){const a=t.size;return t.size=r,t.lastDynamicHeightWidth=this.renderWidth,r-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let r=t.row.domNode.offsetHeight;return t.size=r,t.lastDynamicHeightWidth=this.renderWidth,r-n}const i=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);const o=this.renderers.get(t.templateId);return o&&(o.renderElement(t.element,e,i.templateData,void 0),o.disposeElement&&o.disposeElement(t.element,e,i.templateData,void 0)),t.size=i.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(i.domNode),this.cache.release(i),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),et(this.disposables)}}h(ys,"ListView");ys.InstanceCount=0;jh([vn],ys.prototype,"onMouseClick",null);jh([vn],ys.prototype,"onMouseDblClick",null);jh([vn],ys.prototype,"onMouseMiddleClick",null);jh([vn],ys.prototype,"onMouseDown",null);jh([vn],ys.prototype,"onContextMenu",null);jh([vn],ys.prototype,"onTouchStart",null);jh([vn],ys.prototype,"onTap",null);var Gh=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Z2=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class j8{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(o=>o.templateData===n);if(i>=0){const o=this.renderedElements[i];this.trait.unrender(n),o.index=t}else{const o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const o of this.renderedElements)o.index<e?i.push(o):o.index>=e+t&&i.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}h(j8,"TraitRenderer");class Ym{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new P,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new j8(this)}splice(e,t,n){var i;t=Math.max(0,Math.min(t,this.length-e));const o=n.length-t,r=e+t,a=[...this.sortedIndexes.filter(d=>d<e),...n.map((d,c)=>d?c+e:-1).filter(d=>d!==-1),...this.sortedIndexes.filter(d=>d>=r).map(d=>d+o)],l=this.length+o;if(this.sortedIndexes.length>0&&a.length===0&&l>0){const d=(i=this.sortedIndexes.find(c=>c>=e))!==null&&i!==void 0?i:l-1;a.push(Math.min(d,l-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Q2),t)}_set(e,t,n){const i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=dk(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return cD(this.sortedIndexes,e,Q2)>=0}dispose(){et(this._onChange)}}h(Ym,"Trait$1");Gh([vn],Ym.prototype,"renderer",null);class G8 extends Ym{constructor(e){super("selected");this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}h(G8,"SelectionTrait");class hw{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const i=this.trait.get().map(r=>this.identityProvider.getId(this.view.element(r)).toString()),o=n.map(r=>i.indexOf(this.identityProvider.getId(r).toString())>-1);this.trait.splice(e,t,o)}}h(hw,"TraitSpliceable");function md(s){return s.tagName==="INPUT"||s.tagName==="TEXTAREA"}h(md,"isInputElement");function Pu(s){return s.classList.contains("monaco-editor")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:Pu(s.parentElement)}h(Pu,"isMonacoEditor");class lN{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Q,this.multipleSelectionDisposables=new Q,this.onKeyDown.filter(i=>i.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(i=>i.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(i=>(Ke?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return fe.chain(this.disposables.add(new ft(this.view.domNode,"keydown")).event).filter(e=>!md(e.target)).map(e=>new Et(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(Ke?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(fi(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}h(lN,"KeyboardController");Gh([vn],lN.prototype,"onKeyDown",null);var Ou;(function(s){s[s.Idle=0]="Idle",s[s.Typing=1]="Typing"})(Ou||(Ou={}));const $8=new class{mightProducePrintableCharacter(s){return s.ctrlKey||s.metaKey||s.altKey?!1:s.keyCode>=31&&s.keyCode<=56||s.keyCode>=21&&s.keyCode<=30||s.keyCode>=93&&s.keyCode<=102||s.keyCode>=80&&s.keyCode<=90}};class q8{constructor(e,t,n,i){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=i,this.enabled=!1,this.state=Ou.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Q,this.disposables=new Q,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=fe.chain(this.enabledDisposables.add(new ft(this.view.domNode,"keydown")).event).filter(i=>!md(i.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(i=>new Et(i)).filter(i=>this.delegate.mightProducePrintableCharacter(i)).forEach(i=>i.preventDefault()).map(i=>i.browserEvent.key).event,t=fe.debounce(e,()=>null,800);fe.reduce(fe.any(e,t),(i,o)=>o===null?null:(i||"")+o)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&qn(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Ou.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===Ou.Idle?1:0;this.state=Ou.Typing;for(let o=0;o<this.list.length;o++){const r=(n+o+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(typeof l>"u"||u1(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}h(q8,"TypeLabelController");class Y8{constructor(e,t){this.list=e,this.view=t,this.disposables=new Q,fe.chain(this.disposables.add(new ft(t.domNode,"keydown")).event).filter(i=>!md(i.target)).map(i=>new Et(i)).filter(i=>i.keyCode===2&&!i.ctrlKey&&!i.metaKey&&!i.shiftKey&&!i.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||i.tabIndex===-1)return;const o=window.getComputedStyle(i);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}h(Y8,"DOMFocusController");function X8(s){return Ke?s.browserEvent.metaKey:s.browserEvent.ctrlKey}h(X8,"isSelectionSingleChangeEvent");function Z8(s){return s.browserEvent.shiftKey}h(Z8,"isSelectionRangeChangeEvent");function Iee(s){return s instanceof MouseEvent&&s.button===2}h(Iee,"isMouseRightClick");const J2={isSelectionSingleChangeEvent:X8,isSelectionRangeChangeEvent:Z8};class dN{constructor(e){this.list=e,this.disposables=new Q,this._onPointer=new P,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||J2),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(dt.addTarget(e.getHTMLElement()))),fe.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||J2))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Pu(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Pu(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||md(e.browserEvent.target)||Pu(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Iee(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(md(e.browserEvent.target)||Pu(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const c=this.list.getFocus()[0];n=c??t,this.list.setAnchor(n)}const i=Math.min(n,t),o=Math.max(n,t),r=fi(i,o+1),a=this.list.getSelection(),l=Mee(dk(a,[n]),n);if(l.length===0)return;const d=dk(r,Ree(a,l));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),o=i.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}h(dN,"MouseController");class cN{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):Ke||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}h(cN,"DefaultStyleController");const Nee={listFocusBackground:H.fromHex("#7FB0D0"),listActiveSelectionBackground:H.fromHex("#0E639C"),listActiveSelectionForeground:H.fromHex("#FFFFFF"),listActiveSelectionIconForeground:H.fromHex("#FFFFFF"),listFocusAndSelectionBackground:H.fromHex("#094771"),listFocusAndSelectionForeground:H.fromHex("#FFFFFF"),listInactiveSelectionBackground:H.fromHex("#3F3F46"),listInactiveSelectionIconForeground:H.fromHex("#FFFFFF"),listHoverBackground:H.fromHex("#2A2D2E"),listDropBackground:H.fromHex("#383B3D"),treeIndentGuidesStroke:H.fromHex("#a9a9a9"),tableColumnsBorder:H.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:H.fromHex("#cccccc").transparent(.04)},Aee={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Mee(s,e){const t=s.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&s[i]===e-(t-i);)n.push(s[i--]);for(n.reverse(),i=t;i<s.length&&s[i]===e+(i-t);)n.push(s[i++]);return n}h(Mee,"getContiguousRangeContaining");function dk(s,e){const t=[];let n=0,i=0;for(;n<s.length||i<e.length;)if(n>=s.length)t.push(e[i++]);else if(i>=e.length)t.push(s[n++]);else if(s[n]===e[i]){t.push(s[n]),n++,i++;continue}else s[n]<e[i]?t.push(s[n++]):t.push(e[i++]);return t}h(dk,"disjunction");function Ree(s,e){const t=[];let n=0,i=0;for(;n<s.length||i<e.length;)if(n>=s.length)t.push(e[i++]);else if(i>=e.length)t.push(s[n++]);else if(s[n]===e[i]){n++,i++;continue}else s[n]<e[i]?t.push(s[n++]):i++;return t}h(Ree,"relativeComplement");const Q2=h((s,e)=>s-e,"numericSort");class J8{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let o=0;for(const r of this.renderers)r.renderElement(e,t,n[o++],i)}disposeElement(e,t,n,i){let o=0;for(const r of this.renderers)r.disposeElement&&r.disposeElement(e,t,n[o],i),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}h(J8,"PipelineRenderer");class Q8{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?n.setAttribute("aria-level",`${o}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}h(Q8,"AccessibiltyRenderer");class eW{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,i){return this.dnd.onDragOver(e,t,n,i)}onDragLeave(e,t,n,i){var o,r;(r=(o=this.dnd).onDragLeave)===null||r===void 0||r.call(o,e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,i){this.dnd.drop(e,t,n,i)}}h(eW,"ListViewDragAndDrop");class hr{constructor(e,t,n,i,o=Aee){var r;this.user=e,this._options=o,this.focus=new Ym("focused"),this.anchor=new Ym("anchor"),this.eventBufferer=new c0,this._ariaLabel="",this.disposables=new Q,this._onDidDispose=new P,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(r=this._options.accessibilityProvider)===null||r===void 0?void 0:r.getWidgetRole():"list";this.selection=new G8(a!=="listbox"),$r(o,Nee,!1);const l=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(l.push(new Q8(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(c=>new J8(c.templateId,[...l,c]));const d=Object.assign(Object.assign({},o),{dnd:o.dnd&&new eW(this,o.dnd)});if(this.view=new ys(t,n,i,d),this.view.domNode.setAttribute("role",a),o.styleController)this.styleController=o.styleController(this.view.domId);else{const c=es(this.view.domNode);this.styleController=new cN(c,this.view.domId)}if(this.spliceable=new B8([new hw(this.focus,this.view,o.identityProvider),new hw(this.selection,this.view,o.identityProvider),new hw(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Y8(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new lN(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const c=o.keyboardNavigationDelegate||$8;this.typeLabelController=new q8(this,this.view,o.keyboardNavigationLabelProvider,c),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return fe.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return fe.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=fe.chain(this.disposables.add(new ft(this.view.domNode,"keydown")).event).map(o=>new Et(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(m2).filter(()=>!1).event,n=fe.chain(this.disposables.add(new ft(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(o=>new Et(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(m2).map(({browserEvent:o})=>{const r=this.getFocus(),a=r.length?r[0]:void 0,l=typeof a<"u"?this.view.element(a):void 0,d=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:l,anchor:d,browserEvent:o}}).event,i=fe.chain(this.view.onContextMenu).filter(o=>!e).map(({element:o,index:r,browserEvent:a})=>({element:o,index:r,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return fe.any(t,n,i)}get onKeyDown(){return this.disposables.add(new ft(this.view.domNode,"keydown")).event}get onDidFocus(){return fe.signal(this.disposables.add(new ft(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new dN(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new vl(this.user,`Invalid start index: ${e}`);if(t<0)throw new vl(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new vl(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new vl(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return FP(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new vl(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,i);r>-1&&this.setFocus([r],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);r>-1&&this.setFocus([r],n)}focusNextPage(e,t){return Z2(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.view.element(n),o=this.getFocusedElements()[0];if(o!==i){const r=this.findPreviousIndex(n,!1,t);r>-1&&o!==this.view.element(r)?this.setFocus([r],e):this.setFocus([n],e)}else{const r=this.view.getScrollTop();this.view.setScrollTop(r+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==r&&(this.setFocus([]),yield Zl(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return Z2(this,void 0,void 0,function*(){let n;const i=this.view.getScrollTop();i===0?n=this.view.indexAt(i):n=this.view.indexAfter(i-1);const o=this.view.element(n),r=this.getFocusedElements()[0];if(r!==o){const a=this.findNextIndex(n,!1,t);a>-1&&r!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield Zl(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new vl(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if(Gc(t)){const r=o-this.view.renderHeight;this.view.setScrollTop(r*qi(t,0,1)+i)}else{const r=i+o,a=n+this.view.renderHeight;i<n&&r>=a||(i<n||r>=a&&o>=this.view.renderHeight?this.view.setScrollTop(i):r>=a&&this.view.setScrollTop(r-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new vl(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),i=this.view.elementHeight(e);if(n<t||n+i>t+this.view.renderHeight)return null;const o=i-this.view.renderHeight;return Math.abs((t-n)/o)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}h(hr,"List");Gh([vn],hr.prototype,"onDidChangeFocus",null);Gh([vn],hr.prototype,"onDidChangeSelection",null);Gh([vn],hr.prototype,"onContextMenu",null);Gh([vn],hr.prototype,"onKeyDown",null);Gh([vn],hr.prototype,"onDidFocus",null);class tW{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:z.None}}renderElement(e,t,n,i){if(n.disposable&&n.disposable.dispose(),!n.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,i);const r=new Bn,a=o.resolve(e,r.token);n.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}h(tW,"PagedRenderer");class nW{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}h(nW,"PagedAccessibilityProvider");function Pee(s,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new nW(s,e.accessibilityProvider)})}h(Pee,"fromPagedListOptions");class iW{constructor(e,t,n,i,o={}){const r=h(()=>this.model,"modelProvider"),a=i.map(l=>new tW(l,r));this.list=new hr(e,t,n,a,Pee(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return fe.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return fe.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return fe.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,fi(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}h(iW,"PagedList");const Oee={separatorBorder:H.transparent};class hN{constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=qi(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}h(hN,"ViewItem");class oW extends hN{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}h(oW,"VerticalViewItem");class sW extends hN{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}h(sW,"HorizontalViewItem");var _a;(function(s){s[s.Idle=0]="Idle",s[s.Busy=1]="Busy"})(_a||(_a={}));var RC;(function(s){s.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}h(e,"Split"),s.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}h(t,"Invisible"),s.Invisible=t})(RC||(RC={}));class uN extends z{constructor(e,t={}){var n,i,o,r,a;super();this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=_a.Idle,this._onDidSashChange=this._register(new P),this._onDidSashReset=this._register(new P),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(i=t.inverseAltBehavior)!==null&&i!==void 0?i:!1,this.proportionalLayout=(o=t.proportionalLayout)!==null&&o!==void 0?o:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=j(this.el,X(".sash-container")),this.viewContainer=X(".split-view-container"),this.scrollable=new xg({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:ir}),this.scrollableElement=this._register(new $0(this.viewContainer,{vertical:this.orientation===0?(r=t.scrollbarVisibility)!==null&&r!==void 0?r:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(l=>{this.viewContainer.scrollTop=l.scrollTop,this.viewContainer.scrollLeft=l.scrollLeft})),j(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||Oee),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((l,d)=>{const c=Ji(l.visible)||l.visible?l.size:{type:"invisible",cachedVisibleSize:l.size},u=l.view;this.doAddView(u,c,d,!0)}),this.contentSize=this.viewItems.reduce((l,d)=>l+d.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let i=0;i<this.viewItems.length;i++){const o=this.viewItems[i];o.size=qi(Math.round(this.proportions[i]*e),o.minimumSize,o.maximumSize)}else{const i=fi(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),o=Ma(J(document.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),J(document.body,"keyup",()=>r(this.sashDragState.current,!1))),r=h((a,l)=>{const d=this.viewItems.map(m=>m.size);let c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const b=this.viewItems[i];c=(b.minimumSize-b.size)/2,u=(b.maximumSize-b.size)/2}else{const b=this.viewItems[i+1];c=(b.size-b.maximumSize)/2,u=(b.size-b.minimumSize)/2}let f,g;if(!l){const m=fi(i,-1),b=fi(i+1,this.viewItems.length),v=m.reduce((k,N)=>k+(this.viewItems[N].minimumSize-d[N]),0),C=m.reduce((k,N)=>k+(this.viewItems[N].viewMaximumSize-d[N]),0),w=b.length===0?Number.POSITIVE_INFINITY:b.reduce((k,N)=>k+(d[N]-this.viewItems[N].minimumSize),0),y=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((k,N)=>k+(d[N]-this.viewItems[N].viewMaximumSize),0),S=Math.max(v,y),L=Math.min(w,C),E=this.findFirstSnapIndex(m),x=this.findFirstSnapIndex(b);if(typeof E=="number"){const k=this.viewItems[E],N=Math.floor(k.viewMinimumSize/2);f={index:E,limitDelta:k.visible?S-N:S+N,size:k.size}}if(typeof x=="number"){const k=this.viewItems[x],N=Math.floor(k.viewMinimumSize/2);g={index:x,limitDelta:k.visible?L+N:L-N,size:k.size}}}this.sashDragState={start:a,current:a,index:i,sizes:d,minDelta:c,maxDelta:u,alt:l,snapBefore:f,snapAfter:g,disposable:o}},"resetSashDragState");r(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const c=e-n,u=this.resize(t,c,i,void 0,void 0,r,a,l,d);if(o){const f=t===this.sashItems.length-1,g=this.viewItems.map(y=>y.size),m=f?t:t+1,b=this.viewItems[m],v=b.size-b.maximumSize,C=b.size-b.minimumSize,w=f?t-1:t+1;this.resize(w,-u,g,void 0,void 0,v,C)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=qi(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==_a.Idle)throw new Error("Cant modify splitview");if(this.state=_a.Busy,e<0||e>=this.viewItems.length)return;const n=fi(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=qi(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(i,o),this.state=_a.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=qi(n,a.minimumSize,a.maximumSize);const i=fi(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==_a.Idle)throw new Error("Cant modify splitview");this.state=_a.Busy;const o=X(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));const r=e.onDidChange(f=>this.onViewChange(c,f)),a=He(()=>this.viewContainer.removeChild(o)),l=Ma(r,a);let d;typeof t=="number"?d=t:t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize;const c=this.orientation===0?new oW(o,e,d,l):new sW(o,e,d,l);if(this.viewItems.splice(n,0,c),this.viewItems.length>1){let f={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const g=this.orientation===0?new jn(this.sashContainer,{getHorizontalSashTop:k=>this.getSashPosition(k),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},f),{orientation:1})):new jn(this.sashContainer,{getVerticalSashLeft:k=>this.getSashPosition(k),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},f),{orientation:0})),m=this.orientation===0?k=>({sash:g,start:k.startY,current:k.currentY,alt:k.altKey}):k=>({sash:g,start:k.startX,current:k.currentX,alt:k.altKey}),v=fe.map(g.onDidStart,m)(this.onSashStart,this),w=fe.map(g.onDidChange,m)(this.onSashChange,this),S=fe.map(g.onDidEnd,()=>this.sashItems.findIndex(k=>k.sash===g))(this.onSashEnd,this),L=g.onDidReset(()=>{const k=this.sashItems.findIndex($=>$.sash===g),N=fi(k,-1),V=fi(k+1,this.viewItems.length),F=this.findFirstSnapIndex(N),G=this.findFirstSnapIndex(V);typeof F=="number"&&!this.viewItems[F].visible||typeof G=="number"&&!this.viewItems[G].visible||this._onDidSashReset.fire(k)}),E=Ma(v,w,S,L,g),x={sash:g,disposable:E};this.sashItems.splice(n-1,0,x)}o.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),i||this.relayout([n],u),this.state=_a.Idle,!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((i,o)=>i+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(c=>c.size),i,o,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,d){if(e<0||e>=this.viewItems.length)return 0;const c=fi(e,-1),u=fi(e+1,this.viewItems.length);if(o)for(const x of o)my(c,x),my(u,x);if(i)for(const x of i)Wb(c,x),Wb(u,x);const f=c.map(x=>this.viewItems[x]),g=c.map(x=>n[x]),m=u.map(x=>this.viewItems[x]),b=u.map(x=>n[x]),v=c.reduce((x,k)=>x+(this.viewItems[k].minimumSize-n[k]),0),C=c.reduce((x,k)=>x+(this.viewItems[k].maximumSize-n[k]),0),w=u.length===0?Number.POSITIVE_INFINITY:u.reduce((x,k)=>x+(n[k]-this.viewItems[k].minimumSize),0),y=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((x,k)=>x+(n[k]-this.viewItems[k].maximumSize),0),S=Math.max(v,y,r),L=Math.min(w,C,a);let E=!1;if(l){const x=this.viewItems[l.index],k=t>=l.limitDelta;E=k!==x.visible,x.setVisible(k,l.size)}if(!E&&d){const x=this.viewItems[d.index],k=t<d.limitDelta;E=k!==x.visible,x.setVisible(k,d.size)}if(E)return this.resize(e,t,n,i,o,r,a);t=qi(t,S,L);for(let x=0,k=t;x<f.length;x++){const N=f[x],V=qi(g[x]+k,N.minimumSize,N.maximumSize);k-=V-g[x],N.size=V}for(let x=0,k=t;x<m.length;x++){const N=m[x],V=qi(b[x]-k,N.minimumSize,N.maximumSize);k+=V-b[x],N.size=V}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=fi(this.viewItems.length-1,-1),o=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);for(const a of r)my(i,a);for(const a of o)Wb(i,a);typeof e=="number"&&Wb(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],d=qi(l.size+n,l.minimumSize,l.maximumSize);n-=d-l.size,l.size=d}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const o=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:d}=this.sashItems[l];a+=this.viewItems[l].size;const u=!(t[l]&&r[l+1]),f=!(n[l]&&o[l+1]);if(u&&f){const g=fi(l,-1),m=fi(l+1,this.viewItems.length),b=this.findFirstSnapIndex(g),v=this.findFirstSnapIndex(m),C=typeof b=="number"&&!this.viewItems[b].visible,w=typeof v=="number"&&!this.viewItems[v].visible;C&&o[l]&&(a>0||this.startSnappingEnabled)?d.state=1:w&&t[l]&&(a<this.contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else u&&!f?d.state=1:!u&&f?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(!!n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),et(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}h(uN,"SplitView");class Ig{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=Ig.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const r=i.get(o.templateId);if(!r)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=j(e,X(".monaco-table-tr")),n=[],i=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=j(t,X(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,n.push(l),i.push(a.renderTemplate(l))}const o={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(o),o}renderElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],i)}}disposeElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){const r=this.renderers[o];if(r.disposeElement){const l=this.columns[o].project(e);r.disposeElement(l,t,n.cellTemplateData[o],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Sn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}h(Ig,"TableListRenderer");Ig.TemplateId="row";function Fee(s){return{getHeight(e){return s.getHeight(e)},getTemplateId(){return Ig.TemplateId}}}h(Fee,"asListVirtualDelegate");class rW{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new P,this.onDidLayout=this._onDidLayout.event,this.element=X(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:fe.None}layout(e){this._onDidLayout.fire([this.index,e])}}h(rW,"ColumnHeader");class J_{constructor(e,t,n,i,o,r){this.virtualDelegate=n,this.domId=`table_id_${++J_.InstanceCount}`,this.disposables=new Q,this.cachedWidth=0,this.cachedHeight=0,this.domNode=j(t,X(`.monaco-table.${this.domId}`));const a=i.map((c,u)=>new rW(c,u)),l={size:a.reduce((c,u)=>c+u.column.weight,0),views:a.map(c=>({size:c.column.weight,view:c}))};this.splitview=this.disposables.add(new uN(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const d=new Ig(i,o,c=>this.splitview.getViewSize(c));this.list=this.disposables.add(new hr(e,this.domNode,Fee(n),[d],r)),fe.any(...a.map(c=>c.onDidLayout))(([c,u])=>d.layoutColumn(c,u),null,this.disposables),this.splitview.onDidSashReset(c=>{const u=i.reduce((g,m)=>g+m.weight,0),f=i[c].weight/u*this.cachedWidth;this.splitview.resizeView(c,f)},null,this.disposables),this.styleElement=es(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}h(J_,"Table");J_.InstanceCount=0;var Qp;(function(s){s[s.Unknown=0]="Unknown",s[s.Twistie=1]="Twistie",s[s.Element=2]="Element"})(Qp||(Qp={}));class wo extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}h(wo,"TreeError");class w1{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}h(w1,"WeakMapper");function fN(s){return typeof s=="object"&&"visibility"in s&&"data"in s}h(fN,"isFilterResult");function Xm(s){switch(s){case!0:return 1;case!1:return 0;default:return s}}h(Xm,"getVisibleState");function wS(s){return typeof s.collapsible=="boolean"}h(wS,"isCollapsibleStateUpdate");class aW{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new c0,this._onDidChangeCollapseState=new P,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new P,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new P,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new nr(C4),this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Qe.empty(),i={}){if(e.length===0)throw new wo(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,o,r){var a;i===void 0&&(i=Qe.empty()),r===void 0&&(r=(a=o.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:l}=this.getParentNodeWithListIndex(t);if(!l.lastDiffIds)return this.spliceSimple(t,n,i,o);const d=[...i],c=t[t.length-1],u=new Bs({getElements:()=>l.lastDiffIds},{getElements:()=>[...l.children.slice(0,c),...d,...l.children.slice(c+n)].map(v=>e.getId(v.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return l.lastDiffIds=void 0,this.spliceSimple(t,n,d,o);const f=t.slice(0,-1),g=h((v,C,w)=>{if(r>0)for(let y=0;y<w;y++)v--,C--,this.spliceSmart(e,[...f,v,0],Number.MAX_SAFE_INTEGER,d[C].children,o,r-1)},"recurseSplice");let m=Math.min(l.children.length,c+n),b=d.length;for(const v of u.changes.sort((C,w)=>w.originalStart-C.originalStart))g(m,b,m-(v.originalStart+v.originalLength)),m=v.originalStart,b=v.modifiedStart-c,this.spliceSimple([...f,m],v.originalLength,Qe.slice(d,b,b+v.modifiedLength),o);g(m,b,m)}spliceSimple(e,t,n=Qe.empty(),{onDidCreateNode:i,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:d,visible:c}=this.getParentNodeWithListIndex(e),u=[],f=Qe.map(n,x=>this.createTreeNode(x,a,a.visible?1:0,d,u,i)),g=e[e.length-1],m=a.children.length>0;let b=0;for(let x=g;x>=0&&x<a.children.length;x--){const k=a.children[x];if(k.visible){b=k.visibleChildIndex;break}}const v=[];let C=0,w=0;for(const x of f)v.push(x),w+=x.renderNodeCount,x.visible&&(x.visibleChildIndex=b+C++);const y=qA(a.children,g,t,v);r?a.lastDiffIds?qA(a.lastDiffIds,g,t,v.map(x=>r.getId(x.element).toString())):a.lastDiffIds=a.children.map(x=>r.getId(x.element).toString()):a.lastDiffIds=void 0;let S=0;for(const x of y)x.visible&&S++;if(S!==0)for(let x=g+v.length;x<a.children.length;x++){const k=a.children[x];k.visible&&(k.visibleChildIndex-=S)}if(a.visibleChildrenCount+=C-S,d&&c){const x=y.reduce((k,N)=>k+(N.visible?N.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,w-x),this.list.splice(l,x,u)}if(y.length>0&&o){const x=h(k=>{o(k),k.children.forEach(x)},"visit");y.forEach(x)}this._onDidSplice.fire({insertedNodes:v,deletedNodes:y});const L=a.children.length>0;m!==L&&this.setCollapsible(e.slice(0,-1),L);let E=a;for(;E;){if(E.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}E=E.parent}}rerender(e){if(e.length===0)throw new wo(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(n,i,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&r&&!wS(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,n,i){const o=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!o)return o;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(wS(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!wS(t)&&t.recursive)for(const o of e.children)i=this._setNodeCollapseState(o,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,o,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&o.push(a);const d=e.children||Qe.empty(),c=i&&l!==0&&!a.collapsed,u=Qe.map(d,m=>this.createTreeNode(m,a,l,c,o,r));let f=0,g=1;for(const m of u)a.children.push(m),g+=m.renderNodeCount,m.visible&&(m.visibleChildIndex=f++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=f,a.visible=l===2?f>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,i&&o.pop()),r&&r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const r=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(const d of e.children)a=this._updateNodeAfterFilterChange(d,o,n,i&&!e.collapsed)||a,d.visible&&(d.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-r):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):fN(n)?(e.filterData=n.data,Xm(n.visibility)):(e.filterData=void 0,Xm(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new wo(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new wo(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:n,revealed:i,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,o=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new wo(this.user,"Invalid tree location");for(let l=0;l<r;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:o}:this.getParentNodeWithListIndex(a,t.children[r],n+1,i,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:wj(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}h(aW,"IndexTreeModel");class lW extends Dg{constructor(e){super(e.elements.map(t=>t.element));this.data=e}}h(lW,"TreeElementsDragAndDropData");function CS(s){return s instanceof Dg?new lW(s):s}h(CS,"asTreeDragAndDropData");class dW{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=z.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(CS(e),t)}onDragOver(e,t,n,i,o=!0){const r=this.dnd.onDragOver(CS(e),t&&t.element,n,i),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return r;if(a&&typeof r!="boolean"&&r.autoExpand&&(this.autoExpandDisposable=Xc(()=>{const f=this.modelProvider(),g=f.getNodeLocation(t);f.isCollapsed(g)&&f.setCollapsed(g,!1),this.autoExpandNode=void 0},500)),typeof r=="boolean"||!r.accept||typeof r.bubble>"u"||r.feedback){if(!o){const f=typeof r=="boolean"?r:r.accept,g=typeof r=="boolean"?void 0:r.effect;return{accept:f,effect:g,feedback:[n]}}return r}if(r.bubble===1){const f=this.modelProvider(),g=f.getNodeLocation(t),m=f.getParentNodeLocation(g),b=f.getNode(m),v=m&&f.getListIndex(m);return this.onDragOver(e,b,v,i,!1)}const l=this.modelProvider(),d=l.getNodeLocation(t),c=l.getListIndex(d),u=l.getListRenderCount(d);return Object.assign(Object.assign({},r),{feedback:fi(c,c+u)})}drop(e,t,n,i){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(CS(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}h(dW,"TreeNodeListDragAndDrop");function Wee(s,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new dW(s,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=s(),i=n.getNodeLocation(t),o=n.getParentNodeLocation(i);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}h(Wee,"asListOptions");class C1{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}h(C1,"ComposedTreeDelegate");var Zm;(function(s){s.None="none",s.OnHover="onHover",s.Always="always"})(Zm||(Zm={}));class cW{constructor(e,t=[]){this._elements=t,this.onDidChange=fe.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}h(cW,"EventCollection");class Uf{constructor(e,t,n,i,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=Uf.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new V5,this.activeIndentNodes=new Set,this.indentGuidesDisposable=z.None,this.disposables=new Q,this.templateId=e.templateId,this.updateOptions(o),fe.map(n,r=>r.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=qi(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==Zm.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new Q;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=j(e,X(".monaco-tl-row")),n=j(t,X(".monaco-tl-indent")),i=j(t,X(".monaco-tl-twistie")),o=j(t,X(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:i,indentGuidesDisposable:z.None,templateData:r}}renderElement(e,t,n,i){typeof i=="number"&&(this.renderedNodes.set(e,{templateData:n,height:i}),this.renderedElements.set(e.element,e));const o=Uf.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${o}px`,n.indent.style.width=`${o+this.indent-16}px`,this.renderTwistie(e,n),typeof i=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);!t||this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);!t||(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(..._.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(..._.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if(Sn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Q,i=this.modelProvider();let o=e;for(;;){const r=i.getNodeLocation(o),a=i.getParentNodeLocation(r);if(!a)break;const l=i.getNode(a),d=X(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&d.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(d):t.indent.insertBefore(d,t.indent.firstElementChild),this.renderedIndentGuides.add(l,d),n.add(He(()=>this.renderedIndentGuides.delete(l,d))),o=l}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const o=n.getNodeLocation(i);try{const r=n.getParentNodeLocation(o);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):r&&t.add(n.getNode(r))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,o=>o.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),et(this.disposables)}}h(Uf,"TreeRenderer");Uf.DefaultIndent=8;class hW{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Q,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const o=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return o;let r;if(typeof o=="boolean"?r=o?1:0:fN(o)?r=Xm(o.visibility):r=o,r===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:er.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),i=Array.isArray(n)?n:[n];for(const o of i){const r=o&&o.toString();if(typeof r>"u")return{data:er.Default,visibility:!0};const a=Hf(this._pattern,this._lowercasePattern,0,r,r.toLowerCase(),0,!0);if(a)return this._matchCount++,i.length===1?{data:a,visibility:!0}:{data:{label:r,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:er.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){et(this.disposables)}}h(hW,"TypeFilter");class uW{constructor(e,t,n,i,o){this.tree=e,this.view=n,this.filter=i,this.keyboardNavigationDelegate=o,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new P,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new P,this.enabledDisposables=new Q,this.disposables=new Q,this.domNode=X(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(J(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=j(n.getHTMLElement(),X(".monaco-list-type-filter-message")),this.labelDomNode=j(this.domNode,X("span.label"));const r=j(this.domNode,X(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=j(r,X("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(J(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=j(r,X("button.clear"+_.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=p("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new ft(this.view.getHTMLElement(),"keydown")),t=fe.chain(e.event).filter(i=>!md(i.target)||i.target===this.filterOnTypeDomNode).filter(i=>i.key!=="Dead"&&!/^Media/.test(i.key)).map(i=>new Et(i)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(i=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(i)&&!(i.keyCode===18||i.keyCode===16||i.keyCode===15||i.keyCode===17)||(this.pattern.length>0||this.triggered)&&(i.keyCode===9||i.keyCode===1)&&!i.altKey&&!i.ctrlKey&&!i.metaKey||i.keyCode===1&&(Ke?i.altKey&&!i.metaKey:i.ctrlKey)&&!i.shiftKey).forEach(i=>{i.stopPropagation(),i.preventDefault()}).event,n=this.enabledDisposables.add(new ft(this.clearDomNode,"click"));fe.chain(fe.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){!this._enabled||(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(Ke?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,i=>!er.isDefault(i.filterData));const n=this.tree.getFocus();if(n.length>0){const i=n[0];this.tree.getRelativeTop(i)===null&&this.tree.reveal(i,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=$n(e),n=e.clientWidth,i=n/2,o=this.domNode.clientWidth,r=new Q;let a=this.positionClassName;const l=h(()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-o-6}px`;break}},"updatePosition"),d=h(u=>{u.preventDefault();const f=u.clientX-t;u.dataTransfer&&(u.dataTransfer.dropEffect="none"),f<i?a="nw":a="ne",l()},"onDragOver"),c=h(()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",et(r)},"onDragEnd");l(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),r.add(He(()=>this.domNode.classList.remove("dragging"))),r.add(J(document,"dragover",u=>d(u))),r.add(J(this.domNode,"dragend",()=>c())),ma.CurrentDragAndDropData=new u9("vscode-ui"),r.add(He(()=>ma.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(..._.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(..._.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=p("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(..._.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(..._.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=p("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=p("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=p("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"\u2026"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!er.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),et(this.disposables)}}h(uW,"TypeFilterController");function eR(s){let e=Qp.Unknown;return wM(s.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Qp.Twistie:wM(s.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=Qp.Element),{browserEvent:s.browserEvent,element:s.element?s.element.element:null,target:e}}h(eR,"asTreeMouseEvent$1");function uw(s,e){e(s),s.children.forEach(t=>uw(t,e))}h(uw,"dfs$1");class fw{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new P,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!t?.__forceEvent&&xo(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),d=h(c=>l.delete(c),"visit");t.forEach(c=>uw(c,d)),this.set([...l.values()]);return}const n=new Set,i=h(l=>n.add(this.identityProvider.getId(l.element).toString()),"deletedNodesVisitor");t.forEach(l=>uw(l,i));const o=new Map,r=h(l=>o.set(this.identityProvider.getId(l.element).toString(),l),"insertedNodesVisitor");e.forEach(l=>uw(l,r));const a=[];for(const l of this.nodes){const d=this.identityProvider.getId(l.element).toString();if(!n.has(d))a.push(l);else{const u=o.get(d);u&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}h(fw,"Trait");class fW extends dN{constructor(e,t){super(e);this.tree=t}onViewPointer(e){if(md(e.browserEvent.target)||Pu(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const r=this.tree.model,a=r.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),r.setCollapsed(a,void 0,l),o&&i)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}h(fW,"TreeNodeListMouseController");class gW extends hr{constructor(e,t,n,i,o,r,a,l){super(e,t,n,i,l);this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new fW(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],o=[];let r;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),i.length>0&&super.setFocus(Yl([...super.getFocus(),...i])),o.length>0&&super.setSelection(Yl([...super.getSelection(),...o])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}h(gW,"TreeNodeList");class gN{constructor(e,t,n,i,o={}){this._user=e,this._options=o,this.eventBufferer=new c0,this.disposables=new Q,this._onWillRefilter=new P,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new P;const r=new C1(n),a=new fx,l=new fx,d=new cW(l.event);this.renderers=i.map(f=>new Uf(f,()=>this.model,a.event,d,o));for(let f of this.renderers)this.disposables.add(f);let c;o.keyboardNavigationLabelProvider&&(c=new hW(this,o.keyboardNavigationLabelProvider,o.filter),o=Object.assign(Object.assign({},o),{filter:c}),this.disposables.add(c)),this.focus=new fw(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new fw(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new fw(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new gW(e,t,r,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},Wee(()=>this.model,o)),{tree:this})),this.model=this.createModel(e,this.view,o),a.input=this.model.onDidChangeCollapseState;const u=fe.forEach(this.model.onDidSplice,f=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(f),this.selection.onDidModelSplice(f)})});if(u(()=>null,null,this.disposables),l.input=fe.chain(fe.any(u,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const f=new Set;for(const g of this.focus.getNodes())f.add(g);for(const g of this.selection.getNodes())f.add(g);return[...f.values()]}).event,o.keyboardSupport!==!1){const f=fe.chain(this.view.onKeyDown).filter(g=>!md(g.target)).map(g=>new Et(g));f.filter(g=>g.keyCode===15).on(this.onLeftArrow,this,this.disposables),f.filter(g=>g.keyCode===17).on(this.onRightArrow,this,this.disposables),f.filter(g=>g.keyCode===10).on(this.onSpace,this,this.disposables)}if(o.keyboardNavigationLabelProvider){const f=o.keyboardNavigationDelegate||$8;this.typeFilterController=new uW(this,this.model,this.view,c,f),this.focusNavigationFilter=g=>this.typeFilterController.shouldAllowFocus(g),this.disposables.add(this.typeFilterController)}this.styleElement=es(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Zm.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return fe.map(this.view.onMouseDblClick,eR)}get onPointer(){return fe.map(this.view.onPointer,eR)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return fe.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Zm.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);const i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(i,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);const i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(i,t,!0)}focusNext(e=1,t=!1,n,i=this.focusNavigationFilter){this.view.focusNext(e,t,n,i)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const r=this.model.getParentNodeLocation(i);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,o)}dispose(){et(this.disposables),this.view.dispose()}}h(gN,"AbstractTree");class y1{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new aW(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,o){return n.sorter.compare(i.element,o.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Qe.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=Qe.empty(),n){const i=new Set,o=new Set,r=h(l=>{var d;if(l.element===null)return;const c=l;if(i.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();o.add(u),this.nodesByIdentity.set(u,c)}(d=n.onDidCreateNode)===null||d===void 0||d.call(n,c)},"onDidCreateNode"),a=h(l=>{var d;if(l.element===null)return;const c=l;if(i.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();o.has(u)||this.nodesByIdentity.delete(u)}(d=n.onDidDeleteNode)===null||d===void 0||d.call(n,c)},"onDidDeleteNode");this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:r,onDidDeleteNode:a}))}preserveCollapseState(e=Qe.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Qe.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(r)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,o=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:i,collapsed:o,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new wo(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}h(y1,"ObjectTreeModel");function gw(s){const e=[s.element],t=s.incompressible||!1;return{element:{elements:e,incompressible:t},children:Qe.map(Qe.from(s.children),gw),collapsible:s.collapsible,collapsed:s.collapsed}}h(gw,"noCompress");function pw(s){const e=[s.element],t=s.incompressible||!1;let n,i;for(;[i,n]=Qe.consume(Qe.from(s.children),2),!(i.length!==1||i[0].incompressible);)s=i[0],e.push(s.element);return{element:{elements:e,incompressible:t},children:Qe.map(Qe.concat(i,n),pw),collapsible:s.collapsible,collapsed:s.collapsed}}h(pw,"compress");function ck(s,e=0){let t;return e<s.element.elements.length-1?t=[ck(s,e+1)]:t=Qe.map(Qe.from(s.children),n=>ck(n,0)),e===0&&s.element.incompressible?{element:s.element.elements[e],children:t,incompressible:!0,collapsible:s.collapsible,collapsed:s.collapsed}:{element:s.element.elements[e],children:t,collapsible:s.collapsible,collapsed:s.collapsed}}h(ck,"_decompress");function tR(s){return ck(s,0)}h(tR,"decompress");function pW(s,e,t){return s.element===e?Object.assign(Object.assign({},s),{children:t}):Object.assign(Object.assign({},s),{children:Qe.map(Qe.from(s.children),n=>pW(n,e,t))})}h(pW,"splice");const Vee=h(s=>({getId(e){return e.elements.map(t=>s.getId(t).toString()).join("\0")}}),"wrapIdentityProvider");class mW{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new y1(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Qe.empty(),n){const i=n.diffIdentityProvider&&Vee(n.diffIdentityProvider);if(e===null){const g=Qe.map(t,this.enabled?pw:gw);this._setChildren(null,g,{diffIdentityProvider:i,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Error("Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),d=tR(r),c=pW(d,e,t),u=(this.enabled?pw:gw)(c),f=l.children.map(g=>g===r?u:g);this._setChildren(l.element,f,{diffIdentityProvider:i,diffDepth:r.depth-l.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=Qe.map(n,tR),o=Qe.map(i,e?pw:gw);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,o=h(a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},"onDidCreateNode"),r=h(a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)},"onDidDeleteNode");this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:r}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new wo(this.user,`Tree element not found: ${e}`);return t}}h(mW,"CompressedObjectTreeModel");const Bee=h(s=>s[s.length-1],"DefaultElementMapper");class S1{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new S1(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}h(S1,"CompressedTreeNodeWrapper");function Hee(s,e){return{splice(t,n,i){e.splice(t,n,i.map(o=>s.map(o)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}h(Hee,"mapList");function zee(s,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(s(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(s(t),n)}}})}h(zee,"mapOptions");class _W{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||Bee;const i=h(o=>this.elementMapper(o.elements),"compressedNodeUnwrapper");this.nodeMapper=new w1(o=>new S1(i,o)),this.model=new mW(e,Hee(this.nodeMapper,t),zee(i,n))}get onDidSplice(){return fe.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return fe.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return fe.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Qe.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}h(_W,"CompressibleObjectTreeModel");var Kee=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};class x1 extends gN{constructor(e,t,n,i,o={}){super(e,t,n,i,o);this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Qe.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new y1(e,t,n)}}h(x1,"ObjectTree");class pN{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){const t=this.renderer.renderTemplate(e);return{compressedTreeNode:void 0,data:t}}renderElement(e,t,n,i){const o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,i))}disposeElement(e,t,n,i){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,i):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}h(pN,"CompressibleRenderer");Kee([vn],pN.prototype,"compressedTreeNodeProvider",null);function Uee(s,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=s().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}h(Uee,"asObjectTreeOptions$1");class mN extends x1{constructor(e,t,n,i,o={}){const r=h(()=>this,"compressedTreeNodeProvider"),a=i.map(l=>new pN(r,l));super(e,t,n,a,Uee(r,o))}setChildren(e,t=Qe.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new _W(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}h(mN,"CompressibleObjectTree");var gl=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function yS(s){return Object.assign(Object.assign({},s),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}h(yS,"createAsyncDataTreeNode");function hk(s,e){return e.parent?e.parent===s?!0:hk(s,e.parent):!1}h(hk,"isAncestor");function jee(s,e){return s===e||hk(s,e)||hk(e,s)}h(jee,"intersects");class T1{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new T1(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}h(T1,"AsyncDataTreeNodeWrapper");class bW{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(..._.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}h(bW,"AsyncDataTreeRenderer");function nR(s){return{browserEvent:s.browserEvent,elements:s.elements.map(e=>e.element)}}h(nR,"asTreeEvent");function iR(s){return{browserEvent:s.browserEvent,element:s.element&&s.element.element,target:s.target}}h(iR,"asTreeMouseEvent");class vW extends Dg{constructor(e){super(e.elements.map(t=>t.element));this.data=e}}h(vW,"AsyncDataTreeElementsDragAndDropData");function SS(s){return s instanceof Dg?new vW(s):s}h(SS,"asAsyncDataTreeDragAndDropData");class wW{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(SS(e),t)}onDragOver(e,t,n,i,o=!0){return this.dnd.onDragOver(SS(e),t&&t.element,n,i)}drop(e,t,n,i){this.dnd.drop(SS(e),t&&t.element,n,i)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}h(wW,"AsyncDataTreeNodeListDragAndDrop");function CW(s){return s&&Object.assign(Object.assign({},s),{collapseByDefault:!0,identityProvider:s.identityProvider&&{getId(e){return s.identityProvider.getId(e.element)}},dnd:s.dnd&&new wW(s.dnd),multipleSelectionController:s.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return s.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return s.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:s.accessibilityProvider&&Object.assign(Object.assign({},s.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:s.accessibilityProvider.getRole?e=>s.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:s.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=s.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return s.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return s.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:s.accessibilityProvider.getWidgetRole?()=>s.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:s.accessibilityProvider.getAriaLevel&&(e=>s.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:s.accessibilityProvider.getActiveDescendantId&&(e=>s.accessibilityProvider.getActiveDescendantId(e.element))}),filter:s.filter&&{filter(e,t){return s.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:s.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},s.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return s.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof s.expandOnlyOnTwistieClick>"u"?void 0:typeof s.expandOnlyOnTwistieClick!="function"?s.expandOnlyOnTwistieClick:e=>s.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:s.additionalScrollHeight})}h(CW,"asObjectTreeOptions");function uk(s,e){e(s),s.children.forEach(t=>uk(t,e))}h(uk,"dfs");class _N{constructor(e,t,n,i,o,r={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new P,this._onDidChangeNodeSlowState=new P,this.nodeMapper=new w1(a=>new T1(a)),this.disposables=new Q,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.collapseByDefault=r.collapseByDefault,this.tree=this.createTree(e,t,n,i,r),this.root=yS({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return fe.map(this.tree.onDidChangeFocus,nR)}get onDidChangeSelection(){return fe.map(this.tree.onDidChangeSelection,nR)}get onMouseDblClick(){return fe.map(this.tree.onMouseDblClick,iR)}get onPointer(){return fe.map(this.tree.onPointer,iR)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,o){const r=new C1(n),a=i.map(d=>new bW(d,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=CW(o)||{};return new x1(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return gl(this,void 0,void 0,function*(){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,i,o){return gl(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new wo(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(yield this.refreshAndRenderNode(r,t,i,o),n)try{this.tree.rerender(r)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return gl(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new wo(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield fe.toPromise(this._onDidRender.event)),i})}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new wo(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,i){return gl(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,i)})}refreshNode(e,t,n){return gl(this,void 0,void 0,function*(){let i;return this.subTreeRefreshPromises.forEach((o,r)=>{!i&&jee(r,e)&&(i=o.then(()=>this.refreshNode(e,t,n)))}),i||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return gl(this,void 0,void 0,function*(){let i;e.refreshPromise=new Promise(o=>i=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=yield this.doRefreshNode(e,t,n);e.stale=!1,yield gT.settled(o.map(r=>this.doRefreshSubTree(r,t,n)))}finally{i()}})}doRefreshNode(e,t,n){return gl(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(Qe.empty());else{const o=this.doGetChildren(e);if(YA(o))i=Promise.resolve(o);else{const r=Zl(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=o.finally(()=>r.cancel())}}try{const o=yield i;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),qr(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return YA(n)?this.processChildren(n):(t=Hn(()=>gl(this,void 0,void 0,function*(){return this.processChildren(yield n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ne))}setChildren(e,t,n,i){const o=[...t];if(e.children.length===0&&o.length===0)return[];const r=new Map,a=new Map;for(const c of e.children)if(r.set(c.element,c),this.identityProvider){const u=this.tree.isCollapsed(c);a.set(c.id,{node:c,collapsed:u})}const l=[],d=o.map(c=>{const u=!!this.dataSource.hasChildren(c);if(!this.identityProvider){const b=yS({element:c,parent:e,hasChildren:u});return u&&this.collapseByDefault&&!this.collapseByDefault(c)&&(b.collapsedByDefault=!1,l.push(b)),b}const f=this.identityProvider.getId(c).toString(),g=a.get(f);if(g){const b=g.node;return r.delete(b.element),this.nodes.delete(b.element),this.nodes.set(c,b),b.element=c,b.hasChildren=u,n?g.collapsed?(b.children.forEach(v=>uk(v,C=>this.nodes.delete(C.element))),b.children.splice(0,b.children.length),b.stale=!0):l.push(b):u&&this.collapseByDefault&&!this.collapseByDefault(c)&&(b.collapsedByDefault=!1,l.push(b)),b}const m=yS({element:c,parent:e,id:f,hasChildren:u});return i&&i.viewState.focus&&i.viewState.focus.indexOf(f)>-1&&i.focus.push(m),i&&i.viewState.selection&&i.viewState.selection.indexOf(f)>-1&&i.selection.push(m),i&&i.viewState.expanded&&i.viewState.expanded.indexOf(f)>-1?l.push(m):u&&this.collapseByDefault&&!this.collapseByDefault(c)&&(m.collapsedByDefault=!1,l.push(m)),m});for(const c of r.values())uk(c,u=>this.nodes.delete(u.element));for(const c of d)this.nodes.set(c.element,c);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&d.length===1&&l.length===0&&(d[0].collapsedByDefault=!1,l.push(d[0])),l}render(e,t,n){const i=e.children.map(r=>this.asTreeElement(r,t)),o=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(r){return n.diffIdentityProvider.getId(r.element)}}});this.tree.setChildren(e===this.root?null:e,i,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Qe.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}h(_N,"AsyncDataTree");class L1{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new L1(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}h(L1,"CompressibleAsyncDataTreeNodeWrapper");class yW{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(..._.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=et(this.disposables)}}h(yW,"CompressibleAsyncDataTreeRenderer");function Gee(s){const e=s&&CW(s);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return s.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}h(Gee,"asCompressibleObjectTreeOptions");class SW extends _N{constructor(e,t,n,i,o,r,a={}){super(e,t,n,o,r,a);this.compressionDelegate=i,this.compressibleNodeMapper=new w1(l=>new L1(l)),this.filter=a.filter}createTree(e,t,n,i,o){const r=new C1(n),a=i.map(d=>new yW(d,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=Gee(o)||{};return new mN(e,t,r,a,l)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=h(f=>this.identityProvider.getId(f).toString(),"getId"),i=h(f=>{const g=new Set;for(const m of f){const b=this.tree.getCompressedTreeNode(m===this.root?null:m);if(!!b.element)for(const v of b.element.elements)g.add(n(v.element))}return g},"getUncompressedIds"),o=i(this.tree.getSelection()),r=i(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let l=!1;const d=this.getFocus();let c=!1;const u=h(f=>{const g=f.element;if(g)for(let m=0;m<g.elements.length;m++){const b=n(g.elements[m].element),v=g.elements[g.elements.length-1].element;o.has(b)&&a.indexOf(v)===-1&&(a.push(v),l=!0),r.has(b)&&d.indexOf(v)===-1&&(d.push(v),c=!0)}f.children.forEach(u)},"visit");u(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),c&&this.setFocus(d)}processChildren(e){return this.filter&&(e=Qe.filter(e,t=>{const n=this.filter.filter(t,1),i=$ee(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}h(SW,"CompressibleAsyncDataTree");function $ee(s){return typeof s=="boolean"?s?1:0:fN(s)?Xm(s.visibility):Xm(s)}h($ee,"getVisibility");class xW extends gN{constructor(e,t,n,i,o,r={}){super(e,t,n,i,r);this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}createModel(e,t,n){return new y1(e,t,n)}}h(xW,"DataTree");new re("isMac",Ke,p("isMac","Whether the operating system is macOS"));new re("isLinux",ni,p("isLinux","Whether the operating system is Linux"));const k1=new re("isWindows",Vn,p("isWindows","Whether the operating system is Windows"));new re("isWeb",kd,p("isWeb","Whether the platform is a web browser"));new re("isMacNative",Ke&&!kd,p("isMacNative","Whether the operating system is macOS on a non-browser platform"));new re("isIOS",tr,p("isIOS","Whether the operating system is iOS"));new re("isDevelopment",!1,!0);const TW="inputFocus";new re(TW,!1,p("inputFocus","Whether keyboard focus is inside an input box"));var Jr=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ue=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const rs=Xe("listService");let fk=h(class{constructor(e){this._themeService=e,this.disposables=new Q,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const i=new cN(es(),"");this.disposables.add(lh(i,this._themeService))}if(this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),Ma(e.onDidFocus(()=>this.setLastFocusedList(e)),He(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}},"ListService");fk=Jr([Ue(0,Mt)],fk);const LW=new re("listFocus",!0),E1=new re("listSupportsMultiselect",!0),kW=se.and(LW,se.not(TW)),bN=new re("listHasSelectionOrFocus",!1),vN=new re("listDoubleSelection",!1),wN=new re("listMultiSelection",!1),D1=new re("listSelectionNavigation",!1),CN=new re("treeElementCanCollapse",!1),qee=new re("treeElementHasParent",!1),yN=new re("treeElementCanExpand",!1),Yee=new re("treeElementHasChild",!1),EW="listAutomaticKeyboardNavigation";function I1(s,e){const t=s.createScoped(e.getHTMLElement());return LW.bindTo(t),t}h(I1,"createScopedContextKeyService");const $h="workbench.list.multiSelectModifier",gk="workbench.list.openMode",qo="workbench.list.horizontalScrolling",PC="workbench.list.keyboardNavigation",SN="workbench.list.automaticKeyboardNavigation",Jm="workbench.tree.indent",OC="workbench.tree.renderIndentGuides",ar="workbench.list.smoothScrolling",Ur="workbench.list.mouseWheelScrollSensitivity",jr="workbench.list.fastScrollSensitivity",FC="workbench.tree.expandMode";function Gr(s){return s.getValue($h)==="alt"}h(Gr,"useAltAsMultipleSelectionModifier");class DW extends z{constructor(e){super();this.configurationService=e,this.useAltAsMultipleSelectionModifier=Gr(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration($h)&&(this.useAltAsMultipleSelectionModifier=Gr(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:X8(e)}isSelectionRangeChangeEvent(e){return Z8(e)}}h(DW,"MultipleSelectionController");function N1(s,e,t){var n;const i=new Q;return[Object.assign(Object.assign({},s),{keyboardNavigationDelegate:{mightProducePrintableCharacter(r){return t.mightProducePrintableCharacter(r)}},smoothScrolling:Boolean(e.getValue(ar)),mouseWheelScrollSensitivity:e.getValue(Ur),fastScrollSensitivity:e.getValue(jr),multipleSelectionController:(n=s.multipleSelectionController)!==null&&n!==void 0?n:i.add(new DW(e))}),i]}h(N1,"toWorkbenchListOptions");let pk=h(class extends hr{constructor(e,t,n,i,o,r,a,l,d,c){const u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:Boolean(d.getValue(qo)),[f,g]=N1(o,d,c);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},As(l.getColorTheme(),p1)),f),{horizontalScrolling:u}));this.disposables.add(g),this.contextKeyService=I1(r,this),this.themeService=l,this.listSupportsMultiSelect=E1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),D1.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this.listHasSelectionOrFocus=bN.bindTo(this.contextKeyService),this.listDoubleSelection=vN.bindTo(this.contextKeyService),this.listMultiSelection=wN.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Gr(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||v.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||v.length>0)})),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration($h)&&(this._useAltAsMultipleSelectionModifier=Gr(d));let v={};if(b.affectsConfiguration(qo)&&this.horizontalScrolling===void 0){const C=Boolean(d.getValue(qo));v=Object.assign(Object.assign({},v),{horizontalScrolling:C})}if(b.affectsConfiguration(ar)){const C=Boolean(d.getValue(ar));v=Object.assign(Object.assign({},v),{smoothScrolling:C})}if(b.affectsConfiguration(Ur)){const C=d.getValue(Ur);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:C})}if(b.affectsConfiguration(jr)){const C=d.getValue(jr);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:C})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new xN(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=lh(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}},"WorkbenchList");pk=Jr([Ue(5,De),Ue(6,rs),Ue(7,Mt),Ue(8,wt),Ue(9,Xt)],pk);let oR=h(class extends iW{constructor(e,t,n,i,o,r,a,l,d,c){const u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:Boolean(d.getValue(qo)),[f,g]=N1(o,d,c);super(e,t,n,i,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},As(l.getColorTheme(),p1)),f),{horizontalScrolling:u}));this.disposables=new Q,this.disposables.add(g),this.contextKeyService=I1(r,this),this.themeService=l,this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=E1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),D1.bindTo(this.contextKeyService).set(Boolean(o.selectionNavigation)),this._useAltAsMultipleSelectionModifier=Gr(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),o.overrideStyles&&this.disposables.add(lh(this,l,o.overrideStyles)),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration($h)&&(this._useAltAsMultipleSelectionModifier=Gr(d));let v={};if(b.affectsConfiguration(qo)&&this.horizontalScrolling===void 0){const C=Boolean(d.getValue(qo));v=Object.assign(Object.assign({},v),{horizontalScrolling:C})}if(b.affectsConfiguration(ar)){const C=Boolean(d.getValue(ar));v=Object.assign(Object.assign({},v),{smoothScrolling:C})}if(b.affectsConfiguration(Ur)){const C=d.getValue(Ur);v=Object.assign(Object.assign({},v),{mouseWheelScrollSensitivity:C})}if(b.affectsConfiguration(jr)){const C=d.getValue(jr);v=Object.assign(Object.assign({},v),{fastScrollSensitivity:C})}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new xN(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=lh(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}},"WorkbenchPagedList");oR=Jr([Ue(5,De),Ue(6,rs),Ue(7,Mt),Ue(8,wt),Ue(9,Xt)],oR);let sR=h(class extends J_{constructor(e,t,n,i,o,r,a,l,d,c,u){const f=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:Boolean(c.getValue(qo)),[g,m]=N1(r,c,u);super(e,t,n,i,o,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},As(d.getColorTheme(),p1)),g),{horizontalScrolling:f}));this.disposables.add(m),this.contextKeyService=I1(a,this),this.themeService=d,this.listSupportsMultiSelect=E1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),D1.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this.listHasSelectionOrFocus=bN.bindTo(this.contextKeyService),this.listDoubleSelection=vN.bindTo(this.contextKeyService),this.listMultiSelection=wN.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Gr(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),r.overrideStyles&&this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const v=this.getSelection(),C=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(v.length>0||C.length>0),this.listMultiSelection.set(v.length>1),this.listDoubleSelection.set(v.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const v=this.getSelection(),C=this.getFocus();this.listHasSelectionOrFocus.set(v.length>0||C.length>0)})),this.disposables.add(c.onDidChangeConfiguration(v=>{v.affectsConfiguration($h)&&(this._useAltAsMultipleSelectionModifier=Gr(c));let C={};if(v.affectsConfiguration(qo)&&this.horizontalScrolling===void 0){const w=Boolean(c.getValue(qo));C=Object.assign(Object.assign({},C),{horizontalScrolling:w})}if(v.affectsConfiguration(ar)){const w=Boolean(c.getValue(ar));C=Object.assign(Object.assign({},C),{smoothScrolling:w})}if(v.affectsConfiguration(Ur)){const w=c.getValue(Ur);C=Object.assign(Object.assign({},C),{mouseWheelScrollSensitivity:w})}if(v.affectsConfiguration(jr)){const w=c.getValue(jr);C=Object.assign(Object.assign({},C),{fastScrollSensitivity:w})}Object.keys(C).length>0&&this.updateOptions(C)})),this.navigator=new IW(this,Object.assign({configurationService:c},r)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=lh(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}},"WorkbenchTable");sR=Jr([Ue(6,De),Ue(7,rs),Ue(8,Mt),Ue(9,wt),Ue(10,Xt)],sR);class A1 extends z{constructor(e,t){var n;super();this.widget=e,this._onDidOpen=this._register(new P),this.onDidOpen=this._onDidOpen.event,this._register(fe.filter(this.widget.onDidChangeSelection,i=>i.browserEvent instanceof KeyboardEvent)(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(gk)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=t?.configurationService.getValue(gk)!=="doubleClick"}))):this.openOnSingleClick=(n=t?.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n,o=!1;this._open(this.getSelectedElement(),n,i,o,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,o=!0,r=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}_open(e,t,n,i,o){!e||this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:o})}}h(A1,"ResourceNavigator");class xN extends A1{constructor(e,t){super(e,t);this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}h(xN,"ListResourceNavigator");class IW extends A1{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}h(IW,"TableResourceNavigator");class NW extends A1{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}h(NW,"TreeResourceNavigator");function Xee(s,e){let t=!1;return n=>{if(n.toKeybinding().isModifierKey())return!1;if(t)return t=!1,!1;const i=e.softDispatch(n,s);return i&&i.enterChord?(t=!0,!1):(t=!1,!0)}}h(Xee,"createKeyboardNavigationEventFilter");let rR=h(class extends x1{constructor(e,t,n,i,o,r,a,l,d,c,u){const{options:f,getAutomaticKeyboardNavigation:g,disposable:m}=Q_(t,o,r,d,c,u);super(e,t,n,i,f);this.disposables.add(m),this.internals=new dh(this,o,g,o.overrideStyles,r,a,l,d,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},"WorkbenchObjectTree");rR=Jr([Ue(5,De),Ue(6,rs),Ue(7,Mt),Ue(8,wt),Ue(9,Xt),Ue(10,lo)],rR);let aR=h(class extends mN{constructor(e,t,n,i,o,r,a,l,d,c,u){const{options:f,getAutomaticKeyboardNavigation:g,disposable:m}=Q_(t,o,r,d,c,u);super(e,t,n,i,f);this.disposables.add(m),this.internals=new dh(this,o,g,o.overrideStyles,r,a,l,d,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchCompressibleObjectTree");aR=Jr([Ue(5,De),Ue(6,rs),Ue(7,Mt),Ue(8,wt),Ue(9,Xt),Ue(10,lo)],aR);let lR=h(class extends xW{constructor(e,t,n,i,o,r,a,l,d,c,u,f){const{options:g,getAutomaticKeyboardNavigation:m,disposable:b}=Q_(t,r,a,c,u,f);super(e,t,n,i,o,g);this.disposables.add(b),this.internals=new dh(this,r,m,r.overrideStyles,a,l,d,c,f),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchDataTree");lR=Jr([Ue(6,De),Ue(7,rs),Ue(8,Mt),Ue(9,wt),Ue(10,Xt),Ue(11,lo)],lR);let mk=h(class extends _N{constructor(e,t,n,i,o,r,a,l,d,c,u,f){const{options:g,getAutomaticKeyboardNavigation:m,disposable:b}=Q_(t,r,a,c,u,f);super(e,t,n,i,o,g);this.disposables.add(b),this.internals=new dh(this,r,m,r.overrideStyles,a,l,d,c,f),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}},"WorkbenchAsyncDataTree");mk=Jr([Ue(6,De),Ue(7,rs),Ue(8,Mt),Ue(9,wt),Ue(10,Xt),Ue(11,lo)],mk);let dR=h(class extends SW{constructor(e,t,n,i,o,r,a,l,d,c,u,f,g){const{options:m,getAutomaticKeyboardNavigation:b,disposable:v}=Q_(t,a,l,u,f,g);super(e,t,n,i,o,r,m);this.disposables.add(v),this.internals=new dh(this,a,b,a.overrideStyles,l,d,c,u,g),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}},"WorkbenchCompressibleAsyncDataTree");dR=Jr([Ue(7,De),Ue(8,rs),Ue(9,Mt),Ue(10,wt),Ue(11,Xt),Ue(12,lo)],dR);function Q_(s,e,t,n,i,o){var r;const a=h(()=>{let m=Boolean(t.getContextKeyValue(EW));return m&&(m=Boolean(n.getValue(SN))),m},"getAutomaticKeyboardNavigation"),l=o.isScreenReaderOptimized(),d=e.simpleKeyboardNavigation||l?"simple":n.getValue(PC),c=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(n.getValue(qo)),[u,f]=N1(e,n,i),g=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:f,options:Object.assign(Object.assign({keyboardSupport:!1},u),{indent:typeof n.getValue(Jm)=="number"?n.getValue(Jm):void 0,renderIndentGuides:n.getValue(OC),smoothScrolling:Boolean(n.getValue(ar)),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:d==="simple",filterOnType:d==="filter",horizontalScrolling:c,keyboardNavigationEventFilter:Xee(s,i),additionalScrollHeight:g,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(r=e.expandOnlyOnTwistieClick)!==null&&r!==void 0?r:n.getValue(FC)==="doubleClick"})}}h(Q_,"workbenchTreeDataPreamble");let dh=h(class{constructor(e,t,n,i,o,r,a,l,d){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=I1(o,e),this.listSupportsMultiSelect=E1.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),D1.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.hasSelectionOrFocus=bN.bindTo(this.contextKeyService),this.hasDoubleSelection=vN.bindTo(this.contextKeyService),this.hasMultiSelection=wN.bindTo(this.contextKeyService),this.treeElementCanCollapse=CN.bindTo(this.contextKeyService),this.treeElementHasParent=qee.bindTo(this.contextKeyService),this.treeElementCanExpand=yN.bindTo(this.contextKeyService),this.treeElementHasChild=Yee.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Gr(l);const u=new Set;u.add(EW);const f=h(()=>{const b=d.isScreenReaderOptimized()?"simple":l.getValue(PC);e.updateOptions({simpleKeyboardNavigation:b==="simple",filterOnType:b==="filter"})},"updateKeyboardNavigation");this.updateStyleOverrides(i);const g=h(()=>{const m=e.getFocus()[0];if(!m)return;const b=e.getNode(m);this.treeElementCanCollapse.set(b.collapsible&&!b.collapsed),this.treeElementHasParent.set(!!e.getParentElement(m)),this.treeElementCanExpand.set(b.collapsible&&b.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(m))},"updateCollapseContextKeys");this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const m=e.getSelection(),b=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(m.length>0||b.length>0),this.hasMultiSelection.set(m.length>1),this.hasDoubleSelection.set(m.length===2)})}),e.onDidChangeFocus(()=>{const m=e.getSelection(),b=e.getFocus();this.hasSelectionOrFocus.set(m.length>0||b.length>0),g()}),e.onDidChangeCollapseState(g),e.onDidChangeModel(g),l.onDidChangeConfiguration(m=>{let b={};if(m.affectsConfiguration($h)&&(this._useAltAsMultipleSelectionModifier=Gr(l)),m.affectsConfiguration(Jm)){const v=l.getValue(Jm);b=Object.assign(Object.assign({},b),{indent:v})}if(m.affectsConfiguration(OC)){const v=l.getValue(OC);b=Object.assign(Object.assign({},b),{renderIndentGuides:v})}if(m.affectsConfiguration(ar)){const v=Boolean(l.getValue(ar));b=Object.assign(Object.assign({},b),{smoothScrolling:v})}if(m.affectsConfiguration(PC)&&f(),m.affectsConfiguration(SN)&&(b=Object.assign(Object.assign({},b),{automaticKeyboardNavigation:n()})),m.affectsConfiguration(qo)&&t.horizontalScrolling===void 0){const v=Boolean(l.getValue(qo));b=Object.assign(Object.assign({},b),{horizontalScrolling:v})}if(m.affectsConfiguration(FC)&&t.expandOnlyOnTwistieClick===void 0&&(b=Object.assign(Object.assign({},b),{expandOnlyOnTwistieClick:l.getValue(FC)==="doubleClick"})),m.affectsConfiguration(Ur)){const v=l.getValue(Ur);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:v})}if(m.affectsConfiguration(jr)){const v=l.getValue(jr);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:v})}Object.keys(b).length>0&&e.updateOptions(b)}),this.contextKeyService.onDidChangeContext(m=>{m.affectsSome(u)&&e.updateOptions({automaticKeyboardNavigation:n()})}),d.onDidChangeScreenReaderOptimized(()=>f())),this.navigator=new NW(e,Object.assign({configurationService:l},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){et(this.styler),this.styler=e?lh(this.tree,this.themeService,e):z.None}dispose(){this.disposables=et(this.disposables),et(this.styler),this.styler=void 0}},"WorkbenchTreeInternals");dh=Jr([Ue(4,De),Ue(5,rs),Ue(6,Mt),Ue(7,wt),Ue(8,lo)],dh);const Zee=dn.as(zh.Configuration);Zee.registerConfiguration({id:"workbench",order:7,title:p("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[$h]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[p("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:p({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[gk]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[qo]:{type:"boolean",default:!1,description:p("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Jm]:{type:"number",default:8,minimum:4,maximum:40,description:p("tree indent setting","Controls tree indentation in pixels.")},[OC]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:p("render tree indent guides","Controls whether the tree should render indent guides.")},[ar]:{type:"boolean",default:!1,description:p("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Ur]:{type:"number",default:1,description:p("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[jr]:{type:"number",default:5,description:p("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[PC]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[p("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),p("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),p("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:p("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[SN]:{type:"boolean",default:!0,markdownDescription:p("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[FC]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var _k;(function(s){s[s.PRESERVE=0]="PRESERVE",s[s.LAST=1]="LAST"})(_k||(_k={}));const qh={Quickaccess:"workbench.contributions.quickaccess"};class AW{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),He(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Mh([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}h(AW,"QuickAccessRegistry");dn.add(qh.Quickaccess,new AW);const tl=Xe("quickInputService");var Jee=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cR=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let bk=h(class extends z{constructor(e,t){super();this.quickInputService=e,this.instantiationService=t,this.registry=dn.as(qh.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[o,r]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,l=a?.descriptor;if(a&&r&&l===r){e!==r.prefix&&!n?.preserveValue&&(a.picker.value=e),this.adjustValueSelection(a.picker,r,n);return}if(r&&!n?.preserveValue){let g;if(a&&l&&l!==r){const m=a.value.substr(l.prefix.length);m&&(g=`${r.prefix}${m}`)}if(!g){const m=o?.defaultFilterValue;m===_k.LAST?g=this.lastAcceptedPickerValues.get(r):typeof m=="string"&&(g=`${r.prefix}${m}`)}typeof g=="string"&&(e=g)}const d=new Q,c=d.add(this.quickInputService.createQuickPick());c.value=e,this.adjustValueSelection(c,r,n),c.placeholder=r?.placeholder,c.quickNavigate=n?.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!a,(typeof n?.itemActivation=="number"||n?.quickNavigateConfiguration)&&(c.itemActivation=(i=n?.itemActivation)!==null&&i!==void 0?i:Is.SECOND),c.contextKey=r?.contextKey,c.filterValue=g=>g.substring(r?r.prefix.length:0),r?.placeholder&&(c.ariaLabel=r?.placeholder);let u;t&&(u=new v0,d.add(Ka(c.onWillAccept)(g=>{g.veto(),c.hide()}))),d.add(this.registerPickerListeners(c,o,r,e));const f=d.add(new Bn);if(o&&d.add(o.provide(c,f.token)),Ka(c.onDidHide)(()=>{c.selectedItems.length===0&&f.cancel(),d.dispose(),u?.complete(c.selectedItems.slice(0))}),c.show(),t)return u?.p}adjustValueSelection(e,t,n){var i;let o;n?.preserveValue?o=[e.value.length,e.value.length]:o=[(i=t?.prefix.length)!==null&&i!==void 0?i:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,n,i){const o=new Q,r=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return o.add(He(()=>{r===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(a=>{const[l]=this.getOrInstantiateProvider(a);l!==t?this.show(a,{preserveValue:!0}):r.value=a})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}},"QuickAccessController");bk=Jee([cR(0,tl),cR(1,Ge)],bk);var Qee=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},np=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let vk=h(class extends M5{constructor(e,t,n,i,o){super(n);this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=i,this.layoutService=o,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(bk))),this._quickAccess}createController(e=this.layoutService,t){var n,i;const o={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,l,d,c,u)=>this.instantiationService.createInstance(pk,a,l,d,c,u),styles:this.computeStyles()},r=this._register(new Z_(Object.assign(Object.assign({},o),t)));return r.layout(e.dimension,(i=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&i!==void 0?i:0),this._register(e.onDidLayout(a=>{var l,d;return r.layout(a,(d=(l=e.offset)===null||l===void 0?void 0:l.top)!==null&&d!==void 0?d:0)})),this._register(r.onShow(()=>this.resetContextKeys())),this._register(r.onHide(()=>this.resetContextKeys())),r}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new re(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=je.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},As(this.theme,{quickInputBackground:EM,quickInputForeground:Wq,quickInputTitleBackground:Vq,contrastBorder:Pt,widgetShadow:od})),inputBox:As(this.theme,{inputForeground:nI,inputBackground:tI,inputBorder:iI,inputValidationInfoBackground:q5,inputValidationInfoForeground:Y5,inputValidationInfoBorder:X5,inputValidationWarningBackground:Z5,inputValidationWarningForeground:J5,inputValidationWarningBorder:Q5,inputValidationErrorBackground:eF,inputValidationErrorForeground:tF,inputValidationErrorBorder:nF}),countBadge:As(this.theme,{badgeBackground:Vp,badgeForeground:Bp,badgeBorder:Pt}),button:As(this.theme,{buttonForeground:Dq,buttonBackground:BT,buttonHoverBackground:Iq,buttonBorder:Pt}),progressBar:As(this.theme,{progressBarBackground:Nq}),keybindingLabel:As(this.theme,{keybindingLabelBackground:zq,keybindingLabelForeground:Kq,keybindingLabelBorder:Uq,keybindingLabelBottomBorder:jq,keybindingLabelShadow:od}),list:As(this.theme,{listBackground:EM,listInactiveFocusForeground:qv,listInactiveSelectionIconForeground:Yv,listInactiveFocusBackground:Xv,listFocusOutline:ci,listInactiveFocusOutline:ci,pickerGroupBorder:Hq,pickerGroupForeground:Bq})}}},"QuickInputService");vk=Qee([np(0,Ge),np(1,De),np(2,Mt),np(3,lo),np(4,K_)],vk);var MW=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cc=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let wk=h(class extends vk{constructor(e,t,n,i,o,r){super(t,n,i,o,new xL(e.getContainerDomNode(),r));this.host=void 0;const a=ch.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return l.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}},"EditorScopedQuickInputService");wk=MW([cc(1,Ge),cc(2,De),cc(3,Mt),cc(4,lo),cc(5,ht)],wk);let Ck=h(class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(wk,e);this.mapEditorToService.set(e,t),Ka(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=je.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}},"StandaloneQuickInputService");Ck=MW([cc(0,Ge),cc(1,ht)],Ck);class ch{constructor(e){this.editor=e,this.widget=new eb(this.editor)}static get(e){return e.getContribution(ch.ID)}dispose(){this.widget.dispose()}}h(ch,"QuickInputEditorContribution");ch.ID="editor.controller.quickInput";class eb{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return eb.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}h(eb,"QuickInputEditorWidget");eb.ID="editor.contrib.quickInputWidget";lt(ch.ID,ch);class RW{constructor(e,t,n,i,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=o}}h(RW,"ParsedTokenThemeRule");function ete(s){if(!s||!Array.isArray(s))return[];const e=[];let t=0;for(let n=0,i=s.length;n<i;n++){const o=s[n];let r=-1;if(typeof o.fontStyle=="string"){r=0;const d=o.fontStyle.split(" ");for(let c=0,u=d.length;c<u;c++)switch(d[c]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new RW(o.token||"",n,r,a,l)}return e}h(ete,"parseTokenTheme");function tte(s,e){s.sort((c,u)=>{const f=ste(c.token,u.token);return f!==0?f:c.index-u.index});let t=0,n="000000",i="ffffff";for(;s.length>=1&&s[0].token==="";){const c=s.shift();c.fontStyle!==-1&&(t=c.fontStyle),c.foreground!==null&&(n=c.foreground),c.background!==null&&(i=c.background)}const o=new PW;for(let c of e)o.getId(c);const r=o.getId(n),a=o.getId(i),l=new M1(t,r,a),d=new R1(l);for(let c=0,u=s.length;c<u;c++){const f=s[c];d.insert(f.token,f.fontStyle,o.getId(f.foreground),o.getId(f.background))}return new TN(o,d)}h(tte,"resolveParsedTokenThemeRules");const nte=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class PW{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(nte);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=H.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}h(PW,"ColorMap");class TN{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(ete(e),t)}static createFromParsedTokenTheme(e,t){return tte(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const i=this._match(t),o=ote(t);n=(i.metadata|o<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}h(TN,"TokenTheme");const ite=/\b(comment|string|regex|regexp)\b/;function ote(s){const e=s.match(ite);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}h(ote,"toStandardTokenType");function ste(s,e){return s<e?-1:s>e?1:0}h(ste,"strcmp");class M1{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<10|this._foreground<<14|this._background<<23)>>>0}clone(){return new M1(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<10|this._foreground<<14|this._background<<23)>>>0}}h(M1,"ThemeTrieElementRule");class R1{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));const o=this._children.get(n);return typeof o<"u"?o.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}const o=e.indexOf(".");let r,a;o===-1?(r=e,a=""):(r=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(r);typeof l>"u"&&(l=new R1(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,n,i)}}h(R1,"ThemeTrieElement");function rte(s){const e=[];for(let t=1,n=s.length;t<n;t++){const i=s[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}h(rte,"generateTokensCSSForColorMap");const ate={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Bi]:"#FFFFFE",[Bl]:"#000000",[sI]:"#E5EBF1",[K0]:"#D3D3D3",[U0]:"#939393",[rI]:"#ADD6FF4D"}},lte={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Bi]:"#1E1E1E",[Bl]:"#D4D4D4",[sI]:"#3A3D41",[K0]:"#404040",[U0]:"#707070",[rI]:"#ADD6FF26"}},dte={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Bi]:"#000000",[Bl]:"#FFFFFF",[K0]:"#FFFFFF",[U0]:"#FFFFFF"}};function cte(s){const e=new P,t=g9();return t.onDidChange(()=>e.fire()),s?.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const n=s?s.getProductIconTheme():new LN,i={},o=h(a=>{const l=n.getIcon(a);if(!l)return;const d=l.font;return d?(i[d.id]=d.definition,`.codicon-${a.id}:before { content: '${l.fontCharacter}'; font-family: ${SM(d.id)}; }`):`.codicon-${a.id}:before { content: '${l.fontCharacter}'; }`},"formatIconRule"),r=[];for(let a of t.getIcons()){const l=o(a);l&&r.push(l)}for(let a in i){const l=i[a],d=l.weight?`font-weight: ${l.weight};`:"",c=l.style?`font-style: ${l.style};`:"",u=l.src.map(f=>`${Jc(f.location)} format('${f.format}')`).join(", ");r.push(`@font-face { src: ${u}; font-family: ${SM(a)};${d}${c} font-display: block; }`)}return r.join(`
`)}}}h(cte,"getIconsStyleSheet");class LN{getIcon(e){const t=g9();let n=e.defaults;for(;vt.isThemeIcon(n);){const i=t.getIcon(n.id);if(!i)return;n=i.defaults}return n}}h(LN,"UnthemedProductIconTheme");const Sc="vs",WC="vs-dark",af="hc-black",OW=dn.as(j5.ColorContribution),hte=dn.as(I5.ThemingContribution);class kN{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(mw(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,H.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=yk(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,H.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=OW.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case Sc:return fs.LIGHT;case af:return fs.HIGH_CONTRAST;default:return fs.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const o=yk(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const o={token:""};n&&(o.foreground=n),i&&(o.background=i),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=TN.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=Gn.getForeground(o),a=Gn.getFontStyle(o);return{foreground:r,italic:Boolean(a&1),bold:Boolean(a&2),underline:Boolean(a&4),strikethrough:Boolean(a&8)}}}h(kN,"StandaloneTheme");function mw(s){return s===Sc||s===WC||s===af}h(mw,"isBuiltinTheme");function yk(s){switch(s){case Sc:return ate;case WC:return lte;case af:return dte}}h(yk,"getBuiltinRules");function xS(s){const e=yk(s);return new kN(s,e)}h(xS,"newBuiltInTheme");class FW extends z{constructor(){super();this._onColorThemeChange=this._register(new P),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new P),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new LN,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Sc,xS(Sc)),this._knownThemes.set(WC,xS(WC)),this._knownThemes.set(af,xS(af));const e=cte(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Sc),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),rq("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return vm(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=es(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),z.None}_registerShadowDomContainer(e){const t=es(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!mw(t.base)&&!mw(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new kN(e,t)),mw(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Sc),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(af):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};hte.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const i=[];for(const r of OW.getColors()){const a=this._theme.getColor(r.id,!0);a&&i.push(`${U5(r.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${i.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(rte(o)),this._themeCSS=e.join(`
`),this._updateCSS(),Ft.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}h(FW,"StandaloneThemeService");const Ao=Xe("themeService");var ute=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hR=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let Sk=h(class extends z{constructor(e,t){super();this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new P,this._accessibilityModeEnabledContext=P_.bindTo(this._contextKeyService);const n=h(()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized()),"updateContextKey");this._register(this._configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}},"AccessibilityService");Sk=ute([hR(0,De),hR(1,wt)],Sk);var WW=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_w=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let xk=h(class{constructor(e){this._commandService=e}createMenu(e,t,n){return new Tk(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}},"MenuService");xk=WW([_w(0,ln)],xk);let Tk=h(class Tu{constructor(e,t,n,i,o){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=i,this._menuService=o,this._disposables=new Q,this._menuGroups=[],this._contextKeys=new Set,this._build();const r=new gt(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(r),this._disposables.add(Lo.onDidChangeMenu(d=>{d.has(e)&&r.schedule()}));const a=this._disposables.add(new Q),l=h(()=>{const d=new gt(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(d),a.add(i.onDidChangeContext(c=>{c.affectsSome(this._contextKeys)&&d.schedule()}))},"startContextKeyListener");this._onDidChange=new P({onFirstListenerAdd:l,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=Lo.getMenuItems(this._id);let t;e.sort(Tu._compareMenuItems);for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(Tu._fillInKbExprKeys(e.when,this._contextKeys),Nu(e)){if(e.command.precondition&&Tu._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Tu._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&Lo.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[i,o]=n,r=[];for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Nu(a)?new id(a.command,a.alt,e,this._contextKeyService,this._commandService):new R0(a,this._menuService,this._contextKeyService,e);r.push(l)}r.length>0&&t.push([i,r])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;let a=n.localeCompare(i);if(a!==0)return a}let o=e.order||0,r=t.order||0;return o<r?-1:o>r?1:Tu._compareTitles(Nu(e)?e.command.title:e.title,Nu(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}},"Menu");Tk=WW([_w(2,ln),_w(3,De),_w(4,Wh)],Tk);var fte=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uR=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},ip=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let Lk=h(class extends z{constructor(e,t){super();this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",(vs||ND)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=h(()=>{const t=new v0;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(n=>ip(this,void 0,void 0,function*(){(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)}))},"handler");this.layoutService.hasContainer&&(this._register(J(this.layoutService.container,"click",e)),this._register(J(this.layoutService.container,"keydown",e)))}writeText(e,t){return ip(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(o){console.error(o)}const n=document.activeElement,i=document.body.appendChild(X("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)})}readText(e){return ip(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return ip(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return ip(this,void 0,void 0,function*(){this.findText=e})}},"BrowserClipboardService");Lk=fte([uR(0,K_),uR(1,Cs)],Lk);var gte=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pte=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const em="data-keybinding-context";class P1{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}h(P1,"Context$2");class hh extends P1{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}h(hh,"NullContext");hh.INSTANCE=new hh;class jf extends P1{constructor(e,t,n){super(e,null);this._configurationService=t,this._values=Wc.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===6){const o=Array.from(Qe.map(this._values,([r])=>r));this._values.clear(),n.fire(new Ek(o))}else{const o=[];for(const r of i.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(...Qe.map(l,([d])=>d)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}n.fire(new Ek(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(jf._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(jf._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}h(jf,"ConfigAwareContextValuesContainer");jf._keyPrefix="config.";class VW{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}h(VW,"ContextKey");class kk{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}h(kk,"SimpleContextKeyChangeEvent");class Ek{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}h(Ek,"ArrayContextKeyChangeEvent");class BW{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}h(BW,"CompositeContextKeyChangeEvent");class EN{constructor(e){this._onDidChangeContext=new lm({merge:t=>new BW(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new VW(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new HW(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);!n||n.setValue(e,t)&&this._onDidChangeContext.fire(new kk(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new kk(e))}getContext(e){return this._isDisposed?hh.INSTANCE:this.getContextValuesContainer(mte(e))}}h(EN,"AbstractContextKeyService");let Dk=h(class extends EN{constructor(e){super(0);this._contexts=new Map,this._toDispose=new Q,this._lastContextId=0;const t=new jf(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?hh.INSTANCE:this._contexts.get(e)||hh.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new P1(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}},"ContextKeyService");Dk=gte([pte(0,wt)],Dk);class HW extends EN{constructor(e,t){super(e.createChildContext());if(this._parentChangeListener=new hi,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(em)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(em,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(em),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?hh.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}h(HW,"ScopedContextKeyService");function mte(s){for(;s;){if(s.hasAttribute(em)){const e=s.getAttribute(em);return e?parseInt(e,10):NaN}s=s.parentElement}return 0}h(mte,"findContextAttr");tt.registerCommand(cq,function(s,e,t){s.get(De).createKey(String(e),t)});tt.registerCommand({id:"getContextKeyInfo",handler(){return[...re.all()].sort((s,e)=>s.key.localeCompare(e.key))},description:{description:p("getContextKeyInfo","A command that returns information about context keys"),args:[]}});tt.registerCommand("_generateContextKeyInfo",function(){const s=[],e=new Set;for(let t of re.all())e.has(t.key)||(e.add(t.key),s.push(t));s.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(s,void 0,2))});class zW{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}h(zW,"Node$1");class KW{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),i),i.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new zW(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(let[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const o=this._findCycle(i,t);if(o)return o;t.delete(n)}}}h(KW,"Graph");class Ik extends Error{constructor(e){var t;super("cyclic dependency between services");this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}h(Ik,"CyclicDependencyError");class O1{constructor(e=new H_,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(Ge,this)}createChild(e){return new O1(e,this._strict,this)}invokeFunction(e,...t){let n=zo.traceInvocation(e),i=!1;try{return e({get:r=>{if(i)throw zj("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,n);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){let n,i;return e instanceof Ps?(n=zo.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=zo.traceCreation(e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){let i=Gs.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of i){let l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}let r=i.length>0?i[0].index:t.length;if(t.length!==r){console.warn(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);let a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return new e(...[...t,...o])}_setServiceInstance(e,t){if(this._services.get(e)instanceof Ps)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof Ps?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const i=new KW(a=>a.id.toString());let o=0;const r=[{id:e,desc:t,_trace:n}];for(;r.length;){const a=r.pop();if(i.lookupOrInsertNode(a),o++>1e3)throw new Ik(i);for(let l of Gs.getServiceDependencies(a.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(l.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),d instanceof Ps){const c={id:l.id,desc:d,_trace:a._trace.branch(l.id,!0)};i.insertEdge(a,c),r.push(c)}}}for(;;){const a=i.roots();if(a.length===0){if(!i.isEmpty())throw new Ik(i);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Ps){const c=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,c)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,o){if(this._services.get(e)instanceof Ps)return this._createServiceInstance(t,n,i,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,i){if(n){const o=new Ra(()=>this._createInstance(e,t,i));return new Proxy(Object.create(null),{get(r,a){if(a in r)return r[a];let l=o.value,d=l[a];return typeof d!="function"||(d=d.bind(l),r[a]=d),d},set(r,a,l){return o.value[a]=l,!0}})}else return this._createInstance(e,t,i)}_throwIfStrict(e,t){if(t&&console.warn(t),this._strict)throw new Error(e)}}h(O1,"InstantiationService");class zo{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return zo._None}static traceCreation(e){return zo._None}branch(e,t){let n=new zo(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;zo._totals+=e;let t=!1;function n(o,r){let a=[],l=new Array(o+1).join("	");for(const[d,c,u]of r._dep)if(c&&u){t=!0,a.push(`${l}CREATES -> ${d}`);let f=n(o+1,u);f&&a.push(f)}else a.push(`${l}uses -> ${d}`);return a.join(`
`)}h(n,"printChild");let i=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${zo._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(i.join(`
`))}}h(zo,"Trace");zo._None=new class extends zo{constructor(){super(-1,null)}stop(){}branch(){return this}};zo._totals=0;class UW{constructor(){this._byResource=new li,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let o=this._byOwner.get(t);o||(o=new li,this._byOwner.set(t,o)),o.set(e,n)}get(e,t){let n=this._byResource.get(e);return n?.get(t)}delete(e,t){let n=!1,i=!1,o=this._byResource.get(e);o&&(n=o.delete(t));let r=this._byOwner.get(t);if(r&&(i=r.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,o;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:Qe.empty():Ce.isUri(e)?(o=(i=this._byResource.get(e))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:Qe.empty():Qe.map(Qe.concat(...this._byOwner.values()),r=>r[1])}}h(UW,"DoubleResourceMap");class jW{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new li,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Me.inMemory||e.scheme===Me.walkThrough||e.scheme===Me.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===Wt.Error?t.errors+=1:n===Wt.Warning?t.warnings+=1:n===Wt.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}h(jW,"MarkerStats");class Tl{constructor(){this._onMarkerChanged=new xO({delay:0,merge:Tl._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new UW,this._stats=new jW(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(OP(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const o of n){const r=Tl._toMarker(e,t,o);r&&i.push(r)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:o,message:r,source:a,startLineNumber:l,startColumn:d,endLineNumber:c,endColumn:u,relatedInformation:f,tags:g}=n;if(!!r)return l=l>0?l:1,d=d>0?d:1,c=c>=l?c:l,u=u>0?u:d,{resource:t,owner:e,code:i,severity:o,message:r,source:a,startLineNumber:l,startColumn:d,endLineNumber:c,endColumn:u,relatedInformation:f,tags:g}}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:o}=e;if((!o||o<0)&&(o=-1),t&&n){const r=this._data.get(n,t);if(r){const a=[];for(const l of r)if(Tl._accept(l,i)){const d=a.push(l);if(o>0&&d===o)break}return a}else return[]}else if(!t&&!n){const r=[];for(let a of this._data.values())for(let l of a)if(Tl._accept(l,i)){const d=r.push(l);if(o>0&&d===o)return r}return r}else{const r=this._data.values(n??t),a=[];for(const l of r)for(const d of l)if(Tl._accept(d,i)){const c=a.push(d);if(o>0&&c===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new li;for(let n of e)for(let i of n)t.set(i,!0);return Array.from(t.keys())}}h(Tl,"MarkerService");var kp=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},Fu;(function(s){s[s.None=0]="None",s[s.Initialized=1]="Initialized",s[s.Closed=2]="Closed"})(Fu||(Fu={}));class Gf extends z{constructor(e,t=Object.create(null)){super();this.database=e,this.options=t,this._onDidChangeStorage=this._register(new P),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Fu.None,this.cache=new Map,this.flushDelayer=new y4(Gf.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((i,o)=>this.accept(o,i)),(n=e.deleted)===null||n===void 0||n.forEach(i=>this.accept(i,void 0))}accept(e,t){if(this.state===Fu.Closed)return;let n=!1;_o(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return _o(n)?t:n}getBoolean(e,t){const n=this.get(e);return _o(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return _o(n)?t:parseInt(n,10)}set(e,t){return kp(this,void 0,void 0,function*(){if(this.state===Fu.Closed)return;if(_o(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return kp(this,void 0,void 0,function*(){if(!(this.state===Fu.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return kp(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return kp(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}h(Gf,"Storage");Gf.DEFAULT_FLUSH_DELAY=100;class Nk{constructor(){this.onDidChangeItemsExternal=fe.None,this.items=new Map}updateItems(e){return kp(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}h(Nk,"InMemoryStorageDatabase");const hv="__$__targetStorageMarker",Qr=Xe("storageService");var VC;(function(s){s[s.NONE=0]="NONE",s[s.SHUTDOWN=1]="SHUTDOWN"})(VC||(VC={}));class tb extends z{constructor(e={flushInterval:tb.DEFAULT_FLUSH_INTERVAL}){super();this.options=e,this._onDidChangeValue=this._register(new lm),this._onDidChangeTarget=this._register(new lm),this._onWillSaveState=this._register(new P),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===hv?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))===null||i===void 0?void 0:i.getNumber(e,n)}store(e,t,n,i){if(_o(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,n,i),(o=this.getStorage(n))===null||o===void 0||o.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var i,o;const r=this.getKeyTargets(t);typeof n=="number"?r[e]!==n&&(r[e]=n,(i=this.getStorage(t))===null||i===void 0||i.set(hv,JSON.stringify(r))):typeof r[e]=="number"&&(delete r[e],(o=this.getStorage(t))===null||o===void 0||o.set(hv,JSON.stringify(r)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(hv,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}h(tb,"AbstractStorageService");tb.DEFAULT_FLUSH_INTERVAL=60*1e3;class GW extends tb{constructor(){super();this.globalStorage=this._register(new Gf(new Nk)),this.workspaceStorage=this._register(new Gf(new Nk)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}h(GW,"InMemoryStorageService");function $W(s,e,t,n,i){if(Array.isArray(s)){let o=0;for(const r of s){const a=$W(r,e,t,n,i);if(a===10)return a;a>o&&(o=a)}return o}else{if(typeof s=="string")return n?s==="*"?5:s===t?10:0:0;if(s){const{language:o,pattern:r,scheme:a,hasAccessToAllModels:l,notebookType:d}=s;if(!n&&!l)return 0;let c=0;if(a)if(a===e.scheme)c=10;else if(a==="*")c=5;else return 0;if(o)if(o===t)c=10;else if(o==="*")c=Math.max(c,5);else return 0;if(d)if(d===i)c=10;else if(d==="*")c=Math.max(c,5);else return 0;if(r){let u;if(typeof r=="string"?u=r:u=Object.assign(Object.assign({},r),{base:CD(r.base)}),u===e.fsPath||dQ(u,e.fsPath))c=10;else return 0}return c}else return 0}}h($W,"score");function qW(s){return typeof s=="string"?!1:Array.isArray(s)?s.every(qW):!!s.exclusive}h(qW,"isExclusive");class qt{constructor(e){this._notebookTypeResolver=e,this._clock=0,this._entries=[],this._onDidChange=new P,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),He(()=>{if(n){const i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,o=>{n&&i===o._score?n.push(o.provider):(i=o._score,n=[o.provider],t.push(n))}),t}_orderedForEach(e,t){if(!!e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){var t;const n=(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e.uri),i={uri:e.uri.toString(),language:e.getLanguageId(),notebookType:n};if(!(this._lastCandidate&&this._lastCandidate.language===i.language&&this._lastCandidate.uri===i.uri&&this._lastCandidate.notebookType===i.notebookType)){this._lastCandidate=i;for(let o of this._entries)if(o._score=$W(o.selector,e.uri,e.getLanguageId(),PG(e),n),qW(o.selector)&&o._score>0){for(let r of this._entries)r._score=0;o._score=1e3;break}this._entries.sort(qt._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}h(qt,"LanguageFeatureRegistry");class YW{constructor(){this.referenceProvider=new qt(this._score.bind(this)),this.renameProvider=new qt(this._score.bind(this)),this.codeActionProvider=new qt(this._score.bind(this)),this.definitionProvider=new qt(this._score.bind(this)),this.typeDefinitionProvider=new qt(this._score.bind(this)),this.declarationProvider=new qt(this._score.bind(this)),this.implementationProvider=new qt(this._score.bind(this)),this.documentSymbolProvider=new qt(this._score.bind(this)),this.inlayHintsProvider=new qt(this._score.bind(this)),this.colorProvider=new qt(this._score.bind(this)),this.codeLensProvider=new qt(this._score.bind(this)),this.documentFormattingEditProvider=new qt(this._score.bind(this)),this.documentRangeFormattingEditProvider=new qt(this._score.bind(this)),this.onTypeFormattingEditProvider=new qt(this._score.bind(this)),this.signatureHelpProvider=new qt(this._score.bind(this)),this.hoverProvider=new qt(this._score.bind(this)),this.documentHighlightProvider=new qt(this._score.bind(this)),this.selectionRangeProvider=new qt(this._score.bind(this)),this.foldingRangeProvider=new qt(this._score.bind(this)),this.linkProvider=new qt(this._score.bind(this)),this.inlineCompletionsProvider=new qt(this._score.bind(this)),this.completionProvider=new qt(this._score.bind(this)),this.linkedEditingRangeProvider=new qt(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new qt(this._score.bind(this)),this.documentSemanticTokensProvider=new qt(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)===null||t===void 0?void 0:t.call(this,e)}}h(YW,"LanguageFeaturesService");it(ce,YW,!0);var Pd=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ai=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},XW=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class ZW{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new P}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}h(ZW,"SimpleModel");let Ak=h(class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new yO(new ZW(t))):Promise.reject(new Error("Model not found"))}},"StandaloneTextModelService");Ak=Pd([ai(0,Bt)],Ak);class nb{show(){return nb.NULL_PROGRESS_RUNNER}showWhile(e,t){return XW(this,void 0,void 0,function*(){yield e})}}h(nb,"StandaloneEditorProgressService");nb.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class JW{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,i){return Promise.resolve({choice:0})}}h(JW,"StandaloneDialogService");class ib{info(e){return this.notify({severity:Ot.Info,message:e})}warn(e){return this.notify({severity:Ot.Warning,message:e})}error(e){return this.notify({severity:Ot.Error,message:e})}notify(e){switch(e.severity){case Ot.Error:console.error(e.message);break;case Ot.Warning:console.warn(e.message);break;default:console.log(e.message);break}return ib.NO_OP}status(e,t){return z.None}}h(ib,"StandaloneNotificationService");ib.NO_OP=new o9;let Mk=h(class{constructor(e){this._onWillExecuteCommand=new P,this._onDidExecuteCommand=new P,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=tt.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}},"StandaloneCommandService");Mk=Pd([ai(0,Ge)],Mk);let BC=h(class extends K9{constructor(e,t,n,i,o,r){super(e,t,n,i,o);this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=h(g=>{const m=new Q;m.add(J(g,be.KEY_DOWN,b=>{const v=new Et(b);this._dispatch(v,v.target)&&(v.preventDefault(),v.stopPropagation())})),m.add(J(g,be.KEY_UP,b=>{const v=new Et(b);this._singleModifierDispatch(v,v.target)&&v.preventDefault()})),this._domNodeListeners.push(new QW(g,m))},"addContainer"),l=h(g=>{for(let m=0;m<this._domNodeListeners.length;m++){const b=this._domNodeListeners[m];b.domNode===g&&(this._domNodeListeners.splice(m,1),b.dispose())}},"removeContainer"),d=h(g=>{g.getOption(54)||a(g.getContainerDomNode())},"addCodeEditor"),c=h(g=>{g.getOption(54)||l(g.getContainerDomNode())},"removeCodeEditor");this._register(r.onCodeEditorAdd(d)),this._register(r.onCodeEditorRemove(c)),r.listCodeEditors().forEach(d);const u=h(g=>{a(g.getContainerDomNode())},"addDiffEditor"),f=h(g=>{l(g.getContainerDomNode())},"removeDiffEditor");this._register(r.onDiffEditorAdd(u)),this._register(r.onDiffEditorRemove(f)),r.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,n,i){const o=DT(t,Bo),r=new Q;return o&&(this._dynamicKeybindings.push({keybinding:o.parts,command:e,when:i,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),r.add(He(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),r.add(tt.registerCommand(e,n)),this.updateResolver({source:1}),r}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Ci.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new sf(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const o of e){const r=o.when||void 0,a=o.keybinding;if(!a)n[i++]=new DL(void 0,o.command,o.commandArgs,r,t,null,!1);else{const l=Ff.resolveUserBinding(a,Bo);for(const d of l)n[i++]=new DL(d,o.command,o.commandArgs,r,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new Ql(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new Ff(t,Bo)}},"StandaloneKeybindingService");BC=Pd([ai(0,De),ai(1,ln),ai(2,Yr),ai(3,cn),ai(4,Cs),ai(5,ht)],BC);class QW extends z{constructor(e,t){super();this.domNode=e,this._register(t)}}h(QW,"DomNodeListeners");function fR(s){return s&&typeof s=="object"&&(!s.overrideIdentifier||typeof s.overrideIdentifier=="string")&&(!s.resource||s.resource instanceof Ce)}h(fR,"isConfigurationOverrides");class DN{constructor(){this._onDidChangeConfiguration=new P,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new G_(new H9,new mo)}getValue(e,t){const n=typeof e=="string"?e:void 0,i=fR(e)?e:fR(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const i of e){const[o,r]=i;this.getValue(o)!==r&&(this._configuration.updateValue(o,r),n.push(o))}if(n.length>0){const i=new z9({keys:n,overrides:[]},t,this._configuration);i.source=7,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}}h(DN,"StandaloneConfigurationService");let Rk=h(class{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new P,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,i)=>t.affectsConfiguration(i)})})}getValue(e,t,n){const o=(W.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof o>"u"?this.configurationService.getValue():this.configurationService.getValue(o)}},"StandaloneResourceConfigurationService");Rk=Pd([ai(0,wt)],Rk);let Pk=h(class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:ni||Ke?`
`:`\r
`}},"StandaloneResourcePropertiesService");Pk=Pd([ai(0,wt)],Pk);class eV{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}h(eV,"StandaloneTelemetryService");class ob{constructor(){const e=Ce.from({scheme:ob.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new G9({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}h(ob,"StandaloneWorkspaceContextService");ob.SCHEME="inmemory";function HC(s,e,t){if(!e||!(s instanceof DN))return;const n=[];Object.keys(e).forEach(i=>{zJ(i)&&n.push([`editor.${i}`,e[i]]),t&&KJ(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&s.updateValues(n)}h(HC,"updateConfigurationService");let Ok=h(class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return XW(this,void 0,void 0,function*(){const n=new Map;for(let r of e){if(!(r instanceof KI))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(r.resource);if(!a)throw new Error("bad edit - model not found");if(typeof r.versionId=="number"&&a.getVersionId()!==r.versionId)throw new Error("bad state - model changed in the meantime");let l=n.get(a);l||(l=[],n.set(a,l)),l.push(jt.replaceMove(T.lift(r.textEdit.range),r.textEdit.text))}let i=0,o=0;for(const[r,a]of n)r.pushStackElement(),r.pushEditOperations([],a,()=>[]),r.pushStackElement(),o+=1,i+=a.length;return{ariaSummary:jo(PL.bulkEditServiceSummary,i,o)}})}},"StandaloneBulkEditService");Ok=Pd([ai(0,Bt)],Ok);class tV{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}h(tV,"StandaloneUriLabelService");let Fk=h(class extends OL{constructor(e,t){super(e);this._codeEditorService=t}showContextView(e,t,n){if(!t){const i=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();i&&(t=i.getContainerDomNode())}return super.showContextView(e,t,n)}},"StandaloneContextViewService");Fk=Pd([ai(0,K_),ai(1,ht)],Fk);class nV{constructor(){this._neverEmitter=new P,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}h(nV,"StandaloneWorkspaceTrustManagementService");class iV extends Bf{constructor(){super()}}h(iV,"StandaloneLanguageService");class oV extends Y4{constructor(){super(new q4)}}h(oV,"StandaloneLogService");let Wk=h(class extends jL{constructor(e,t,n,i,o){super(e,t,n,i,o);this.configure({blockMouse:!1})}},"StandaloneContextMenuService");Wk=Pd([ai(0,Yr),ai(1,cn),ai(2,z_),ai(3,Xt),ai(4,Mt)],Wk);it(wt,DN);it(HD,Rk);it(j4,Pk);it(j9,ob);it(q_,tV);it(Yr,eV);it(U_,JW);it(cn,ib);it(el,Tl);it(Vt,iV);it(Ao,FW);it(Cs,oV);it(Bt,AC);it(ZD,ZL);it(De,Dk);it(Rd,nb);it(Qr,GW);it(is,TT);it(zI,Ok);it($9,nV);it(Ui,Ak);it(lo,Sk);it(rs,fk);it(ln,Mk);it(Xt,BC);it(tl,Ck);it(z_,Fk);it(ss,XL);it(Uh,Lk);it(Ad,Wk);it(Wh,xk);var Ie;(function(s){const e=new H_;for(const[r,a]of aM())e.set(r,a);const t=new O1(e,!0);e.set(Ge,t);function n(r){const a=e.get(r);if(!a)throw new Error("Missing service "+r);return a instanceof Ps?t.invokeFunction(l=>l.get(r)):a}h(n,"get"),s.get=n;let i=!1;function o(r){if(i)return t;i=!0;for(const[a,l]of aM())e.get(a)||e.set(a,l);for(const a in r)if(r.hasOwnProperty(a)){const l=Xe(a);e.get(l)instanceof Ps&&e.set(l,r[a])}return t}h(o,"initialize"),s.initialize=o})(Ie||(Ie={}));var IN=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},At=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let _te=0,gR=!1;function bte(s){if(!s){if(gR)return;gR=!0}aq(s||document.body)}h(bte,"createAriaDomNode");let zC=h(class extends Hm{constructor(e,t,n,i,o,r,a,l,d,c,u,f){const g=Object.assign({},t);g.ariaLabel=g.ariaLabel||TC.editorViewAccessibleLabel,g.ariaLabel=g.ariaLabel+";"+TC.accessibilityHelpMessage;super(e,g,{},n,i,o,r,l,d,c,u,f);a instanceof BC?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,bte(g.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const i="DYNAMIC_"+ ++_te,o=se.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,o),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),z.None;const t=e.id,n=e.label,i=se.and(se.equals("editorId",this.getId()),se.deserialize(e.precondition)),o=e.keybindings,r=se.and(i,se.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,d=h((g,...m)=>Promise.resolve(e.run(this,...m)),"run"),c=new Q,u=this.getId()+":"+t;if(c.add(tt.registerCommand(u,d)),a){const g={command:{id:u,title:n},when:i,group:a,order:l};c.add(Lo.appendMenuItem(R.EditorContext,g))}if(Array.isArray(o))for(const g of o)c.add(this._standaloneKeybindingService.addDynamicKeybinding(u,g,d,r));const f=new xI(u,n,n,i,d,this._contextKeyService);return this._actions[t]=f,c.add(He(()=>{delete this._actions[t]})),c}_triggerCommand(e,t){if(this._codeEditorService instanceof vC)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}},"StandaloneCodeEditor");zC=IN([At(2,Ge),At(3,ht),At(4,ln),At(5,De),At(6,Xt),At(7,Mt),At(8,cn),At(9,lo),At(10,oi),At(11,ce)],zC);let Vk=h(class extends zC{constructor(e,t,n,i,o,r,a,l,d,c,u,f,g,m,b){const v=Object.assign({},t);HC(c,v,!1);const C=l.registerEditorContainer(e);typeof v.theme=="string"&&l.setTheme(v.theme),typeof v.autoDetectHighContrast<"u"&&l.setAutoDetectHighContrast(Boolean(v.autoDetectHighContrast));const w=v.model;delete v.model;super(e,v,n,i,o,r,a,l,d,u,m,b);this._configurationService=c,this._standaloneThemeService=l,this._register(C);let y;if(typeof w>"u"){const S=g.getLanguageIdByMimeType(v.language)||v.language||Zr;y=sV(f,g,v.value||"",S,void 0),this._ownsModel=!0}else y=w,this._ownsModel=!1;if(this._attachModel(y),y){const S={oldModelUrl:null,newModelUrl:y.uri};this._onDidChangeModel.fire(S)}}dispose(){super.dispose()}updateOptions(e){HC(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}},"StandaloneEditor");Vk=IN([At(2,Ge),At(3,ht),At(4,ln),At(5,De),At(6,Xt),At(7,Ao),At(8,cn),At(9,wt),At(10,lo),At(11,Bt),At(12,Vt),At(13,oi),At(14,ce)],Vk);let Bk=h(class extends fd{constructor(e,t,n,i,o,r,a,l,d,c,u,f){const g=Object.assign({},t);HC(d,g,!0);const m=a.registerEditorContainer(e);typeof g.theme=="string"&&a.setTheme(g.theme),typeof g.autoDetectHighContrast<"u"&&a.setAutoDetectHighContrast(Boolean(g.autoDetectHighContrast));super(e,g,{},f,o,i,n,r,a,l,c,u);this._configurationService=d,this._standaloneThemeService=a,this._register(m)}dispose(){super.dispose()}updateOptions(e){HC(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(zC,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}},"StandaloneDiffEditor");Bk=IN([At(2,Ge),At(3,De),At(4,is),At(5,ht),At(6,Ao),At(7,cn),At(8,wt),At(9,Ad),At(10,Rd),At(11,Uh)],Bk);function sV(s,e,t,n,i){if(t=t||"",!n){const o=t.indexOf(`
`);let r=t;return o!==-1&&(r=t.substring(0,o)),pR(s,t,e.createByFilepathOrFirstLine(i||null,r),i)}return pR(s,t,e.createById(n),i)}h(sV,"createTextModel");function pR(s,e,t,n){return s.createModel(e,t,n)}h(pR,"doCreateModel");function vte(s,e,t){return Ie.initialize(t||{}).createInstance(Vk,s,e)}h(vte,"create$1");function wte(s){return Ie.get(ht).onCodeEditorAdd(t=>{s(t)})}h(wte,"onDidCreateEditor");function Cte(s,e,t){return Ie.initialize(t||{}).createInstance(Bk,s,e)}h(Cte,"createDiffEditor");function yte(s,e){return new ZO(s,e)}h(yte,"createDiffNavigator");function Ste(s,e,t){const n=Ie.get(Vt),i=n.getLanguageIdByMimeType(e)||e;return sV(Ie.get(Bt),n,s,i,t)}h(Ste,"createModel");function xte(s,e){const t=Ie.get(Vt);Ie.get(Bt).setMode(s,t.createById(e))}h(xte,"setModelLanguage");function Tte(s,e,t){s&&Ie.get(el).changeOne(e,s.uri,t)}h(Tte,"setModelMarkers");function Lte(s){return Ie.get(el).read(s)}h(Lte,"getModelMarkers");function kte(s){return Ie.get(el).onMarkerChanged(s)}h(kte,"onDidChangeMarkers");function Ete(s){return Ie.get(Bt).getModel(s)}h(Ete,"getModel");function Dte(){return Ie.get(Bt).getModels()}h(Dte,"getModels");function Ite(s){return Ie.get(Bt).onModelAdded(s)}h(Ite,"onDidCreateModel");function Nte(s){return Ie.get(Bt).onModelRemoved(s)}h(Nte,"onWillDisposeModel");function Ate(s){return Ie.get(Bt).onModelLanguageChanged(t=>{s({model:t.model,oldLanguage:t.oldLanguageId})})}h(Ate,"onDidChangeModelLanguage");function Mte(s){return C$(Ie.get(Bt),Ie.get(oi),s)}h(Mte,"createWebWorker");function Rte(s,e){const t=Ie.get(Vt),n=Ie.get(Ao);return n.registerEditorContainer(s),k0.colorizeElement(n,t,s,e)}h(Rte,"colorizeElement");function Pte(s,e,t){const n=Ie.get(Vt);return Ie.get(Ao).registerEditorContainer(document.body),k0.colorize(n,s,e,t)}h(Pte,"colorize");function Ote(s,e,t=4){return Ie.get(Ao).registerEditorContainer(document.body),k0.colorizeModelLine(s,e,t)}h(Ote,"colorizeModelLine");function Fte(s){const e=Ft.get(s);return e||{getInitialState:()=>mf,tokenize:(t,n,i)=>v4(s,i)}}h(Fte,"getSafeTokenizationSupport$1");function Wte(s,e){Ft.getOrCreate(e);const t=Fte(e),n=zr(s),i=[];let o=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],d=t.tokenize(l,!0,o);i[r]=d.tokens,o=d.endState}return i}h(Wte,"tokenize");function Vte(s,e){Ie.get(Ao).defineTheme(s,e)}h(Vte,"defineTheme");function Bte(s){Ie.get(Ao).setTheme(s)}h(Bte,"setTheme");function Hte(){lT.clearAllFontInfos()}h(Hte,"remeasureFonts");function zte(s,e){return tt.registerCommand({id:s,handler:e})}h(zte,"registerCommand$1");function Kte(){return{create:vte,onDidCreateEditor:wte,createDiffEditor:Cte,createDiffNavigator:yte,createModel:Ste,setModelLanguage:xte,setModelMarkers:Tte,getModelMarkers:Lte,onDidChangeMarkers:kte,getModels:Dte,getModel:Ete,onDidCreateModel:Ite,onWillDisposeModel:Nte,onDidChangeModelLanguage:Ate,createWebWorker:Mte,colorizeElement:Rte,colorize:Pte,colorizeModelLine:Ote,tokenize:Wte,defineTheme:Vte,setTheme:Bte,remeasureFonts:Hte,registerCommand:zte,AccessibilitySupport:Sx,ContentWidgetPositionPreference:Ex,CursorChangeReason:Dx,DefaultEndOfLine:Ix,EditorAutoIndentStrategy:Ax,EditorOption:Mx,EndOfLinePreference:Rx,EndOfLineSequence:Px,MinimapPosition:Kx,MouseTargetType:Ux,OverlayWidgetPositionPreference:jx,OverviewRulerLane:Gx,RenderLineNumbersType:qx,RenderMinimap:Yx,ScrollbarVisibility:Zx,ScrollType:Xx,TextEditorCursorBlinkingStyle:nT,TextEditorCursorStyle:iT,TrackedRangeStickiness:oT,WrappingIndent:sT,InjectedTextCursorStops:Fx,PositionAffinity:$x,ConfigurationChangedEvent:pD,BareFontInfo:Ol,FontInfo:Gw,TextModelResolvedOptions:Fp,FindMatch:gf,ApplyUpdateResult:Vu,EditorType:C_,EditorOptions:cr}}h(Kte,"createMonacoEditorAPI");function Ute(s,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!s(t))return!1;return!0}h(Ute,"isArrayOf");function uv(s,e){return typeof s=="boolean"?s:e}h(uv,"bool");function mR(s,e){return typeof s=="string"?s:e}h(mR,"string");function jte(s){const e={};for(const t of s)e[t]=!0;return e}h(jte,"arrayToHash");function _R(s,e=!1){e&&(s=s.map(function(n){return n.toLowerCase()}));const t=jte(s);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}h(_R,"createKeywordMatcher");function Hk(s,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(o,r){n=!0;let a="";if(typeof s[r]=="string")a=s[r];else if(s[r]&&s[r]instanceof RegExp)a=s[r].source;else throw s[r]===void 0?xt(s,"language definition does not contain attribute '"+r+"', used at: "+e):xt(s,"attribute reference '"+r+"' must be a string, used at: "+e);return Cu(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");const i=(s.ignoreCase?"i":"")+(s.unicode?"u":"");return new RegExp(e,i)}h(Hk,"compileRegExp");function Gte(s,e,t,n){if(n<0)return s;if(n<e.length)return e[n];if(n>=100){n=n-100;const i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}h(Gte,"selectScrutinee");function $te(s,e,t,n){let i=-1,o=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(i=parseInt(r[3]),r[2]&&(i=i+100)),o=r[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let d;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const c=_R(l.split("|"),s.ignoreCase);d=h(function(u){return a==="~"?c(u):!c(u)},"tester")}else if(a==="@"||a==="!@"){const c=s[l];if(!c)throw xt(s,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!Ute(function(f){return typeof f=="string"},c))throw xt(s,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=_R(c,s.ignoreCase);d=h(function(f){return a==="@"?u(f):!u(f)},"tester")}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const c=Hk(s,"^"+l+"$");d=h(function(u){return a==="~"?c.test(u):!c.test(u)},"tester")}else d=h(function(c,u,f,g){return Hk(s,"^"+yl(s,l,u,f,g)+"$").test(c)},"tester");else if(l.indexOf("$")<0){const c=Fl(s,l);d=h(function(u){return a==="=="?u===c:u!==c},"tester")}else{const c=Fl(s,l);d=h(function(u,f,g,m,b){const v=yl(s,c,f,g,m);return a==="=="?u===v:u!==v},"tester")}return i===-1?{name:t,value:n,test:function(c,u,f,g){return d(c,c,u,f,g)}}:{name:t,value:n,test:function(c,u,f,g){const m=Gte(c,u,f,i);return d(m||"",c,u,f,g)}}}h($te,"createGuard");function zk(s,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw xt(s,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw xt(s,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw xt(s,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!M$(s,yl(s,i,"",[],""))))throw xt(s,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,s.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let i=0,o=t.length;i<o;i++)n[i]=zk(s,e,t[i]);return{group:n}}else if(t.cases){const n=[];for(let o in t.cases)if(t.cases.hasOwnProperty(o)){const r=zk(s,e,t.cases[o]);o==="@default"||o==="@"||o===""?n.push({test:void 0,value:r,name:o}):o==="@eos"?n.push({test:function(a,l,d,c){return c},value:r,name:o}):n.push($te(s,e,o,r))}const i=s.defaultToken;return{test:function(o,r,a,l){for(const d of n)if(!d.test||d.test(o,r,a,l))return d.value;return i}}}else throw xt(s,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}h(zk,"compileAction");class rV{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw xt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=Hk(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=zk(e,this.name,t)}}h(rV,"Rule");function aV(s,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={};t.languageId=s,t.includeLF=uv(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=uv(e.ignoreCase,!1),t.unicode=uv(e.unicode,!1),t.tokenPostfix=mR(e.tokenPostfix,"."+t.languageId),t.defaultToken=mR(e.defaultToken,"source"),t.usesEmbedded=!1;const n=e;n.languageId=s,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(r,a,l){for(const d of l){let c=d.include;if(c){if(typeof c!="string")throw xt(t,"an 'include' attribute must be a string at: "+r);if(c[0]==="@"&&(c=c.substr(1)),!e.tokenizer[c])throw xt(t,"include target '"+c+"' is not defined at: "+r);i(r+"."+c,a,e.tokenizer[c])}else{const u=new rV(r);if(Array.isArray(d)&&d.length>=1&&d.length<=3)if(u.setRegex(n,d[0]),d.length>=3)if(typeof d[1]=="string")u.setAction(n,{token:d[1],next:d[2]});else if(typeof d[1]=="object"){const f=d[1];f.next=d[2],u.setAction(n,f)}else throw xt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else u.setAction(n,d[1]);else{if(!d.regex)throw xt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);d.name&&typeof d.name=="string"&&(u.name=d.name),d.matchOnlyAtStart&&(u.matchOnlyAtLineStart=uv(d.matchOnlyAtLineStart,!1)),u.setRegex(n,d.regex),u.setAction(n,d.action)}a.push(u)}}}if(h(i,"addRules"),!e.tokenizer||typeof e.tokenizer!="object")throw xt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,i("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw xt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const o=[];for(let r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw xt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:Fl(t,a.open),close:Fl(t,a.close)});else throw xt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}h(aV,"compile");var qte=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function Yte(s){Af.registerLanguage(s)}h(Yte,"register");function Xte(){let s=[];return s=s.concat(Af.getLanguages()),s}h(Xte,"getLanguages");function Zte(s){return Ie.get(Vt).languageIdCodec.encodeLanguageId(s)}h(Zte,"getEncodedLanguageId");function Jte(s,e){const n=Ie.get(Vt).onDidEncounterLanguage(i=>{i===s&&(n.dispose(),e())});return n}h(Jte,"onLanguage");function Qte(s,e){if(!Ie.get(Vt).isRegisteredLanguageId(s))throw new Error(`Cannot set configuration for unknown language ${s}`);return fn.register(s,e,100)}h(Qte,"setLanguageConfiguration");class lV{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return $f.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const i=this._actual.tokenizeEncoded(e,n);return new v_(i.tokens,i.endState)}}h(lV,"EncodedTokenizationSupportAdapter");class $f{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=i}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let i=0;for(let o=0,r=e.length;o<r;o++){const a=e[o];let l=a.startIndex;o===0?l=0:l<i&&(l=i),n[o]=new hf(l,a.scopes,t),i=l}return n}static adaptTokenize(e,t,n,i){const o=t.tokenize(n,i),r=$f._toClassicTokens(o.tokens,e);let a;return o.endState.equals(i)?a=i:a=o.endState,new u0(r,a)}tokenize(e,t,n){return $f.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,o=[];let r=0,a=0;for(let d=0,c=t.length;d<c;d++){const u=t[d],f=i.match(n,u.scopes);if(r>0&&o[r-1]===f)continue;let g=u.startIndex;d===0?g=0:g<a&&(g=a),o[r++]=g,o[r++]=f,a=g}const l=new Uint32Array(r);for(let d=0;d<r;d++)l[d]=o[d];return l}tokenizeEncoded(e,t,n){const i=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let r;return i.endState.equals(n)?r=n:r=i.endState,new v_(o,r)}}h($f,"TokenizationSupportAdapter");function ene(s){return typeof s.getInitialState=="function"}h(ene,"isATokensProvider");function tne(s){return"tokenizeEncoded"in s}h(tne,"isEncodedTokensProvider");function dV(s){return s&&typeof s.then=="function"}h(dV,"isThenable");function nne(s){const e=Ie.get(Ao);if(s){const t=[null];for(let n=1,i=s.length;n<i;n++)t[n]=H.fromHex(s[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}h(nne,"setColorMap");function cV(s,e){return tne(e)?new lV(s,e):new $f(s,e,Ie.get(Vt),Ie.get(Ao))}h(cV,"createTokenizationSupportAdapter");function NN(s,e){const t={createTokenizationSupport:()=>qte(this,void 0,void 0,function*(){const n=yield Promise.resolve(e.create());return n?ene(n)?cV(s,n):new _g(Ie.get(Vt),Ie.get(Ao),s,aV(s,n)):null})};return Ft.registerFactory(s,t)}h(NN,"registerTokensProviderFactory");function ine(s,e){if(!Ie.get(Vt).isRegisteredLanguageId(s))throw new Error(`Cannot set tokens provider for unknown language ${s}`);return dV(e)?NN(s,{create:()=>e}):Ft.register(s,cV(s,e))}h(ine,"setTokensProvider");function one(s,e){const t=h(n=>new _g(Ie.get(Vt),Ie.get(Ao),s,aV(s,n)),"create");return dV(e)?NN(s,{create:()=>e}):Ft.register(s,t(e))}h(one,"setMonarchTokensProvider");function sne(s,e){return Ie.get(ce).referenceProvider.register(s,e)}h(sne,"registerReferenceProvider");function rne(s,e){return Ie.get(ce).renameProvider.register(s,e)}h(rne,"registerRenameProvider");function ane(s,e){return Ie.get(ce).signatureHelpProvider.register(s,e)}h(ane,"registerSignatureHelpProvider");function lne(s,e){return Ie.get(ce).hoverProvider.register(s,{provideHover:(n,i,o)=>{const r=n.getWordAtPosition(i);return Promise.resolve(e.provideHover(n,i,o)).then(a=>{if(!!a)return!a.range&&r&&(a.range=new T(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)),a.range||(a.range=new T(i.lineNumber,i.column,i.lineNumber,i.column)),a})}})}h(lne,"registerHoverProvider");function dne(s,e){return Ie.get(ce).documentSymbolProvider.register(s,e)}h(dne,"registerDocumentSymbolProvider");function cne(s,e){return Ie.get(ce).documentHighlightProvider.register(s,e)}h(cne,"registerDocumentHighlightProvider");function hne(s,e){return Ie.get(ce).linkedEditingRangeProvider.register(s,e)}h(hne,"registerLinkedEditingRangeProvider");function une(s,e){return Ie.get(ce).definitionProvider.register(s,e)}h(une,"registerDefinitionProvider");function fne(s,e){return Ie.get(ce).implementationProvider.register(s,e)}h(fne,"registerImplementationProvider");function gne(s,e){return Ie.get(ce).typeDefinitionProvider.register(s,e)}h(gne,"registerTypeDefinitionProvider");function pne(s,e){return Ie.get(ce).codeLensProvider.register(s,e)}h(pne,"registerCodeLensProvider");function mne(s,e,t){return Ie.get(ce).codeActionProvider.register(s,{providedCodeActionKinds:t?.providedCodeActionKinds,provideCodeActions:(i,o,r,a)=>{const d=Ie.get(el).read({resource:i.uri}).filter(c=>T.areIntersectingOrTouching(c,o));return e.provideCodeActions(i,o,{markers:d,only:r.only},a)},resolveCodeAction:e.resolveCodeAction})}h(mne,"registerCodeActionProvider");function _ne(s,e){return Ie.get(ce).documentFormattingEditProvider.register(s,e)}h(_ne,"registerDocumentFormattingEditProvider");function bne(s,e){return Ie.get(ce).documentRangeFormattingEditProvider.register(s,e)}h(bne,"registerDocumentRangeFormattingEditProvider");function vne(s,e){return Ie.get(ce).onTypeFormattingEditProvider.register(s,e)}h(vne,"registerOnTypeFormattingEditProvider");function wne(s,e){return Ie.get(ce).linkProvider.register(s,e)}h(wne,"registerLinkProvider");function Cne(s,e){return Ie.get(ce).completionProvider.register(s,e)}h(Cne,"registerCompletionItemProvider");function yne(s,e){return Ie.get(ce).colorProvider.register(s,e)}h(yne,"registerColorProvider");function Sne(s,e){return Ie.get(ce).foldingRangeProvider.register(s,e)}h(Sne,"registerFoldingRangeProvider");function xne(s,e){return Ie.get(ce).declarationProvider.register(s,e)}h(xne,"registerDeclarationProvider");function Tne(s,e){return Ie.get(ce).selectionRangeProvider.register(s,e)}h(Tne,"registerSelectionRangeProvider");function Lne(s,e){return Ie.get(ce).documentSemanticTokensProvider.register(s,e)}h(Lne,"registerDocumentSemanticTokensProvider");function kne(s,e){return Ie.get(ce).documentRangeSemanticTokensProvider.register(s,e)}h(kne,"registerDocumentRangeSemanticTokensProvider");function Ene(s,e){return Ie.get(ce).inlineCompletionsProvider.register(s,e)}h(Ene,"registerInlineCompletionsProvider");function Dne(s,e){return Ie.get(ce).inlayHintsProvider.register(s,e)}h(Dne,"registerInlayHintsProvider");function Ine(){return{register:Yte,getLanguages:Xte,onLanguage:Jte,getEncodedLanguageId:Zte,setLanguageConfiguration:Qte,setColorMap:nne,registerTokensProviderFactory:NN,setTokensProvider:ine,setMonarchTokensProvider:one,registerReferenceProvider:sne,registerRenameProvider:rne,registerCompletionItemProvider:Cne,registerSignatureHelpProvider:ane,registerHoverProvider:lne,registerDocumentSymbolProvider:dne,registerDocumentHighlightProvider:cne,registerLinkedEditingRangeProvider:hne,registerDefinitionProvider:une,registerImplementationProvider:fne,registerTypeDefinitionProvider:gne,registerCodeLensProvider:pne,registerCodeActionProvider:mne,registerDocumentFormattingEditProvider:_ne,registerDocumentRangeFormattingEditProvider:bne,registerOnTypeFormattingEditProvider:vne,registerLinkProvider:wne,registerColorProvider:yne,registerFoldingRangeProvider:Sne,registerDeclarationProvider:xne,registerSelectionRangeProvider:Tne,registerDocumentSemanticTokensProvider:Lne,registerDocumentRangeSemanticTokensProvider:kne,registerInlineCompletionsProvider:Ene,registerInlayHintsProvider:Dne,DocumentHighlightKind:Nx,CompletionItemKind:Tx,CompletionItemTag:Lx,CompletionItemInsertTextRule:xx,SymbolKind:eT,SymbolTag:tT,IndentAction:Ox,CompletionTriggerKind:kx,SignatureHelpTriggerKind:Qx,InlayHintKind:Wx,InlineCompletionTriggerKind:Vx,FoldingRangeKind:bs}}h(Ine,"createMonacoLanguagesAPI");const AN=Xe("IEditorCancelService"),hV=new re("cancellableOperation",!1,p("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));it(AN,class{constructor(){this._tokens=new WeakMap}add(s,e){let t=this._tokens.get(s);t||(t=s.invokeWithinContext(i=>{const o=hV.bindTo(i.get(De)),r=new eo;return{key:o,tokens:r}}),this._tokens.set(s,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(s){const e=this._tokens.get(s);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class uV extends Bn{constructor(e,t){super(t);this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(AN).add(e,this))}dispose(){this._unregister(),super.dispose()}}h(uV,"EditorKeybindingCancellationTokenSource");te(new class extends zn{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:hV})}runEditorCommand(s,e){s.get(AN).cancel(e)}});class qf{constructor(e,t){if(this.flags=t,(this.flags&1)!==0){const n=e.getModel();this.modelVersionId=n?jo("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;(this.flags&4)!==0?this.position=e.getPosition():this.position=null,(this.flags&2)!==0?this.selection=e.getSelection():this.selection=null,(this.flags&8)!==0?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof qf))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new qf(e,this.flags))}}h(qf,"EditorState$1");class Yf extends uV{constructor(e,t,n,i){super(e,i);this._listener=new Q,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!n||!T.containsPosition(n,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!n||!T.containsRange(n,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}h(Yf,"EditorStateCancellationTokenSource");class F1 extends Bn{constructor(e,t){super(t);this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}h(F1,"TextModelCancellationTokenSource");function qa(s){return s&&typeof s.getEditorType=="function"?s.getEditorType()===C_.ICodeEditor:!1}h(qa,"isCodeEditor");function fV(s){return s&&typeof s.getEditorType=="function"?s.getEditorType()===C_.IDiffEditor:!1}h(fV,"isDiffEditor");function gV(s){return qa(s)?s:fV(s)?s.getModifiedEditor():null}h(gV,"getCodeEditor");class uh{static _handleEolEdits(e,t){let n,i=[];for(let o of t)typeof o.eol=="number"&&(n=o.eol),o.range&&typeof o.text=="string"&&i.push(o);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=uh._handleEolEdits(e,t);i.length===1&&uh._isFullModelReplaceEdit(e,i[0])?e.executeEdits("formatEditsCommand",i.map(o=>jt.replace(T.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",i.map(o=>jt.replaceMove(T.lift(o.range),o.text))),n&&e.pushUndoStop()}}h(uh,"FormattingEdit");class bw{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}h(bw,"ExtensionIdentifier");var lr=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function MN(s){if(s=s.filter(i=>i.range),!s.length)return;let{range:e}=s[0];for(let i=1;i<s.length;i++)e=T.plusRange(e,s[i].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?s.length===1?qn(p("hint11","Made 1 formatting edit on line {0}",t)):qn(p("hintn1","Made {0} formatting edits on line {1}",s.length,t)):s.length===1?qn(p("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):qn(p("hintnn","Made {0} formatting edits between lines {1} and {2}",s.length,t,n))}h(MN,"alertFormattingEdits");function pV(s,e,t){const n=[],i=new Set,o=s.ordered(t);for(const a of o)n.push(a),a.extensionId&&i.add(bw.toKey(a.extensionId));const r=e.ordered(t);for(const a of r){if(a.extensionId){if(i.has(bw.toKey(a.extensionId)))continue;i.add(bw.toKey(a.extensionId))}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,d,c){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),d,c)}})}return n}h(pV,"getRealAndSyntheticDocumentFormattersOrdered");class _d{static setFormatterSelector(e){return{dispose:_d._selectors.unshift(e)}}static select(e,t,n){return lr(this,void 0,void 0,function*(){if(e.length===0)return;const i=Qe.first(_d._selectors);if(i)return yield i(e,t,n)})}}h(_d,"FormattingConflicts");_d._selectors=new eo;function mV(s,e,t,n,i,o){return lr(this,void 0,void 0,function*(){const r=s.get(Ge),{documentRangeFormattingEditProvider:a}=s.get(ce),l=qa(e)?e.getModel():e,d=a.ordered(l),c=yield _d.select(d,l,n);c&&(i.report(c),yield r.invokeFunction(Nne,c,e,t,o))})}h(mV,"formatDocumentRangesWithSelectedProvider");function Nne(s,e,t,n,i){return lr(this,void 0,void 0,function*(){const o=s.get(is);let r,a;qa(t)?(r=t.getModel(),a=new Yf(t,5,void 0,i)):(r=t,a=new F1(t,i));let l=[],d=0;for(let m of uD(n).sort(T.compareRangesUsingStarts))d>0&&T.areIntersectingOrTouching(l[d-1],m)?l[d-1]=T.fromPositions(l[d-1].getStartPosition(),m.getEndPosition()):d=l.push(m);const c=h(m=>lr(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(r,m,r.getFormattingOptions(),a.token))||[]}),"computeEdits"),u=h((m,b)=>{if(!m.length||!b.length)return!1;const v=m.reduce((C,w)=>T.plusRange(C,w.range),m[0].range);if(!b.some(C=>T.intersectRanges(v,C.range)))return!1;for(let C of m)for(let w of b)if(T.intersectRanges(C.range,w.range))return!0;return!1},"hasIntersectingEdit"),f=[],g=[];try{for(let m of l){if(a.token.isCancellationRequested)return!0;g.push(yield c(m))}for(let m=0;m<l.length;++m)for(let b=m+1;b<l.length;++b){if(a.token.isCancellationRequested)return!0;if(u(g[m],g[b])){const v=T.plusRange(l[m],l[b]),C=yield c(v);l.splice(b,1),l.splice(m,1),l.push(v),g.splice(b,1),g.splice(m,1),g.push(C),m=0,b=0}}for(let m of g){if(a.token.isCancellationRequested)return!0;const b=yield o.computeMoreMinimalEdits(r.uri,m);b&&f.push(...b)}}finally{a.dispose()}if(f.length===0)return!1;if(qa(t))uh.execute(t,f,!0),MN(f),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:m}]=f,b=new oe(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn);r.pushEditOperations([b],f.map(v=>({text:v.text,range:T.lift(v.range),forceMoveMarkers:!0})),v=>{for(const{range:C}of v)if(T.areIntersectingOrTouching(C,b))return[new oe(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn)];return null})}return!0})}h(Nne,"formatDocumentRangesWithProvider");function Ane(s,e,t,n,i){return lr(this,void 0,void 0,function*(){const o=s.get(Ge),r=s.get(ce),a=qa(e)?e.getModel():e,l=pV(r.documentFormattingEditProvider,r.documentRangeFormattingEditProvider,a),d=yield _d.select(l,a,t);d&&(n.report(d),yield o.invokeFunction(Mne,d,e,t,i))})}h(Ane,"formatDocumentWithSelectedProvider");function Mne(s,e,t,n,i){return lr(this,void 0,void 0,function*(){const o=s.get(is);let r,a;qa(t)?(r=t.getModel(),a=new Yf(t,5,void 0,i)):(r=t,a=new F1(t,i));let l;try{const d=yield e.provideDocumentFormattingEdits(r,r.getFormattingOptions(),a.token);if(l=yield o.computeMoreMinimalEdits(r.uri,d),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!l||l.length===0)return!1;if(qa(t))uh.execute(t,l,n!==2),n!==2&&(MN(l),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:d}]=l,c=new oe(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn);r.pushEditOperations([c],l.map(u=>({text:u.text,range:T.lift(u.range),forceMoveMarkers:!0})),u=>{for(const{range:f}of u)if(T.areIntersectingOrTouching(f,c))return[new oe(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn)];return null})}return!0})}h(Mne,"formatDocumentWithProvider");function Rne(s,e,t,n,i,o){return lr(this,void 0,void 0,function*(){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){let l=yield Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,i,o)).catch(Nn);if(io(l))return yield s.computeMoreMinimalEdits(t.uri,l)}})}h(Rne,"getDocumentRangeFormattingEditsUntilResult");function Pne(s,e,t,n,i){return lr(this,void 0,void 0,function*(){const o=pV(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of o){let a=yield Promise.resolve(r.provideDocumentFormattingEdits(t,n,i)).catch(Nn);if(io(a))return yield s.computeMoreMinimalEdits(t.uri,a)}})}h(Pne,"getDocumentFormattingEditsUntilResult");function _V(s,e,t,n,i,o,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,i,o,r)).catch(Nn).then(l=>s.computeMoreMinimalEdits(t.uri,l))}h(_V,"getOnTypeFormattingEdits");tt.registerCommand("_executeFormatRangeProvider",function(s,...e){return lr(this,void 0,void 0,function*(){const[t,n,i]=e;bt(Ce.isUri(t)),bt(T.isIRange(n));const o=s.get(Ui),r=s.get(is),a=s.get(ce),l=yield o.createModelReference(t);try{return Rne(r,a,l.object.textEditorModel,T.lift(n),i,je.None)}finally{l.dispose()}})});tt.registerCommand("_executeFormatDocumentProvider",function(s,...e){return lr(this,void 0,void 0,function*(){const[t,n]=e;bt(Ce.isUri(t));const i=s.get(Ui),o=s.get(is),r=s.get(ce),a=yield i.createModelReference(t);try{return Pne(o,r,a.object.textEditorModel,n,je.None)}finally{a.dispose()}})});tt.registerCommand("_executeFormatOnTypeProvider",function(s,...e){return lr(this,void 0,void 0,function*(){const[t,n,i,o]=e;bt(Ce.isUri(t)),bt(W.isIPosition(n)),bt(typeof i=="string");const r=s.get(Ui),a=s.get(is),l=s.get(ce),d=yield r.createModelReference(t);try{return _V(a,l,d.object.textEditorModel,W.lift(n),i,o,je.None)}finally{d.dispose()}})});var TS;cr.wrappingIndent.defaultValue=0;cr.glyphMargin.defaultValue=!1;cr.autoIndent.defaultValue=3;cr.overviewRulerLanes.defaultValue=2;_d.setFormatterSelector((s,e,t)=>Promise.resolve(s[0]));const yi=RO();yi.editor=Kte();yi.languages=Ine();const One=yi.CancellationTokenSource,Fne=yi.Emitter,Wne=yi.KeyCode,Vne=yi.KeyMod,Bne=yi.Position,Hne=yi.Range,zne=yi.Selection,Kne=yi.SelectionDirection,Une=yi.MarkerSeverity,jne=yi.MarkerTag,KC=yi.Uri,Gne=yi.Token,lf=yi.editor,Lu=yi.languages;(((TS=tn.MonacoEnvironment)===null||TS===void 0?void 0:TS.globalAPI)||typeof define=="function"&&define.amd)&&(self.monaco=yi);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var sb=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:One,Emitter:Fne,KeyCode:Wne,KeyMod:Vne,Position:Bne,Range:Hne,Selection:zne,SelectionDirection:Kne,MarkerSeverity:Une,MarkerTag:jne,Uri:KC,Token:Gne,editor:lf,languages:Lu},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var $ne=Object.defineProperty,qne=Object.getOwnPropertyDescriptor,Yne=Object.getOwnPropertyNames,Xne=Object.prototype.hasOwnProperty,Zne=h((s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Yne(e))!Xne.call(s,i)&&(t||i!=="default")&&$ne(s,i,{get:()=>e[i],enumerable:!(n=qne(e,i))||n.enumerable});return s},"__reExport$4"),Ep={};Zne(Ep,sb);var bV={},LS={},vV=h(class{static getOrCreate(s){return LS[s]||(LS[s]=new vV(s)),LS[s]}_languageId;_loadingTriggered;_lazyLoadPromise;_lazyLoadPromiseResolve;_lazyLoadPromiseReject;constructor(s){this._languageId=s,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((e,t)=>{this._lazyLoadPromiseResolve=e,this._lazyLoadPromiseReject=t})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,bV[this._languageId].loader().then(s=>this._lazyLoadPromiseResolve(s),s=>this._lazyLoadPromiseReject(s))),this._lazyLoadPromise}},"LazyLanguageLoader");function ge(s){const e=s.id;bV[e]=s,Ep.languages.register(s);const t=vV.getOrCreate(e);Ep.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),Ep.languages.onLanguage(e,async()=>{const n=await t.load();Ep.languages.setLanguageConfiguration(e,n.conf)})}h(ge,"registerLanguage");ge({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>he(()=>import("./abap.ed832ffc.js"),[])});ge({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>he(()=>import("./apex.f6f4ba1e.js"),[])});ge({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>he(()=>import("./azcli.0a74c3e3.js"),[])});ge({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>he(()=>import("./bat.81956636.js"),[])});ge({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>he(()=>import("./bicep.06e4aa9d.js"),[])});ge({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>he(()=>import("./cameligo.b11b91a0.js"),[])});ge({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>he(()=>import("./clojure.6be4654f.js"),[])});ge({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>he(()=>import("./coffee.b4fa694c.js"),[])});ge({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>he(()=>import("./cpp.bfa1b043.js"),[])});ge({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>he(()=>import("./cpp.bfa1b043.js"),[])});ge({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>he(()=>import("./csharp.58bcd6ba.js"),[])});ge({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>he(()=>import("./csp.c3de4726.js"),[])});ge({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>he(()=>import("./css.0cfdd2a1.js"),[])});ge({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>he(()=>import("./dart.f727f435.js"),[])});ge({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>he(()=>import("./dockerfile.fe093682.js"),[])});ge({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>he(()=>import("./ecl.8670b250.js"),[])});ge({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>he(()=>import("./elixir.dd4469ff.js"),[])});ge({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>he(()=>import("./flow9.d36c51c1.js"),[])});ge({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>he(()=>import("./fsharp.b624cf2b.js"),[])});ge({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>he(()=>import("./freemarker2.97a7bd02.js"),["assets/freemarker2.97a7bd02.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"]).then(s=>s.TagAutoInterpolationDollar)});ge({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>he(()=>import("./freemarker2.97a7bd02.js"),["assets/freemarker2.97a7bd02.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"]).then(s=>s.TagAngleInterpolationDollar)});ge({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>he(()=>import("./freemarker2.97a7bd02.js"),["assets/freemarker2.97a7bd02.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"]).then(s=>s.TagBracketInterpolationDollar)});ge({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>he(()=>import("./freemarker2.97a7bd02.js"),["assets/freemarker2.97a7bd02.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"]).then(s=>s.TagAngleInterpolationBracket)});ge({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>he(()=>import("./freemarker2.97a7bd02.js"),["assets/freemarker2.97a7bd02.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"]).then(s=>s.TagBracketInterpolationBracket)});ge({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>he(()=>import("./freemarker2.97a7bd02.js"),["assets/freemarker2.97a7bd02.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"]).then(s=>s.TagAutoInterpolationDollar)});ge({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>he(()=>import("./freemarker2.97a7bd02.js"),["assets/freemarker2.97a7bd02.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"]).then(s=>s.TagAutoInterpolationBracket)});ge({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>he(()=>import("./go.bb66236d.js"),[])});ge({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>he(()=>import("./graphql.9a3247de.js"),[])});ge({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>he(()=>import("./handlebars.9125c070.js"),["assets/handlebars.9125c070.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>he(()=>import("./hcl.02a7d0ba.js"),[])});ge({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>he(()=>import("./html.7dbe7413.js"),["assets/html.7dbe7413.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>he(()=>import("./ini.a15b8ef8.js"),[])});ge({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>he(()=>import("./java.ea65c793.js"),[])});ge({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>he(()=>import("./javascript.b6fb334d.js"),["assets/javascript.b6fb334d.js","assets/typescript.73eb7fb1.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>he(()=>import("./julia.9795887e.js"),[])});ge({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>he(()=>import("./kotlin.4cd6b560.js"),[])});ge({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>he(()=>import("./less.739e25e3.js"),[])});ge({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>he(()=>import("./lexon.88c37b9f.js"),[])});ge({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>he(()=>import("./lua.b84e98cc.js"),[])});ge({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>he(()=>import("./liquid.b61c791b.js"),["assets/liquid.b61c791b.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>he(()=>import("./m3.a4044571.js"),[])});ge({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>he(()=>import("./markdown.2e7c2167.js"),[])});ge({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>he(()=>import("./mips.26c9038b.js"),[])});ge({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>he(()=>import("./msdax.f6405bce.js"),[])});ge({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>he(()=>import("./mysql.8d70cdd5.js"),[])});ge({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>he(()=>import("./objective-c.bdc919ee.js"),[])});ge({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>he(()=>import("./pascal.f3da14d8.js"),[])});ge({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>he(()=>import("./pascaligo.f4269135.js"),[])});ge({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>he(()=>import("./perl.115d8519.js"),[])});ge({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>he(()=>import("./pgsql.342c4aa2.js"),[])});ge({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>he(()=>import("./php.44b55ca2.js"),[])});ge({id:"pla",extensions:[".pla"],loader:()=>he(()=>import("./pla.93136255.js"),[])});ge({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>he(()=>import("./postiats.25aca36e.js"),[])});ge({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>he(()=>import("./powerquery.efc17b7c.js"),[])});ge({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>he(()=>import("./powershell.ce251cda.js"),[])});ge({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>he(()=>import("./protobuf.18d24bda.js"),[])});ge({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>he(()=>import("./pug.ba6d0f2f.js"),[])});ge({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>he(()=>import("./python.2b0661f5.js"),["assets/python.2b0661f5.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>he(()=>import("./qsharp.4499414c.js"),[])});ge({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>he(()=>import("./r.37a42ee6.js"),[])});ge({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>he(()=>import("./razor.42474c35.js"),["assets/razor.42474c35.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>he(()=>import("./redis.708567a8.js"),[])});ge({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>he(()=>import("./redshift.8bd5007b.js"),[])});ge({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>he(()=>import("./restructuredtext.483ab038.js"),[])});ge({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>he(()=>import("./ruby.c0cae396.js"),[])});ge({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>he(()=>import("./rust.879af4b1.js"),[])});ge({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>he(()=>import("./sb.100991ec.js"),[])});ge({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>he(()=>import("./scala.c6604cb1.js"),[])});ge({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>he(()=>import("./scheme.2064f5a9.js"),[])});ge({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>he(()=>import("./scss.5eb9025f.js"),[])});ge({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>he(()=>import("./shell.402f5aa5.js"),[])});ge({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>he(()=>import("./solidity.8a8591b0.js"),[])});ge({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>he(()=>import("./sophia.dc520359.js"),[])});ge({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>he(()=>import("./sparql.ca38ba2f.js"),[])});ge({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>he(()=>import("./sql.392cf76e.js"),[])});ge({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>he(()=>import("./st.2c6c8358.js"),[])});ge({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>he(()=>import("./swift.1ee029a3.js"),[])});ge({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>he(()=>import("./systemverilog.7c927c14.js"),[])});ge({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>he(()=>import("./systemverilog.7c927c14.js"),[])});ge({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>he(()=>import("./tcl.1a11961b.js"),[])});ge({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>he(()=>import("./twig.fbf3a3b8.js"),[])});ge({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>he(()=>import("./typescript.73eb7fb1.js"),["assets/typescript.73eb7fb1.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>he(()=>import("./vb.ba0b1a37.js"),[])});ge({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>he(()=>import("./xml.b579c0f0.js"),["assets/xml.b579c0f0.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])});ge({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>he(()=>import("./yaml.b6a1a6c1.js"),[])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Jne=Object.defineProperty,Qne=Object.getOwnPropertyDescriptor,eie=Object.getOwnPropertyNames,tie=Object.prototype.hasOwnProperty,nie=h((s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of eie(e))!tie.call(s,i)&&(t||i!=="default")&&Jne(s,i,{get:()=>e[i],enumerable:!(n=Qne(e,i))||n.enumerable});return s},"__reExport$3"),Ng={};nie(Ng,sb);var RN=h(class{_onDidChange=new Ng.Emitter;_options;_modeConfiguration;_languageId;constructor(s,e,t){this._languageId=s,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(s){this._options=s||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(s){this.setOptions(s)}setModeConfiguration(s){this._modeConfiguration=s||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl$3"),PN={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},ON={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},wV=new RN("css",PN,ON),CV=new RN("scss",PN,ON),yV=new RN("less",PN,ON);Ng.languages.css={cssDefaults:wV,lessDefaults:yV,scssDefaults:CV};function FN(){return he(()=>import("./cssMode.f82efcd2.js"),["assets/cssMode.f82efcd2.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])}h(FN,"getMode$3");Ng.languages.onLanguage("less",()=>{FN().then(s=>s.setupMode(yV))});Ng.languages.onLanguage("scss",()=>{FN().then(s=>s.setupMode(CV))});Ng.languages.onLanguage("css",()=>{FN().then(s=>s.setupMode(wV))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var iie=Object.defineProperty,oie=Object.getOwnPropertyDescriptor,sie=Object.getOwnPropertyNames,rie=Object.prototype.hasOwnProperty,aie=h((s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sie(e))!rie.call(s,i)&&(t||i!=="default")&&iie(s,i,{get:()=>e[i],enumerable:!(n=oie(e,i))||n.enumerable});return s},"__reExport$2"),W1={};aie(W1,sb);var lie=h(class{_onDidChange=new W1.Emitter;_options;_modeConfiguration;_languageId;constructor(s,e,t){this._languageId=s,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(s){this._options=s||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(s){this._modeConfiguration=s||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl$2"),die={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},V1={format:die,suggest:{},data:{useDefaultDataProvider:!0}};function B1(s){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:s===tm,documentFormattingEdits:s===tm,documentRangeFormattingEdits:s===tm}}h(B1,"getConfigurationDefault");var tm="html",bR="handlebars",vR="razor",SV=H1(tm,V1,B1(tm)),cie=SV.defaults,xV=H1(bR,V1,B1(bR)),hie=xV.defaults,TV=H1(vR,V1,B1(vR)),uie=TV.defaults;W1.languages.html={htmlDefaults:cie,razorDefaults:uie,handlebarDefaults:hie,htmlLanguageService:SV,handlebarLanguageService:xV,razorLanguageService:TV,registerHTMLLanguageService:H1};function fie(){return he(()=>import("./htmlMode.76d06c0e.js"),["assets/htmlMode.76d06c0e.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])}h(fie,"getMode$2");function H1(s,e=V1,t=B1(s)){const n=new lie(s,e,t);let i;const o=W1.languages.onLanguage(s,async()=>{i=(await fie()).setupMode(n)});return{defaults:n,dispose(){o.dispose(),i?.dispose(),i=void 0}}}h(H1,"registerHTMLLanguageService");/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var gie=Object.defineProperty,pie=Object.getOwnPropertyDescriptor,mie=Object.getOwnPropertyNames,_ie=Object.prototype.hasOwnProperty,bie=h((s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mie(e))!_ie.call(s,i)&&(t||i!=="default")&&gie(s,i,{get:()=>e[i],enumerable:!(n=pie(e,i))||n.enumerable});return s},"__reExport$1"),rb={};bie(rb,sb);var vie=h(class{_onDidChange=new rb.Emitter;_diagnosticsOptions;_modeConfiguration;_languageId;constructor(s,e,t){this._languageId=s,this.setDiagnosticsOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(s){this._diagnosticsOptions=s||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(s){this._modeConfiguration=s||Object.create(null),this._onDidChange.fire(this)}},"LanguageServiceDefaultsImpl$1"),wie={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},Cie={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},LV=new vie("json",wie,Cie);rb.languages.json={jsonDefaults:LV};function yie(){return he(()=>import("./jsonMode.fe4ce956.js"),["assets/jsonMode.fe4ce956.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])}h(yie,"getMode$1");rb.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});rb.languages.onLanguage("json",()=>{yie().then(s=>s.setupMode(LV))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.33.0(4b1abad427e58dbedc1215d99a0902ffc885fcd4)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Sie=Object.defineProperty,xie=Object.getOwnPropertyDescriptor,Tie=Object.getOwnPropertyNames,Lie=Object.prototype.hasOwnProperty,kie=h((s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Tie(e))!Lie.call(s,i)&&(t||i!=="default")&&Sie(s,i,{get:()=>e[i],enumerable:!(n=xie(e,i))||n.enumerable});return s},"__reExport"),Eie="4.5.5",Xf={};kie(Xf,sb);var kV=(s=>(s[s.None=0]="None",s[s.CommonJS=1]="CommonJS",s[s.AMD=2]="AMD",s[s.UMD=3]="UMD",s[s.System=4]="System",s[s.ES2015=5]="ES2015",s[s.ESNext=99]="ESNext",s))(kV||{}),EV=(s=>(s[s.None=0]="None",s[s.Preserve=1]="Preserve",s[s.React=2]="React",s[s.ReactNative=3]="ReactNative",s[s.ReactJSX=4]="ReactJSX",s[s.ReactJSXDev=5]="ReactJSXDev",s))(EV||{}),DV=(s=>(s[s.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",s[s.LineFeed=1]="LineFeed",s))(DV||{}),IV=(s=>(s[s.ES3=0]="ES3",s[s.ES5=1]="ES5",s[s.ES2015=2]="ES2015",s[s.ES2016=3]="ES2016",s[s.ES2017=4]="ES2017",s[s.ES2018=5]="ES2018",s[s.ES2019=6]="ES2019",s[s.ES2020=7]="ES2020",s[s.ESNext=99]="ESNext",s[s.JSON=100]="JSON",s[s.Latest=99]="Latest",s))(IV||{}),NV=(s=>(s[s.Classic=1]="Classic",s[s.NodeJs=2]="NodeJs",s))(NV||{}),AV=h(class{_onDidChange=new Xf.Emitter;_onDidExtraLibsChange=new Xf.Emitter;_extraLibs;_removedExtraLibs;_eagerModelSync;_compilerOptions;_diagnosticsOptions;_workerOptions;_onDidExtraLibsChangeTimeout;_inlayHintsOptions;constructor(s,e,t,n){this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(s),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(n),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(s,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===s)return{dispose:()=>{}};let n=1;return this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(n=this._extraLibs[t].version+1),this._extraLibs[t]={content:s,version:n},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let i=this._extraLibs[t];!i||i.version===n&&(delete this._extraLibs[t],this._removedExtraLibs[t]=n,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(s){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),s&&s.length>0)for(const e of s){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,n=e.content;let i=1;this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:n,version:i}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(s){this._compilerOptions=s||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(s){this._diagnosticsOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(s){this._workerOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(s){this._inlayHintsOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(s){}setEagerModelSync(s){this._eagerModelSync=s}getEagerModelSync(){return this._eagerModelSync}},"LanguageServiceDefaultsImpl"),Die=Eie,MV=new AV({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),RV=new AV({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),Iie=h(()=>z1().then(s=>s.getTypeScriptWorker()),"getTypeScriptWorker"),Nie=h(()=>z1().then(s=>s.getJavaScriptWorker()),"getJavaScriptWorker");Xf.languages.typescript={ModuleKind:kV,JsxEmit:EV,NewLineKind:DV,ScriptTarget:IV,ModuleResolutionKind:NV,typescriptVersion:Die,typescriptDefaults:MV,javascriptDefaults:RV,getTypeScriptWorker:Iie,getJavaScriptWorker:Nie};function z1(){return he(()=>import("./tsMode.c351dd53.js"),["assets/tsMode.c351dd53.js","assets/index.5728258e.js","assets/useControlled.5451ba2e.js"])}h(z1,"getMode");Xf.languages.onLanguage("typescript",()=>z1().then(s=>s.setupTypeScript(MV)));Xf.languages.onLanguage("javascript",()=>z1().then(s=>s.setupJavaScript(RV)));var Aie=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Mie=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},K1=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const U1=new re("selectionAnchorSet",!1);let Ya=h(class PV{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=U1.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(PV.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],n=this.editor.deltaDecorations(t,[{range:oe.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:new Zi().appendText(p("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=n[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),qn(p("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(oe.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},"SelectionAnchorController");Ya.ID="editor.contrib.selectionAnchorController";Ya=Aie([Mie(1,De)],Ya);class OV extends le{constructor(){super({id:"editor.action.setSelectionAnchor",label:p("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2080),weight:100}})}run(e,t){var n;return K1(this,void 0,void 0,function*(){(n=Ya.get(t))===null||n===void 0||n.setSelectionAnchor()})}}h(OV,"SetSelectionAnchor");class FV extends le{constructor(){super({id:"editor.action.goToSelectionAnchor",label:p("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:U1})}run(e,t){var n;return K1(this,void 0,void 0,function*(){(n=Ya.get(t))===null||n===void 0||n.goToSelectionAnchor()})}}h(FV,"GoToSelectionAnchor");class WV extends le{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:p("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:U1,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2089),weight:100}})}run(e,t){var n;return K1(this,void 0,void 0,function*(){(n=Ya.get(t))===null||n===void 0||n.selectFromAnchorToCursor()})}}h(WV,"SelectFromAnchorToCursor");class VV extends le{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:p("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:U1,kbOpts:{kbExpr:I.editorTextFocus,primary:9,weight:100}})}run(e,t){var n;return K1(this,void 0,void 0,function*(){(n=Ya.get(t))===null||n===void 0||n.cancelSelectionAnchor()})}}h(VV,"CancelSelectionAnchor");lt(Ya.ID,Ya);ne(OV);ne(FV);ne(WV);ne(VV);const Rie=A("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},p("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class BV extends le{constructor(){super({id:"editor.action.jumpToBracket",label:p("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:3160,weight:100}})}run(e,t){var n;(n=ps.get(t))===null||n===void 0||n.jumpToBracket()}}h(BV,"JumpToBracketAction");class HV extends le{constructor(){super({id:"editor.action.selectToBracket",label:p("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var i;let o=!0;n&&n.selectBrackets===!1&&(o=!1),(i=ps.get(t))===null||i===void 0||i.selectToBracket(o)}}h(HV,"SelectToBracketAction");class zV{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}h(zV,"BracketsData");class ps extends z{constructor(e){super();this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new gt(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(64),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(64)&&(this._matchBrackets=this._editor.getOption(64),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(ps.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),o=e.bracketPairs.matchBracket(i);let r=null;if(o)o[0].containsPosition(i)?r=o[1].getStartPosition():o[1].containsPosition(i)&&(r=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)r=a[0].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(r=l.range.getStartPosition())}}return r?new oe(r.lineNumber,r.column,r.lineNumber,r.column):new oe(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const o=i.getStartPosition();let r=t.bracketPairs.matchBracket(o);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(o),!r)){const d=t.bracketPairs.findNextBracket(o);d&&d.range&&(r=t.bracketPairs.matchBracket(d.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(T.compareRangesUsingStarts);const[d,c]=r;if(a=e?d.getStartPosition():d.getEndPosition(),l=e?c.getEndPosition():c.getStartPosition(),c.containsPosition(o)){const u=a;a=l,l=u}}a&&l&&n.push(new oe(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);let o=[],r=0;for(let u=0,f=e.length;u<f;u++){let g=e[u];g.isEmpty()&&(o[r++]=g.getStartPosition())}o.length>1&&o.sort(W.compare);let a=[],l=0,d=0,c=i.length;for(let u=0,f=o.length;u<f;u++){let g=o[u];for(;d<c&&i[d].position.isBefore(g);)d++;if(d<c&&i[d].position.equals(g))a[l++]=i[d];else{let m=t.bracketPairs.matchBracket(g,20),b=ps._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!m&&this._matchBrackets==="always"&&(m=t.bracketPairs.findEnclosingBrackets(g,20),b=ps._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new zV(g,m,b)}}this._lastBracketsData=a,this._lastVersionId=n}}h(ps,"BracketMatchingController");ps.ID="editor.contrib.bracketMatchingController";ps._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Pe.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Yt(Rie),position:Jo.Center}});ps._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Pe.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});lt(ps.ID,ps);ne(HV);ne(BV);It((s,e)=>{const t=s.getColor(hX);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=s.getColor(OF);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});Lo.appendMenuItem(R.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:p({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class KV{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(n)))if(this._isMovingLeft){const r=new T(n,i-1,n,i),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new T(n,o,n,o),a)}else{const r=new T(n,o,n,o+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new T(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new oe(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new oe(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}h(KV,"MoveCaretCommand");class WN extends le{constructor(e,t){super(t);this.left=e}run(e,t){if(!t.hasModel())return;const n=[],i=t.getSelections();for(const o of i)n.push(new KV(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}h(WN,"MoveCaretAction");class UV extends WN{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:p("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:I.writable})}}h(UV,"MoveCaretLeftAction");class jV extends WN{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:p("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:I.writable})}}h(jV,"MoveCaretRightAction");ne(UV);ne(jV);class GV extends le{constructor(){super({id:"editor.action.transposeLetters",label:p("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),i=[],o=t.getSelections();for(let r of o){if(!r.isEmpty())continue;let a=r.startLineNumber,l=r.startColumn,d=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&d===2))continue;let c=l===d?r.getPosition():ot.rightPosition(n,r.getPosition().lineNumber,r.getPosition().column),u=ot.leftPosition(n,c),f=ot.leftPosition(n,u),g=n.getValueInRange(T.fromPositions(f,u)),m=n.getValueInRange(T.fromPositions(u,c)),b=T.fromPositions(f,c);i.push(new Pn(b,m+g))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}h(GV,"TransposeLettersAction");ne(GV);var Pie=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const fh="9_cutcopypaste",Oie=Zs||document.queryCommandSupported("cut"),$V=Zs||document.queryCommandSupported("copy"),Fie=typeof navigator.clipboard>"u"||Eo?document.queryCommandSupported("paste"):!0;function VN(s){return s.register(),s}h(VN,"registerCommand");const Wie=Oie?VN(new Vh({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Zs?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:R.MenubarEditMenu,group:"2_ccp",title:p({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:R.EditorContext,group:fh,title:p("actions.clipboard.cutLabel","Cut"),when:I.writable,order:1},{menuId:R.CommandPalette,group:"",title:p("actions.clipboard.cutLabel","Cut"),order:1},{menuId:R.SimpleEditorContext,group:fh,title:p("actions.clipboard.cutLabel","Cut"),when:I.writable,order:1}]})):void 0,Vie=$V?VN(new Vh({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Zs?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:R.MenubarEditMenu,group:"2_ccp",title:p({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:R.EditorContext,group:fh,title:p("actions.clipboard.copyLabel","Copy"),order:2},{menuId:R.CommandPalette,group:"",title:p("actions.clipboard.copyLabel","Copy"),order:1},{menuId:R.SimpleEditorContext,group:fh,title:p("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Lo.appendMenuItem(R.MenubarEditMenu,{submenu:R.MenubarCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});Lo.appendMenuItem(R.EditorContext,{submenu:R.EditorContextCopy,title:{value:p("copy as","Copy As"),original:"Copy As"},group:fh,order:3});const kS=Fie?VN(new Vh({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Zs?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:R.MenubarEditMenu,group:"2_ccp",title:p({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:R.EditorContext,group:fh,title:p("actions.clipboard.pasteLabel","Paste"),when:I.writable,order:4},{menuId:R.CommandPalette,group:"",title:p("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:R.SimpleEditorContext,group:fh,title:p("actions.clipboard.pasteLabel","Paste"),when:I.writable,order:4}]})):void 0;class qV extends le{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:p("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(32)&&t.getSelection().isEmpty()||(GT.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),GT.forceCopyWithSyntaxHighlighting=!1)}}h(qV,"ExecCommandCopyWithSyntaxHighlightingAction");function YV(s,e){!s||(s.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(ht).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const o=i.getOption(32),r=i.getSelection();return r&&r.isEmpty()&&!o||document.execCommand(e),!0}return!1}),s.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}h(YV,"registerExecCommandImpl");YV(Wie,"cut");YV(Vie,"copy");kS&&(kS.addImplementation(1e4,"code-editor",(s,e)=>{const t=s.get(ht),n=s.get(Uh),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?!document.execCommand("paste")&&kd?(()=>Pie(void 0,void 0,void 0,function*(){const r=yield n.readText();if(r!==""){const a=Sf.INSTANCE.get(r);let l=!1,d=null,c=null;a&&(l=i.getOption(32)&&!!a.isFromEmptySelection,d=typeof a.multicursorText<"u"?a.multicursorText:null,c=a.mode),i.trigger("keyboard","paste",{text:r,pasteOnNewLine:l,multicursorText:d,mode:c})}}))():!0:!1}),kS.addImplementation(0,"generic-dom",(s,e)=>(document.execCommand("paste"),!0)));$V&&ne(qV);class qe{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+qe.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new qe(this.value+qe.sep+e)}}h(qe,"CodeActionKind");qe.sep=".";qe.None=new qe("@@none@@");qe.Empty=new qe("");qe.QuickFix=new qe("quickfix");qe.Refactor=new qe("refactor");qe.Source=new qe("source");qe.SourceOrganizeImports=qe.Source.append("organizeImports");qe.SourceFixAll=qe.Source.append("fixAll");function Bie(s,e){return!(s.include&&!s.include.intersects(e)||s.excludes&&s.excludes.some(t=>XV(e,t,s.include))||!s.includeSourceActions&&qe.Source.contains(e))}h(Bie,"mayIncludeActionsOfKind");function Hie(s,e){const t=e.kind?new qe(e.kind):void 0;return!(s.include&&(!t||!s.include.contains(t))||s.excludes&&t&&s.excludes.some(n=>XV(t,n,s.include))||!s.includeSourceActions&&t&&qe.Source.contains(t)||s.onlyIncludePreferredActions&&!e.isPreferred)}h(Hie,"filtersAction");function XV(s,e,t){return!(!e.contains(s)||t&&e.contains(t))}h(XV,"excludesAction");class Us{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new Us(t.kind,t.apply,!1):new Us(Us.getKindFromUser(e,t.kind),Us.getApplyFromUser(e,t.apply),Us.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new qe(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}h(Us,"CodeActionCommandArgs");var BN=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const ZV="editor.action.codeAction",JV="editor.action.refactor",QV="editor.action.sourceAction",HN="editor.action.organizeImports",zN="editor.action.fixAll";class KN{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return BN(this,void 0,void 0,function*(){if(((t=this.provider)===null||t===void 0?void 0:t.resolveCodeAction)&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(i){Nn(i)}n&&(this.action.edit=n.edit)}return this})}}h(KN,"CodeActionItem");class j1 extends z{constructor(e,t,n){super();this.documentation=t,this._register(n),this.allActions=[...e].sort(j1.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:io(e.diagnostics)?io(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:io(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&qe.QuickFix.contains(new qe(e.kind))&&!!e.isPreferred)}}h(j1,"ManagedCodeActionSet");const wR={actions:[],documentation:void 0};function UN(s,e,t,n,i,o){var r;const a=n.filter||{},l={only:(r=a.include)===null||r===void 0?void 0:r.value,trigger:n.type},d=new F1(e,o),c=zie(s,e,a),u=new Q,f=c.map(m=>BN(this,void 0,void 0,function*(){try{i.report(m);const b=yield m.provideCodeActions(e,t,l,d.token);if(b&&u.add(b),d.token.isCancellationRequested)return wR;const v=(b?.actions||[]).filter(w=>w&&Hie(a,w)),C=Kie(m,v,a.include);return{actions:v.map(w=>new KN(w,m)),documentation:C}}catch(b){if(qr(b))throw b;return Nn(b),wR}})),g=s.onDidChange(()=>{const m=s.all(e);xo(m,c)||d.cancel()});return Promise.all(f).then(m=>{const b=hD(m.map(C=>C.actions)),v=Mh(m.map(C=>C.documentation));return new j1(b,v,u)}).finally(()=>{g.dispose(),d.dispose()})}h(UN,"getCodeActions");function zie(s,e,t){return s.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(i=>Bie(t,new qe(i))):!0)}h(zie,"getCodeActionProviders");function Kie(s,e,t){if(!s.documentation)return;const n=s.documentation.map(i=>({kind:new qe(i.kind),command:i.command}));if(t){let i;for(const o of n)o.kind.contains(t)&&(i?i.kind.contains(o.kind)&&(i=o):i=o);if(i)return i?.command}for(const i of e)if(!!i.kind){for(const o of n)if(o.kind.contains(new qe(i.kind)))return o.command}}h(Kie,"getDocumentation");tt.registerCommand("_executeCodeActionProvider",function(s,e,t,n,i){return BN(this,void 0,void 0,function*(){if(!(e instanceof Ce))throw Js();const{codeActionProvider:o}=s.get(ce),r=s.get(Bt).getModel(e);if(!r)throw Js();const a=oe.isISelection(t)?oe.liftSelection(t):T.isIRange(t)?r.validateRange(t):void 0;if(!a)throw Js();const l=typeof n=="string"?new qe(n):void 0,d=yield UN(o,r,a,{type:1,filter:{includeSourceActions:!0,include:l}},Md.None,je.None),c=[],u=Math.min(d.validActions.length,typeof i=="number"?i:0);for(let f=0;f<u;f++)c.push(d.validActions[f].resolve(je.None));try{return yield Promise.all(c),d.validActions.map(f=>f.action)}finally{setTimeout(()=>d.dispose(),100)}})});var Uie=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jie=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let Io=h(class Kk{constructor(e,t){this._messageWidget=new hi,this._messageListeners=new Q,this._editor=e,this._visible=Kk.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(Kk.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){qn(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new Uk(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Ki(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{!i.target.position||(n?n.containsPosition(i.target.position)||this.closeMessage():n=new T(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Uk.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(p("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}},"MessageController");Io.ID="editor.contrib.messageController";Io.MESSAGE_VISIBLE=new re("messageVisible",!1,p("messageVisible","Whether the editor is currently showing an inline message"));Io=Uie([jie(1,De)],Io);const Gie=zn.bindToContribution(Io.get);te(new Gie({id:"leaveEditorMessage",precondition:Io.MESSAGE_VISIBLE,handler:s=>s.closeMessage(),kbOpts:{weight:100+30,primary:9}}));class Uk{constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");r.classList.add("message"),r.textContent=i,this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=h(()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)},"dispose");return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}}h(Uk,"MessageWidget$1");lt(Io.ID,Io);var $ie=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ES=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},qie=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class jk extends Vi{constructor(e,t){super(e.command?e.command.id:e.title,Yie(e.title),void 0,!e.disabled,t);this.action=e}}h(jk,"CodeActionAction");function Yie(s){return s.replace(/\r\n|\r|\n/g," ")}h(Yie,"stripNewlines");let Gk=h(class extends z{constructor(e,t,n,i,o){super();this._editor=e,this._delegate=t,this._contextMenuService=n,this._languageFeaturesService=o,this._visible=!1,this._showingActions=this._register(new hi),this._keybindingResolver=new ab({getKeybindings:()=>i.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,i){return qie(this,void 0,void 0,function*(){const o=i.includeDisabledActions?t.allActions:t.validActions;if(!o.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,_D();this._visible=!0,this._showingActions.value=t;const r=this.getMenuActions(e,o,t.documentation),a=W.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},l=this._keybindingResolver.getResolver(),d=this._editor.getOption(115);this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>r,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:c=>c instanceof jk?l(c.action):void 0})})}getMenuActions(e,t,n){var i,o;const r=h(c=>new jk(c.action,()=>this._delegate.onSelectCodeAction(c)),"toCodeActionAction"),a=t.map(r),l=[...n],d=this._editor.getModel();if(d&&a.length)for(const c of this._languageFeaturesService.codeActionProvider.all(d))c._getAdditionalMenuItems&&l.push(...c._getAdditionalMenuItems({trigger:e.type,only:(o=(i=e.filter)===null||i===void 0?void 0:i.include)===null||o===void 0?void 0:o.value},t.map(u=>u.action)));return l.length&&a.push(new To,...l.map(c=>r(new KN({title:c.title,command:c},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=$n(this._editor.getDomNode()),i=n.left+t.left,o=n.top+t.top+t.height;return{x:i,y:o}}},"CodeActionMenu");Gk=$ie([ES(2,Ad),ES(3,Xt),ES(4,ce)],Gk);class ab{constructor(e){this._keybindingProvider=e}getResolver(){const e=new $c(()=>this._keybindingProvider.getKeybindings().filter(t=>ab.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===HN?n={kind:qe.SourceOrganizeImports.value}:t.command===zN&&(n={kind:qe.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Us.fromUser(n,{kind:qe.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n?.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new qe(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,o)=>i?i.kind.contains(o.kind)?o:i:o,void 0)}}h(ab,"CodeActionKeybindingResolver");ab.codeActionCommands=[JV,ZV,QV,HN,zN];var Xie=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Zie=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},nm;(function(s){s.Hidden={type:0};class e{constructor(n,i,o,r){this.actions=n,this.trigger=i,this.editorPosition=o,this.widgetPosition=r,this.type=1}}h(e,"Showing"),s.Showing=e})(nm||(nm={}));let UC=h(class e6 extends z{constructor(e,t,n,i){super();this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=i,this._onClick=this._register(new P),this.onClick=this._onClick.event,this._state=nm.Hidden,this._domNode=document.createElement("div"),this._domNode.className=_.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(o=>{const r=this._editor.getModel();(this.state.type!==1||!r||this.state.editorPosition.lineNumber>=r.getLineCount())&&this.hide()})),dt.ignoreTarget(this._domNode),this._register(G$(this._domNode,o=>{if(this.state.type!==1)return;this._editor.focus(),o.preventDefault();const{top:r,height:a}=$n(this._domNode),l=this._editor.getOption(59);let d=Math.floor(l/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(d+=l),this._onClick.fire({x:o.posx,y:r+a+d,actions:this.state.actions,trigger:this.state.trigger})})),this._register(J(this._domNode,"mouseenter",o=>{if((o.buttons&1)!==1)return;this.hide();const r=new Nd;r.startMonitoring(o.target,o.buttons,bg,()=>{},()=>{r.dispose()})})),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(57)&&!this._editor.getOption(57).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const i=this._editor.getOptions();if(!i.get(57).enabled)return this.hide();const o=this._editor.getModel();if(!o)return this.hide();const{lineNumber:r,column:a}=o.validatePosition(n),l=o.getOptions().tabSize,d=i.get(44),c=o.getLineContent(r),u=Y0(c,l),f=d.spaceWidth*u>22,g=h(b=>b>2&&this._editor.getTopForLineNumber(b)===this._editor.getTopForLineNumber(b-1),"isFolded");let m=r;if(!f){if(r>1&&!g(r-1))m-=1;else if(!g(r+1))m+=1;else if(a*d.spaceWidth<22)return this.hide()}this.state=new nm.Showing(e,t,n,{position:{lineNumber:m,column:1},preference:e6._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=nm.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(..._.lightBulb.classNamesArray),this._domNode.classList.add(..._.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=p("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(..._.lightbulbAutofix.classNamesArray),this._domNode.classList.add(..._.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=p("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=p("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}},"LightBulbWidget");UC._posPref=[0];UC=Xie([Zie(3,Xt)],UC);It((s,e)=>{var t;const n=(t=s.getColor(Bi))===null||t===void 0?void 0:t.transparent(.7),i=s.getColor(oY);i&&e.addRule(`
		.monaco-editor .contentWidgets ${_.lightBulb.cssSelector} {
			color: ${i};
			background-color: ${n};
		}`);const o=s.getColor(sY);o&&e.addRule(`
		.monaco-editor .contentWidgets ${_.lightbulbAutofix.cssSelector} {
			color: ${o};
			background-color: ${n};
		}`)});var Jie=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Qie=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},DS=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},eoe=globalThis&&globalThis.__classPrivateFieldSet||function(s,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!i:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(s,t):i?i.value=t:e.set(s,t),t},toe=globalThis&&globalThis.__classPrivateFieldGet||function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},vw;let $k=h(class extends z{constructor(e,t,n,i,o){super();this._editor=e,this.delegate=i,this._activeCodeActions=this._register(new hi),vw.set(this,!1),this._codeActionWidget=new $c(()=>this._register(o.createInstance(Gk,this._editor,{onSelectCodeAction:r=>DS(this,void 0,void 0,function*(){this.delegate.applyCodeAction(r,!0)})}))),this._lightBulbWidget=new $c(()=>{const r=this._register(o.createInstance(UC,this._editor,t,n));return this._register(r.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),r})}dispose(){eoe(this,vw,!0,"f"),super.dispose()}update(e){var t,n,i,o,r;return DS(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let a;try{a=yield e.actions}catch(l){Ne(l);return}if(!toe(this,vw,"f"))if(this._lightBulbWidget.getValue().update(a,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const d=this.tryGetValidActionToApply(e.trigger,a);if(d){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(d,!1)}finally{a.dispose()}return}if(e.trigger.context){const c=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,a);if(c&&c.action.disabled){(i=Io.get(this._editor))===null||i===void 0||i.showMessage(c.action.disabled,e.trigger.context.position),a.dispose();return}}}const l=!!(!((o=e.trigger.filter)===null||o===void 0)&&o.include);if(e.trigger.context&&(!a.allActions.length||!l&&!a.validActions.length)){(r=Io.get(this._editor))===null||r===void 0||r.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=a,a.dispose();return}this._activeCodeActions.value=a,this._codeActionWidget.getValue().show(e.trigger,a,e.position,{includeDisabledActions:l})}else this._codeActionWidget.getValue().isVisible?a.dispose():this._activeCodeActions.value=a})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(!!t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(!!t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,i){return DS(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,i)})}},"CodeActionUi");vw=new WeakMap;$k=Jie([Qie(4,Ge)],$k);var IS=globalThis&&globalThis.__classPrivateFieldGet||function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},noe=globalThis&&globalThis.__classPrivateFieldSet||function(s,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!i:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(s,t):i?i.value=t:e.set(s,t),t},ku;const t6=new re("supportedCodeAction","");class n6 extends z{constructor(e,t,n,i=250){super();this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new Ki),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();!t||e.some(n=>D7(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(!!t)for(const n of this._markerService.read({resource:t.uri})){const i=t.validateRange(n);if(T.intersectRanges(i,e))return T.lift(i)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:i,column:o}=n.getPosition(),r=t.getLineContent(i);if(r.length===0)return;if(o===1){if(/\s/.test(r[0]))return}else if(o===t.getLineMaxColumn(i)){if(/\s/.test(r[r.length-1]))return}else if(/\s/.test(r[o-2])&&/\s/.test(r[o-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const i=this._getRangeOfMarker(t),o=i?i.getStartPosition():t.getStartPosition(),r={trigger:e,selection:t,position:o};return this._signalChange(r),r}}h(n6,"CodeActionOracle");var hc;(function(s){s.Empty={type:0};class e{constructor(n,i,o,r){this.trigger=n,this.rangeOrSelection=i,this.position=o,this._cancellablePromise=r,this.type=1,this.actions=r.catch(a=>{if(qr(a))return ioe;throw a})}cancel(){this._cancellablePromise.cancel()}}h(e,"Triggered"),s.Triggered=e})(hc||(hc={}));const ioe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class i6 extends z{constructor(e,t,n,i,o){super();this._editor=e,this._registry=t,this._markerService=n,this._progressService=o,this._codeActionOracle=this._register(new hi),this._state=hc.Empty,this._onDidChangeState=this._register(new P),this.onDidChangeState=this._onDidChangeState.event,ku.set(this,!1),this._supportedCodeActions=t6.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._update()}dispose(){IS(this,ku,"f")||(noe(this,ku,!0,"f"),super.dispose(),this.setState(hc.Empty,!0))}_update(){if(IS(this,ku,"f"))return;this._codeActionOracle.value=void 0,this.setState(hc.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(81)){const t=[];for(const n of this._registry.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new n6(this._editor,this._markerService,n=>{var i;if(!n){this.setState(hc.Empty);return}const o=Hn(r=>UN(this._registry,e,n.selection,n.trigger,Md.None,r));n.trigger.type===1&&((i=this._progressService)===null||i===void 0||i.showWhile(o,250)),this.setState(new hc.Triggered(n.trigger,n.selection,n.position,o))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!IS(this,ku,"f")&&this._onDidChangeState.fire(e))}}h(i6,"CodeActionModel");ku=new WeakMap;var ooe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},op=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},o6=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function lb(s){return se.regex(t6.keys()[0],new RegExp("(\\s|^)"+Xo(s.value)+"\\b"))}h(lb,"contextKeyForSupportedActions");const jN={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:p("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:p("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[p("args.schema.apply.first","Always apply the first returned code action."),p("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),p("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:p("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let gh=h(class s6 extends z{constructor(e,t,n,i,o,r){super();this._instantiationService=o,this._editor=e,this._model=this._register(new i6(this._editor,r.codeActionProvider,t,n,i)),this._register(this._model.onDidChangeState(a=>this.update(a))),this._ui=new $c(()=>this._register(new $k(e,Xh.Id,Ag.Id,{applyCodeAction:(a,l)=>o6(this,void 0,void 0,function*(){try{yield this._applyCodeAction(a)}finally{l&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(s6.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){var i;if(!this._editor.hasModel())return;(i=Io.get(this._editor))===null||i===void 0||i.closeMessage();const o=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(soe,e,this._editor)}},"QuickFixController");gh.ID="editor.contrib.quickFixController";gh=ooe([op(1,el),op(2,De),op(3,Rd),op(4,Ge),op(5,ce)],gh);function soe(s,e,t){return o6(this,void 0,void 0,function*(){const n=s.get(zI),i=s.get(ln),o=s.get(Yr),r=s.get(cn);if(o.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(je.None),e.action.edit&&(yield n.apply(j_.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield i.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const l=roe(a);r.error(typeof l=="string"?l:p("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}h(soe,"applyCodeAction");function roe(s){return typeof s=="string"?s:s instanceof Error&&typeof s.message=="string"?s.message:void 0}h(roe,"asMessage");function Yh(s,e,t,n){if(s.hasModel()){const i=gh.get(s);i&&i.manualTriggerAtCurrentPosition(e,t,n)}}h(Yh,"triggerCodeActionsForEditorSelection");class Xh extends le{constructor(){super({id:Xh.Id,label:p("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:se.and(I.writable,I.hasCodeActionsProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:2132,weight:100}})}run(e,t){return Yh(t,p("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}h(Xh,"QuickFixAction");Xh.Id="editor.action.quickFix";class r6 extends zn{constructor(){super({id:ZV,precondition:se.and(I.writable,I.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:jN}]}})}runEditorCommand(e,t,n){const i=Us.fromUser(n,{kind:qe.Empty,apply:"ifSingle"});return Yh(t,typeof n?.kind=="string"?i.preferred?p("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):p("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?p("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):p("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}h(r6,"CodeActionCommand");class a6 extends le{constructor(){super({id:JV,label:p("refactor.label","Refactor..."),alias:"Refactor...",precondition:se.and(I.writable,I.hasCodeActionsProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:se.and(I.writable,lb(qe.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:jN}]}})}run(e,t,n){const i=Us.fromUser(n,{kind:qe.Refactor,apply:"never"});return Yh(t,typeof n?.kind=="string"?i.preferred?p("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):p("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?p("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):p("editor.action.refactor.noneMessage","No refactorings available"),{include:qe.Refactor.contains(i.kind)?i.kind:qe.None,onlyIncludePreferredActions:i.preferred},i.apply)}}h(a6,"RefactorAction");class l6 extends le{constructor(){super({id:QV,label:p("source.label","Source Action..."),alias:"Source Action...",precondition:se.and(I.writable,I.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:se.and(I.writable,lb(qe.Source))},description:{description:"Source Action...",args:[{name:"args",schema:jN}]}})}run(e,t,n){const i=Us.fromUser(n,{kind:qe.Source,apply:"never"});return Yh(t,typeof n?.kind=="string"?i.preferred?p("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):p("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?p("editor.action.source.noneMessage.preferred","No preferred source actions available"):p("editor.action.source.noneMessage","No source actions available"),{include:qe.Source.contains(i.kind)?i.kind:qe.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}h(l6,"SourceAction");class d6 extends le{constructor(){super({id:HN,label:p("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:se.and(I.writable,lb(qe.SourceOrganizeImports)),kbOpts:{kbExpr:I.editorTextFocus,primary:1581,weight:100}})}run(e,t){return Yh(t,p("editor.action.organize.noneMessage","No organize imports action available"),{include:qe.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}h(d6,"OrganizeImportsAction");class c6 extends le{constructor(){super({id:zN,label:p("fixAll.label","Fix All"),alias:"Fix All",precondition:se.and(I.writable,lb(qe.SourceFixAll))})}run(e,t){return Yh(t,p("fixAll.noneMessage","No fix all action available"),{include:qe.SourceFixAll,includeSourceActions:!0},"ifSingle")}}h(c6,"FixAllAction");class Ag extends le{constructor(){super({id:Ag.Id,label:p("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:se.and(I.writable,lb(qe.QuickFix)),kbOpts:{kbExpr:I.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return Yh(t,p("editor.action.autoFix.noneMessage","No auto fixes available"),{include:qe.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}h(Ag,"AutoFixAction");Ag.Id="editor.action.autoFix";lt(gh.ID,gh);ne(Xh);ne(a6);ne(l6);ne(d6);ne(Ag);ne(c6);te(new r6);var CR=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class jC{constructor(){this.lenses=[],this._disposables=new Q}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}h(jC,"CodeLensModel");function h6(s,e,t){return CR(this,void 0,void 0,function*(){const n=s.ordered(e),i=new Map,o=new jC,r=n.map((a,l)=>CR(this,void 0,void 0,function*(){i.set(a,l);try{const d=yield Promise.resolve(a.provideCodeLenses(e,t));d&&o.add(d,a)}catch(d){Nn(d)}}));return yield Promise.all(r),o.lenses=o.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:i.get(a.provider)<i.get(l.provider)?-1:i.get(a.provider)>i.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),o})}h(h6,"getCodeLensModel");tt.registerCommand("_executeCodeLensProvider",function(s,...e){let[t,n]=e;bt(Ce.isUri(t)),bt(typeof n=="number"||!n);const{codeLensProvider:i}=s.get(ce),o=s.get(Bt).getModel(t);if(!o)throw Js();const r=[],a=new Q;return h6(i,o,je.None).then(l=>{a.add(l);let d=[];for(const c of l.lenses)n==null||Boolean(c.symbol.command)?r.push(c.symbol):n-- >0&&c.provider.resolveCodeLens&&d.push(Promise.resolve(c.provider.resolveCodeLens(o,c.symbol,je.None)).then(u=>r.push(u||c.symbol)));return Promise.all(d)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var aoe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},loe=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const u6=Xe("ICodeLensCache");class qk{constructor(e,t){this.lineCount=e,this.data=t}}h(qk,"CacheItem");let Yk=h(class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new Qa(20,.75);const t="codelens/cache";gm(()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i),Ka(e.onWillSaveState)(o=>{o.reason===VC.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)===null||a===void 0?void 0:a.title}}}),i=new jC;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const o=new qk(e.getLineCount(),i);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const o of n.data.lenses)i.add(o.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],o=[];for(const a of i.lines)o.push({range:new T(a,1,a,11)});const r=new jC;r.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(n,new qk(i.lineCount,r))}}catch{}}},"CodeLensCache");Yk=aoe([loe(0,Qr)],Yk);it(u6,Yk);class f6{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}h(f6,"CodeLensViewZone");class db{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${db._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let n=[],i=!1;for(let o=0;o<e.length;o++){const r=e[o];if(!!r&&(i=!0,r.command)){const a=Bc(r.command.title.trim());r.command.id?(n.push(X("a",{id:String(o),title:r.command.tooltip},...a)),this._commands.set(String(o),r.command)):n.push(X("span",{title:r.command.tooltip},...a)),o+1<e.length&&n.push(X("span",void 0,"\xA0|\xA0"))}}i?(td(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):td(this._domNode,X("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}h(db,"CodeLensContentWidget");db._idPool=0;class ww{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}h(ww,"CodeLensHelper");class Xk{constructor(e,t,n,i,o,r,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let l,d=[];this._data.forEach((c,u)=>{c.symbol.command&&d.push(c.symbol),i.addDecoration({range:c.symbol.range,options:Pe.EMPTY},f=>this._decorationIds[u]=f),l?l=T.plusRange(l,c.symbol.range):l=T.lift(c.symbol.range)}),this._viewZone=new f6(l.startLineNumber-1,r,a),this._viewZoneId=o.addZone(this._viewZone),d.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(d,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new db(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&T.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:Pe.EMPTY},o=>this._decorationIds[i]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}h(Xk,"CodeLensWidget");var doe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sp=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},coe=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let Zf=h(class{constructor(e,t,n,i,o,r){this._editor=e,this._languageFeaturesService=t,this._commandService=i,this._notificationService=o,this._codeLensCache=r,this._disposables=new Q,this._localToDispose=new Q,this._lenses=[],this._oldCodeLensModels=new Q,this._provideCodeLensDebounce=n.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new gt(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(44)||a.hasChanged(16)||a.hasChanged(15))&&this._updateLensStyle(),a.hasChanged(14)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+R4(this._editor.getId()).toString(16),this._styleElement=es(vm(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e=this._editor.getOption(16),t;return!e||e<5?(e=this._editor.getOption(46)*.9|0,t=this._editor.getOption(59)):t=e*Math.max(1.3,this._editor.getOption(59)/this._editor.getOption(46))|0,{codeLensHeight:t,fontSize:e}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),i=this._editor.getOption(44),o=`--codelens-font-family${this._styleClassName}`,r=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${r}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o}), ${di.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(o,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(r,i.fontFeatureSettings),this._editor.changeViewZones(l=>{for(let d of this._lenses)d.updateHeight(e,l)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&this._localToDispose.add(Xc(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const i of this._languageFeaturesService.codeLensProvider.all(e))if(typeof i.onDidChange=="function"){let o=i.onDidChange(()=>n.schedule());this._localToDispose.add(o)}const n=new gt(()=>{var i;const o=Date.now();(i=this._getCodeLensModelPromise)===null||i===void 0||i.cancel(),this._getCodeLensModelPromise=Hn(r=>h6(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-o);n.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},Ne)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(He(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(i=>{this._editor.changeViewZones(o=>{let r=[],a=-1;this._lenses.forEach(d=>{!d.isValid()||a===d.getLineNumber()?r.push(d):(d.update(o),a=d.getLineNumber())});let l=new ww;r.forEach(d=>{d.dispose(l,o),this._lenses.splice(this._lenses.indexOf(d),1)}),l.commit(i)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(He(()=>{if(this._editor.getModel()){const i=$a.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(o,r)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let o=i.target.element;if(o?.tagName==="SPAN"&&(o=o.parentElement),o?.tagName==="A")for(const r of this._lenses){let a=r.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new ww;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),n=[],i;for(let a of e.lenses){let l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}const o=$a.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const d=new ww;let c=0,u=0;for(;u<n.length&&c<this._lenses.length;){let f=n[u][0].symbol.range.startLineNumber,g=this._lenses[c].getLineNumber();g<f?(this._lenses[c].dispose(d,l),this._lenses.splice(c,1)):g===f?(this._lenses[c].updateCodeLensSymbols(n[u],d),u++,c++):(this._lenses.splice(c,0,new Xk(n[u],this._editor,this._styleClassName,d,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),c++,u++)}for(;c<this._lenses.length;)this._lenses[c].dispose(d,l),this._lenses.splice(c,1);for(;u<n.length;)this._lenses.push(new Xk(n[u],this._editor,this._styleClassName,d,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++;d.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(t);l&&(n.push(l),i.push(a))}),n.length===0)return;const o=Date.now(),r=Hn(a=>{const l=n.map((d,c)=>{const u=new Array(d.length),f=d.map((g,m)=>!g.symbol.command&&typeof g.provider.resolveCodeLens=="function"?Promise.resolve(g.provider.resolveCodeLens(t,g.symbol,a)).then(b=>{u[m]=b},Nn):(u[m]=g.symbol,Promise.resolve(void 0)));return Promise.all(f).then(()=>{!a.isCancellationRequested&&!i[c].isDisposed()&&i[c].updateCommands(u)})});return Promise.all(l)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Ne(a),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getModel(){return this._currentCodeLensModel}},"CodeLensContribution");Zf.ID="css.editor.codeLens";Zf=doe([sp(1,ce),sp(2,os),sp(3,ln),sp(4,cn),sp(5,u6)],Zf);lt(Zf.ID,Zf);ne(h(class extends le{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:I.hasCodeLensProvider,label:p("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return coe(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(tl),i=e.get(ln),o=e.get(cn),r=t.getSelection().positionLineNumber,a=t.getContribution(Zf.ID);if(!a)return;const l=a.getModel();if(!l)return;const d=[];for(const u of l.lenses)u.symbol.command&&u.symbol.range.startLineNumber===r&&d.push({label:u.symbol.command.title,command:u.symbol.command});if(d.length===0)return;const c=yield n.pick(d,{canPickMany:!1});if(!!c){if(l.isDisposed)return yield i.executeCommand(this.id);try{yield i.executeCommand(c.command.id,...c.command.arguments||[])}catch(u){o.error(u)}}})}},"ShowLensesInCurrentLine"));function hoe(s,e,t){const n=[],o=s.ordered(e).reverse().map(r=>Promise.resolve(r.provideDocumentColors(e,t)).then(a=>{if(Array.isArray(a))for(let l of a)n.push({colorInfo:l,provider:r})}));return Promise.all(o).then(()=>n)}h(hoe,"getColors");function yR(s,e,t,n){return Promise.resolve(t.provideColorPresentations(s,e,n))}h(yR,"getColorPresentations");tt.registerCommand("_executeDocumentColorProvider",function(s,...e){const[t]=e;if(!(t instanceof Ce))throw Js();const{colorProvider:n}=s.get(ce),i=s.get(Bt).getModel(t);if(!i)throw Js();const o=[],a=n.ordered(i).reverse().map(l=>Promise.resolve(l.provideDocumentColors(i,je.None)).then(d=>{if(Array.isArray(d))for(let c of d)o.push({range:c.range,color:[c.color.red,c.color.green,c.color.blue,c.color.alpha]})}));return Promise.all(a).then(()=>o)});tt.registerCommand("_executeColorPresentationProvider",function(s,...e){const[t,n]=e,{uri:i,range:o}=n;if(!(i instanceof Ce)||!Array.isArray(t)||t.length!==4||!T.isIRange(o))throw Js();const[r,a,l,d]=t,{colorProvider:c}=s.get(ce),u=s.get(Bt).getModel(i);if(!u)throw Js();const f={range:o,color:{red:r,green:a,blue:l,alpha:d}},g=[],b=c.ordered(u).reverse().map(v=>Promise.resolve(v.provideColorPresentations(u,f,je.None)).then(C=>{Array.isArray(C)&&g.push(...C)}));return Promise.all(b).then(()=>g)});var uoe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},NS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},foe=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const g6=Object.create({}),goe=500;let ph=h(class p6 extends z{constructor(e,t,n,i){super();this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new Q),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new Cg(this._editor),this._colorDecorationClassRefs=this._register(new Q),this._debounceInformation=i.for(n.colorProvider,"Document Colors",{min:p6.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(n.colorProvider.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let o=this._isEnabled;this._isEnabled=this.isEnabled(),o!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Ki,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}beginCompute(){this._computePromise=Hn(e=>foe(this,void 0,void 0,function*(){const t=this._editor.getModel();if(!t)return Promise.resolve([]);const n=new wi(!1),i=yield hoe(this._languageFeaturesService.colorProvider,t,e);return this._debounceInformation.update(t,n.elapsed()),i})),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},Ne)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Pe.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,i)=>this._colorDatas.set(n,e[i]))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let n=0;n<e.length&&t.length<goe;n++){const{red:i,green:o,blue:r,alpha:a}=e[n].colorInfo.color,l=new $e(Math.round(i*255),Math.round(o*255),Math.round(r*255),a);let d=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`;const c=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:kG,inlineClassName:`${c.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:g6}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],t))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(T.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}},"ColorDetector");ph.ID="editor.contrib.colorDetector";ph.RECOMPUTE_TIME=1e3;ph=uoe([NS(1,wt),NS(2,ce),NS(3,os)],ph);lt(ph.ID,ph);class m6{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new P,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new P,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new P,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}h(m6,"ColorPickerModel");const Ys=X;class _6 extends z{constructor(e,t,n){super();this.model=t,this.domNode=Ys(".colorpicker-header"),j(e,this.domNode),this.pickedColorNode=j(this.domNode,Ys(".picked-color"));const i=p("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",i);const o=j(this.domNode,Ys(".original-color"));o.style.backgroundColor=H.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(th)||H.white,this._register(It((r,a)=>{this.backgroundColor=r.getColor(th)||H.white})),this._register(J(this.pickedColorNode,be.CLICK,()=>this.model.selectNextColorPresentation())),this._register(J(o,be.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=H.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=H.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Ys(".codicon.codicon-color-mode"))}}h(_6,"ColorPickerHeader");class b6 extends z{constructor(e,t,n){super();this.model=t,this.pixelRatio=n,this.domNode=Ys(".colorpicker-body"),j(e,this.domNode),this.saturationBox=new v6(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new w6(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new C6(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new H(new qs(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new H(new qs(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new H(new qs(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}h(b6,"ColorPickerBody");class v6 extends z{constructor(e,t,n){super();this.model=t,this.pixelRatio=n,this._onDidChange=new P,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new P,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Ys(".saturation-wrap"),j(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",j(this.domNode,this.canvas),this.selection=Ys(".saturation-selection"),j(this.domNode,this.selection),this.layout(),this._register($D(this.domNode,i=>this.onMouseDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new Nd);const t=$n(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,bg,i=>this.onDidChangePosition(i.posx-t.left,i.posy-t.top),()=>null);const n=m5(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new H(new qs(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const o=n.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=H.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=o,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}h(v6,"SaturationBox");class GN extends z{constructor(e,t){super();this.model=t,this._onDidChange=new P,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new P,this.onColorFlushed=this._onColorFlushed.event,this.domNode=j(e,Ys(".strip")),this.overlay=j(this.domNode,Ys(".overlay")),this.slider=j(this.domNode,Ys(".slider")),this.slider.style.top="0px",this._register($D(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new Nd),n=$n(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,bg,o=>this.onDidChangeTop(o.posy-n.top),()=>null);const i=m5(document,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}h(GN,"Strip");class w6 extends GN{constructor(e,t){super(e,t);this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:i}=e.rgba,o=new H(new $e(t,n,i,1)),r=new H(new $e(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}h(w6,"OpacityStrip");class C6 extends GN{constructor(e,t){super(e,t);this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}h(C6,"HueStrip");class y6 extends ns{constructor(e,t,n,i){super();this.model=t,this.pixelRatio=n,this._register(ff.onDidChange(()=>this.layout()));const o=Ys(".colorpicker-widget");e.appendChild(o);const r=new _6(o,this.model,i);this.body=new b6(o,this.model,this.pixelRatio),this._register(r),this._register(this.body)}layout(){this.body.layout()}}h(y6,"ColorPickerWidget");var poe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},moe=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},SR=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class S6{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}h(S6,"ColorHover");let Zk=h(class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=1}computeSync(e,t){return[]}computeAsync(e,t,n){return Qt.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return SR(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const i=ph.get(this._editor);if(!i)return[];for(const o of t){if(!i.isColorDecorationId(o.id))continue;const r=i.getColorData(o.range.getStartPosition());if(r)return[yield this._createColorHover(this._editor.getModel(),r.colorInfo,r.provider)]}return[]})}_createColorHover(e,t,n){return SR(this,void 0,void 0,function*(){const i=e.getValueInRange(t.range),{red:o,green:r,blue:a,alpha:l}=t.color,d=new $e(Math.round(o*255),Math.round(r*255),Math.round(a*255),l),c=new H(d),u=yield yR(e,t,n,je.None),f=new m6(c,[],0);return f.colorPresentations=u||[],f.guessColorPresentation(c,i),new S6(this,T.lift(t.range),f,n)})}renderHoverParts(e,t){if(t.length===0||!this._editor.hasModel())return z.None;const n=new Q,i=t[0],o=this._editor.getModel(),r=i.model,a=n.add(new y6(e.fragment,r,this._editor.getOption(129),this._themeService));e.setColorPicker(a);let l=new T(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn);const d=h(()=>{let u,f;if(r.presentation.textEdit){u=[r.presentation.textEdit],f=new T(r.presentation.textEdit.range.startLineNumber,r.presentation.textEdit.range.startColumn,r.presentation.textEdit.range.endLineNumber,r.presentation.textEdit.range.endColumn);const g=this._editor.getModel()._setTrackedRange(null,f,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",u),f=this._editor.getModel()._getTrackedRange(g)||f}else u=[{range:l,text:r.presentation.label,forceMoveMarkers:!1}],f=l.setEndPosition(l.endLineNumber,l.startColumn+r.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",u);r.presentation.additionalTextEdits&&(u=[...r.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",u),e.hide()),this._editor.pushUndoStop(),l=f},"updateEditorModel"),c=h(u=>yR(o,{range:l,color:{red:u.rgba.r/255,green:u.rgba.g/255,blue:u.rgba.b/255,alpha:u.rgba.a}},i.provider,je.None).then(f=>{r.colorPresentations=f||[]}),"updateColorPresentations");return n.add(r.onColorFlushed(u=>{c(u).then(d)})),n.add(r.onDidChangeColor(c)),n}},"ColorHoverParticipant");Zk=poe([moe(1,Mt)],Zk);function Jk(s,e){return!!s[e]}h(Jk,"hasModifier");class Cw{constructor(e,t){this.target=e.target,this.hasTriggerModifier=Jk(e.event,t.triggerModifier),this.hasSideBySideModifier=Jk(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}h(Cw,"ClickLinkMouseEvent");class Qk{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=Jk(e,t.triggerModifier)}}h(Qk,"ClickLinkKeyboardEvent");class Dp{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}h(Dp,"ClickLinkOptions");function xR(s){return s==="altKey"?Ke?new Dp(57,"metaKey",6,"altKey"):new Dp(5,"ctrlKey",6,"altKey"):Ke?new Dp(6,"altKey",57,"metaKey"):new Dp(6,"altKey",5,"ctrlKey")}h(xR,"createOptions");class G1 extends z{constructor(e){super();this._onMouseMoveOrRelevantKeyDown=this._register(new P),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new P),this.onExecute=this._onExecute.event,this._onCancel=this._register(new P),this.onCancel=this._onCancel.event,this._editor=e,this._opts=xR(this._editor.getOption(70)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(70)){const n=xR(this._editor.getOption(70));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new Cw(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new Cw(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new Cw(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new Qk(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new Qk(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}h(G1,"ClickLinkGesture");var _oe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},aa=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let mh=h(class extends Hm{constructor(e,t,n,i,o,r,a,l,d,c,u,f){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},i,o,r,a,l,d,c,u,f);this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(g=>this._onParentConfigurationChanged(g)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){$r(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}},"EmbeddedCodeEditorWidget");mh=_oe([aa(3,Ge),aa(4,ht),aa(5,ln),aa(6,De),aa(7,Mt),aa(8,cn),aa(9,lo),aa(10,oi),aa(11,ce)],mh);const TR=new H(new $e(0,122,204)),boe={showArrow:!0,showFrame:!0,className:"",frameColor:TR,arrowColor:TR,keepEditorSelection:!1},voe="vs.editor.contrib.zoneWidget";class x6{constructor(e,t,n,i,o,r){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this._onDomNodeTop=o,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}h(x6,"ViewZoneDelegate");class T6{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}h(T6,"OverlayWidgetDelegate");class cb{constructor(e){this._editor=e,this._ruleName=cb._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),CM(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){CM(this._ruleName),AT(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:T.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}h(cb,"Arrow");cb._IdGenerator=new _1(".arrow-decoration-");class L6{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new Q,this.container=null,this._isShowing=!1,this.editor=e,this.options=ba(t),$r(this.options,boe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new cb(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(!!n)return n.getStartPosition()}show(e,t){const n=T.isIRange(e)?T.lift(e):T.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:Pe.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(59),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),o=this._getWidth(i);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(i)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(59),l=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,l);let d=0,c=0;if(this._arrow&&this.options.showArrow&&(d=Math.round(a/3),this._arrow.height=d,this._arrow.show(n)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(g=>{this._viewZone&&g.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new x6(r,n.lineNumber,n.column,t,m=>this._onViewZoneTop(m),m=>this._onViewZoneHeight(m)),this._viewZone.id=g.addZone(this._viewZone),this._overlayWidget=new T6(voe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const g=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=g+"px",this.container.style.borderBottomWidth=g+"px"}let u=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=d+"px",this.container.style.height=u+"px",this.container.style.overflow="hidden"),this._doLayout(u,o),this.options.keepEditorSelection||this.editor.setSelection(e);const f=this.editor.getModel();if(f){const g=e.endLineNumber+1;g<=f.getLineCount()?this.revealLine(g,!1):this.revealLine(f.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){!this.container||(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new jn(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(59),i=n<0?Math.ceil(n):Math.floor(n),o=e.heightInLines+i;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}h(L6,"ZoneWidget");class k6 extends Qc{constructor(e,t){super();this._onDidChangeVisibility=this._register(new P),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=j(e,X(".monaco-dropdown")),this._label=j(this._element,X(".dropdown-label"));let n=t.labelRenderer;n||(n=h(o=>(o.textContent=t.label||"",null),"labelRenderer"));for(const o of[be.CLICK,be.MOUSE_DOWN,kt.Tap])this._register(J(this.element,o,r=>ct.stop(r,!0)));for(const o of[be.MOUSE_DOWN,kt.Tap])this._register(J(this._label,o,r=>{r instanceof MouseEvent&&r.detail>1||(this.visible?this.hide():this.show())}));this._register(J(this._label,be.KEY_UP,o=>{const r=new Et(o);(r.equals(3)||r.equals(10))&&(ct.stop(o,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(dt.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}h(k6,"BaseDropdown");class E6 extends k6{constructor(e,t){super(e,t);this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}h(E6,"DropdownMenu");class $N extends Fs{constructor(e,t,n,i=Object.create(null)){super(null,e,i);this.actionItem=null,this._onDidChangeVisibility=this._register(new P),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=h(o=>{this.element=j(o,X("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},"labelRenderer"),n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new E6(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var r;(r=this.element)===null||r===void 0||r.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return o.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}h($N,"DropdownMenuActionViewItem");var qN=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Dr=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},D6=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function woe(s,e,t,n,i,o,r){const a=s.getActions(e);return yoe(a,t,!1,typeof n=="string"?d=>d===n:n,i,o,r),Coe(a)}h(woe,"createAndFillInActionBarActions");function Coe(s){const e=new Q;for(const[,t]of s)for(const n of t)e.add(n);return e}h(Coe,"asDisposable");function yoe(s,e,t,n=a=>a==="navigation",i=Number.MAX_SAFE_INTEGER,o=()=>!1,r=!1){let a,l;Array.isArray(e)?(a=e,l=e):(a=e.primary,l=e.secondary);const d=new Set;for(const[c,u]of s){let f;n(c)?(f=a,f.length>0&&r&&f.push(new To)):(f=l,f.length>0&&f.push(new To));for(let g of u){t&&(g=g instanceof id&&g.alt?g.alt:g);const m=f.push(g);g instanceof L_&&d.add({group:c,action:g,index:m-1})}}for(const{group:c,action:u,index:f}of d){const g=n(c)?a:l,m=u.actions;(m.length<=1||g.length+m.length-2<=i)&&o(u,c,g.length)&&g.splice(f,1,...m)}if(a!==l&&a.length>i){const c=a.splice(i,a.length-i);l.unshift(...c,new To)}}h(yoe,"fillInActions");let Jf=h(class extends Of{constructor(e,t,n,i,o){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable});this._keybindingService=n,this._notificationService=i,this._contextKeyService=o,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new hi),this._altKey=El.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return D6(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(Vn||ni)&&this._altKey.keyStatus.shiftKey;const i=h(()=>{const o=t&&n;o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())},"updateAltState");this._menuItemAction.alt&&this._register(this._altKey.event(o=>{n=o.altKey||(Vn||ni)&&o.shiftKey,i()})),this._register(J(e,"mouseleave",o=>{t=!1,i()})),this._register(J(e,"mouseenter",o=>{t=!0,i()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let i=t?p("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,r=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=r&&r.getLabel(),l=a?p("titleAndKb","{0} ({1})",o,a):o;i+=`
[${UI.modifierLabels[Bo].altKey}] ${l}`}this.label.title=i}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:i}=this;if(!n||!i)return;const o=this._commandAction.checked&&((t=e.toggled)===null||t===void 0?void 0:t.icon)?e.toggled.icon:e.icon;if(!!o)if(vt.isThemeIcon(o)){const r=vt.asClassNameArray(o);i.classList.add(...r),this._itemClassDispose.value=He(()=>{i.classList.remove(...r)})}else o.light&&i.style.setProperty("--menu-entry-icon-light",Jc(o.light)),o.dark&&i.style.setProperty("--menu-entry-icon-dark",Jc(o.dark)),i.classList.add("icon"),this._itemClassDispose.value=He(()=>{i.classList.remove("icon"),i.style.removeProperty("--menu-entry-icon-light"),i.style.removeProperty("--menu-entry-icon-dark")})}},"MenuEntryActionViewItem");Jf=qN([Dr(2,Xt),Dr(3,cn),Dr(4,De)],Jf);let eE=h(class extends $N{constructor(e,t,n){var i,o;const r=Object.assign({},t??Object.create(null),{menuAsChild:(i=t?.menuAsChild)!==null&&i!==void 0?i:!1,classNames:(o=t?.classNames)!==null&&o!==void 0?o:vt.isThemeIcon(e.item.icon)?vt.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,r)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!vt.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",Jc(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",Jc(t.dark)))}}},"SubmenuEntryActionViewItem");eE=qN([Dr(2,Ad)],eE);let tE=h(class extends Fs{constructor(e,t,n,i,o,r,a,l){var d,c,u;super(null,e);this._keybindingService=n,this._notificationService=i,this._contextMenuService=o,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let f,g=l.get(this._storageKey,1);g&&(f=e.actions.find(b=>g===b.id)),f||(f=e.actions[0]),this._defaultAction=this._instaService.createInstance(Jf,f,void 0);const m=Object.assign({},t??Object.create(null),{menuAsChild:(d=t?.menuAsChild)!==null&&d!==void 0?d:!0,classNames:(c=t?.classNames)!==null&&c!==void 0?c:["codicon","codicon-chevron-down"],actionRunner:(u=t?.actionRunner)!==null&&u!==void 0?u:new Qc});this._dropdown=new $N(e,e.actions,this._contextMenuService,m),this._dropdown.actionRunner.onDidRun(b=>{b.action instanceof id&&this.update(b.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Jf,e,void 0),this._defaultAction.actionRunner=new class extends Qc{runAction(t,n){return D6(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(nq(this._container,X(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=X(".action-container");this._defaultAction.render(j(this._container,t)),this._register(J(t,be.KEY_DOWN,i=>{const o=new Et(i);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const n=X(".dropdown-action-container");this._dropdown.render(j(this._container,n)),this._register(J(n,be.KEY_DOWN,i=>{var o;const r=new Et(i);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}},"DropdownWithDefaultActionViewItem");tE=qN([Dr(2,Xt),Dr(3,cn),Dr(4,Ad),Dr(5,Wh),Dr(6,Ge),Dr(7,Qr)],tE);function Soe(s,e,t){return e instanceof id?s.createInstance(Jf,e,void 0):e instanceof R0?e.item.rememberDefaultAction?s.createInstance(tE,e,t):s.createInstance(eE,e,t):void 0}h(Soe,"createActionViewItem");var I6=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},N6=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const A6=Xe("IPeekViewService");it(A6,class{constructor(){this._widgets=new Map}addExclusiveWidget(s,e){const t=this._widgets.get(s);t&&(t.listener.dispose(),t.widget.dispose());const n=h(()=>{const i=this._widgets.get(s);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(s))},"remove");this._widgets.set(s,{widget:e,listener:e.onDidClose(n)})}});var zi;(function(s){s.inPeekEditor=new re("inReferenceSearchEditor",!0,p("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),s.notInPeekEditor=s.inPeekEditor.toNegated()})(zi||(zi={}));let Qm=h(class{constructor(e,t){e instanceof mh&&zi.inPeekEditor.bindTo(t)}dispose(){}},"PeekContextController");Qm.ID="editor.contrib.referenceController";Qm=I6([N6(1,De)],Qm);lt(Qm.ID,Qm);function xoe(s){let e=s.get(ht).getFocusedCodeEditor();return e instanceof mh?e.getParentEditor():e}h(xoe,"getOuterEditor");const Toe={headerBackgroundColor:H.white,primaryHeadingColor:H.fromHex("#333333"),secondaryHeadingColor:H.fromHex("#6c6c6cb3")};let GC=h(class extends L6{constructor(e,t,n){super(e,t);this.instantiationService=n,this._onDidClose=new P,this.onDidClose=this._onDidClose.event,$r(this.options,Toe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=X(".head"),this._bodyElement=X(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=X(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),Wn(n,"click",r=>this._onTitleClick(r))),j(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=X("span.filename"),this._secondaryHeading=X("span.dirname"),this._metaHeading=X("span.meta"),j(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=X(".peekview-actions");j(this._headElement,i);const o=this._getActionBarOptions();this._actionbarWidget=new rr(i,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Vi("peekview.close",p("label.close","Close"),_.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Soe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Sn(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,bo(this._metaHeading)):Oi(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(59)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}},"PeekViewWidget");GC=I6([N6(2,Ge)],GC);const Loe=A("peekViewTitle.background",{dark:xe(ko,.1),light:xe(ko,.1),hc:null},p("peekViewTitleBackground","Background color of the peek view title area.")),M6=A("peekViewTitleLabel.foreground",{dark:H.white,light:H.black,hc:H.white},p("peekViewTitleForeground","Color of the peek view title.")),R6=A("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},p("peekViewTitleInfoForeground","Color of the peek view title info.")),koe=A("peekView.border",{dark:ko,light:ko,hc:Pt},p("peekViewBorder","Color of the peek view borders and arrow.")),Eoe=A("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:H.black},p("peekViewResultsBackground","Background color of the peek view result list."));A("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:H.white},p("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));A("peekViewResult.fileForeground",{dark:H.white,light:"#1E1E1E",hc:H.white},p("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));A("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},p("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));A("peekViewResult.selectionForeground",{dark:H.white,light:"#6C6C6C",hc:H.white},p("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const AS=A("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:H.black},p("peekViewEditorBackground","Background color of the peek view editor."));A("peekViewEditorGutter.background",{dark:AS,light:AS,hc:AS},p("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));A("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},p("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));A("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},p("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));A("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:ci},p("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));var Doe=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class Xa{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=T8.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?p({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",ts(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):p("aria.oneReference","symbol in {0} on line {1} at column {2}",ts(this.uri),this.range.startLineNumber,this.range.startColumn)}}h(Xa,"OneReference");class P6{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:o,endLineNumber:r,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:o-t}),d=new T(i,l.startColumn,i,o),c=new T(r,a,r,1073741824),u=n.getValueInRange(d).replace(/^\s+/,""),f=n.getValueInRange(e),g=n.getValueInRange(c).replace(/\s+$/,"");return{value:u+f+g,highlight:{start:u.length,end:u.length+f.length}}}}h(P6,"FilePreview");class Qf{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new li}dispose(){et(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?p("aria.fileReferences.1","1 symbol in {0}, full path {1}",ts(this.uri),this.uri.fsPath):p("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,ts(this.uri),this.uri.fsPath)}resolve(e){return Doe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new P6(n))}catch(n){Ne(n)}return this})}}h(Qf,"FileReferences");class Hi{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new P,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Hi._compareReferences);let i;for(let o of e)if((!i||!Dt.isEqual(i.uri,o.uri,!0))&&(i=new Qf(this,o.uri),this.groups.push(i)),i.children.length===0||Hi._compareReferences(o,i.children[i.children.length-1])!==0){const r=new Xa(n===o,i,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),i.children.push(r)}}dispose(){et(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Hi(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?p("aria.result.0","No results found"):this.references.length===1?p("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?p("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):p("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.length,r=n.parent.groups.length;return r===1||t&&i+1<o||!t&&i>0?(t?i=(i+1)%o:i=(i+o-1)%o,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%r,n.parent.groups[i].children[0]):(i=(i+r-1)%r,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,o)=>({idx:o,prefixLen:uf(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,o)=>i.prefixLen>o.prefixLen?-1:i.prefixLen<o.prefixLen?1:i.offsetDist<o.offsetDist?-1:i.offsetDist>o.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&T.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Dt.compare(e.uri,t.uri)||T.compareRangesUsingStarts(e.range,t.range)}}h(Hi,"ReferencesModel");function O6(s){if(!s)return;typeof s=="string"&&(s=Ce.file(s));const e=ts(s)||(s.scheme===Me.file?s.fsPath:s.path);return Vn&&TZ(e)?nE(e):e}h(O6,"getBaseLabel");function nE(s,e){return E7(s,e)?s.charAt(0).toUpperCase()+s.slice(1):s}h(nE,"normalizeDriveLetter");var $1=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},e_=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let iE=h(class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Hi||e instanceof Qf}getChildren(e){if(e instanceof Hi)return e.groups;if(e instanceof Qf)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}},"DataSource");iE=$1([e_(0,Ui)],iE);class F6{getHeight(){return 23}getTemplateId(e){return e instanceof Qf?t_.id:Mg.id}}h(F6,"Delegate");let oE=h(class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof Xa){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return ts(e.uri)}},"StringRepresentationProvider");oE=$1([e_(0,Xt)],oE);class W6{getId(e){return e instanceof Xa?e.id:e.uri}}h(W6,"IdentityProvider");let sE=h(class extends z{constructor(e,t,n){super();this._uriLabel=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new qm(i,{supportHighlights:!0})),this.badge=new MC(j(i,X(".count"))),this._register(KQ(this.badge,n)),e.appendChild(i)}set(e,t){let n=o1(e.uri);this.file.setLabel(O6(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(p("referencesCount","{0} references",i)):this.badge.setTitleFormat(p("referenceCount","{0} reference",i))}},"FileReferencesTemplate");sE=$1([e_(1,q_),e_(2,Mt)],sE);let t_=h(class V6{constructor(e){this._instantiationService=e,this.templateId=V6.id}renderTemplate(e){return this._instantiationService.createInstance(sE,e)}renderElement(e,t,n){n.set(e.element,g1(e.filterData))}disposeTemplate(e){e.dispose()}},"FileReferencesRenderer");t_.id="FileReferencesRenderer";t_=$1([e_(0,Ge)],t_);class B6{constructor(e){this.label=new pd(e)}set(e,t){var n;const i=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!i||!i.value)this.label.set(`${ts(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:r}=i;t&&!er.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,g1(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[r]))}}}h(B6,"OneReferenceTemplate");class Mg{constructor(){this.templateId=Mg.id}renderTemplate(e){return new B6(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}h(Mg,"OneReferenceRenderer");Mg.id="OneReferenceRenderer";class H6{getWidgetAriaLabel(){return p("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}h(H6,"AccessibilityProvider");var Ioe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},la=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},LR=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class hb{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Q,this._callOnModelChange=new Q,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(!!e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let o=0,r=e.children.length;o<r;o++){let a=e.children[o];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:hb.DecorationOptions}),n.push(o))}const i=this._editor.deltaDecorations([],t);for(let o=0;o<i.length;o++)this._decorations.set(i[o],e.children[n[o]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(!!t){for(let[n,i]of this._decorations){const o=t.getDecorationRange(n);if(!o)continue;let r=!1;if(!T.equalsRange(o,i.range)){if(T.spansMultipleLines(o))r=!0;else{const a=i.range.endColumn-i.range.startColumn,l=o.endColumn-o.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=o}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}h(hb,"DecorationsManager");hb.DecorationOptions=Pe.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class z6{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}h(z6,"LayoutData");class K6 extends mk{}h(K6,"ReferencesTree");let rE=h(class extends GC{constructor(e,t,n,i,o,r,a,l,d,c,u,f){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r);this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._undoRedoService=d,this._keybindingService=c,this._languageService=u,this._languageConfigurationService=f,this._disposeOnNewModel=new Q,this._callOnDispose=new Q,this._onDidSelectReference=new P,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new mt(0,0),this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),et(this._preview),et(this._previewNotAvailableMessage),et(this._tree),et(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(koe)||H.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Loe)||H.transparent,primaryHeadingColor:e.getColor(M6),secondaryHeadingColor:e.getColor(R6)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=j(e,X("div.messages")),Oi(this._messageContainer),this._splitView=new uN(e,{orientation:1}),this._previewContainer=j(e,X("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(mh,this._previewContainer,t,this.editor),Oi(this._previewContainer),this._previewNotAvailableMessage=new Ga(p("missingPreviewMessage","no preview available"),Zr,Ga.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=j(e,X("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new H6,keyboardNavigationLabelProvider:this._instantiationService.createInstance(oE),identityProvider:new W6,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:Eoe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Wn(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(K6,"ReferencesWidget",this._treeContainer,new F6,[this._instantiationService.createInstance(t_),this._instantiationService.createInstance(Mg)],this._instantiationService.createInstance(iE),n),this._splitView.addView({onDidChange:fe.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},RC.Distribute),this._splitView.addView({onDidChange:fe.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},RC.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let i=h((o,r)=>{o instanceof Xa&&(r==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:r,source:"tree"}))},"onEvent");this._tree.onDidOpen(o=>{o.sideBySide?i(o.element,"side"):o.editorOptions.pinned?i(o.element,"goto"):i(o.element,"show")}),Oi(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new mt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{!this._model||(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=p("noResults","No results"),bo(this._messageContainer),Promise.resolve(void 0)):(Oi(this._messageContainer),this._decorationsManager=new hb(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();!i||this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),bo(this._treeContainer),bo(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof Xa)return e;if(e instanceof Qf&&e.children.length>0)return e.children[0]}revealReference(e){return LR(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return LR(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Me.inMemory?this.setTitle(LZ(e.uri),this._uriLabel.getUriLabel(o1(e.uri))):this.setTitle(p("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const i=yield n;if(!this._model){i.dispose();return}et(this._previewModelReference);const o=i.object;if(o){const r=this._preview.getModel()===o.textEditorModel?0:1,a=T.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()})}},"ReferenceWidget");rE=Ioe([la(3,Mt),la(4,Ui),la(5,Ge),la(6,A6),la(7,q_),la(8,a1),la(9,Xt),la(10,Vt),la(11,oi)],rE);var Noe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uu=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},kR=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const Zh=new re("referenceSearchVisible",!1,p("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let bd=h(class aE{constructor(e,t,n,i,o,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new Q,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Zh.bindTo(n)}static get(e){return e.getContribution(aE.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),!!i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",r=z6.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(rE,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(p("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{let{element:d,kind:c}=l;if(!!d)switch(c){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(d,!1,!1);break;case"side":this.openReference(d,!0,!1);break;case"goto":n?this._gotoReference(d):this.openReference(d,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var d;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(d=this._model)===null||d===void 0||d.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(p("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let c=this._editor.getModel().uri,u=new W(e.startLineNumber,e.startColumn),f=this._model.nearestReference(c,u);if(f)return this._widget.setSelection(f).then(()=>{this._widget&&this._editor.getOption(77)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){!this._widget||(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return kR(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(i),yield this._gotoReference(i),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()})}revealReference(e){return kR(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=T.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t,selectionSource:"code.jump"}},this._editor).then(n=>{var i;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const o=aE.get(n),r=this._model.clone();this.closeWidget(),n.focus(),o?.toggleWidget(t,Hn(a=>Promise.resolve(r)),(i=this._peekMode)!==null&&i!==void 0?i:!1)}},n=>{this._ignoreModelChangeEvent=!1,Ne(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:o}=e;this._editorService.openCodeEditor({resource:i,options:{selection:o,selectionSource:"code.jump",pinned:n}},this._editor,t)}},"ReferencesController");bd.ID="editor.contrib.referencesController";bd=Noe([uu(2,De),uu(3,ht),uu(4,cn),uu(5,Ge),uu(6,Qr),uu(7,wt)],bd);function Jh(s,e){const t=xoe(s);if(!t)return;const n=bd.get(t);n&&e(n)}h(Jh,"withController");Ci.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:An(2089,60),when:se.or(Zh,zi.inPeekEditor),handler(s){Jh(s,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Ci.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:se.or(Zh,zi.inPeekEditor),handler(s){Jh(s,e=>{e.goToNextOrPreviousReference(!0)})}});Ci.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:se.or(Zh,zi.inPeekEditor),handler(s){Jh(s,e=>{e.goToNextOrPreviousReference(!1)})}});tt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");tt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");tt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");tt.registerCommand("closeReferenceSearch",s=>Jh(s,e=>e.closeWidget()));Ci.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:se.and(zi.inPeekEditor,se.not("config.editor.stablePeek"))});Ci.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:se.and(Zh,se.not("config.editor.stablePeek"))});Ci.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:se.and(Zh,kW,CN.negate(),yN.negate()),handler(s){var e;const n=(e=s.get(rs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Xa&&Jh(s,i=>i.revealReference(n[0]))}});Ci.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:se.and(Zh,kW,CN.negate(),yN.negate()),handler(s){var e;const n=(e=s.get(rs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Xa&&Jh(s,i=>i.openReference(n[0],!0,!0))}});tt.registerCommand("openReference",s=>{var e;const n=(e=s.get(rs).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof Xa&&Jh(s,i=>i.openReference(n[0],!1,!0))});var U6=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ip=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const YN=new re("hasSymbols",!1,p("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),q1=Xe("ISymbolNavigationService");let lE=h(class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=YN.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new dE(this._editorService),i=n.onDidChange(o=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let d=!1,c=!1;for(const u of t.references)if(D7(u.uri,a.uri))d=!0,c=c||T.containsPosition(u.range,l);else if(d)break;(!d||!c)&&this.reset()});this._currentState=Ma(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:T.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?p("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):p("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}},"SymbolNavigationService");lE=U6([Ip(0,De),Ip(1,ht),Ip(2,cn),Ip(3,Xt)],lE);it(q1,lE,!0);te(new class extends zn{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:YN,kbOpts:{weight:100,primary:70}})}runEditorCommand(s,e){return s.get(q1).revealNext(e)}});Ci.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:YN,primary:9,handler(s){s.get(q1).reset()}});let dE=h(class{constructor(e){this._listener=new Map,this._disposables=new Q,this._onDidChange=new P,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),et(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Ma(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}},"EditorState");dE=U6([Ip(0,ht)],dE);var j6=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function ub(s,e,t,n){const o=t.ordered(s).map(r=>Promise.resolve(n(r,s,e)).then(void 0,a=>{Nn(a)}));return Promise.all(o).then(r=>{const a=[];for(let l of r)Array.isArray(l)?a.push(...l):l&&a.push(l);return a})}h(ub,"getLocationLinks");function XN(s,e,t,n){return ub(e,t,s,(i,o,r)=>i.provideDefinition(o,r,n))}h(XN,"getDefinitionsAtPosition");function G6(s,e,t,n){return ub(e,t,s,(i,o,r)=>i.provideDeclaration(o,r,n))}h(G6,"getDeclarationsAtPosition");function $6(s,e,t,n){return ub(e,t,s,(i,o,r)=>i.provideImplementation(o,r,n))}h($6,"getImplementationsAtPosition");function q6(s,e,t,n){return ub(e,t,s,(i,o,r)=>i.provideTypeDefinition(o,r,n))}h(q6,"getTypeDefinitionsAtPosition");function Y1(s,e,t,n,i){return ub(e,t,s,(o,r,a)=>j6(this,void 0,void 0,function*(){const l=yield o.provideReferences(r,a,{includeDeclaration:!0},i);if(!n||!l||l.length!==2)return l;const d=yield o.provideReferences(r,a,{includeDeclaration:!1},i);return d&&d.length===1?d:l}))}h(Y1,"getReferencesAtPosition");function fb(s){return j6(this,void 0,void 0,function*(){const e=yield s(),t=new Hi(e,""),n=t.references.map(i=>i.link);return t.dispose(),n})}h(fb,"_sortedAndDeduped");Xr("_executeDefinitionProvider",(s,e,t)=>{const n=s.get(ce),i=XN(n.definitionProvider,e,t,je.None);return fb(()=>i)});Xr("_executeTypeDefinitionProvider",(s,e,t)=>{const n=s.get(ce),i=q6(n.typeDefinitionProvider,e,t,je.None);return fb(()=>i)});Xr("_executeDeclarationProvider",(s,e,t)=>{const n=s.get(ce),i=G6(n.declarationProvider,e,t,je.None);return fb(()=>i)});Xr("_executeReferenceProvider",(s,e,t)=>{const n=s.get(ce),i=Y1(n.referenceProvider,e,t,!1,je.None);return fb(()=>i)});Xr("_executeImplementationProvider",(s,e,t)=>{const n=s.get(ce),i=$6(n.implementationProvider,e,t,je.None);return fb(()=>i)});var ms=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},MS,RS,PS,OS,FS,WS,VS,BS;Lo.appendMenuItem(R.EditorContext,{submenu:R.EditorContextPeek,title:p("peek.submenu","Peek"),group:"navigation",order:100});const Y6=new Set;function ur(s){const e=new s;return O5(e),Y6.add(e.id),e}h(ur,"registerGoToAction");class eg{constructor(e,t){this.model=e,this.position=t}static is(e){return!e||typeof e!="object"?!1:!!(e instanceof eg||W.isIPosition(e.position)&&e.model)}}h(eg,"SymbolNavigationAnchor");class Od extends le{constructor(e,t){super(t);this.configuration=e}run(e,t,n){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(cn),o=e.get(ht),r=e.get(Rd),a=e.get(q1),l=e.get(ce),d=t.getModel(),c=t.getPosition(),u=eg.is(n)?n:new eg(d,c),f=new Yf(t,5),g=FD(this._getLocationModel(l,u.model,u.position,f.token),f.token).then(m=>ms(this,void 0,void 0,function*(){var b;if(!m||f.token.isCancellationRequested)return;qn(m.ariaMessage);let v;if(m.referenceAt(d.uri,c)){const w=this._getAlternativeCommand(t);w!==this.id&&Y6.has(w)&&(v=t.getAction(w))}const C=m.references.length;if(C===0){if(!this.configuration.muteMessage){const w=d.getWordAtPosition(c);(b=Io.get(t))===null||b===void 0||b.showMessage(this._getNoResultFoundMessage(w),c)}}else if(C===1&&v)v.run();else return this._onResult(o,a,t,m)}),m=>{i.error(m)}).finally(()=>{f.dispose()});return r.showWhile(g,250),g}_onResult(e,t,n,i){return ms(this,void 0,void 0,function*(){const o=this._getGoToPreference(n);if(!(n instanceof mh)&&(this.configuration.openInPeek||o==="peek"&&i.references.length>1))this._openInPeek(n,i);else{const r=i.firstReference(),a=i.references.length>1&&o==="gotoAndPeek",l=yield this._openReference(n,e,r,this.configuration.openToSide,!a);a&&l?this._openInPeek(l,i):i.dispose(),o==="goto"&&t.put(r)}})}_openReference(e,t,n,i,o){return ms(this,void 0,void 0,function*(){let r;if(hG(n)&&(r=n.targetSelectionRange),r||(r=n.range),!r)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:T.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,i);if(!!a){if(o){const l=a.getModel(),d=a.deltaDecorations([],[{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&a.deltaDecorations(d,[])},350)}return a}})}_openInPeek(e,t){const n=bd.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),Hn(i=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}}h(Od,"SymbolNavigationAction");class Rg extends Od{_getLocationModel(e,t,n,i){return ms(this,void 0,void 0,function*(){return new Hi(yield XN(e.definitionProvider,t,n,i),p("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("noResultWord","No definition found for '{0}'",e.word):p("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(51).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(51).multipleDefinitions}}h(Rg,"DefinitionAction");const X6=kd&&!AD?2118:70;ur((MS=h(class cE extends Rg{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:cE.id,label:p("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:se.and(I.hasDefinitionProvider,I.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:I.editorTextFocus,primary:X6,weight:100},contextMenuOpts:{group:"navigation",order:1.1}});tt.registerCommandAlias("editor.action.goToDeclaration",cE.id)}},"GoToDefinitionAction"),MS.id="editor.action.revealDefinition",MS));ur((RS=h(class hE extends Rg{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:hE.id,label:p("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:se.and(I.hasDefinitionProvider,I.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,X6),weight:100}});tt.registerCommandAlias("editor.action.openDeclarationToTheSide",hE.id)}},"OpenDefinitionToSideAction"),RS.id="editor.action.revealDefinitionAside",RS));ur((PS=h(class uE extends Rg{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:uE.id,label:p("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:se.and(I.hasDefinitionProvider,zi.notInPeekEditor,I.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:I.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:R.EditorContextPeek,group:"peek",order:2}});tt.registerCommandAlias("editor.action.previewDeclaration",uE.id)}},"PeekDefinitionAction"),PS.id="editor.action.peekDefinition",PS));class ZN extends Od{_getLocationModel(e,t,n,i){return ms(this,void 0,void 0,function*(){return new Hi(yield G6(e.declarationProvider,t,n,i),p("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(51).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(51).multipleDeclarations}}h(ZN,"DeclarationAction");ur((OS=h(class Z6 extends ZN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Z6.id,label:p("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:se.and(I.hasDeclarationProvider,I.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}},"GoToDeclarationAction"),OS.id="editor.action.revealDeclaration",OS));ur(h(class extends ZN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:p("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:se.and(I.hasDeclarationProvider,zi.notInPeekEditor,I.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:R.EditorContextPeek,group:"peek",order:3}})}},"PeekDeclarationAction"));class JN extends Od{_getLocationModel(e,t,n,i){return ms(this,void 0,void 0,function*(){return new Hi(yield q6(e.typeDefinitionProvider,t,n,i),p("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):p("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(51).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(51).multipleTypeDefinitions}}h(JN,"TypeDefinitionAction");ur((FS=h(class J6 extends JN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:J6.ID,label:p("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:se.and(I.hasTypeDefinitionProvider,I.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:I.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},"GoToTypeDefinitionAction"),FS.ID="editor.action.goToTypeDefinition",FS));ur((WS=h(class Q6 extends JN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Q6.ID,label:p("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:se.and(I.hasTypeDefinitionProvider,zi.notInPeekEditor,I.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:R.EditorContextPeek,group:"peek",order:4}})}},"PeekTypeDefinitionAction"),WS.ID="editor.action.peekTypeDefinition",WS));class QN extends Od{_getLocationModel(e,t,n,i){return ms(this,void 0,void 0,function*(){return new Hi(yield $6(e.implementationProvider,t,n,i),p("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?p("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):p("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(51).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(51).multipleImplementations}}h(QN,"ImplementationAction");ur((VS=h(class eB extends QN{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:eB.ID,label:p("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:se.and(I.hasImplementationProvider,I.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:I.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},"GoToImplementationAction"),VS.ID="editor.action.goToImplementation",VS));ur((BS=h(class tB extends QN{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:tB.ID,label:p("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:se.and(I.hasImplementationProvider,zi.notInPeekEditor,I.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:I.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:R.EditorContextPeek,group:"peek",order:5}})}},"PeekImplementationAction"),BS.ID="editor.action.peekImplementation",BS));class eA extends Od{_getNoResultFoundMessage(e){return e?p("references.no","No references found for '{0}'",e.word):p("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(51).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(51).multipleReferences}}h(eA,"ReferencesAction");ur(h(class extends eA{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:p("goToReferences.label","Go to References"),alias:"Go to References",precondition:se.and(I.hasReferenceProvider,zi.notInPeekEditor,I.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:I.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n,i){return ms(this,void 0,void 0,function*(){return new Hi(yield Y1(e.referenceProvider,t,n,!0,i),p("ref.title","References"))})}},"GoToReferencesAction"));ur(h(class extends eA{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:p("references.action.label","Peek References"),alias:"Peek References",precondition:se.and(I.hasReferenceProvider,zi.notInPeekEditor,I.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:R.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n,i){return ms(this,void 0,void 0,function*(){return new Hi(yield Y1(e.referenceProvider,t,n,!1,i),p("ref.title","References"))})}},"PeekReferencesAction"));class nB extends Od{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:p("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:se.and(zi.notInPeekEditor,I.isInWalkThroughSnippet.toNegated())});this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n,i){return ms(this,void 0,void 0,function*(){return new Hi(this._references,p("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&p("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(51).multipleReferences}_getAlternativeCommand(){return""}}h(nB,"GenericGoToLocationAction");tt.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ce},{name:"position",description:"The position at which to start",constraint:W.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(s,e,t,n,i,o,r)=>ms(void 0,void 0,void 0,function*(){bt(Ce.isUri(e)),bt(W.isIPosition(t)),bt(Array.isArray(n)),bt(typeof i>"u"||typeof i=="string"),bt(typeof r>"u"||typeof r=="boolean");const a=s.get(ht),l=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(qa(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(d=>{const c=new class extends nB{_getNoResultFoundMessage(u){return o||super._getNoResultFoundMessage(u)}}({muteMessage:!Boolean(o),openInPeek:Boolean(r),openToSide:!1},n,i);d.get(Ge).invokeFunction(c.run.bind(c),l)})})});tt.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Ce},{name:"position",description:"The position at which to start",constraint:W.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(s,e,t,n,i)=>ms(void 0,void 0,void 0,function*(){s.get(ln).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)})});tt.registerCommand({id:"editor.action.findReferences",handler:(s,e,t)=>{bt(Ce.isUri(e)),bt(W.isIPosition(t));const n=s.get(ce),i=s.get(ht);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(o=>{if(!qa(o)||!o.hasModel())return;const r=bd.get(o);if(!r)return;const a=Hn(d=>Y1(n.referenceProvider,o.getModel(),W.lift(t),!1,d).then(c=>new Hi(c,p("ref.title","References")))),l=new T(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});tt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Lo.appendMenuItems([{id:R.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:p({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:R.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:p({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:R.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:p({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:R.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:p({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:R.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:p({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var Aoe=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},HS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let _h=h(class Np{constructor(e,t,n,i){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=i,this.toUnhook=new Q,this.toUnhookForKeyboard=new Q,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let o=new G1(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,Qi(a))})),this.toUnhook.add(o.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},a=>{this.removeLinkDecorations(),Ne(a)})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Np.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let i=new qf(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Hn(o=>this.findDefinition(e,o)),this.previousPromise.then(o=>{if(!o||!o.length||!i.validate(this.editor)){this.removeLinkDecorations();return}if(o.length>1)this.addDecoration(new T(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Zi().appendText(p("multipleResults","Click to show {0} definitions.",o.length)));else{let r=o[0];if(!r.uri)return;this.textModelResolverService.createModelReference(r.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:l}}=a,{startLineNumber:d}=r.range;if(d<1||d>l.getLineCount()){a.dispose();return}const c=this.getPreviewValue(l,d,r);let u;r.originSelectionRange?u=T.lift(r.originSelectionRange):u=new T(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const f=this.languageService.guessLanguageIdByFilepathOrFirstLine(l.uri);this.addDecoration(u,new Zi().appendCodeblock(f||"",c)),a.dispose()})}}).then(void 0,Ne)}getPreviewValue(e,t,n){let i=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return i.endLineNumber-i.startLineNumber>=Np.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+Np.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<i;o++){let r=e.getLineFirstNonWhitespaceColumn(o);if(n===r)break}return new T(t,1,o+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+Np.MAX_SOURCE_PREVIEW_LINES),i=[];let o=!0,r=e.bracketPairs.findNextBracket(new W(t,1));for(;r!==null;){if(i.length===0)i.push(r);else{const c=i[i.length-1];if(c.open[0]===r.open[0]&&c.isOpen&&!r.isOpen?i.pop():i.push(r),i.length===0)if(o)o=!1;else return new T(t,1,r.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let l=r.range.endLineNumber,d=r.range.endColumn;if(a===r.range.endColumn&&(l++,d=1),l>n)return new T(t,1,n+1,1);r=e.bracketPairs.findNextBracket(new W(l,d))}return new T(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?XN(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(78)&&!this.isInPeekEditor(n);return new Rg({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(De);return zi.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}},"GotoDefinitionAtPositionEditorContribution");_h.ID="editor.contrib.gotodefinitionatposition";_h.MAX_SOURCE_PREVIEW_LINES=8;_h=Aoe([HS(1,Ui),HS(2,Vt),HS(3,ce)],_h);lt(_h.ID,_h);It((s,e)=>{const t=s.getColor(dI);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const fv=X;class tA extends z{constructor(){super();this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new Tg(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}h(tA,"HoverWidget");class X1 extends z{constructor(e,t,n){super();this.actionContainer=j(e,fv("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=j(this.actionContainer,fv("a.action")),this.action.setAttribute("role","button"),t.iconClass&&j(this.action,fv(`span.icon.${t.iconClass}`));const i=j(this.action,fv("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._register(J(this.actionContainer,be.CLICK,o=>{o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer)})),this._register(J(this.actionContainer,be.KEY_UP,o=>{new Et(o).equals(3)&&(o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer))})),this.setEnabled(!0)}static render(e,t,n){return new X1(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}h(X1,"HoverAction");var Moe=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},Roe=globalThis&&globalThis.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=s[o]&&function(r){return new Promise(function(a,l){r=s[o](r),i(a,l,r.done,r.value)})}}function i(o,r,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},r)}};class iB{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}}h(iB,"HoverResult");class nA extends z{constructor(e,t){super();this._editor=e,this._computer=t,this._onResult=this._register(new P),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new gt(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new gt(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new gt(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(53).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=QG(e=>this._computer.computeAsync(e)),Moe(this,void 0,void 0,function*(){var e,t;try{try{for(var n=Roe(this._asyncIterable),i;i=yield n.next(),!i.done;){const o=i.value;o&&(this._result.push(o),this._fireResult())}}catch(o){e={error:o}}finally{try{i&&!i.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(o){Ne(o)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new iB(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}h(nA,"HoverOperation");class yw{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}h(yw,"HoverRangeAnchor");class im{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}h(im,"HoverForeignElementAnchor");const Qh=new(h(class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}},"HoverParticipantRegistry"));class Wo{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),i;if(i=Wo._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(Wo.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(Wo.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(Wo.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(Wo.isVariableCharacter(n)||Wo.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Wo._table[n]>"u"&&!Wo.isDigitCharacter(n)&&!Wo.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}}h(Wo,"Scanner");Wo._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class eu{constructor(){this._children=[]}appendChild(e){return e instanceof Fi&&this._children[this._children.length-1]instanceof Fi?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...t),n._children=o,h(function r(a,l){for(const d of a)d.parent=l,r(d.children,d)},"_fixParent")(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof gb)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}h(eu,"Marker");class Fi extends eu{constructor(e){super();this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new Fi(this.value)}}h(Fi,"Text");class iA extends eu{}h(iA,"TransformableMarker");class Ko extends iA{constructor(e){super();this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Pg?this._children[0]:void 0}clone(){let e=new Ko(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}h(Ko,"Placeholder");class Pg extends eu{constructor(){super(...arguments);this.options=[]}appendChild(e){return e instanceof Fi&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Pg;return this.options.forEach(e.appendChild,e),e}}h(Pg,"Choice");class Z1 extends eu{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(o=>o instanceof cs&&Boolean(o.elseValue))&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof cs){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){let e=new Z1;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}h(Z1,"Transform");class cs extends eu{constructor(e,t,n,i){super();this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":Boolean(e)&&typeof this.ifValue=="string"?this.ifValue:!Boolean(e)&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new cs(this.index,this.shorthandName,this.ifValue,this.elseValue)}}h(cs,"FormatString");class tg extends iA{constructor(e){super();this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Fi(t)],!0):!1}clone(){const e=new tg(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}h(tg,"Variable");function ER(s,e){const t=[...s];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}h(ER,"walk");class gb extends eu{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof Ko&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return ER([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof Ko&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof tg&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new gb;return this._children=this.children.map(t=>t.clone()),e}walk(e){ER(this.children,e)}}h(gb,"TextmateSnippet");class pb{constructor(){this._scanner=new Wo,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const i=new gb;for(;this._parse(i););const o=new Map,r=[];let a=0;i.walk(l=>(l instanceof Ko&&(a+=1,l.isFinalTabstop?o.set(0,void 0):!o.has(l.index)&&l.children.length>0?o.set(l.index,l.children):r.push(l)),!0));for(const l of r){const d=o.get(l.index);if(d){const c=new Ko(l.index);c.transform=l.transform;for(const u of d)c.appendChild(u.clone());i.replace(l,[c])}}return n||(n=a>0&&t),!o.has(0)&&n&&i.appendChild(new Ko(0)),i}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Fi(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Ko(Number(t)):new tg(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const o=new Ko(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Fi("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const r=new Pg;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(r),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new Fi(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const o=new tg(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Fi("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let t=new Z1,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Fi(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new cs(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new cs(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new cs(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new cs(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new cs(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let r=this._until(4);if(r)return e.appendChild(new cs(Number(i),void 0,o,r)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new cs(Number(i),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Fi(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}h(pb,"SnippetParser");const Poe={inputActiveOptionBorder:H.fromHex("#007ACC00"),inputActiveOptionForeground:H.fromHex("#FFFFFF"),inputActiveOptionBackground:H.fromHex("#0E639C50")};class Og extends ns{constructor(e){super();this._onChange=this._register(new P),this.onChange=this._onChange.event,this._onKeyDown=this._register(new P),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},Poe),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(..._i.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}h(Og,"Checkbox");const Ooe=p("caseDescription","Match Case"),Foe=p("wordsDescription","Match Whole Word"),Woe=p("regexDescription","Use Regular Expression");class oA extends Og{constructor(e){super({icon:_.caseSensitive,title:Ooe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}h(oA,"CaseSensitiveCheckbox");class sA extends Og{constructor(e){super({icon:_.wholeWord,title:Foe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}h(sA,"WholeWordsCheckbox");class rA extends Og{constructor(e){super({icon:_.regex,title:Woe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}h(rA,"RegexCheckbox");const Voe=p("defaultLabel","input");class oB extends ns{constructor(e,t,n,i){super();this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new P),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new P),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new P),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new P),this._onKeyUp=this._register(new P),this._onCaseSensitiveKeyDown=this._register(new P),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new P),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Voe,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const o=i.appendCaseSensitiveLabel||"",r=i.appendWholeWordsLabel||"",a=i.appendRegexLabel||"",l=i.history||[],d=!!i.flexibleHeight,c=!!i.flexibleWidth,u=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new aN(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:l,showHistoryHint:i.showHistoryHint,flexibleHeight:d,flexibleWidth:c,flexibleMaxHeight:u})),this.regex=this._register(new rA({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new sA({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new oA({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let f=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){let m=f.indexOf(document.activeElement);if(m>=0){let b=-1;g.equals(17)?b=(m+1)%f.length:g.equals(15)&&(m===0?b=f.length-1:b=m-1),g.equals(9)?(f[m].blur(),this.inputBox.focus()):b>=0&&f[b].focus(),ct.stop(g,!0)}}}),this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this._showOptionButtons?"block":"none",this.controls.appendChild(this.caseSensitive.domNode),this.controls.appendChild(this.wholeWords.domNode),this.controls.appendChild(this.regex.domNode),this.domNode.appendChild(this.controls),e&&e.appendChild(this.domNode),this._register(J(this.inputBox.inputElement,"compositionstart",g=>{this.imeSessionInProgress=!0})),this._register(J(this.inputBox.inputElement,"compositionend",g=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}h(oB,"FindInput");const Boe=p("defaultLabel","input"),Hoe=p("label.preserveCaseCheckbox","Preserve Case");class sB extends Og{constructor(e){super({icon:_.preserveCase,title:Hoe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}h(sB,"PreserveCaseCheckbox");class rB extends ns{constructor(e,t,n,i){super();this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new P),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new P),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new P),this._onInput=this._register(new P),this._onKeyUp=this._register(new P),this._onPreserveCaseKeyDown=this._register(new P),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Boe,this.inputActiveOptionBorder=i.inputActiveOptionBorder,this.inputActiveOptionForeground=i.inputActiveOptionForeground,this.inputActiveOptionBackground=i.inputActiveOptionBackground,this.inputBackground=i.inputBackground,this.inputForeground=i.inputForeground,this.inputBorder=i.inputBorder,this.inputValidationInfoBorder=i.inputValidationInfoBorder,this.inputValidationInfoBackground=i.inputValidationInfoBackground,this.inputValidationInfoForeground=i.inputValidationInfoForeground,this.inputValidationWarningBorder=i.inputValidationWarningBorder,this.inputValidationWarningBackground=i.inputValidationWarningBackground,this.inputValidationWarningForeground=i.inputValidationWarningForeground,this.inputValidationErrorBorder=i.inputValidationErrorBorder,this.inputValidationErrorBackground=i.inputValidationErrorBackground,this.inputValidationErrorForeground=i.inputValidationErrorForeground;const o=i.appendPreserveCaseLabel||"",r=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,d=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new aN(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:r,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:d})),this.preserveCase=this._register(new sB({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(f=>{this._onPreserveCaseKeyDown.fire(f)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let c=[this.preserveCase.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){let g=c.indexOf(document.activeElement);if(g>=0){let m=-1;f.equals(17)?m=(g+1)%c.length:f.equals(15)&&(g===0?m=c.length-1:m=g-1),f.equals(9)?(c[g].blur(),this.inputBox.focus()):m>=0&&c[m].focus(),ct.stop(f,!0)}}});let u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,f=>this._onKeyDown.fire(f)),this.onkeyup(this.inputBox.inputElement,f=>this._onKeyUp.fire(f)),this.oninput(this.inputBox.inputElement,f=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,f=>this._onMouseDown.fire(f))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}h(rB,"ReplaceInput");var aB=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},lB=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const aA=new re("suggestWidgetVisible",!1,p("suggestWidgetVisible","Whether suggestion are visible")),n_="historyNavigationWidget",dB="historyNavigationForwardsEnabled",cB="historyNavigationBackwardsEnabled";function zoe(s,e,t){new re(t,e).bindTo(s)}h(zoe,"bindContextScopedWidget");function Koe(s,e){return s.createScoped(e.target)}h(Koe,"createWidgetScopedContextKeyService");function hB(s,e){return s.getContext(document.activeElement).getValue(e)}h(hB,"getContextScopedWidget");function uB(s,e){const t=Koe(s,e);zoe(t,e,n_);const n=new re(dB,!0).bindTo(t),i=new re(cB,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:i}}h(uB,"createAndBindHistoryNavigationWidgetScopedContextKeyService");let fE=h(class extends oB{constructor(e,t,n,i,o=!1){super(e,t,o,n);this._register(uB(i,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}},"ContextScopedFindInput");fE=aB([lB(3,De)],fE);let gE=h(class extends rB{constructor(e,t,n,i,o=!1){super(e,t,o,n);this._register(uB(i,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}},"ContextScopedReplaceInput");gE=aB([lB(3,De)],gE);Ci.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:se.and(se.has(n_),se.equals(cB,!0),aA.isEqualTo(!1)),primary:16,secondary:[528],handler:s=>{const e=hB(s.get(De),n_);e&&e.historyNavigator.showPreviousValue()}});Ci.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:se.and(se.has(n_),se.equals(dB,!0),aA.isEqualTo(!1)),primary:18,secondary:[530],handler:s=>{const e=hB(s.get(De),n_);e&&e.historyNavigator.showNextValue()}});var om=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const Ze={Visible:aA,DetailsVisible:new re("suggestWidgetDetailsVisible",!1,p("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new re("suggestWidgetMultipleSuggestions",!1,p("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new re("suggestionMakesTextEdit",!0,p("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new re("acceptSuggestionOnEnter",!0,p("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new re("suggestionHasInsertAndReplaceRange",!1,p("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new re("suggestionInsertMode",void 0,{type:"string",description:p("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new re("suggestionCanResolve",!1,p("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},vd=new R("suggestWidgetStatusBar");class fB{constructor(e,t,n,i){this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=er.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),T.isIRange(t.range)?(this.editStart=new W(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new W(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new W(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new W(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new W(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new W(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range.insert)||T.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return om(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{qr(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}h(fB,"CompletionItem");class i_{constructor(e=2,t=new Set,n=new Set,i=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=i}}h(i_,"CompletionOptions");i_.default=new i_;let Uoe;function joe(){return Uoe}h(joe,"getSnippetSuggestSupport");class gB{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}}h(gB,"CompletionItemModel");function pB(s,e,t,n=i_.default,i={triggerKind:0},o=je.None){return om(this,void 0,void 0,function*(){const r=new wi(!0);t=t.clone();const a=e.getWordAtPosition(t),l=a?new T(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):T.fromPositions(t),d={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},c=[],u=new Q,f=[];let g=!1;const m=h((v,C,w)=>{var y,S,L;let E=!1;if(!C)return E;for(let x of C.suggestions)if(!n.kindFilter.has(x.kind)){if(!n.showDeprecated&&((y=x?.tags)===null||y===void 0?void 0:y.includes(1)))continue;x.range||(x.range=d),x.sortText||(x.sortText=typeof x.label=="string"?x.label:x.label.label),!g&&x.insertTextRules&&x.insertTextRules&4&&(g=pb.guessNeedsClipboard(x.insertText)),c.push(new fB(t,x,C,v)),E=!0}return bD(C)&&u.add(C),f.push({providerName:(S=v._debugDisplayName)!==null&&S!==void 0?S:"unknown_provider",elapsedProvider:(L=C.duration)!==null&&L!==void 0?L:-1,elapsedOverall:w.elapsed()}),E},"onCompletionList"),b=(()=>om(this,void 0,void 0,function*(){}))();for(let v of s.orderedGroups(e)){let C=!1;if(yield Promise.all(v.map(w=>om(this,void 0,void 0,function*(){if(!(n.providerFilter.size>0&&!n.providerFilter.has(w)))try{const y=new wi(!0),S=yield w.provideCompletionItems(e,t,i,o);C=m(w,S,y)||C}catch(y){Nn(y)}}))),C||o.isCancellationRequested)break}return yield b,o.isCancellationRequested?(u.dispose(),Promise.reject(_D())):new gB(c.sort(mB(n.snippetSortOrder)),g,{entries:f,elapsed:r.elapsed()},u)})}h(pB,"provideSuggestionItems");function lA(s,e){if(s.sortTextLow&&e.sortTextLow){if(s.sortTextLow<e.sortTextLow)return-1;if(s.sortTextLow>e.sortTextLow)return 1}return s.completion.label<e.completion.label?-1:s.completion.label>e.completion.label?1:s.completion.kind-e.completion.kind}h(lA,"defaultComparator");function Goe(s,e){if(s.completion.kind!==e.completion.kind){if(s.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return lA(s,e)}h(Goe,"snippetUpComparator");function $oe(s,e){if(s.completion.kind!==e.completion.kind){if(s.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return lA(s,e)}h($oe,"snippetDownComparator");const J1=new Map;J1.set(0,Goe);J1.set(2,$oe);J1.set(1,lA);function mB(s){return J1.get(s)}h(mB,"getSuggestionComparator");tt.registerCommand("_executeCompletionItemProvider",(s,...e)=>om(void 0,void 0,void 0,function*(){const[t,n,i,o]=e;bt(Ce.isUri(t)),bt(W.isIPosition(n)),bt(typeof i=="string"||!i),bt(typeof o=="number"||!o);const{completionProvider:r}=s.get(ce),a=yield s.get(Ui).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},d=[],c=yield pB(r,a.object.textEditorModel,W.lift(n),void 0,{triggerCharacter:i,triggerKind:i?1:0});for(const u of c.items)d.length<(o??0)&&d.push(u.resolve(je.None)),l.incomplete=l.incomplete||u.container.incomplete,l.suggestions.push(u.completion);try{return yield Promise.all(d),l}finally{setTimeout(()=>c.disposable.dispose(),100)}}finally{a.dispose()}}));let gv,zS=[];function qoe(s,e,t){const{completionProvider:n}=s.get(ce);gv||(gv=new class{provideCompletionItems(){let o={suggestions:zS.slice(0)};return zS.length=0,o}},n.register("*",gv)),setTimeout(()=>{var i;zS.push(...t),(i=e.getContribution("editor.contrib.suggestController"))===null||i===void 0||i.triggerSuggest(new Set().add(gv))},0)}h(qoe,"showSimpleSuggestions");var dA=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$C=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const DR=X;let qC=h(class _B extends z{constructor(e,t,n){super();this._editor=e,this._instantiationService=t,this._keybindingService=n,this._widget=this._register(this._instantiationService.createInstance(Hc,this._editor)),this._decorationsChangerListener=this._register(new bB(this._editor)),this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(const i of Qh.getAll())this._participants.push(this._instantiationService.createInstance(i,this._editor));this._participants.sort((i,o)=>i.hoverOrdinal-o.hoverOrdinal),this._computer=new o_(this._editor,this._participants),this._hoverOperation=this._register(new nA(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value,i.isComplete,i.hasLoadingMessage)})),this._register(this._decorationsChangerListener.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(Wn(this._widget.getDomNode(),"keydown",i=>{i.equals(9)&&this.hide()})),this._register(Ft.onDidChange(()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))}))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(e){const t=[];for(const i of this._participants)if(i.suggestHoverAnchor){const o=i.suggestHoverAnchor(e);o&&t.push(o)}const n=e.target;if(n.type===6&&t.push(new yw(0,n.range)),n.type===7){const i=this._editor.getOption(44).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<i&&t.push(new yw(0,n.range))}return t.length===0?!1:(t.sort((i,o)=>o.priority-i.priority),this._startShowingAt(t[0],0,!1),!0)}startShowingAtRange(e,t,n){this._startShowingAt(new yw(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._computer.anchor&&this._computer.anchor.equals(e))){if(this._hoverOperation.cancel(),this._widget.position)if(!this._computer.anchor||!e.canAdoptVisibleHover(this._computer.anchor,this._widget.position))this.hide();else{const i=this._messages.filter(o=>o.isValidForHoverAnchor(e));if(i.length===0)this.hide();else{if(i.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,i)}}this._computer.anchor=e,this._computer.shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}_addLoadingMessage(e){if(this._computer.anchor){for(const t of this._participants)if(t.createLoadingMessage){const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}}return e}_withResult(e,t,n){this._messages=n?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}_renderMessages(e,t){let n=1073741824,i=t[0].range,o=null;for(const u of t)n=Math.min(n,u.range.startColumn),i=T.plusRange(i,u.range),u.forceShowAtRange&&(o=u.range);const r=new Q,a=r.add(new pE(this._keybindingService)),l=document.createDocumentFragment();let d=null;const c={fragment:l,statusBar:a,setColorPicker:u=>d=u,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const u of this._participants){const f=t.filter(g=>g.owner===u);f.length>0&&r.add(u.renderHoverParts(c,f))}if(a.hasContent&&l.appendChild(a.hoverElement),l.hasChildNodes()){if(i){const u=this._decorationsChangerListener.deltaDecorations([],[{range:i,options:_B._DECORATION_OPTIONS}]);r.add(He(()=>{this._decorationsChangerListener.deltaDecorations(u,[])}))}this._widget.showAt(l,new vB(d,o?o.getStartPosition():new W(e.range.startLineNumber,n),o||i,this._editor.getOption(53).above,this._computer.shouldFocus,r))}else r.dispose()}},"ContentHoverController");qC._DECORATION_OPTIONS=Pe.register({description:"content-hover-highlight",className:"hoverHighlight"});qC=dA([$C(1,Ge),$C(2,Xt)],qC);class bB extends z{constructor(e){super();this._editor=e,this._onDidChangeModelDecorations=this._register(new P),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._isChangingDecorations=!1,this._register(this._editor.onDidChangeModelDecorations(t=>{this._isChangingDecorations||this._onDidChangeModelDecorations.fire(t)}))}deltaDecorations(e,t){try{return this._isChangingDecorations=!0,this._editor.deltaDecorations(e,t)}finally{this._isChangingDecorations=!1}}}h(bB,"EditorDecorationsChangerListener");class vB{constructor(e,t,n,i,o,r){this.colorPicker=e,this.showAtPosition=t,this.showAtRange=n,this.preferAbove=i,this.stoleFocus=o,this.disposables=r}}h(vB,"ContentHoverVisibleData");let Hc=h(class wB extends z{constructor(e,t){super();this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=I.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new tA),this._visibleData=null,this._register(this._editor.onDidLayoutChange(()=>this._layout())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(44)&&this._updateFont()})),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var e,t;return(t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition)!==null&&t!==void 0?t:null}get isColorPickerVisible(){var e;return Boolean((e=this._visibleData)===null||e===void 0?void 0:e.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return wB.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(Ze.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(44);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}showAt(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this._editor.layoutContentWidget(this),this.onContentsChanged(),this._editor.render(),this._editor.layoutContentWidget(this),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){const n=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==n&&(this._hover.contentsDomNode.style.paddingBottom=n,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}},"ContentHoverWidget");Hc.ID="editor.contrib.contentHoverWidget";Hc=dA([$C(1,De)],Hc);let pE=h(class extends z{constructor(e){super();this._keybindingService=e,this._hasContent=!1,this.hoverElement=DR("div.hover-row.status-bar"),this.actionsElement=j(this.hoverElement,DR("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(X1.render(this.actionsElement,e,n))}append(e){const t=j(this.actionsElement,e);return this._hasContent=!0,t}},"EditorHoverStatusBar");pE=dA([$C(0,Xt)],pE);class o_{constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),i=t.range.startLineNumber,o=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===i?r.range.startColumn:1,l=r.range.endLineNumber===i?r.range.endColumn:o;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Qt.EMPTY;const n=o_._getLineDecorations(this._editor,t);return Qt.merge(this._participants.map(i=>i.computeAsync?i.computeAsync(t,n,e):Qt.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=o_._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return Mh(t)}}h(o_,"ContentHoverComputer");/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function Yoe(s){if(Array.isArray(s)){for(var e=0,t=Array(s.length);e<s.length;e++)t[e]=s[e];return t}else return Array.from(s)}h(Yoe,"_toConsumableArray");var Xoe=Object.hasOwnProperty,IR=Object.setPrototypeOf,Zoe=Object.isFrozen,Joe=Object.getPrototypeOf,Qoe=Object.getOwnPropertyDescriptor,ro=Object.freeze,Za=Object.seal,ese=Object.create,CB=typeof Reflect<"u"&&Reflect,YC=CB.apply,mE=CB.construct;YC||(YC=h(function(e,t,n){return e.apply(t,n)},"apply"));ro||(ro=h(function(e){return e},"freeze"));Za||(Za=h(function(e){return e},"seal"));mE||(mE=h(function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(Yoe(t))))},"construct"));var tse=dr(Array.prototype.forEach),NR=dr(Array.prototype.pop),rp=dr(Array.prototype.push),tc=dr(String.prototype.toLowerCase),AR=dr(String.prototype.match),pl=dr(String.prototype.replace),nse=dr(String.prototype.indexOf),ise=dr(String.prototype.trim),da=dr(RegExp.prototype.test),MR=ose(TypeError);function dr(s){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return YC(s,e,n)}}h(dr,"unapply");function ose(s){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return mE(s,t)}}h(ose,"unconstruct");function ut(s,e){IR&&IR(s,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var i=tc(n);i!==n&&(Zoe(e)||(e[t]=i),n=i)}s[n]=!0}return s}h(ut,"addToSet");function Kd(s){var e=ese(null),t=void 0;for(t in s)YC(Xoe,s,[t])&&(e[t]=s[t]);return e}h(Kd,"clone");function pv(s,e){for(;s!==null;){var t=Qoe(s,e);if(t){if(t.get)return dr(t.get);if(typeof t.value=="function")return dr(t.value)}s=Joe(s)}function n(i){return console.warn("fallback value for",i),null}return h(n,"fallbackValue"),n}h(pv,"lookupGetter");var RR=ro(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),KS=ro(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),US=ro(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sse=ro(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jS=ro(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),rse=ro(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),PR=ro(["#text"]),OR=ro(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),GS=ro(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),FR=ro(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mv=ro(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ase=Za(/\{\{[\s\S]*|[\s\S]*\}\}/gm),lse=Za(/<%[\s\S]*|[\s\S]*%>/gm),dse=Za(/^data-[\-\w.\u00B7-\uFFFF]/),cse=Za(/^aria-[\-\w]+$/),hse=Za(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),use=Za(/^(?:\w+script|data):/i),fse=Za(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function br(s){if(Array.isArray(s)){for(var e=0,t=Array(s.length);e<s.length;e++)t[e]=s[e];return t}else return Array.from(s)}h(br,"_toConsumableArray$1");var gse=h(function(){return typeof window>"u"?null:window},"getGlobal"),pse=h(function(e,t){if((typeof e>"u"?"undefined":Ap(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:h(function(a){return a},"createHTML")})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},"_createTrustedTypesPolicy");function yB(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gse(),e=h(function(q){return yB(q)},"DOMPurify");if(e.version="2.3.1",e.removed=[],!s||!s.document||s.document.nodeType!==9)return e.isSupported=!1,e;var t=s.document,n=s.document,i=s.DocumentFragment,o=s.HTMLTemplateElement,r=s.Node,a=s.Element,l=s.NodeFilter,d=s.NamedNodeMap,c=d===void 0?s.NamedNodeMap||s.MozNamedAttrMap:d,u=s.Text,f=s.Comment,g=s.DOMParser,m=s.trustedTypes,b=a.prototype,v=pv(b,"cloneNode"),C=pv(b,"nextSibling"),w=pv(b,"childNodes"),y=pv(b,"parentNode");if(typeof o=="function"){var S=n.createElement("template");S.content&&S.content.ownerDocument&&(n=S.content.ownerDocument)}var L=pse(m,t),E=L&&ru?L.createHTML(""):"",x=n,k=x.implementation,N=x.createNodeIterator,V=x.createDocumentFragment,F=x.getElementsByTagName,G=t.importNode,$={};try{$=Kd(n).documentMode?n.documentMode:{}}catch{}var ue={};e.isSupported=typeof y=="function"&&k&&typeof k.createHTMLDocument<"u"&&$!==9;var de=ase,ye=lse,Ee=dse,Le=cse,Fe=use,Ht=fse,yt=hse,me=null,pe=ut({},[].concat(br(RR),br(KS),br(US),br(jS),br(PR))),_t=null,ji=ut({},[].concat(br(OR),br(GS),br(FR),br(mv))),Ti=null,Ss=null,gr=!0,Wd=!0,pr=!1,Oe=!1,sl=!1,Hg=!1,zg=!1,rl=!1,su=!1,Rb=!0,ru=!1,Pb=!0,Y=!0,K=!1,U={},D=null,M=ut({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),B=null,O=ut({},["audio","video","img","source","image","track"]),Z=null,ie=ut({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Se="http://www.w3.org/1998/Math/MathML",ve="http://www.w3.org/2000/svg",We="http://www.w3.org/1999/xhtml",Ve=We,Nt=!1,rt=null,Te=n.createElement("form"),pn=h(function(q){rt&&rt===q||((!q||(typeof q>"u"?"undefined":Ap(q))!=="object")&&(q={}),q=Kd(q),me="ALLOWED_TAGS"in q?ut({},q.ALLOWED_TAGS):pe,_t="ALLOWED_ATTR"in q?ut({},q.ALLOWED_ATTR):ji,Z="ADD_URI_SAFE_ATTR"in q?ut(Kd(ie),q.ADD_URI_SAFE_ATTR):ie,B="ADD_DATA_URI_TAGS"in q?ut(Kd(O),q.ADD_DATA_URI_TAGS):O,D="FORBID_CONTENTS"in q?ut({},q.FORBID_CONTENTS):M,Ti="FORBID_TAGS"in q?ut({},q.FORBID_TAGS):{},Ss="FORBID_ATTR"in q?ut({},q.FORBID_ATTR):{},U="USE_PROFILES"in q?q.USE_PROFILES:!1,gr=q.ALLOW_ARIA_ATTR!==!1,Wd=q.ALLOW_DATA_ATTR!==!1,pr=q.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=q.SAFE_FOR_TEMPLATES||!1,sl=q.WHOLE_DOCUMENT||!1,rl=q.RETURN_DOM||!1,su=q.RETURN_DOM_FRAGMENT||!1,Rb=q.RETURN_DOM_IMPORT!==!1,ru=q.RETURN_TRUSTED_TYPE||!1,zg=q.FORCE_BODY||!1,Pb=q.SANITIZE_DOM!==!1,Y=q.KEEP_CONTENT!==!1,K=q.IN_PLACE||!1,yt=q.ALLOWED_URI_REGEXP||yt,Ve=q.NAMESPACE||We,Oe&&(Wd=!1),su&&(rl=!0),U&&(me=ut({},[].concat(br(PR))),_t=[],U.html===!0&&(ut(me,RR),ut(_t,OR)),U.svg===!0&&(ut(me,KS),ut(_t,GS),ut(_t,mv)),U.svgFilters===!0&&(ut(me,US),ut(_t,GS),ut(_t,mv)),U.mathMl===!0&&(ut(me,jS),ut(_t,FR),ut(_t,mv))),q.ADD_TAGS&&(me===pe&&(me=Kd(me)),ut(me,q.ADD_TAGS)),q.ADD_ATTR&&(_t===ji&&(_t=Kd(_t)),ut(_t,q.ADD_ATTR)),q.ADD_URI_SAFE_ATTR&&ut(Z,q.ADD_URI_SAFE_ATTR),q.FORBID_CONTENTS&&(D===M&&(D=Kd(D)),ut(D,q.FORBID_CONTENTS)),Y&&(me["#text"]=!0),sl&&ut(me,["html","head","body"]),me.table&&(ut(me,["tbody"]),delete Ti.tbody),ro&&ro(q),rt=q)},"_parseConfig"),Zt=ut({},["mi","mo","mn","ms","mtext"]),Mo=ut({},["foreignobject","desc","title","annotation-xml"]),Gt=ut({},KS);ut(Gt,US),ut(Gt,sse);var Mn=ut({},jS);ut(Mn,rse);var Vd=h(function(q){var _e=y(q);(!_e||!_e.tagName)&&(_e={namespaceURI:We,tagName:"template"});var Ae=tc(q.tagName),$t=tc(_e.tagName);if(q.namespaceURI===ve)return _e.namespaceURI===We?Ae==="svg":_e.namespaceURI===Se?Ae==="svg"&&($t==="annotation-xml"||Zt[$t]):Boolean(Gt[Ae]);if(q.namespaceURI===Se)return _e.namespaceURI===We?Ae==="math":_e.namespaceURI===ve?Ae==="math"&&Mo[$t]:Boolean(Mn[Ae]);if(q.namespaceURI===We){if(_e.namespaceURI===ve&&!Mo[$t]||_e.namespaceURI===Se&&!Zt[$t])return!1;var Li=ut({},["title","style","font","a","script"]);return!Mn[Ae]&&(Li[Ae]||!Gt[Ae])}return!1},"_checkValidNamespace"),ho=h(function(q){rp(e.removed,{element:q});try{q.parentNode.removeChild(q)}catch{try{q.outerHTML=E}catch{q.remove()}}},"_forceRemove"),xs=h(function(q,_e){try{rp(e.removed,{attribute:_e.getAttributeNode(q),from:_e})}catch{rp(e.removed,{attribute:null,from:_e})}if(_e.removeAttribute(q),q==="is"&&!_t[q])if(rl||su)try{ho(_e)}catch{}else try{_e.setAttribute(q,"")}catch{}},"_removeAttribute"),al=h(function(q){var _e=void 0,Ae=void 0;if(zg)q="<remove></remove>"+q;else{var $t=AR(q,/^[\r\n\t ]+/);Ae=$t&&$t[0]}var Li=L?L.createHTML(q):q;if(Ve===We)try{_e=new g().parseFromString(Li,"text/html")}catch{}if(!_e||!_e.documentElement){_e=k.createDocument(Ve,"template",null);try{_e.documentElement.innerHTML=Nt?"":Li}catch{}}var ki=_e.body||_e.documentElement;return q&&Ae&&ki.insertBefore(n.createTextNode(Ae),ki.childNodes[0]||null),Ve===We?F.call(_e,sl?"html":"body")[0]:sl?_e.documentElement:ki},"_initDocument"),ta=h(function(q){return N.call(q.ownerDocument||q,q,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},"_createIterator"),au=h(function(q){return q instanceof u||q instanceof f?!1:typeof q.nodeName!="string"||typeof q.textContent!="string"||typeof q.removeChild!="function"||!(q.attributes instanceof c)||typeof q.removeAttribute!="function"||typeof q.setAttribute!="function"||typeof q.namespaceURI!="string"||typeof q.insertBefore!="function"},"_isClobbered"),ll=h(function(q){return(typeof r>"u"?"undefined":Ap(r))==="object"?q instanceof r:q&&(typeof q>"u"?"undefined":Ap(q))==="object"&&typeof q.nodeType=="number"&&typeof q.nodeName=="string"},"_isNode"),Ts=h(function(q,_e,Ae){!ue[q]||tse(ue[q],function($t){$t.call(e,_e,Ae,rt)})},"_executeHook"),Kg=h(function(q){var _e=void 0;if(Ts("beforeSanitizeElements",q,null),au(q)||AR(q.nodeName,/[\u0080-\uFFFF]/))return ho(q),!0;var Ae=tc(q.nodeName);if(Ts("uponSanitizeElement",q,{tagName:Ae,allowedTags:me}),!ll(q.firstElementChild)&&(!ll(q.content)||!ll(q.content.firstElementChild))&&da(/<[/\w]/g,q.innerHTML)&&da(/<[/\w]/g,q.textContent)||Ae==="select"&&da(/<template/i,q.innerHTML))return ho(q),!0;if(!me[Ae]||Ti[Ae]){if(Y&&!D[Ae]){var $t=y(q)||q.parentNode,Li=w(q)||q.childNodes;if(Li&&$t)for(var ki=Li.length,Ei=ki-1;Ei>=0;--Ei)$t.insertBefore(v(Li[Ei],!0),C(q))}return ho(q),!0}return q instanceof a&&!Vd(q)||(Ae==="noscript"||Ae==="noembed")&&da(/<\/no(script|embed)/i,q.innerHTML)?(ho(q),!0):(Oe&&q.nodeType===3&&(_e=q.textContent,_e=pl(_e,de," "),_e=pl(_e,ye," "),q.textContent!==_e&&(rp(e.removed,{element:q.cloneNode()}),q.textContent=_e)),Ts("afterSanitizeElements",q,null),!1)},"_sanitizeElements"),Ob=h(function(q,_e,Ae){if(Pb&&(_e==="id"||_e==="name")&&(Ae in n||Ae in Te))return!1;if(!(Wd&&!Ss[_e]&&da(Ee,_e))){if(!(gr&&da(Le,_e))){if(!_t[_e]||Ss[_e])return!1;if(!Z[_e]){if(!da(yt,pl(Ae,Ht,""))){if(!((_e==="src"||_e==="xlink:href"||_e==="href")&&q!=="script"&&nse(Ae,"data:")===0&&B[q])){if(!(pr&&!da(Fe,pl(Ae,Ht,"")))){if(Ae)return!1}}}}}}return!0},"_isValidAttribute"),zA=h(function(q){var _e=void 0,Ae=void 0,$t=void 0,Li=void 0;Ts("beforeSanitizeAttributes",q,null);var ki=q.attributes;if(!!ki){var Ei={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_t};for(Li=ki.length;Li--;){_e=ki[Li];var na=_e,Ug=na.name,KA=na.namespaceURI;if(Ae=ise(_e.value),$t=tc(Ug),Ei.attrName=$t,Ei.attrValue=Ae,Ei.keepAttr=!0,Ei.forceKeepAttr=void 0,Ts("uponSanitizeAttribute",q,Ei),Ae=Ei.attrValue,!Ei.forceKeepAttr&&(xs(Ug,q),!!Ei.keepAttr)){if(da(/\/>/i,Ae)){xs(Ug,q);continue}Oe&&(Ae=pl(Ae,de," "),Ae=pl(Ae,ye," "));var QU=q.nodeName.toLowerCase();if(!!Ob(QU,$t,Ae))try{KA?q.setAttributeNS(KA,Ug,Ae):q.setAttribute(Ug,Ae),NR(e.removed)}catch{}}}Ts("afterSanitizeAttributes",q,null)}},"_sanitizeAttributes"),JU=h(function ze(q){var _e=void 0,Ae=ta(q);for(Ts("beforeSanitizeShadowDOM",q,null);_e=Ae.nextNode();)Ts("uponSanitizeShadowNode",_e,null),!Kg(_e)&&(_e.content instanceof i&&ze(_e.content),zA(_e));Ts("afterSanitizeShadowDOM",q,null)},"_sanitizeShadowDOM");return e.sanitize=function(ze,q){var _e=void 0,Ae=void 0,$t=void 0,Li=void 0,ki=void 0;if(Nt=!ze,Nt&&(ze="<!-->"),typeof ze!="string"&&!ll(ze)){if(typeof ze.toString!="function")throw MR("toString is not a function");if(ze=ze.toString(),typeof ze!="string")throw MR("dirty is not a string, aborting")}if(!e.isSupported){if(Ap(s.toStaticHTML)==="object"||typeof s.toStaticHTML=="function"){if(typeof ze=="string")return s.toStaticHTML(ze);if(ll(ze))return s.toStaticHTML(ze.outerHTML)}return ze}if(Hg||pn(q),e.removed=[],typeof ze=="string"&&(K=!1),!K)if(ze instanceof r)_e=al("<!---->"),Ae=_e.ownerDocument.importNode(ze,!0),Ae.nodeType===1&&Ae.nodeName==="BODY"||Ae.nodeName==="HTML"?_e=Ae:_e.appendChild(Ae);else{if(!rl&&!Oe&&!sl&&ze.indexOf("<")===-1)return L&&ru?L.createHTML(ze):ze;if(_e=al(ze),!_e)return rl?null:E}_e&&zg&&ho(_e.firstChild);for(var Ei=ta(K?ze:_e);$t=Ei.nextNode();)$t.nodeType===3&&$t===Li||Kg($t)||($t.content instanceof i&&JU($t.content),zA($t),Li=$t);if(Li=null,K)return ze;if(rl){if(su)for(ki=V.call(_e.ownerDocument);_e.firstChild;)ki.appendChild(_e.firstChild);else ki=_e;return Rb&&(ki=G.call(t,ki,!0)),ki}var na=sl?_e.outerHTML:_e.innerHTML;return Oe&&(na=pl(na,de," "),na=pl(na,ye," ")),L&&ru?L.createHTML(na):na},e.setConfig=function(ze){pn(ze),Hg=!0},e.clearConfig=function(){rt=null,Hg=!1},e.isValidAttribute=function(ze,q,_e){rt||pn({});var Ae=tc(ze),$t=tc(q);return Ob(Ae,$t,_e)},e.addHook=function(ze,q){typeof q=="function"&&(ue[ze]=ue[ze]||[],rp(ue[ze],q))},e.removeHook=function(ze){ue[ze]&&NR(ue[ze])},e.removeHooks=function(ze){ue[ze]&&(ue[ze]=[])},e.removeAllHooks=function(){ue={}},e}h(yB,"createDOMPurify");var ea=yB();ea.version;ea.isSupported;const mse=ea.sanitize;ea.setConfig;ea.clearConfig;ea.isValidAttribute;const WR=ea.addHook,VR=ea.removeHook;ea.removeHooks;ea.removeAllHooks;let SB={};(function(){function s(e,t){t(SB)}h(s,"define"),s.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof s=="function"&&s.amd?s(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(Y,K){for(var U=0;U<K.length;U++){var D=K[U];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(Y,D.key,D)}}h(t,"_defineProperties");function n(Y,K,U){return K&&t(Y.prototype,K),U&&t(Y,U),Object.defineProperty(Y,"prototype",{writable:!1}),Y}h(n,"_createClass");function i(Y,K){if(!!Y){if(typeof Y=="string")return o(Y,K);var U=Object.prototype.toString.call(Y).slice(8,-1);if(U==="Object"&&Y.constructor&&(U=Y.constructor.name),U==="Map"||U==="Set")return Array.from(Y);if(U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return o(Y,K)}}h(i,"_unsupportedIterableToArray");function o(Y,K){(K==null||K>Y.length)&&(K=Y.length);for(var U=0,D=new Array(K);U<K;U++)D[U]=Y[U];return D}h(o,"_arrayLikeToArray");function r(Y,K){var U=typeof Symbol<"u"&&Y[Symbol.iterator]||Y["@@iterator"];if(U)return(U=U.call(Y)).next.bind(U);if(Array.isArray(Y)||(U=i(Y))||K&&Y&&typeof Y.length=="number"){U&&(Y=U);var D=0;return function(){return D>=Y.length?{done:!0}:{done:!1,value:Y[D++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}h(r,"_createForOfIteratorHelperLoose");function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}h(a,"getDefaults"),e.defaults=a();function l(Y){e.defaults=Y}h(l,"changeDefaults");var d=/[&<>"']/,c=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,f=/[<>"']|&(?!#?\w+;)/g,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},m=h(function(K){return g[K]},"getEscapeReplacement");function b(Y,K){if(K){if(d.test(Y))return Y.replace(c,m)}else if(u.test(Y))return Y.replace(f,m);return Y}h(b,"escape");var v=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function C(Y){return Y.replace(v,function(K,U){return U=U.toLowerCase(),U==="colon"?":":U.charAt(0)==="#"?U.charAt(1)==="x"?String.fromCharCode(parseInt(U.substring(2),16)):String.fromCharCode(+U.substring(1)):""})}h(C,"unescape");var w=/(^|[^\[])\^/g;function y(Y,K){Y=Y.source||Y,K=K||"";var U={replace:h(function(M,B){return B=B.source||B,B=B.replace(w,"$1"),Y=Y.replace(M,B),U},"replace"),getRegex:h(function(){return new RegExp(Y,K)},"getRegex")};return U}h(y,"edit");var S=/[^\w:]/g,L=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function E(Y,K,U){if(Y){var D;try{D=decodeURIComponent(C(U)).replace(S,"").toLowerCase()}catch{return null}if(D.indexOf("javascript:")===0||D.indexOf("vbscript:")===0||D.indexOf("data:")===0)return null}K&&!L.test(U)&&(U=F(K,U));try{U=encodeURI(U).replace(/%25/g,"%")}catch{return null}return U}h(E,"cleanUrl");var x={},k=/^[^:]+:\/*[^/]*$/,N=/^([^:]+:)[\s\S]*$/,V=/^([^:]+:\/*[^/]*)[\s\S]*$/;function F(Y,K){x[" "+Y]||(k.test(Y)?x[" "+Y]=Y+"/":x[" "+Y]=de(Y,"/",!0)),Y=x[" "+Y];var U=Y.indexOf(":")===-1;return K.substring(0,2)==="//"?U?K:Y.replace(N,"$1")+K:K.charAt(0)==="/"?U?K:Y.replace(V,"$1")+K:Y+K}h(F,"resolveUrl");var G={exec:h(function(){},"noopTest")};function $(Y){for(var K=1,U,D;K<arguments.length;K++){U=arguments[K];for(D in U)Object.prototype.hasOwnProperty.call(U,D)&&(Y[D]=U[D])}return Y}h($,"merge");function ue(Y,K){var U=Y.replace(/\|/g,function(B,O,Z){for(var ie=!1,Se=O;--Se>=0&&Z[Se]==="\\";)ie=!ie;return ie?"|":" |"}),D=U.split(/ \|/),M=0;if(D[0].trim()||D.shift(),D[D.length-1].trim()||D.pop(),D.length>K)D.splice(K);else for(;D.length<K;)D.push("");for(;M<D.length;M++)D[M]=D[M].trim().replace(/\\\|/g,"|");return D}h(ue,"splitCells");function de(Y,K,U){var D=Y.length;if(D===0)return"";for(var M=0;M<D;){var B=Y.charAt(D-M-1);if(B===K&&!U)M++;else if(B!==K&&U)M++;else break}return Y.substr(0,D-M)}h(de,"rtrim");function ye(Y,K){if(Y.indexOf(K[1])===-1)return-1;for(var U=Y.length,D=0,M=0;M<U;M++)if(Y[M]==="\\")M++;else if(Y[M]===K[0])D++;else if(Y[M]===K[1]&&(D--,D<0))return M;return-1}h(ye,"findClosingBracket");function Ee(Y){Y&&Y.sanitize&&!Y.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}h(Ee,"checkSanitizeDeprecation");function Le(Y,K){if(K<1)return"";for(var U="";K>1;)K&1&&(U+=Y),K>>=1,Y+=Y;return U+Y}h(Le,"repeatString");function Fe(Y,K,U,D){var M=K.href,B=K.title?b(K.title):null,O=Y[1].replace(/\\([\[\]])/g,"$1");if(Y[0].charAt(0)!=="!"){D.state.inLink=!0;var Z={type:"link",raw:U,href:M,title:B,text:O,tokens:D.inlineTokens(O,[])};return D.state.inLink=!1,Z}else return{type:"image",raw:U,href:M,title:B,text:b(O)}}h(Fe,"outputLink");function Ht(Y,K){var U=Y.match(/^(\s+)(?:```)/);if(U===null)return K;var D=U[1];return K.split(`
`).map(function(M){var B=M.match(/^\s+/);if(B===null)return M;var O=B[0];return O.length>=D.length?M.slice(D.length):M}).join(`
`)}h(Ht,"indentCodeCompensation");var yt=function(){function Y(U){this.options=U||e.defaults}h(Y,"Tokenizer");var K=Y.prototype;return K.space=h(function(D){var M=this.rules.block.newline.exec(D);if(M&&M[0].length>0)return{type:"space",raw:M[0]}},"space"),K.code=h(function(D){var M=this.rules.block.code.exec(D);if(M){var B=M[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:M[0],codeBlockStyle:"indented",text:this.options.pedantic?B:de(B,`
`)}}},"code"),K.fences=h(function(D){var M=this.rules.block.fences.exec(D);if(M){var B=M[0],O=Ht(B,M[3]||"");return{type:"code",raw:B,lang:M[2]?M[2].trim():M[2],text:O}}},"fences"),K.heading=h(function(D){var M=this.rules.block.heading.exec(D);if(M){var B=M[2].trim();if(/#$/.test(B)){var O=de(B,"#");(this.options.pedantic||!O||/ $/.test(O))&&(B=O.trim())}var Z={type:"heading",raw:M[0],depth:M[1].length,text:B,tokens:[]};return this.lexer.inline(Z.text,Z.tokens),Z}},"heading"),K.hr=h(function(D){var M=this.rules.block.hr.exec(D);if(M)return{type:"hr",raw:M[0]}},"hr"),K.blockquote=h(function(D){var M=this.rules.block.blockquote.exec(D);if(M){var B=M[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:M[0],tokens:this.lexer.blockTokens(B,[]),text:B}}},"blockquote"),K.list=h(function(D){var M=this.rules.block.list.exec(D);if(M){var B,O,Z,ie,Se,ve,We,Ve,Nt,rt,Te,pn,Zt=M[1].trim(),Mo=Zt.length>1,Gt={type:"list",raw:"",ordered:Mo,start:Mo?+Zt.slice(0,-1):"",loose:!1,items:[]};Zt=Mo?"\\d{1,9}\\"+Zt.slice(-1):"\\"+Zt,this.options.pedantic&&(Zt=Mo?Zt:"[*+-]");for(var Mn=new RegExp("^( {0,3}"+Zt+")((?: [^\\n]*)?(?:\\n|$))");D&&(pn=!1,!(!(M=Mn.exec(D))||this.rules.block.hr.test(D)));){if(B=M[0],D=D.substring(B.length),Ve=M[2].split(`
`,1)[0],Nt=D.split(`
`,1)[0],this.options.pedantic?(ie=2,Te=Ve.trimLeft()):(ie=M[2].search(/[^ ]/),ie=ie>4?1:ie,Te=Ve.slice(ie),ie+=M[1].length),ve=!1,!Ve&&/^ *$/.test(Nt)&&(B+=Nt+`
`,D=D.substring(Nt.length+1),pn=!0),!pn)for(var Vd=new RegExp("^ {0,"+Math.min(3,ie-1)+"}(?:[*+-]|\\d{1,9}[.)])");D&&(rt=D.split(`
`,1)[0],Ve=rt,this.options.pedantic&&(Ve=Ve.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Vd.test(Ve));){if(Ve.search(/[^ ]/)>=ie||!Ve.trim())Te+=`
`+Ve.slice(ie);else if(!ve)Te+=`
`+Ve;else break;!ve&&!Ve.trim()&&(ve=!0),B+=rt+`
`,D=D.substring(rt.length+1)}Gt.loose||(We?Gt.loose=!0:/\n *\n *$/.test(B)&&(We=!0)),this.options.gfm&&(O=/^\[[ xX]\] /.exec(Te),O&&(Z=O[0]!=="[ ] ",Te=Te.replace(/^\[[ xX]\] +/,""))),Gt.items.push({type:"list_item",raw:B,task:!!O,checked:Z,loose:!1,text:Te}),Gt.raw+=B}Gt.items[Gt.items.length-1].raw=B.trimRight(),Gt.items[Gt.items.length-1].text=Te.trimRight(),Gt.raw=Gt.raw.trimRight();var ho=Gt.items.length;for(Se=0;Se<ho;Se++){this.lexer.state.top=!1,Gt.items[Se].tokens=this.lexer.blockTokens(Gt.items[Se].text,[]);var xs=Gt.items[Se].tokens.filter(function(ta){return ta.type==="space"}),al=xs.every(function(ta){for(var au=ta.raw.split(""),ll=0,Ts=r(au),Kg;!(Kg=Ts()).done;){var Ob=Kg.value;if(Ob===`
`&&(ll+=1),ll>1)return!0}return!1});!Gt.loose&&xs.length&&al&&(Gt.loose=!0,Gt.items[Se].loose=!0)}return Gt}},"list"),K.html=h(function(D){var M=this.rules.block.html.exec(D);if(M){var B={type:"html",raw:M[0],pre:!this.options.sanitizer&&(M[1]==="pre"||M[1]==="script"||M[1]==="style"),text:M[0]};return this.options.sanitize&&(B.type="paragraph",B.text=this.options.sanitizer?this.options.sanitizer(M[0]):b(M[0]),B.tokens=[],this.lexer.inline(B.text,B.tokens)),B}},"html"),K.def=h(function(D){var M=this.rules.block.def.exec(D);if(M){M[3]&&(M[3]=M[3].substring(1,M[3].length-1));var B=M[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:B,raw:M[0],href:M[2],title:M[3]}}},"def"),K.table=h(function(D){var M=this.rules.block.table.exec(D);if(M){var B={type:"table",header:ue(M[1]).map(function(We){return{text:We}}),align:M[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:M[3]?M[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(B.header.length===B.align.length){B.raw=M[0];var O=B.align.length,Z,ie,Se,ve;for(Z=0;Z<O;Z++)/^ *-+: *$/.test(B.align[Z])?B.align[Z]="right":/^ *:-+: *$/.test(B.align[Z])?B.align[Z]="center":/^ *:-+ *$/.test(B.align[Z])?B.align[Z]="left":B.align[Z]=null;for(O=B.rows.length,Z=0;Z<O;Z++)B.rows[Z]=ue(B.rows[Z],B.header.length).map(function(We){return{text:We}});for(O=B.header.length,ie=0;ie<O;ie++)B.header[ie].tokens=[],this.lexer.inlineTokens(B.header[ie].text,B.header[ie].tokens);for(O=B.rows.length,ie=0;ie<O;ie++)for(ve=B.rows[ie],Se=0;Se<ve.length;Se++)ve[Se].tokens=[],this.lexer.inlineTokens(ve[Se].text,ve[Se].tokens);return B}}},"table"),K.lheading=h(function(D){var M=this.rules.block.lheading.exec(D);if(M){var B={type:"heading",raw:M[0],depth:M[2].charAt(0)==="="?1:2,text:M[1],tokens:[]};return this.lexer.inline(B.text,B.tokens),B}},"lheading"),K.paragraph=h(function(D){var M=this.rules.block.paragraph.exec(D);if(M){var B={type:"paragraph",raw:M[0],text:M[1].charAt(M[1].length-1)===`
`?M[1].slice(0,-1):M[1],tokens:[]};return this.lexer.inline(B.text,B.tokens),B}},"paragraph"),K.text=h(function(D){var M=this.rules.block.text.exec(D);if(M){var B={type:"text",raw:M[0],text:M[0],tokens:[]};return this.lexer.inline(B.text,B.tokens),B}},"text"),K.escape=h(function(D){var M=this.rules.inline.escape.exec(D);if(M)return{type:"escape",raw:M[0],text:b(M[1])}},"escape$1"),K.tag=h(function(D){var M=this.rules.inline.tag.exec(D);if(M)return!this.lexer.state.inLink&&/^<a /i.test(M[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(M[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(M[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(M[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:M[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(M[0]):b(M[0]):M[0]}},"tag"),K.link=h(function(D){var M=this.rules.inline.link.exec(D);if(M){var B=M[2].trim();if(!this.options.pedantic&&/^</.test(B)){if(!/>$/.test(B))return;var O=de(B.slice(0,-1),"\\");if((B.length-O.length)%2===0)return}else{var Z=ye(M[2],"()");if(Z>-1){var ie=M[0].indexOf("!")===0?5:4,Se=ie+M[1].length+Z;M[2]=M[2].substring(0,Z),M[0]=M[0].substring(0,Se).trim(),M[3]=""}}var ve=M[2],We="";if(this.options.pedantic){var Ve=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ve);Ve&&(ve=Ve[1],We=Ve[3])}else We=M[3]?M[3].slice(1,-1):"";return ve=ve.trim(),/^</.test(ve)&&(this.options.pedantic&&!/>$/.test(B)?ve=ve.slice(1):ve=ve.slice(1,-1)),Fe(M,{href:ve&&ve.replace(this.rules.inline._escapes,"$1"),title:We&&We.replace(this.rules.inline._escapes,"$1")},M[0],this.lexer)}},"link"),K.reflink=h(function(D,M){var B;if((B=this.rules.inline.reflink.exec(D))||(B=this.rules.inline.nolink.exec(D))){var O=(B[2]||B[1]).replace(/\s+/g," ");if(O=M[O.toLowerCase()],!O||!O.href){var Z=B[0].charAt(0);return{type:"text",raw:Z,text:Z}}return Fe(B,O,B[0],this.lexer)}},"reflink"),K.emStrong=h(function(D,M,B){B===void 0&&(B="");var O=this.rules.inline.emStrong.lDelim.exec(D);if(!!O&&!(O[3]&&B.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Z=O[1]||O[2]||"";if(!Z||Z&&(B===""||this.rules.inline.punctuation.exec(B))){var ie=O[0].length-1,Se,ve,We=ie,Ve=0,Nt=O[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Nt.lastIndex=0,M=M.slice(-1*D.length+ie);(O=Nt.exec(M))!=null;)if(Se=O[1]||O[2]||O[3]||O[4]||O[5]||O[6],!!Se){if(ve=Se.length,O[3]||O[4]){We+=ve;continue}else if((O[5]||O[6])&&ie%3&&!((ie+ve)%3)){Ve+=ve;continue}if(We-=ve,!(We>0)){if(ve=Math.min(ve,ve+We+Ve),Math.min(ie,ve)%2){var rt=D.slice(1,ie+O.index+ve);return{type:"em",raw:D.slice(0,ie+O.index+ve+1),text:rt,tokens:this.lexer.inlineTokens(rt,[])}}var Te=D.slice(2,ie+O.index+ve-1);return{type:"strong",raw:D.slice(0,ie+O.index+ve+1),text:Te,tokens:this.lexer.inlineTokens(Te,[])}}}}}},"emStrong"),K.codespan=h(function(D){var M=this.rules.inline.code.exec(D);if(M){var B=M[2].replace(/\n/g," "),O=/[^ ]/.test(B),Z=/^ /.test(B)&&/ $/.test(B);return O&&Z&&(B=B.substring(1,B.length-1)),B=b(B,!0),{type:"codespan",raw:M[0],text:B}}},"codespan"),K.br=h(function(D){var M=this.rules.inline.br.exec(D);if(M)return{type:"br",raw:M[0]}},"br"),K.del=h(function(D){var M=this.rules.inline.del.exec(D);if(M)return{type:"del",raw:M[0],text:M[2],tokens:this.lexer.inlineTokens(M[2],[])}},"del"),K.autolink=h(function(D,M){var B=this.rules.inline.autolink.exec(D);if(B){var O,Z;return B[2]==="@"?(O=b(this.options.mangle?M(B[1]):B[1]),Z="mailto:"+O):(O=b(B[1]),Z=O),{type:"link",raw:B[0],text:O,href:Z,tokens:[{type:"text",raw:O,text:O}]}}},"autolink"),K.url=h(function(D,M){var B;if(B=this.rules.inline.url.exec(D)){var O,Z;if(B[2]==="@")O=b(this.options.mangle?M(B[0]):B[0]),Z="mailto:"+O;else{var ie;do ie=B[0],B[0]=this.rules.inline._backpedal.exec(B[0])[0];while(ie!==B[0]);O=b(B[0]),B[1]==="www."?Z="http://"+O:Z=O}return{type:"link",raw:B[0],text:O,href:Z,tokens:[{type:"text",raw:O,text:O}]}}},"url"),K.inlineText=h(function(D,M){var B=this.rules.inline.text.exec(D);if(B){var O;return this.lexer.state.inRawBlock?O=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(B[0]):b(B[0]):B[0]:O=b(this.options.smartypants?M(B[0]):B[0]),{type:"text",raw:B[0],text:O}}},"inlineText"),Y}(),me={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:G,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};me._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,me._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,me.def=y(me.def).replace("label",me._label).replace("title",me._title).getRegex(),me.bullet=/(?:[*+-]|\d{1,9}[.)])/,me.listItemStart=y(/^( *)(bull) */).replace("bull",me.bullet).getRegex(),me.list=y(me.list).replace(/bull/g,me.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+me.def.source+")").getRegex(),me._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",me._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,me.html=y(me.html,"i").replace("comment",me._comment).replace("tag",me._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),me.paragraph=y(me._paragraph).replace("hr",me.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me._tag).getRegex(),me.blockquote=y(me.blockquote).replace("paragraph",me.paragraph).getRegex(),me.normal=$({},me),me.gfm=$({},me.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),me.gfm.table=y(me.gfm.table).replace("hr",me.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me._tag).getRegex(),me.gfm.paragraph=y(me._paragraph).replace("hr",me.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",me.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me._tag).getRegex(),me.pedantic=$({},me.normal,{html:y(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",me._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:G,paragraph:y(me.normal._paragraph).replace("hr",me.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",me.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var pe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:G,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:G,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};pe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",pe.punctuation=y(pe.punctuation).replace(/punctuation/g,pe._punctuation).getRegex(),pe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,pe.escapedEmSt=/\\\*|\\_/g,pe._comment=y(me._comment).replace("(?:-->|$)","-->").getRegex(),pe.emStrong.lDelim=y(pe.emStrong.lDelim).replace(/punct/g,pe._punctuation).getRegex(),pe.emStrong.rDelimAst=y(pe.emStrong.rDelimAst,"g").replace(/punct/g,pe._punctuation).getRegex(),pe.emStrong.rDelimUnd=y(pe.emStrong.rDelimUnd,"g").replace(/punct/g,pe._punctuation).getRegex(),pe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,pe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,pe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,pe.autolink=y(pe.autolink).replace("scheme",pe._scheme).replace("email",pe._email).getRegex(),pe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,pe.tag=y(pe.tag).replace("comment",pe._comment).replace("attribute",pe._attribute).getRegex(),pe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,pe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,pe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,pe.link=y(pe.link).replace("label",pe._label).replace("href",pe._href).replace("title",pe._title).getRegex(),pe.reflink=y(pe.reflink).replace("label",pe._label).replace("ref",me._label).getRegex(),pe.nolink=y(pe.nolink).replace("ref",me._label).getRegex(),pe.reflinkSearch=y(pe.reflinkSearch,"g").replace("reflink",pe.reflink).replace("nolink",pe.nolink).getRegex(),pe.normal=$({},pe),pe.pedantic=$({},pe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",pe._label).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",pe._label).getRegex()}),pe.gfm=$({},pe.normal,{escape:y(pe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),pe.gfm.url=y(pe.gfm.url,"i").replace("email",pe.gfm._extended_email).getRegex(),pe.breaks=$({},pe.gfm,{br:y(pe.br).replace("{2,}","*").getRegex(),text:y(pe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function _t(Y){return Y.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}h(_t,"smartypants");function ji(Y){var K="",U,D,M=Y.length;for(U=0;U<M;U++)D=Y.charCodeAt(U),Math.random()>.5&&(D="x"+D.toString(16)),K+="&#"+D+";";return K}h(ji,"mangle");var Ti=function(){function Y(U){this.tokens=[],this.tokens.links=Object.create(null),this.options=U||e.defaults,this.options.tokenizer=this.options.tokenizer||new yt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var D={block:me.normal,inline:pe.normal};this.options.pedantic?(D.block=me.pedantic,D.inline=pe.pedantic):this.options.gfm&&(D.block=me.gfm,this.options.breaks?D.inline=pe.breaks:D.inline=pe.gfm),this.tokenizer.rules=D}h(Y,"Lexer"),Y.lex=h(function(D,M){var B=new Y(M);return B.lex(D)},"lex"),Y.lexInline=h(function(D,M){var B=new Y(M);return B.inlineTokens(D)},"lexInline");var K=Y.prototype;return K.lex=h(function(D){D=D.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(D,this.tokens);for(var M;M=this.inlineQueue.shift();)this.inlineTokens(M.src,M.tokens);return this.tokens},"lex"),K.blockTokens=h(function(D,M){var B=this;M===void 0&&(M=[]),this.options.pedantic&&(D=D.replace(/^ +$/gm,""));for(var O,Z,ie,Se;D;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(We){return(O=We.call({lexer:B},D,M))?(D=D.substring(O.raw.length),M.push(O),!0):!1}))){if(O=this.tokenizer.space(D)){D=D.substring(O.raw.length),O.raw.length===1&&M.length>0?M[M.length-1].raw+=`
`:M.push(O);continue}if(O=this.tokenizer.code(D)){D=D.substring(O.raw.length),Z=M[M.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.text,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):M.push(O);continue}if(O=this.tokenizer.fences(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.heading(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.hr(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.blockquote(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.list(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.html(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.def(D)){D=D.substring(O.raw.length),Z=M[M.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.raw,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):this.tokens.links[O.tag]||(this.tokens.links[O.tag]={href:O.href,title:O.title});continue}if(O=this.tokenizer.table(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.lheading(D)){D=D.substring(O.raw.length),M.push(O);continue}if(ie=D,this.options.extensions&&this.options.extensions.startBlock&&function(){var We=1/0,Ve=D.slice(1),Nt=void 0;B.options.extensions.startBlock.forEach(function(rt){Nt=rt.call({lexer:this},Ve),typeof Nt=="number"&&Nt>=0&&(We=Math.min(We,Nt))}),We<1/0&&We>=0&&(ie=D.substring(0,We+1))}(),this.state.top&&(O=this.tokenizer.paragraph(ie))){Z=M[M.length-1],Se&&Z.type==="paragraph"?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):M.push(O),Se=ie.length!==D.length,D=D.substring(O.raw.length);continue}if(O=this.tokenizer.text(D)){D=D.substring(O.raw.length),Z=M[M.length-1],Z&&Z.type==="text"?(Z.raw+=`
`+O.raw,Z.text+=`
`+O.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):M.push(O);continue}if(D){var ve="Infinite loop on byte: "+D.charCodeAt(0);if(this.options.silent){console.error(ve);break}else throw new Error(ve)}}return this.state.top=!0,M},"blockTokens"),K.inline=h(function(D,M){this.inlineQueue.push({src:D,tokens:M})},"inline"),K.inlineTokens=h(function(D,M){var B=this;M===void 0&&(M=[]);var O,Z,ie,Se=D,ve,We,Ve;if(this.tokens.links){var Nt=Object.keys(this.tokens.links);if(Nt.length>0)for(;(ve=this.tokenizer.rules.inline.reflinkSearch.exec(Se))!=null;)Nt.includes(ve[0].slice(ve[0].lastIndexOf("[")+1,-1))&&(Se=Se.slice(0,ve.index)+"["+Le("a",ve[0].length-2)+"]"+Se.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ve=this.tokenizer.rules.inline.blockSkip.exec(Se))!=null;)Se=Se.slice(0,ve.index)+"["+Le("a",ve[0].length-2)+"]"+Se.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ve=this.tokenizer.rules.inline.escapedEmSt.exec(Se))!=null;)Se=Se.slice(0,ve.index)+"++"+Se.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;D;)if(We||(Ve=""),We=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Te){return(O=Te.call({lexer:B},D,M))?(D=D.substring(O.raw.length),M.push(O),!0):!1}))){if(O=this.tokenizer.escape(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.tag(D)){D=D.substring(O.raw.length),Z=M[M.length-1],Z&&O.type==="text"&&Z.type==="text"?(Z.raw+=O.raw,Z.text+=O.text):M.push(O);continue}if(O=this.tokenizer.link(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.reflink(D,this.tokens.links)){D=D.substring(O.raw.length),Z=M[M.length-1],Z&&O.type==="text"&&Z.type==="text"?(Z.raw+=O.raw,Z.text+=O.text):M.push(O);continue}if(O=this.tokenizer.emStrong(D,Se,Ve)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.codespan(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.br(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.del(D)){D=D.substring(O.raw.length),M.push(O);continue}if(O=this.tokenizer.autolink(D,ji)){D=D.substring(O.raw.length),M.push(O);continue}if(!this.state.inLink&&(O=this.tokenizer.url(D,ji))){D=D.substring(O.raw.length),M.push(O);continue}if(ie=D,this.options.extensions&&this.options.extensions.startInline&&function(){var Te=1/0,pn=D.slice(1),Zt=void 0;B.options.extensions.startInline.forEach(function(Mo){Zt=Mo.call({lexer:this},pn),typeof Zt=="number"&&Zt>=0&&(Te=Math.min(Te,Zt))}),Te<1/0&&Te>=0&&(ie=D.substring(0,Te+1))}(),O=this.tokenizer.inlineText(ie,_t)){D=D.substring(O.raw.length),O.raw.slice(-1)!=="_"&&(Ve=O.raw.slice(-1)),We=!0,Z=M[M.length-1],Z&&Z.type==="text"?(Z.raw+=O.raw,Z.text+=O.text):M.push(O);continue}if(D){var rt="Infinite loop on byte: "+D.charCodeAt(0);if(this.options.silent){console.error(rt);break}else throw new Error(rt)}}return M},"inlineTokens"),n(Y,null,[{key:"rules",get:h(function(){return{block:me,inline:pe}},"get")}]),Y}(),Ss=function(){function Y(U){this.options=U||e.defaults}h(Y,"Renderer");var K=Y.prototype;return K.code=h(function(D,M,B){var O=(M||"").match(/\S*/)[0];if(this.options.highlight){var Z=this.options.highlight(D,O);Z!=null&&Z!==D&&(B=!0,D=Z)}return D=D.replace(/\n$/,"")+`
`,O?'<pre><code class="'+this.options.langPrefix+b(O,!0)+'">'+(B?D:b(D,!0))+`</code></pre>
`:"<pre><code>"+(B?D:b(D,!0))+`</code></pre>
`},"code"),K.blockquote=h(function(D){return`<blockquote>
`+D+`</blockquote>
`},"blockquote"),K.html=h(function(D){return D},"html"),K.heading=h(function(D,M,B,O){return this.options.headerIds?"<h"+M+' id="'+this.options.headerPrefix+O.slug(B)+'">'+D+"</h"+M+`>
`:"<h"+M+">"+D+"</h"+M+`>
`},"heading"),K.hr=h(function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},"hr"),K.list=h(function(D,M,B){var O=M?"ol":"ul",Z=M&&B!==1?' start="'+B+'"':"";return"<"+O+Z+`>
`+D+"</"+O+`>
`},"list"),K.listitem=h(function(D){return"<li>"+D+`</li>
`},"listitem"),K.checkbox=h(function(D){return"<input "+(D?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},"checkbox"),K.paragraph=h(function(D){return"<p>"+D+`</p>
`},"paragraph"),K.table=h(function(D,M){return M&&(M="<tbody>"+M+"</tbody>"),`<table>
<thead>
`+D+`</thead>
`+M+`</table>
`},"table"),K.tablerow=h(function(D){return`<tr>
`+D+`</tr>
`},"tablerow"),K.tablecell=h(function(D,M){var B=M.header?"th":"td",O=M.align?"<"+B+' align="'+M.align+'">':"<"+B+">";return O+D+"</"+B+`>
`},"tablecell"),K.strong=h(function(D){return"<strong>"+D+"</strong>"},"strong"),K.em=h(function(D){return"<em>"+D+"</em>"},"em"),K.codespan=h(function(D){return"<code>"+D+"</code>"},"codespan"),K.br=h(function(){return this.options.xhtml?"<br/>":"<br>"},"br"),K.del=h(function(D){return"<del>"+D+"</del>"},"del"),K.link=h(function(D,M,B){if(D=E(this.options.sanitize,this.options.baseUrl,D),D===null)return B;var O='<a href="'+b(D)+'"';return M&&(O+=' title="'+M+'"'),O+=">"+B+"</a>",O},"link"),K.image=h(function(D,M,B){if(D=E(this.options.sanitize,this.options.baseUrl,D),D===null)return B;var O='<img src="'+D+'" alt="'+B+'"';return M&&(O+=' title="'+M+'"'),O+=this.options.xhtml?"/>":">",O},"image"),K.text=h(function(D){return D},"text"),Y}(),gr=function(){function Y(){}h(Y,"TextRenderer");var K=Y.prototype;return K.strong=h(function(D){return D},"strong"),K.em=h(function(D){return D},"em"),K.codespan=h(function(D){return D},"codespan"),K.del=h(function(D){return D},"del"),K.html=h(function(D){return D},"html"),K.text=h(function(D){return D},"text"),K.link=h(function(D,M,B){return""+B},"link"),K.image=h(function(D,M,B){return""+B},"image"),K.br=h(function(){return""},"br"),Y}(),Wd=function(){function Y(){this.seen={}}h(Y,"Slugger");var K=Y.prototype;return K.serialize=h(function(D){return D.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},"serialize"),K.getNextSafeSlug=h(function(D,M){var B=D,O=0;if(this.seen.hasOwnProperty(B)){O=this.seen[D];do O++,B=D+"-"+O;while(this.seen.hasOwnProperty(B))}return M||(this.seen[D]=O,this.seen[B]=0),B},"getNextSafeSlug"),K.slug=h(function(D,M){M===void 0&&(M={});var B=this.serialize(D);return this.getNextSafeSlug(B,M.dryrun)},"slug"),Y}(),pr=function(){function Y(U){this.options=U||e.defaults,this.options.renderer=this.options.renderer||new Ss,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new gr,this.slugger=new Wd}h(Y,"Parser"),Y.parse=h(function(D,M){var B=new Y(M);return B.parse(D)},"parse"),Y.parseInline=h(function(D,M){var B=new Y(M);return B.parseInline(D)},"parseInline");var K=Y.prototype;return K.parse=h(function(D,M){M===void 0&&(M=!0);var B="",O,Z,ie,Se,ve,We,Ve,Nt,rt,Te,pn,Zt,Mo,Gt,Mn,Vd,ho,xs,al,ta=D.length;for(O=0;O<ta;O++){if(Te=D[O],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Te.type]&&(al=this.options.extensions.renderers[Te.type].call({parser:this},Te),al!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Te.type))){B+=al||"";continue}switch(Te.type){case"space":continue;case"hr":{B+=this.renderer.hr();continue}case"heading":{B+=this.renderer.heading(this.parseInline(Te.tokens),Te.depth,C(this.parseInline(Te.tokens,this.textRenderer)),this.slugger);continue}case"code":{B+=this.renderer.code(Te.text,Te.lang,Te.escaped);continue}case"table":{for(Nt="",Ve="",Se=Te.header.length,Z=0;Z<Se;Z++)Ve+=this.renderer.tablecell(this.parseInline(Te.header[Z].tokens),{header:!0,align:Te.align[Z]});for(Nt+=this.renderer.tablerow(Ve),rt="",Se=Te.rows.length,Z=0;Z<Se;Z++){for(We=Te.rows[Z],Ve="",ve=We.length,ie=0;ie<ve;ie++)Ve+=this.renderer.tablecell(this.parseInline(We[ie].tokens),{header:!1,align:Te.align[ie]});rt+=this.renderer.tablerow(Ve)}B+=this.renderer.table(Nt,rt);continue}case"blockquote":{rt=this.parse(Te.tokens),B+=this.renderer.blockquote(rt);continue}case"list":{for(pn=Te.ordered,Zt=Te.start,Mo=Te.loose,Se=Te.items.length,rt="",Z=0;Z<Se;Z++)Mn=Te.items[Z],Vd=Mn.checked,ho=Mn.task,Gt="",Mn.task&&(xs=this.renderer.checkbox(Vd),Mo?Mn.tokens.length>0&&Mn.tokens[0].type==="paragraph"?(Mn.tokens[0].text=xs+" "+Mn.tokens[0].text,Mn.tokens[0].tokens&&Mn.tokens[0].tokens.length>0&&Mn.tokens[0].tokens[0].type==="text"&&(Mn.tokens[0].tokens[0].text=xs+" "+Mn.tokens[0].tokens[0].text)):Mn.tokens.unshift({type:"text",text:xs}):Gt+=xs),Gt+=this.parse(Mn.tokens,Mo),rt+=this.renderer.listitem(Gt,ho,Vd);B+=this.renderer.list(rt,pn,Zt);continue}case"html":{B+=this.renderer.html(Te.text);continue}case"paragraph":{B+=this.renderer.paragraph(this.parseInline(Te.tokens));continue}case"text":{for(rt=Te.tokens?this.parseInline(Te.tokens):Te.text;O+1<ta&&D[O+1].type==="text";)Te=D[++O],rt+=`
`+(Te.tokens?this.parseInline(Te.tokens):Te.text);B+=M?this.renderer.paragraph(rt):rt;continue}default:{var au='Token with "'+Te.type+'" type was not found.';if(this.options.silent){console.error(au);return}else throw new Error(au)}}}return B},"parse"),K.parseInline=h(function(D,M){M=M||this.renderer;var B="",O,Z,ie,Se=D.length;for(O=0;O<Se;O++){if(Z=D[O],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Z.type]&&(ie=this.options.extensions.renderers[Z.type].call({parser:this},Z),ie!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Z.type))){B+=ie||"";continue}switch(Z.type){case"escape":{B+=M.text(Z.text);break}case"html":{B+=M.html(Z.text);break}case"link":{B+=M.link(Z.href,Z.title,this.parseInline(Z.tokens,M));break}case"image":{B+=M.image(Z.href,Z.title,Z.text);break}case"strong":{B+=M.strong(this.parseInline(Z.tokens,M));break}case"em":{B+=M.em(this.parseInline(Z.tokens,M));break}case"codespan":{B+=M.codespan(Z.text);break}case"br":{B+=M.br();break}case"del":{B+=M.del(this.parseInline(Z.tokens,M));break}case"text":{B+=M.text(Z.text);break}default:{var ve='Token with "'+Z.type+'" type was not found.';if(this.options.silent){console.error(ve);return}else throw new Error(ve)}}}return B},"parseInline"),Y}();function Oe(Y,K,U){if(typeof Y>"u"||Y===null)throw new Error("marked(): input parameter is undefined or null");if(typeof Y!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Y)+", string expected");if(typeof K=="function"&&(U=K,K=null),K=$({},Oe.defaults,K||{}),Ee(K),U){var D=K.highlight,M;try{M=Ti.lex(Y,K)}catch(ie){return U(ie)}var B=h(function(Se){var ve;if(!Se)try{K.walkTokens&&Oe.walkTokens(M,K.walkTokens),ve=pr.parse(M,K)}catch(We){Se=We}return K.highlight=D,Se?U(Se):U(null,ve)},"done");if(!D||D.length<3||(delete K.highlight,!M.length))return B();var O=0;Oe.walkTokens(M,function(ie){ie.type==="code"&&(O++,setTimeout(function(){D(ie.text,ie.lang,function(Se,ve){if(Se)return B(Se);ve!=null&&ve!==ie.text&&(ie.text=ve,ie.escaped=!0),O--,O===0&&B()})},0))}),O===0&&B();return}try{var Z=Ti.lex(Y,K);return K.walkTokens&&Oe.walkTokens(Z,K.walkTokens),pr.parse(Z,K)}catch(ie){if(ie.message+=`
Please report this to https://github.com/markedjs/marked.`,K.silent)return"<p>An error occurred:</p><pre>"+b(ie.message+"",!0)+"</pre>";throw ie}}h(Oe,"marked"),Oe.options=Oe.setOptions=function(Y){return $(Oe.defaults,Y),l(Oe.defaults),Oe},Oe.getDefaults=a,Oe.defaults=e.defaults,Oe.use=function(){for(var Y=arguments.length,K=new Array(Y),U=0;U<Y;U++)K[U]=arguments[U];var D=$.apply(void 0,[{}].concat(K)),M=Oe.defaults.extensions||{renderers:{},childTokens:{}},B;K.forEach(function(O){if(O.extensions&&(B=!0,O.extensions.forEach(function(ie){if(!ie.name)throw new Error("extension name required");if(ie.renderer){var Se=M.renderers?M.renderers[ie.name]:null;Se?M.renderers[ie.name]=function(){for(var ve=arguments.length,We=new Array(ve),Ve=0;Ve<ve;Ve++)We[Ve]=arguments[Ve];var Nt=ie.renderer.apply(this,We);return Nt===!1&&(Nt=Se.apply(this,We)),Nt}:M.renderers[ie.name]=ie.renderer}if(ie.tokenizer){if(!ie.level||ie.level!=="block"&&ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");M[ie.level]?M[ie.level].unshift(ie.tokenizer):M[ie.level]=[ie.tokenizer],ie.start&&(ie.level==="block"?M.startBlock?M.startBlock.push(ie.start):M.startBlock=[ie.start]:ie.level==="inline"&&(M.startInline?M.startInline.push(ie.start):M.startInline=[ie.start]))}ie.childTokens&&(M.childTokens[ie.name]=ie.childTokens)})),O.renderer&&function(){var ie=Oe.defaults.renderer||new Ss,Se=h(function(Ve){var Nt=ie[Ve];ie[Ve]=function(){for(var rt=arguments.length,Te=new Array(rt),pn=0;pn<rt;pn++)Te[pn]=arguments[pn];var Zt=O.renderer[Ve].apply(ie,Te);return Zt===!1&&(Zt=Nt.apply(ie,Te)),Zt}},"_loop");for(var ve in O.renderer)Se(ve);D.renderer=ie}(),O.tokenizer&&function(){var ie=Oe.defaults.tokenizer||new yt,Se=h(function(Ve){var Nt=ie[Ve];ie[Ve]=function(){for(var rt=arguments.length,Te=new Array(rt),pn=0;pn<rt;pn++)Te[pn]=arguments[pn];var Zt=O.tokenizer[Ve].apply(ie,Te);return Zt===!1&&(Zt=Nt.apply(ie,Te)),Zt}},"_loop2");for(var ve in O.tokenizer)Se(ve);D.tokenizer=ie}(),O.walkTokens){var Z=Oe.defaults.walkTokens;D.walkTokens=function(ie){O.walkTokens.call(this,ie),Z&&Z.call(this,ie)}}B&&(D.extensions=M),Oe.setOptions(D)})},Oe.walkTokens=function(Y,K){for(var U=h(function(){var O=M.value;switch(K.call(Oe,O),O.type){case"table":{for(var Z=r(O.header),ie;!(ie=Z()).done;){var Se=ie.value;Oe.walkTokens(Se.tokens,K)}for(var ve=r(O.rows),We;!(We=ve()).done;)for(var Ve=We.value,Nt=r(Ve),rt;!(rt=Nt()).done;){var Te=rt.value;Oe.walkTokens(Te.tokens,K)}break}case"list":{Oe.walkTokens(O.items,K);break}default:Oe.defaults.extensions&&Oe.defaults.extensions.childTokens&&Oe.defaults.extensions.childTokens[O.type]?Oe.defaults.extensions.childTokens[O.type].forEach(function(pn){Oe.walkTokens(O[pn],K)}):O.tokens&&Oe.walkTokens(O.tokens,K)}},"_loop3"),D=r(Y),M;!(M=D()).done;)U()},Oe.parseInline=function(Y,K){if(typeof Y>"u"||Y===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Y!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Y)+", string expected");K=$({},Oe.defaults,K||{}),Ee(K);try{var U=Ti.lexInline(Y,K);return K.walkTokens&&Oe.walkTokens(U,K.walkTokens),pr.parseInline(U,K)}catch(D){if(D.message+=`
Please report this to https://github.com/markedjs/marked.`,K.silent)return"<p>An error occurred:</p><pre>"+b(D.message+"",!0)+"</pre>";throw D}},Oe.Parser=pr,Oe.parser=pr.parse,Oe.Renderer=Ss,Oe.TextRenderer=gr,Oe.Lexer=Ti,Oe.lexer=Ti.lex,Oe.Tokenizer=yt,Oe.Slugger=Wd,Oe.parse=Oe;var sl=Oe.options,Hg=Oe.setOptions,zg=Oe.use,rl=Oe.walkTokens,su=Oe.parseInline,Rb=Oe,ru=pr.parse,Pb=Ti.lex;e.Lexer=Ti,e.Parser=pr,e.Renderer=Ss,e.Slugger=Wd,e.TextRenderer=gr,e.Tokenizer=yt,e.getDefaults=a,e.lexer=Pb,e.marked=Oe,e.options=sl,e.parse=Rb,e.parseInline=su,e.parser=ru,e.setOptions=Hg,e.use=zg,e.walkTokens=rl,Object.defineProperty(e,"__esModule",{value:!0})})})();var BR=SB||exports;function _se(s,e={},t={}){var n;const i=new Q;let o=!1;const r=i.add(new Bn),a=sN(e),l=h(function(C){let w;try{w=GL(decodeURIComponent(C))}catch{}return w?(w=Mj(w,y=>{if(s.uris&&s.uris[y])return Ce.revive(s.uris[y])}),encodeURIComponent(JSON.stringify(w))):C},"_uriMassage"),d=h(function(C,w){const y=s.uris&&s.uris[C];let S=Ce.revive(y);return w?C.startsWith(Me.data+":")?C:(S||(S=Ce.parse(C)),g5.asBrowserUri(S).toString(!0)):!S||Ce.parse(C).toString()===S.toString()?C:(S.query&&(S=S.with({query:l(S.query)})),S.toString())},"_href");let c;const u=new Promise(C=>c=C),f=new BR.Renderer;if(f.image=(C,w,y)=>{let S=[],L=[];return C&&({href:C,dimensions:S}=_ee(C),L.push(`src="${C}"`)),y&&L.push(`alt="${y}"`),w&&L.push(`title="${w}"`),S.length&&(L=L.concat(S)),"<img "+L.join(" ")+">"},f.link=(C,w,y)=>typeof C!="string"?"":(C===y&&(y=vS(y)),C=d(C,!1),s.baseUri&&(C=$S(Ce.from(s.baseUri),C)),w=typeof w=="string"?vS(w):"",C=vS(C),!C||/^data:|javascript:/i.test(C)||/^command:/i.test(C)&&!s.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(C)?y:(C=C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a data-href="${C}" title="${w||C}">${y}</a>`)),f.paragraph=C=>`<p>${C}</p>`,e.codeBlockRenderer&&(f.code=(C,w)=>{const y=e.codeBlockRenderer(w??"",C),S=T8.nextId();return FD(Promise.all([y,u]),r.token).then(L=>{var E;if(!o&&L){const x=a.querySelector(`div[data-code="${S}"]`);x&&td(x,L[0]),(E=e.asyncRenderCallback)===null||E===void 0||E.call(e)}}).catch(()=>{}),`<div class="code" data-code="${S}">${yD(C)}</div>`}),e.actionHandler){const C=e.actionHandler.disposables.add(new ft(a,"click")),w=e.actionHandler.disposables.add(new ft(a,"auxclick"));e.actionHandler.disposables.add(fe.any(C.event,w.event)(y=>{const S=new Co(y);if(!S.leftButton&&!S.middleButton)return;let L=S.target;if(!(L.tagName!=="A"&&(L=L.parentElement,!L||L.tagName!=="A")))try{let E=L.dataset.href;E&&(s.baseUri&&(E=$S(Ce.from(s.baseUri),E)),e.actionHandler.callback(E,S))}catch(E){Ne(E)}finally{S.preventDefault()}}))}s.supportHtml||(t.sanitizer=C=>(s.isTrusted?C.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?C:"",t.sanitize=!0,t.silent=!0),t.renderer=f;let g=(n=s.value)!==null&&n!==void 0?n:"";g.length>1e5&&(g=`${g.substr(0,1e5)}\u2026`),s.supportThemeIcons&&(g=WQ(g));let m=BR.parse(g,t);s.supportThemeIcons&&(m=Bc(m).map(w=>typeof w=="string"?w:w.outerHTML).join(""));const v=new DOMParser().parseFromString(HR(s,m),"text/html");if(v.body.querySelectorAll("img").forEach(C=>{const w=C.getAttribute("src");if(w){let y=w;try{s.baseUri&&(y=$S(Ce.from(s.baseUri),y))}catch{}C.src=d(y,!0)}}),a.innerHTML=HR(s,v.body.innerHTML),c(),e.asyncRenderCallback)for(const C of a.getElementsByTagName("img")){const w=i.add(J(C,"load",()=>{w.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{o=!0,r.cancel(),i.dispose()}}}h(_se,"renderMarkdown");function $S(s,e){return/^\w[\w\d+.-]*:/.test(e)?e:s.path.endsWith("/")?JM(s,e).toString():JM(o1(s),e).toString()}h($S,"resolveWithBaseUri");function HR(s,e){const{config:t,allowedSchemes:n}=bse(s);WR("uponSanitizeAttribute",(o,r)=>{if(r.attrName==="style"||r.attrName==="class"){if(o.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}});const i=document.createElement("a");WR("afterSanitizeAttributes",o=>{for(const r of["href","src"])o.hasAttribute(r)&&(i.href=o.getAttribute(r),n.includes(i.protocol.replace(/:$/,""))||o.removeAttribute(r))});try{return mse(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{VR("uponSanitizeAttribute"),VR("afterSanitizeAttributes")}}h(HR,"sanitizeRenderedMarkdown");function bse(s){const e=[Me.http,Me.https,Me.mailto,Me.data,Me.file,Me.vscodeFileResource,Me.vscodeRemote,Me.vscodeRemoteResource];return s.isTrusted&&e.push(Me.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}h(bse,"getSanitizerOptions");var vse=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zR=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},wse=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},qS;let Ja=h(class xB{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new P,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new Q;return{element:i.add(_se(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n)).element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(n,i)=>wse(this,void 0,void 0,function*(){var o,r,a;let l;n?l=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(l=(o=this._options.editor.getModel())===null||o===void 0?void 0:o.getLanguageId()),l||(l=Zr);const d=yield dZ(this._languageService,i,l),c=document.createElement("span");if(c.innerHTML=(a=(r=xB._ttpTokenizer)===null||r===void 0?void 0:r.createHTML(d))!==null&&a!==void 0?a:d,this._options.editor){const u=this._options.editor.getOption(44);ti(c,u)}else this._options.codeBlockFontFamily&&(c.style.fontFamily=this._options.codeBlockFontFamily);return c}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(Ne),disposables:t}}}},"MarkdownRenderer");Ja._ttpTokenizer=(qS=window.trustedTypes)===null||qS===void 0?void 0:qS.createPolicy("tokenizeToString",{createHTML(s){return s}});Ja=vse([zR(1,Vt),zR(2,ss)],Ja);const KR=X;class zc extends z{constructor(e,t,n=$Q){super();this._renderDisposeables=this._register(new Q),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new tA),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Ja({editor:this._editor},t,n)),this._computer=new TB(this._editor),this._hoverOperation=this._register(new nA(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(44)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return zc.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const o=KR("div.hover-row.markdown-hover"),r=j(o,KR("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));r.appendChild(a.element),n.appendChild(o)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),o=this._editor.getOption(59),r=this._hover.containerDomNode.clientHeight,a=n-i-(r-o)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}}h(zc,"MarginHoverWidget");zc.ID="editor.contrib.modesGlyphHoverWidget";class TB{constructor(e){this._editor=e,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}computeSync(){const e=h(i=>({value:i}),"toHoverMessage"),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const o=i.options.glyphMarginHoverMessage;!o||zf(o)||n.push(...uD(o).map(e))}return n}}h(TB,"MarginHoverComputer");var Cse=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class LB{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}h(LB,"HoverProviderResult");function yse(s,e,t,n,i){return Cse(this,void 0,void 0,function*(){try{const o=yield Promise.resolve(s.provideHover(t,n,i));if(o&&xse(o))return new LB(s,o,e)}catch(o){Nn(o)}})}h(yse,"executeProvider");function cA(s,e,t,n){const o=s.ordered(e).map((r,a)=>yse(r,a,e,t,n));return Qt.fromPromises(o).coalesce()}h(cA,"getHover");function Sse(s,e,t,n){return cA(s,e,t,n).map(i=>i.hover).toPromise()}h(Sse,"getHoverPromise");Xr("_executeHoverProvider",(s,e,t)=>{const n=s.get(ce);return Sse(n.hoverProvider,e,t,je.None)});function xse(s){const e=typeof s.range<"u",t=typeof s.contents<"u"&&s.contents&&s.contents.length>0;return e&&t}h(xse,"isValid");var Tse=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_v=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const UR=X;class Rr{constructor(e,t,n,i){this.owner=e,this.range=t,this.contents=n,this.ordinal=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}h(Rr,"MarkdownHover");let XC=h(class{constructor(e,t,n,i,o){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=i,this._languageFeaturesService=o,this.hoverOrdinal=2}createLoadingMessage(e){return new Rr(this,e.range,[new Zi().appendText(p("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,o=n.getLineMaxColumn(i),r=[];let a=1e3;const l=n.getLineLength(i),d=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});typeof c=="number"&&l>=c&&r.push(new Rr(this,e.range,[{value:p("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const u of t){const f=u.range.startLineNumber===i?u.range.startColumn:1,g=u.range.endLineNumber===i?u.range.endColumn:o,m=u.options.hoverMessage;if(!m||zf(m))continue;const b=new T(e.range.startLineNumber,f,e.range.startLineNumber,g);r.push(new Rr(this,b,uD(m),a++))}return r}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Qt.EMPTY;const i=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(i))return Qt.EMPTY;const o=new W(e.range.startLineNumber,e.range.startColumn);return cA(this._languageFeaturesService.hoverProvider,i,o,n).filter(r=>!zf(r.hover.contents)).map(r=>{const a=r.hover.range?T.lift(r.hover.range):e.range;return new Rr(this,a,r.hover.contents,r.ordinal)})}renderHoverParts(e,t){return kB(e,t,this._editor,this._languageService,this._openerService)}},"MarkdownHoverParticipant");XC=Tse([_v(1,Vt),_v(2,ss),_v(3,wt),_v(4,ce)],XC);function kB(s,e,t,n,i){e.sort((r,a)=>r.ordinal-a.ordinal);const o=new Q;for(const r of e)for(const a of r.contents){if(zf(a))continue;const l=UR("div.hover-row.markdown-hover"),d=j(l,UR("div.hover-contents")),c=o.add(new Ja({editor:t},n,i));o.add(c.onDidRenderAsync(()=>{d.className="hover-contents code-hover-contents",s.onContentsChanged()}));const u=o.add(c.render(a));d.appendChild(u.element),s.fragment.appendChild(l)}return o}h(kB,"renderMarkdownHovers");var EB=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZC=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class _E{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}h(_E,"MarkerCoordinate");let bE=h(class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new P,this.onDidChange=this._onDidChange.event,this._dispoables=new Q,this._markers=[],this._nextIdx=-1,Ce.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),o=h((a,l)=>{let d=hm(a.resource.toString(),l.resource.toString());return d===0&&(i==="position"?d=T.compareRangesUsingStarts(a,l)||Wt.compare(a.severity,l.severity):d=Wt.compare(a.severity,l.severity)||T.compareRangesUsingStarts(a,l)),d},"compareMarker"),r=h(()=>{this._markers=this._markerService.read({resource:Ce.isUri(e)?e:void 0,severities:Wt.Error|Wt.Warning|Wt.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)},"updateMarker");r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new _E(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,o=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());o<0&&(o=cD(this._markers,{resource:e.uri},(r,a)=>hm(r.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let a=T.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new T(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,i=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(T.containsPosition(this._markers[n],t))return new _E(this._markers[n],n+1,this._markers.length)}}},"MarkerList");bE=EB([ZC(1,el),ZC(2,wt)],bE);const DB=Xe("IMarkerNavigationService");let vE=h(class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new eo}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new bE(e,this._markerService,this._configService)}},"MarkerNavigationService");vE=EB([ZC(0,el),ZC(1,wt)],vE);it(DB,vE,!0);var wE;(function(s){function e(t){switch(t){case Ot.Ignore:return"severity-ignore "+_.info.classNames;case Ot.Info:return _.info.classNames;case Ot.Warning:return _.warning.classNames;case Ot.Error:return _.error.classNames;default:return""}}h(e,"className"),s.className=e})(wE||(wE={}));It((s,e)=>{const t=s.getColor($Y);if(t){const o=_.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.text-search-provider-messages .providerMessage ${o},
			.extensions-viewlet > .extensions ${o} {
				color: ${t};
			}
		`)}const n=s.getColor(qY);if(n){const o=_.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.extension-editor ${o},
			.text-search-provider-messages .providerMessage ${o},
			.preferences-editor ${o} {
				color: ${n};
			}
		`)}const i=s.getColor(YY);if(i){const o=_.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.text-search-provider-messages .providerMessage ${o},
			.extension-editor ${o} {
				color: ${i};
			}
		`)}});var Lse=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fu=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class IB{constructor(e,t,n,i,o){this._openerService=i,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Q,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Wn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new wI(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){et(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:o}=e;let r=(t?.length||0)+2;o&&(typeof o=="string"?r+=o.length:r+=o.value.length);const a=zr(n);this._lines=a.length,this._longestLineLength=0;for(const f of a)this._longestLineLength=Math.max(f.length+r,this._longestLineLength);Sn(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const f of a)l=document.createElement("div"),l.innerText=f,f===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){const f=document.createElement("span");if(f.classList.add("details"),l.appendChild(f),t){const g=document.createElement("span");g.innerText=t,g.classList.add("source"),f.appendChild(g)}if(o)if(typeof o=="string"){const g=document.createElement("span");g.innerText=`(${o})`,g.classList.add("code"),f.appendChild(g)}else{this._codeLink=X("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=m=>{this._openerService.open(o.target,{allowCommands:!0}),m.preventDefault(),m.stopPropagation()};const g=j(this._codeLink,X("span"));g.innerText=o.value,f.appendChild(this._codeLink)}}if(Sn(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),io(i)){const f=this._relatedBlock.appendChild(document.createElement("div"));f.style.paddingTop=`${Math.floor(this._editor.getOption(59)*.66)}px`,this._lines+=1;for(const g of i){let m=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${O6(g.resource)}(${g.startLineNumber}, ${g.startColumn}): `,b.title=this._labelService.getUriLabel(g.resource),this._relatedDiagnostics.set(b,g);let v=document.createElement("span");v.innerText=g.message,m.appendChild(b),m.appendChild(v),this._lines+=1,f.appendChild(m)}}const d=this._editor.getOption(44),c=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Wt.Error:t=p("Error","Error");break;case Wt.Warning:t=p("Warning","Warning");break;case Wt.Info:t=p("Info","Info");break;case Wt.Hint:t=p("Hint","Hint");break}let n=p("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}}h(IB,"MessageWidget");let ng=h(class NB extends GC{constructor(e,t,n,i,o,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o);this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new Q,this._onDidSelectRelatedInformation=new P,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Wt.Warning,this._backgroundColor=H.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(Ise);let t=CE,n=kse;this._severity===Wt.Warning?(t=yE,n=Ese):this._severity===Wt.Info&&(t=SE,n=Dse);const i=e.getColor(t),o=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:o,primaryHeadingColor:e.getColor(M6),secondaryHeadingColor:e.getColor(R6)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(i=>this.editor.focus()));const t=[],n=this._menuService.createMenu(NB.TitleMenu,this._contextKeyService);woe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=j(e,X(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new IB(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let i=T.lift(e);const o=this.editor.getPosition();let r=o&&i.containsPosition(o)?o:i.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?p("problems","{0} of {1} problems",t,n):p("change","{0} of {1} problem",t,n);this.setTitle(ts(a.uri),l)}this._icon.className=`codicon ${wE.className(Wt.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},"MarkerNavigationWidget");ng.TitleMenu=new R("gotoErrorTitleMenu");ng=Lse([fu(1,Mt),fu(2,ss),fu(3,Wh),fu(4,Ge),fu(5,De),fu(6,q_)],ng);let jR=Tm(Vl,iF),GR=Tm(gs,V0),$R=Tm(ko,oI);const CE=A("editorMarkerNavigationError.background",{dark:jR,light:jR,hc:Pt},p("editorMarkerNavigationError","Editor marker navigation widget error color.")),kse=A("editorMarkerNavigationError.headerBackground",{dark:xe(CE,.1),light:xe(CE,.1),hc:null},p("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),yE=A("editorMarkerNavigationWarning.background",{dark:GR,light:GR,hc:Pt},p("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Ese=A("editorMarkerNavigationWarning.headerBackground",{dark:xe(yE,.1),light:xe(yE,.1),hc:"#0C141F"},p("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),SE=A("editorMarkerNavigationInfo.background",{dark:$R,light:$R,hc:Pt},p("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Dse=A("editorMarkerNavigationInfo.headerBackground",{dark:xe(SE,.1),light:xe(SE,.1),hc:null},p("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),Ise=A("editorMarkerNavigation.background",{dark:Bi,light:Bi,hc:Bi},p("editorMarkerNavigationBackground","Editor marker navigation widget background."));var Nse=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bv=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},AB=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let wd=h(class Sw{constructor(e,t,n,i,o){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=o,this._sessionDispoables=new Q,this._editor=e,this._widgetVisible=PB.bindTo(this._contextKeyService)}static get(e){return e.getContribution(Sw.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(ng,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,o,r;(!(!((i=this._model)===null||i===void 0)&&i.selected)||!T.containsPosition((o=this._model)===null||o===void 0?void 0:o.selected.marker,n.position))&&((r=this._model)===null||r===void 0||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:T.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new W(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){var n,i;return AB(this,void 0,void 0,function*(){if(this._editor.hasModel()){const o=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(o.move(e,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);r&&((n=Sw.get(r))===null||n===void 0||n.close(),(i=Sw.get(r))===null||i===void 0||i.nagivate(e,t))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}})}},"MarkerController");wd.ID="editor.contrib.markerController";wd=Nse([bv(1,DB),bv(2,De),bv(3,ht),bv(4,Ge)],wd);class mb extends le{constructor(e,t,n){super(n);this._next=e,this._multiFile=t}run(e,t){var n;return AB(this,void 0,void 0,function*(){t.hasModel()&&((n=wd.get(t))===null||n===void 0||n.nagivate(this._next,this._multiFile))})}}h(mb,"MarkerNavigationAction");class Ba extends mb{constructor(){super(!0,!1,{id:Ba.ID,label:Ba.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:578,weight:100},menuOpts:{menuId:ng.TitleMenu,title:Ba.LABEL,icon:xn("marker-navigation-next",_.arrowDown,p("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}h(Ba,"NextMarkerAction");Ba.ID="editor.action.marker.next";Ba.LABEL=p("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class $l extends mb{constructor(){super(!1,!1,{id:$l.ID,label:$l.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:1602,weight:100},menuOpts:{menuId:ng.TitleMenu,title:$l.LABEL,icon:xn("marker-navigation-previous",_.arrowUp,p("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}h($l,"PrevMarkerAction");$l.ID="editor.action.marker.prev";$l.LABEL=p("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class MB extends mb{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:p("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:66,weight:100},menuOpts:{menuId:R.MenubarGoMenu,title:p({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}h(MB,"NextMarkerInFilesAction");class RB extends mb{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:p("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:1090,weight:100},menuOpts:{menuId:R.MenubarGoMenu,title:p({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}h(RB,"PrevMarkerInFilesAction");lt(wd.ID,wd);ne(Ba);ne($l);ne(MB);ne(RB);const PB=new re("markersNavigationVisible",!1),Ase=zn.bindToContribution(wd.get);te(new Ase({id:"closeMarkersNavigation",precondition:PB,handler:s=>s.close(),kbOpts:{weight:100+50,kbExpr:I.focus,primary:9,secondary:[1033]}}));var Mse=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},YS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const ls=X;class OB{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}h(OB,"MarkerHover");const qR={type:1,filter:{include:qe.QuickFix}};let xE=h(class{constructor(e,t,n,i){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=i,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,o=n.getLineMaxColumn(i),r=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,d=a.range.endLineNumber===i?a.range.endColumn:o,c=this._markerDecorationsService.getMarker(n.uri,a);if(!c)continue;const u=new T(e.range.startLineNumber,l,e.range.startLineNumber,d);r.push(new OB(this,u,c))}return r}renderHoverParts(e,t){if(!t.length)return z.None;const n=new Q;t.forEach(o=>e.fragment.appendChild(this.renderMarkerHover(o,n)));const i=t.length===1?t[0]:t.sort((o,r)=>Wt.compare(o.marker.severity,r.marker.severity))[0];return this.renderMarkerStatusbar(e,i,n),n}renderMarkerHover(e,t){const n=ls("div.hover-row"),i=j(n,ls("div.marker.hover-contents")),{source:o,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const d=j(i,ls("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=r,o||a)if(a&&typeof a!="string"){const c=ls("span");if(o){const m=j(c,ls("span"));m.innerText=o}const u=j(c,ls("a.code-link"));u.setAttribute("href",a.target.toString()),t.add(J(u,"click",m=>{this._openerService.open(a.target,{allowCommands:!0}),m.preventDefault(),m.stopPropagation()}));const f=j(u,ls("span"));f.innerText=a.value;const g=j(i,c);g.style.opacity="0.6",g.style.paddingLeft="6px"}else{const c=j(i,ls("span"));c.style.opacity="0.6",c.style.paddingLeft="6px",c.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(io(l))for(const{message:c,resource:u,startLineNumber:f,startColumn:g}of l){const m=j(i,ls("div"));m.style.marginTop="8px";const b=j(m,ls("a"));b.innerText=`${ts(u)}(${f}, ${g}): `,b.style.cursor="pointer",t.add(J(b,"click",C=>{C.stopPropagation(),C.preventDefault(),this._openerService&&this._openerService.open(u,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:f,startColumn:g}}}).catch(Ne)}));const v=j(m,ls("span"));v.innerText=c,this._editor.applyFontInfo(v)}return n}renderMarkerStatusbar(e,t,n){if((t.marker.severity===Wt.Error||t.marker.severity===Wt.Warning||t.marker.severity===Wt.Info)&&e.statusBar.addAction({label:p("view problem","View Problem"),commandId:Ba.ID,run:()=>{var i;e.hide(),(i=wd.get(this._editor))===null||i===void 0||i.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(81)){const i=e.statusBar.append(ls("div"));this.recentMarkerCodeActionsInfo&&(NC.makeKey(this.recentMarkerCodeActionsInfo.marker)===NC.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=p("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?z.None:n.add(Xc(()=>i.textContent=p("checkingForQuickFixes","Checking for quick fixes..."),200));i.textContent||(i.textContent=String.fromCharCode(160));const r=this.getCodeActions(t.marker);n.add(He(()=>r.cancel())),r.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=p("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(He(()=>{l||a.dispose()})),e.statusBar.addAction({label:p("quick fixes","Quick Fix..."),commandId:Xh.Id,run:d=>{l=!0;const c=gh.get(this._editor),u=$n(d);e.hide(),c?.showCodeActions(qR,a,{x:u.left+6,y:u.top+u.height+6})}})},Ne)}}getCodeActions(e){return Hn(t=>UN(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),qR,Md.None,t))}},"MarkerHoverParticipant");xE=Mse([YS(1,ZD),YS(2,ss),YS(3,ce)],xE);It((s,e)=>{const t=s.getColor(F0);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=s.getColor(W0);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});var Rse=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vv=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let Cd=h(class FB{constructor(e,t,n,i,o){this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=i,this._toUnhook=new Q,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(r=>{r.hasChanged(53)&&(this._unhookEvents(),this._hookEvents())})}static get(e){return e.getContribution(FB.ID)}_hookEvents(){const e=h(()=>this._hideWidgets(),"hideWidgetsEventHandler"),t=this._editor.getOption(53);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target;if(t.type===9&&t.detail===Hc.ID){this._hoverClicked=!0;return}t.type===12&&t.detail===zc.ID||(t.type!==12&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,i,o,r;const a=e.target;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a.type===9&&a.detail===Hc.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a.type===9&&a.detail===Hc.ID&&((i=this._contentWidget)===null||i===void 0?void 0:i.isColorPickerVisible())||this._isHoverSticky&&a.type===12&&a.detail===zc.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(o=this._glyphWidget)===null||o===void 0||o.hide();return}if(a.type===2&&a.position){(r=this._contentWidget)===null||r===void 0||r.hide(),this._glyphWidget||(this._glyphWidget=new zc(this._editor,this._languageService,this._openerService)),this._glyphWidget.startShowingAt(a.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(qC,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}},"ModesHoverController");Cd.ID="editor.contrib.hover";Cd=Rse([vv(1,Ge),vv(2,ss),vv(3,Vt),vv(4,De)],Cd);class WB extends le{constructor(){super({id:"editor.action.showHover",label:p({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=Cd.get(t);if(!n)return;const i=t.getPosition(),o=new T(i.lineNumber,i.column,i.lineNumber,i.column),r=t.getOption(2)===2;n.showContentHover(o,1,r)}}h(WB,"ShowHoverAction");class VB extends le{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:p({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const n=Cd.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const o=new T(i.lineNumber,i.column,i.lineNumber,i.column),r=_h.get(t);if(!r)return;r.startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(o,1,!0)})}}h(VB,"ShowDefinitionPreviewHoverAction");lt(Cd.ID,Cd);ne(WB);ne(VB);Qh.register(XC);Qh.register(xE);It((s,e)=>{const t=s.getColor(Jq);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=s.getColor(th);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const i=s.getColor(lI);i&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`));const o=s.getColor(F0);o&&e.addRule(`.monaco-editor .monaco-hover a { color: ${o}; }`);const r=s.getColor(W0);r&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${r}; }`);const a=s.getColor(aI);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=s.getColor(Qq);l&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const d=s.getColor($5);d&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${d}; }`)});class JC extends z{constructor(e){super();this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=e.target;if(t.type!==6||!t.detail.injectedText||t.detail.injectedText.options.attachedData!==g6||!t.range)return;const n=this._editor.getContribution(Cd.ID);if(!!n&&!n.isColorPickerVisible()){const i=new T(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);n.showContentHover(i,1,!1)}}}h(JC,"ColorContribution");JC.ID="editor.contrib.colorContribution";lt(JC.ID,JC);Qh.register(Zk);class Na{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,o=e.length;if(n+i>o)return!1;for(let r=0;r<i;r++){const a=e.charCodeAt(n+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,o,r){const a=e.startLineNumber,l=e.startColumn,d=e.endLineNumber,c=e.endColumn,u=o.getLineContent(a),f=o.getLineContent(d);let g=u.lastIndexOf(t,l-1+t.length),m=f.indexOf(n,c-1-n.length);if(g!==-1&&m!==-1)if(a===d)u.substring(g+t.length,m).indexOf(n)>=0&&(g=-1,m=-1);else{const v=u.substring(g+t.length),C=f.substring(0,m);(v.indexOf(n)>=0||C.indexOf(n)>=0)&&(g=-1,m=-1)}let b;g!==-1&&m!==-1?(i&&g+t.length<u.length&&u.charCodeAt(g+t.length)===32&&(t=t+" "),i&&m>0&&f.charCodeAt(m-1)===32&&(n=" "+n,m-=1),b=Na._createRemoveBlockCommentOperations(new T(a,g+t.length+1,d,m+1),t,n)):(b=Na._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=b.length===1?n:null);for(const v of b)r.addTrackedEditOperation(v.range,v.text)}static _createRemoveBlockCommentOperations(e,t,n){let i=[];return T.isEmpty(e)?i.push(jt.delete(new T(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(jt.delete(new T(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(jt.delete(new T(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){let o=[];return T.isEmpty(e)?o.push(jt.replace(new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(o.push(jt.insert(new W(e.startLineNumber,e.startColumn),t+(i?" ":""))),o.push(jt.insert(new W(e.endLineNumber,e.endColumn),(i?" ":"")+n))),o}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenizeIfCheap(n);const o=e.getLanguageIdAtPosition(n,i),r=this.languageConfigurationService.getLanguageConfiguration(o).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],o=n[1];return new oe(i.range.endLineNumber,i.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const i=n[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new oe(i.endLineNumber,i.endColumn+o,i.endLineNumber,i.endColumn+o)}}}h(Na,"BlockCommentCommand");class xr{constructor(e,t,n,i,o,r,a){this.languageConfigurationService=e,this._selection=t,this._tabSize=n,this._type=i,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,i){e.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),r=i.getLanguageConfiguration(o).comments,a=r?r.lineCommentToken:null;if(!a)return null;let l=[];for(let d=0,c=n-t+1;d<c;d++)l[d]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,i,o,r,a,l){let d=!0,c;e===0?c=!0:e===1?c=!1:c=!0;for(let u=0,f=i.length;u<f;u++){const g=i[u],m=o+u;if(m===o&&a){g.ignore=!0;continue}const b=n.getLineContent(m),v=bi(b);if(v===-1){g.ignore=r,g.commentStrOffset=b.length;continue}if(d=!1,g.ignore=!1,g.commentStrOffset=v,c&&!Na._haystackHasNeedleAtOffset(b,g.commentStr,v)&&(e===0?c=!1:e===1||(g.ignore=!0)),c&&t){const C=v+g.commentStrLength;C<b.length&&b.charCodeAt(C)===32&&(g.commentStrLength+=1)}}if(e===0&&d){c=!1;for(let u=0,f=i.length;u<f;u++)i[u].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:i}}static _gatherPreflightData(e,t,n,i,o,r,a,l){const d=xr._gatherPreflightCommentStrings(n,i,o,l);return d===null?{supported:!1}:xr._analyzeLines(e,t,n,d,i,r,a,l)}_executeLineComments(e,t,n,i){let o;n.shouldRemoveComments?o=xr._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(xr._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const r=new W(i.positionLineNumber,i.positionColumn);for(let a=0,l=o.length;a<l;a++)t.addEditOperation(o[a].range,o[a].text),T.isEmpty(o[a].range)&&T.getStartPosition(o[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let o=t.startLineNumber,r=t.endLineNumber,a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),l=e.getLineContent(o).lastIndexOf(n,a-1),d=e.getLineContent(r).indexOf(i,t.endColumn-1-n.length);return l!==-1&&d===-1&&(d=e.getLineContent(o).indexOf(i,l+n.length),r=o),l===-1&&d!==-1&&(l=e.getLineContent(r).lastIndexOf(n,d),o=r),t.isEmpty()&&(l===-1||d===-1)&&(l=e.getLineContent(o).indexOf(n),l!==-1&&(d=e.getLineContent(o).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(o).charCodeAt(l+n.length)===32&&(n+=" "),d!==-1&&e.getLineContent(r).charCodeAt(d-1)===32&&(i=" "+i,d-=1),l!==-1&&d!==-1?Na._createRemoveBlockCommentOperations(new T(o,l+n.length+1,r,d+1),n,i):null}_executeBlockComment(e,t,n){e.tokenizeIfCheap(n.startLineNumber);let i=e.getLanguageIdAtPosition(n.startLineNumber,1),o=fn.getComments(i);if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const r=o.blockCommentStartToken,a=o.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,r,a);if(!l){if(n.isEmpty()){const d=e.getLineContent(n.startLineNumber);let c=bi(d);c===-1&&(c=d.length),l=Na._createAddBlockCommentOperations(new T(n.startLineNumber,c+1,n.startLineNumber,d.length+1),r,a,this._insertSpace)}else l=Na._createAddBlockCommentOperations(new T(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(n);for(const d of l)t.addEditOperation(d.range,d.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new T(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=xr._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new oe(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let i=0,o=e.length;i<o;i++){const r=e[i];r.ignore||n.push(jt.delete(new T(t+i,r.commentStrOffset+1,t+i,r.commentStrOffset+r.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[];const i=this._insertSpace?" ":"";for(let o=0,r=e.length;o<r;o++){const a=e[o];a.ignore||n.push(jt.insert(new W(t+o,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let o=1073741824,r,a;for(let l=0,d=t.length;l<d;l++){if(t[l].ignore)continue;const c=e.getLineContent(n+l);let u=0;for(let f=0,g=t[l].commentStrOffset;u<o&&f<g;f++)u=xr.nextVisibleColumn(u,i,c.charCodeAt(f)===9,1);u<o&&(o=u)}o=Math.floor(o/i)*i;for(let l=0,d=t.length;l<d;l++){if(t[l].ignore)continue;const c=e.getLineContent(n+l);let u=0;for(r=0,a=t[l].commentStrOffset;u<o&&r<a;r++)u=xr.nextVisibleColumn(u,i,c.charCodeAt(r)===9,1);u>o?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}h(xr,"LineCommentCommand");class Q1 extends le{constructor(e,t){super(t);this._type=e}run(e,t){const n=e.get(oi);if(!t.hasModel())return;const i=t.getModel(),o=[],r=i.getOptions(),a=t.getOption(19),l=t.getSelections().map((c,u)=>({selection:c,index:u,ignoreFirstLine:!1}));l.sort((c,u)=>T.compareRangesUsingStarts(c.selection,u.selection));let d=l[0];for(let c=1;c<l.length;c++){const u=l[c];d.selection.endLineNumber===u.selection.startLineNumber&&(d.index<u.index?u.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=u))}for(const c of l)o.push(new xr(n,c.selection,r.tabSize,this._type,a.insertSpace,a.ignoreEmptyLines,c.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}h(Q1,"CommentLineAction");class BB extends Q1{constructor(){super(0,{id:"editor.action.commentLine",label:p("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:R.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}h(BB,"ToggleCommentLineAction");class HB extends Q1{constructor(){super(1,{id:"editor.action.addCommentLine",label:p("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2081),weight:100}})}}h(HB,"AddLineCommentAction");class zB extends Q1{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2099),weight:100}})}}h(zB,"RemoveLineCommentAction");class KB extends le{constructor(){super({id:"editor.action.blockComment",label:p("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:R.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const n=e.get(oi);if(!t.hasModel())return;const i=t.getOption(19),o=[],r=t.getSelections();for(const a of r)o.push(new Na(a,i.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}h(KB,"BlockCommentAction");ne(BB);ne(HB);ne(zB);ne(KB);var Pse=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ap=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let ig=h(class UB{constructor(e,t,n,i,o,r){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=o,this._menuService=r,this._toDispose=new Q,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(a=>this._onContextMenu(a))),this._toDispose.add(this._editor.onMouseWheel(a=>{if(this._contextMenuIsBeingShownCount>0){const l=this._contextViewService.getContextViewElement(),d=a.srcElement;d.shadowRoot&&ed(l)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(a=>{a.keyCode===58&&(a.preventDefault(),a.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(UB.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText||(e.event.preventDefault(),e.event.stopPropagation(),e.target.type!==6&&e.target.type!==7&&e.target.type!==1))return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?R.SimpleEditorContext:R.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.createMenu(t,this._contextKeyService),o=i.getActions({arg:e.uri});i.dispose();for(let r of o){const[,a]=r;let l=0;for(const d of a)if(d instanceof R0){const c=this._getMenuActions(e,d.item.submenu);c.length>0&&(n.push(new L_(d.id,d.label,c)),l++)}else n.push(d),l++;l&&n.push(new To)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(53);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),r=$n(this._editor.getDomNode()),a=r.left+o.left,l=r.top+o.top+o.height;t={x:a,y:l}}const i=this._editor.getOption(115)&&!tr;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:i?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:o=>{const r=this._keybindingFor(o);if(r)return new Of(o,o,{label:!0,keybinding:r.getLabel(),isMenu:!0});const a=o;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new Of(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},"ContextMenuController");ig.ID="editor.contrib.contextmenu";ig=Pse([ap(1,Ad),ap(2,z_),ap(3,De),ap(4,Xt),ap(5,Wh)],ig);class jB extends le{constructor(){super({id:"editor.action.showContextMenu",label:p("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=ig.get(t))===null||n===void 0||n.showContextMenu()}}h(jB,"ShowContextMenu");lt(ig.ID,ig);ne(jB);class xw{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}h(xw,"CursorState");class Tw{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}h(Tw,"StackElement");class yd extends z{constructor(e){super();this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new xw(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new Tw(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(yd.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new Tw(new xw(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new Tw(new xw(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}h(yd,"CursorUndoRedoController");yd.ID="editor.contrib.cursorUndoRedoController";class GB extends le{constructor(){super({id:"cursorUndo",label:p("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var i;(i=yd.get(t))===null||i===void 0||i.cursorUndo()}}h(GB,"CursorUndo");class $B extends le{constructor(){super({id:"cursorRedo",label:p("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var i;(i=yd.get(t))===null||i===void 0||i.cursorRedo()}}h($B,"CursorRedo");lt(yd.ID,yd);ne(GB);ne($B);class qB{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new T(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new oe(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new oe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new oe(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new oe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new oe(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}h(qB,"DragAndDropCommand");function gu(s){return Ke?s.altKey:s.ctrlKey}h(gu,"hasTriggerModifier");class Br extends z{constructor(e){super();this._editor=e,this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(gu(e)&&(this._modifierPressed=!0),this._mouseDown&&gu(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(gu(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Br.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let i=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}gu(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new W(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){let i=this._editor.getSelection();if(i){const{selectionStartLineNumber:o,selectionStartColumn:r}=i;n=[new oe(o,r,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new oe(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(gu(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Br.ID,new qB(this._dragSelection,t,gu(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new T(e.lineNumber,e.column,e.lineNumber,e.column),options:Br._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}h(Br,"DragAndDropController");Br.ID="editor.contrib.dragAndDrop";Br.TRIGGER_KEY_VALUE=Ke?6:5;Br._DECORATION_OPTIONS=Pe.register({description:"dnd-target",className:"dnd-target"});lt(Br.ID,Br);class Qn{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===Qn._FIND_MATCH_DECORATION||i===Qn._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,o=this._decorations.length;i<o;i++){let r=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(r)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,Qn._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,Qn._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){let r=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);o=new T(o.startLineNumber,o.startColumn,r,a)}this._rangeHighlightDecorationId=i.addDecoration(o,Qn._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=Qn._FIND_MATCH_DECORATION,o=[];if(e.length>1e3){i=Qn._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),d=this._editor.getLayoutInfo().height/a,c=Math.max(2,Math.ceil(3/d));let u=e[0].range.startLineNumber,f=e[0].range.endLineNumber;for(let g=1,m=e.length;g<m;g++){const b=e[g].range;f+c>=b.startLineNumber?b.endLineNumber>f&&(f=b.endLineNumber):(o.push({range:new T(u,1,f,1),options:Qn._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=b.startLineNumber,f=b.endLineNumber)}o.push({range:new T(u,1,f,1),options:Qn._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Qn._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}h(Qn,"FindDecorations");Qn._CURRENT_FIND_MATCH_DECORATION=Pe.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Yt(hI),position:Jo.Center},minimap:{color:Yt(Up),position:$o.Inline}});Qn._FIND_MATCH_DECORATION=Pe.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Yt(hI),position:Jo.Center},minimap:{color:Yt(Up),position:$o.Inline}});Qn._FIND_MATCH_NO_OVERVIEW_DECORATION=Pe.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Qn._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Pe.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Yt(hI),position:Jo.Center}});Qn._RANGE_HIGHLIGHT_DECORATION=Pe.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Qn._FIND_SCOPE_DECORATION=Pe.register({description:"find-scope",className:"findScope",isWholeLine:!0});class YB{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let r=0;r<this._ranges.length;r++)n.push({range:this._ranges[r],text:this._replaceStrings[r]});n.sort((r,a)=>T.compareRangesUsingStarts(r.range,a.range));let i=[],o=n[0];for(let r=1;r<n.length;r++)o.range.endLineNumber===n[r].range.startLineNumber&&o.range.endColumn===n[r].range.startColumn?(o.range=o.range.plusRange(n[r].range),o.text=o.text+n[r].text):(i.push(o),o=n[r]);i.push(o);for(const r of i)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}h(YB,"ReplaceAllCommand");function XB(s,e){if(s&&s[0]!==""){const t=YR(s,e,"-"),n=YR(s,e,"_");return t&&!n?XR(s,e,"-"):!t&&n?XR(s,e,"_"):s[0].toUpperCase()===s[0]?e.toUpperCase():s[0].toLowerCase()===s[0]?e.toLowerCase():yG(s[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):s[0][0].toUpperCase()!==s[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}h(XB,"buildReplaceStringWithCasePreserved");function YR(s,e,t){return s[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&s[0].split(t).length===e.split(t).length}h(YR,"validateSpecificSpecialCharacter");function XR(s,e,t){const n=e.split(t),i=s[0].split(t);let o="";return n.forEach((r,a)=>{o+=XB([i[a]],r)+t}),o.slice(0,-1)}h(XR,"buildReplaceStringForSpecificSpecialCharacter");class TE{constructor(e){this.staticValue=e,this.kind=0}}h(TE,"StaticValueReplacePattern");class ZB{constructor(e){this.pieces=e,this.kind=1}}h(ZB,"DynamicPiecesReplacePattern");class bh{constructor(e){!e||e.length===0?this._state=new TE(""):e.length===1&&e[0].staticValue!==null?this._state=new TE(e[0].staticValue):this._state=new ZB(e)}static fromStaticValue(e){return new bh([ql.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?XB(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,o=this._state.pieces.length;i<o;i++){let r=this._state.pieces[i];if(r.staticValue!==null){n+=r.staticValue;continue}let a=bh._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){let l=[],d=r.caseOps.length,c=0;for(let u=0,f=a.length;u<f;u++){if(c>=d){l.push(a.slice(u));break}switch(r.caseOps[c]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),c++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),c++;break;default:l.push(a[u])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}h(bh,"ReplacePattern");class ql{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new ql(e,-1,null)}static caseOps(e,t){return new ql(null,e,t)}}h(ql,"ReplacePiece");class JB{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=ql.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=ql.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=ql.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new bh(this._result)}}h(JB,"ReplacePieceBuilder");function Ose(s){if(!s||s.length===0)return new bh(null);let e=[],t=new JB(s);for(let n=0,i=s.length;n<i;n++){let o=s.charCodeAt(n);if(o===92){if(n++,n>=i)break;let r=s.charCodeAt(n);switch(r){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(r));break}continue}if(o===36){if(n++,n>=i)break;let r=s.charCodeAt(n);if(r===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(r===48||r===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(n+1<i){let l=s.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}h(Ose,"parseReplaceString");const Fd=new re("findWidgetVisible",!1);Fd.toNegated();const ey=new re("findInputFocussed",!1),hA=new re("replaceInputFocussed",!1),wv={primary:545,mac:{primary:2593}},Cv={primary:565,mac:{primary:2613}},yv={primary:560,mac:{primary:2608}},Sv={primary:554,mac:{primary:2602}},xv={primary:558,mac:{primary:2606}},Lt={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Ml=19999,Fse=240;class df{constructor(e,t){this._toDispose=new Q,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Ki,this._decorations=new Qn(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new gt(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,et(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||!this._editor.hasModel()||(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},Fse)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new T(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));let i=this._findMatches(n,!1,Ml);this._decorations.set(i,n);const o=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(o);if(r===0&&i.length>0){const a=PP(i.map(l=>l.range),l=>T.compareRangesUsingStarts(l,o)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:i}=e,o=this._editor.getModel();return t||i===1?(n===1?n=o.getLineCount():n--,i=o.getLineMaxColumn(n)):i--,new W(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const c=this._decorations.matchAfterPosition(e);c&&this._setCurrentFindMatch(c);return}if(this._decorations.getCount()<Ml){let c=this._decorations.matchBeforePosition(e);c&&c.isEmpty()&&c.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),c=this._decorations.matchBeforePosition(e)),c&&this._setCurrentFindMatch(c);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),i=df._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());let{lineNumber:o,column:r}=e,a=this._editor.getModel(),l=new W(o,r),d=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1);if(d&&d.range.isEmpty()&&d.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),d=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1)),!!d){if(!t&&!i.containsRange(d.range))return this._moveToPrevMatch(d.range.getStartPosition(),!0);this._setCurrentFindMatch(d.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:i}=e,o=this._editor.getModel();return t||i===o.getLineMaxColumn(n)?(n===o.getLineCount()?n=1:n++,i=1):i++,new W(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Ml){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;let o=this._decorations.getFindScope(),r=df._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());let{lineNumber:a,column:l}=e,d=this._editor.getModel(),c=new W(a,l),u=d.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,t);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),u=d.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,t)),u?!i&&!r.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,n,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?Ose(this._state.replaceString):bh.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let i=e.buildReplaceString(n.matches,this._state.preserveCase),o=new Pn(t,i);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new W(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(o=>df._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Ml?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new wl(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let u="mu";n.ignoreCase&&(u+="i"),n.global&&(u+="g"),n=new RegExp(n.source,u)}const i=this._editor.getModel(),o=i.getValue(1),r=i.getFullModelRange(),a=this._getReplacePattern();let l;const d=this._state.preserveCase;a.hasReplacementPatterns||d?l=o.replace(n,function(){return a.buildReplaceString(arguments,d)}):l=o.replace(n,a.buildReplaceString(null,d));let c=new j0(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",c)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let r=0,a=n.length;r<a;r++)i[r]=t.buildReplaceString(n[r].matches,this._state.preserveCase);let o=new YB(this._editor.getSelection(),n.map(r=>r.range),i);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(o=>new oe(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)),i=this._editor.getSelection();for(let o=0,r=n.length;o<r;o++)if(n[o].equalsRange(i)){n=[i].concat(n.slice(0,o)).concat(n.slice(o+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}h(df,"FindModelBoundToEditorModel");class _b extends ns{constructor(e,t,n,i){super();this._hideSoon=this._register(new gt(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const o=i.getColorTheme().getColor(FT),r=i.getColorTheme().getColor(VT),a=i.getColorTheme().getColor(WT);this.caseSensitive=this._register(new oA({appendTitle:this._keybindingLabelFor(Lt.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new sA({appendTitle:this._keybindingLabelFor(Lt.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new rA({appendTitle:this._keybindingLabelFor(Lt.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(l=>{let d=!1;l.isRegex&&(this.regex.checked=this._state.isRegex,d=!0),l.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,d=!0),l.matchCase&&(this.caseSensitive.checked=this._state.matchCase,d=!0),!this._state.isRevealed&&d&&this._revealTemporarily()})),this._register(qD(this._domNode,l=>this._onMouseOut())),this._register(J(this._domNode,"mouseover",l=>this._onMouseOver())),this._applyTheme(i.getColorTheme()),this._register(i.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return _b.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){!this._isVisible||(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(FT),inputActiveOptionForeground:e.getColor(VT),inputActiveOptionBackground:e.getColor(WT)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}h(_b,"FindOptionsWidget");_b.ID="editor.contrib.findOptionsWidget";It((s,e)=>{const t=s.getColor(vi);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=s.getColor(Fa);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const i=s.getColor(od);i&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${i}; }`);const o=s.getColor(Pt);o&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${o}; }`)});function Tv(s,e){return s===1?!0:s===2?!1:e}h(Tv,"effectiveOptionValue");class QB extends z{constructor(){super();this._onFindReplaceStateChange=this._register(new P),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return Tv(this._isRegexOverride,this._isRegex)}get wholeWord(){return Tv(this._wholeWordOverride,this._wholeWord)}get matchCase(){return Tv(this._matchCaseOverride,this._matchCase)}get preserveCase(){return Tv(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,o=!0),typeof n<"u"&&(T.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var i;let o={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},r=!1;const a=this.isRegex,l=this.wholeWord,d=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,r=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,r=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,r=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,r=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((i=e.searchScope)===null||i===void 0)&&i.every(u=>{var f;return(f=this._searchScope)===null||f===void 0?void 0:f.some(g=>!T.equalsRange(g,u))})||(this._searchScope=e.searchScope,o.searchScope=!0,r=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,r=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,o.isSearching=!0,r=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,o.filters=!0,r=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(r=!0,o.isRegex=!0),l!==this.wholeWord&&(r=!0,o.wholeWord=!0),d!==this.matchCase&&(r=!0,o.matchCase=!0),c!==this.preserveCase&&(r=!0,o.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Ml}}h(QB,"FindReplaceState");function ZR(s){var e,t;return((e=s.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=s.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}h(ZR,"showHistoryKeybindingHint");var Wse=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const Vse=xn("find-selection",_.selection,p("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),JR=xn("find-collapsed",_.chevronRight,p("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),QR=xn("find-expanded",_.chevronDown,p("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Bse=xn("find-replace",_.replace,p("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Hse=xn("find-replace-all",_.replaceAll,p("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),zse=xn("find-previous-match",_.arrowUp,p("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Kse=xn("find-next-match",_.arrowDown,p("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Use=p("label.find","Find"),jse=p("placeholder.find","Find"),Gse=p("label.previousMatchButton","Previous Match"),$se=p("label.nextMatchButton","Next Match"),qse=p("label.toggleSelectionFind","Find in Selection"),Yse=p("label.closeButton","Close"),Xse=p("label.replace","Replace"),Zse=p("placeholder.replace","Replace"),Jse=p("label.replaceButton","Replace"),Qse=p("label.replaceAllButton","Replace All"),ere=p("label.toggleReplaceButton","Toggle Replace"),tre=p("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Ml),nre=p("label.matchesLocation","{0} of {1}"),eP=p("label.noResults","No results"),vr=419,ire=275,ore=ire-54;let lp=69;const sre=33,tP="ctrlEnterReplaceAll.windows.donotask",nP=Ke?256:2048;class Lw{constructor(e){this.afterLineNumber=e,this.heightInPx=sre,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}h(Lw,"FindWidgetViewZone");function iP(s,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){s.stopPropagation();return}}h(iP,"stopPropagationForMultiLineUpwards");function oP(s,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){s.stopPropagation();return}}h(oP,"stopPropagationForMultiLineDownwards");class bb extends ns{constructor(e,t,n,i,o,r,a,l,d){super();this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=o,this._contextKeyService=r,this._storageService=l,this._notificationService=d,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(tP,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new nr(500),this._register(He(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(c=>this._onStateChanged(c))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(c=>{if(c.hasChanged(81)&&(this._codeEditor.getOption(81)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),c.hasChanged(131)&&this._tryUpdateWidgetWidth(),c.hasChanged(2)&&this.updateAccessibilitySupport(),c.hasChanged(35)){const u=this._codeEditor.getOption(35).addExtraSpaceOnTop;u&&!this._viewZone&&(this._viewZone=new Lw(0),this._showViewZone()),!u&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>Wse(this,void 0,void 0,function*(){if(this._isVisible){let c=yield this._controller.getGlobalBufferTerm();c&&c!==this._state.searchString&&(this._state.change({searchString:c},!1),this._findInput.select())}}))),this._findInputFocused=ey.bindTo(r),this._findFocusTracker=this._register(wf(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=hA.bindTo(r),this._replaceFocusTracker=this._register(wf(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new Lw(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{!this._isVisible||(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(c=>{if(c.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return bb.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(81)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=ds(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ne)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=lp+"px",this._state.matchesCount>=Ml?this._matchesCount.title=tre:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Ml&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=jo(nre,n,t)}else e=eP;this._matchesCount.appendChild(document.createTextNode(e)),qn(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),lp=Math.max(lp,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===eP)return n===""?p("ariaSearchNoResultEmpty","{0} found",e):p("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=p("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${i}`:i}return p("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(81);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=$n(n),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=i.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=v5(this._domNode).left;r>l&&(t=!1);const d=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(d?d.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new Lw(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===n.heightInPx)return;let r=o-n.heightInPx;n.heightInPx=o,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(75).top,o<=0)return;n.heightInPx=o,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(FT),inputActiveOptionBackground:e.getColor(WT),inputActiveOptionForeground:e.getColor(VT),inputBackground:e.getColor(tI),inputForeground:e.getColor(nI),inputBorder:e.getColor(iI),inputValidationInfoBackground:e.getColor(q5),inputValidationInfoForeground:e.getColor(Y5),inputValidationInfoBorder:e.getColor(X5),inputValidationWarningBackground:e.getColor(Z5),inputValidationWarningForeground:e.getColor(J5),inputValidationWarningBorder:e.getColor(Q5),inputValidationErrorBackground:e.getColor(eF),inputValidationErrorForeground:e.getColor(tF),inputValidationErrorBorder:e.getColor(nF)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!jD(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let o=!1,r=!1,a=!1;if(this._resized&&ds(this._domNode)>vr){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=ds(this._findInput.domNode);return}if(vr+28+i>=n&&(r=!0),vr+28+i-lp>=n&&(a=!0),vr+28+i-lp>=n+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!o&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._resized){this._findInput.inputBox.layout();let l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=ds(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(!!this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!T.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(nP|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return iP(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return oP(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(nP|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Vn&&Zs&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(p("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(tP,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return iP(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return oP(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new fE(null,this._contextViewProvider,{width:ore,label:Use,placeholder:jse,appendCaseSensitiveLabel:this._keybindingLabelFor(Lt.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Lt.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Lt.ToggleRegexCommand),validation:l=>{if(l.length===0||!this._findInput.getRegex())return null;try{return new RegExp(l,"gu"),null}catch(d){return{content:d.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>ZR(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(l=>this._onFindInputKeyDown(l))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(l=>{l.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),l.preventDefault())})),this._register(this._findInput.onRegexKeyDown(l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),l.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(l=>{this._tryUpdateHeight()&&this._showViewZone()})),ni&&this._register(this._findInput.onMouseDown(l=>this._onFindInputMouseDown(l))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new nc({label:Gse+this._keybindingLabelFor(Lt.PreviousMatchFindAction),icon:zse,onTrigger:()=>{this._codeEditor.getAction(Lt.PreviousMatchFindAction).run().then(void 0,Ne)}})),this._nextBtn=this._register(new nc({label:$se+this._keybindingLabelFor(Lt.NextMatchFindAction),icon:Kse,onTrigger:()=>{this._codeEditor.getAction(Lt.NextMatchFindAction).run().then(void 0,Ne)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const i=document.createElement("div");i.className="find-actions",n.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Og({icon:Vse,title:qse+this._keybindingLabelFor(Lt.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let l=this._codeEditor.getSelections();l.map(d=>(d.endColumn===1&&d.endLineNumber>d.startLineNumber&&(d=d.setEndPosition(d.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(d.endLineNumber-1))),d.isEmpty()?null:d)).filter(d=>!!d),l.length&&this._state.change({searchScope:l},!0)}}else this._state.change({searchScope:null},!0)})),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new nc({label:Yse+this._keybindingLabelFor(Lt.CloseFindWidgetCommand),icon:_9,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:l=>{l.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),l.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new gE(null,void 0,{label:Xse,placeholder:Zse,appendPreserveCaseLabel:this._keybindingLabelFor(Lt.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>ZR(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(l=>this._onReplaceInputKeyDown(l))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(l=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(l=>{l.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),l.preventDefault())})),this._replaceBtn=this._register(new nc({label:Jse+this._keybindingLabelFor(Lt.ReplaceOneAction),icon:Bse,onTrigger:()=>{this._controller.replace()},onKeyDown:l=>{l.equals(1026)&&(this._closeBtn.focus(),l.preventDefault())}})),this._replaceAllBtn=this._register(new nc({label:Qse+this._keybindingLabelFor(Lt.ReplaceAllAction),icon:Hse,onTrigger:()=>{this._controller.replaceAll()}}));let o=document.createElement("div");o.className="replace-part",o.appendChild(this._replaceInput.domNode);const r=document.createElement("div");r.className="replace-actions",o.appendChild(r),r.appendChild(this._replaceBtn.domNode),r.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new nc({label:ere,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=ds(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${vr}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(o),this._resizeSash=new jn(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=vr;this._register(this._resizeSash.onDidStart(()=>{a=ds(this._domNode)})),this._register(this._resizeSash.onDidChange(l=>{this._resized=!0;let d=a+l.startX-l.currentX;if(d<vr)return;const c=parseFloat(XD(this._domNode).maxWidth)||0;d>c||(this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=ds(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const l=ds(this._domNode);if(l<vr)return;let d=vr;if(!this._resized||l===vr){const c=this._codeEditor.getLayoutInfo();d=c.width-28-c.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=ds(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}h(bb,"FindWidget");bb.ID="editor.contrib.findWidget";class nc extends ns{constructor(e){super();this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+vt.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...vt.asClassNameArray(JR)),this._domNode.classList.add(...vt.asClassNameArray(QR))):(this._domNode.classList.remove(...vt.asClassNameArray(QR)),this._domNode.classList.add(...vt.asClassNameArray(JR)))}}h(nc,"SimpleButton");It((s,e)=>{const t=h((m,b)=>{b&&e.addRule(`.monaco-editor ${m} { background-color: ${b}; }`)},"addBackgroundColorRule");t(".findMatch",s.getColor(zl)),t(".currentFindMatch",s.getColor(qq)),t(".findScope",s.getColor(Yq));const n=s.getColor(vi);t(".find-widget",n);const i=s.getColor(od);i&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${i}; }`);const o=s.getColor(Yu);o&&e.addRule(`.monaco-editor .findMatch { border: 1px ${s.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const r=s.getColor(Xq);r&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${r}; padding: 1px; box-sizing: border-box; }`);const a=s.getColor(Zq);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${s.type==="hc"?"dashed":"solid"} ${a}; }`);const l=s.getColor(Pt);l&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${l}; }`);const d=s.getColor(Fa);d&&e.addRule(`.monaco-editor .find-widget { color: ${d}; }`);const c=s.getColor(Eq);c&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${c}; }`);const u=s.getColor(Fq);if(u)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${u}; }`);else{const m=s.getColor(Ic);m&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${m}; }`)}const f=s.getColor(KT);f&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${f} !important;
		}
	`);const g=s.getColor(Wr);g&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${g}; }`)});var eH=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Tr=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},vh=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const rre=524288;function LE(s,e="single",t=!1){if(!s.hasModel())return null;const n=s.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=s.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(s.getModel().getValueLengthInRange(n)<rre)return s.getModel().getValueInRange(n)}return null}h(LE,"getSelectionSearchString");let ao=h(class tH extends z{constructor(e,t,n,i){super();this._editor=e,this._findWidgetVisible=Fd.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._updateHistoryDelayer=new nr(500),this._state=this._register(new QB),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let o=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),o&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(tH.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!ey.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Xo(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return vh(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let i=LE(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=Xo(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let i=LE(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let i=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let i=this._editor.getSelections();i.some(o=>!o.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new df(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return vh(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},"CommonFindController");ao.ID="editor.contrib.findController";ao=eH([Tr(1,De),Tr(2,Qr),Tr(3,Uh)],ao);let kE=h(class extends ao{constructor(e,t,n,i,o,r,a,l){super(e,n,a,l);this._contextViewService=t,this._keybindingService=i,this._themeService=o,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return vh(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let o=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":{o=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||o,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new bb(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new _b(this._editor,this._state,this._keybindingService,this._themeService))}},"FindController");kE=eH([Tr(1,z_),Tr(2,De),Tr(3,Xt),Tr(4,Mt),Tr(5,cn),Tr(6,Qr),Tr(7,Uh)],kE);const are=P5(new QD({id:Lt.StartFindAction,label:p("startFindAction","Find"),alias:"Find",precondition:se.or(I.focus,se.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:R.MenubarEditMenu,group:"3_find",title:p({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));are.addImplementation(0,(s,e,t)=>{const n=ao.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});const lre={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:p("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:p("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:p("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:p("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class nH extends le{constructor(){super({id:Lt.StartFindWithArgs,label:p("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:lre})}run(e,t,n){return vh(this,void 0,void 0,function*(){const i=ao.get(t);if(i){const o=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:n?.findInSelection||!1,loop:t.getOption(35).loop},o),i.setGlobalBufferTerm(i.getState().searchString)}})}}h(nH,"StartFindWithArgsAction");class iH extends le{constructor(){super({id:Lt.StartFindWithSelection,label:p("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return vh(this,void 0,void 0,function*(){const n=ao.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}h(iH,"StartFindWithSelectionAction");class uA extends le{run(e,t){return vh(this,void 0,void 0,function*(){const n=ao.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}h(uA,"MatchFindAction");class oH extends uA{constructor(){super({id:Lt.NextMatchFindAction,label:p("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:I.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:se.and(I.focus,ey),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}h(oH,"NextMatchFindAction");class sH extends uA{constructor(){super({id:Lt.PreviousMatchFindAction,label:p("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:I.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:se.and(I.focus,ey),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}h(sH,"PreviousMatchFindAction");class fA extends le{run(e,t){return vh(this,void 0,void 0,function*(){const n=ao.get(t);if(!n)return;const i=t.getOption(35).seedSearchStringFromSelection==="selection";let o=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(o=LE(t,"single",i)),o&&n.setSearchString(o),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}h(fA,"SelectionMatchFindAction");class rH extends fA{constructor(){super({id:Lt.NextSelectionMatchFindAction,label:p("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}h(rH,"NextSelectionMatchFindAction");class aH extends fA{constructor(){super({id:Lt.PreviousSelectionMatchFindAction,label:p("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}h(aH,"PreviousSelectionMatchFindAction");const dre=P5(new QD({id:Lt.StartFindReplaceAction,label:p("startReplace","Replace"),alias:"Replace",precondition:se.or(I.focus,se.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:R.MenubarEditMenu,group:"3_find",title:p({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));dre.addImplementation(0,(s,e,t)=>{if(!e.hasModel()||e.getOption(81))return!1;const n=ao.get(e);if(!n)return!1;const i=e.getSelection(),o=n.isFindInputFocused(),r=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!o,a=o||r?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});lt(ao.ID,kE);ne(nH);ne(iH);ne(oH);ne(sH);ne(rH);ne(aH);const fr=zn.bindToContribution(ao.get);te(new fr({id:Lt.CloseFindWidgetCommand,precondition:Fd,handler:s=>s.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:se.and(I.focus,se.not("isComposing")),primary:9,secondary:[1033]}}));te(new fr({id:Lt.ToggleCaseSensitiveCommand,precondition:void 0,handler:s=>s.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:wv.primary,mac:wv.mac,win:wv.win,linux:wv.linux}}));te(new fr({id:Lt.ToggleWholeWordCommand,precondition:void 0,handler:s=>s.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:Cv.primary,mac:Cv.mac,win:Cv.win,linux:Cv.linux}}));te(new fr({id:Lt.ToggleRegexCommand,precondition:void 0,handler:s=>s.toggleRegex(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:yv.primary,mac:yv.mac,win:yv.win,linux:yv.linux}}));te(new fr({id:Lt.ToggleSearchScopeCommand,precondition:void 0,handler:s=>s.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:Sv.primary,mac:Sv.mac,win:Sv.win,linux:Sv.linux}}));te(new fr({id:Lt.TogglePreserveCaseCommand,precondition:void 0,handler:s=>s.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:xv.primary,mac:xv.mac,win:xv.win,linux:xv.linux}}));te(new fr({id:Lt.ReplaceOneAction,precondition:Fd,handler:s=>s.replace(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:3094}}));te(new fr({id:Lt.ReplaceOneAction,precondition:Fd,handler:s=>s.replace(),kbOpts:{weight:100+5,kbExpr:se.and(I.focus,hA),primary:3}}));te(new fr({id:Lt.ReplaceAllAction,precondition:Fd,handler:s=>s.replaceAll(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:2563}}));te(new fr({id:Lt.ReplaceAllAction,precondition:Fd,handler:s=>s.replaceAll(),kbOpts:{weight:100+5,kbExpr:se.and(I.focus,hA),primary:void 0,mac:{primary:2051}}}));te(new fr({id:Lt.SelectAllMatchesAction,precondition:Fd,handler:s=>s.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:I.focus,primary:515}}));const sP=65535,ka=16777215,rP=4278190080;class og{constructor(e,t,n){if(e.length!==t.length||e.length>sP)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=h((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],r=this._endIndexes[n];if(o>ka||r>ka)throw new Error("startLineNumber or endLineNumber must not exceed "+ka);for(;e.length>0&&!t(o,r);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&ka}getEndLineNumber(e){return this._endIndexes[e]&ka}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,i=e%32,o=this._collapseStates[n];t?this._collapseStates[n]=o|1<<i:this._collapseStates[n]=o&~(1<<i)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new lH(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&rP)>>>24)+((this._endIndexes[e]&rP)>>>16);return t===sP?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}h(og,"FoldingRegions");class lH{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}h(lH,"FoldingRegion");class dH{constructor(e,t){this._updateEventEmitter=new P,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new og(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,o=-1,r=-1;const a=h(l=>{for(;i<l;){const d=this._regions.getEndLineNumber(i),c=this._regions.isCollapsed(i);d<=o&&n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(c,d<=r)),c&&d>r&&(r=d),i++}},"updateDecorationsUntil");for(let l of e){let d=l.regionIndex,c=this._editorDecorationIds[d];if(c&&!t[c]){t[c]=!0,a(d);let u=!this._regions.isCollapsed(d);this._regions.setCollapsed(d,u),o=Math.max(o,this._regions.getEndLineNumber(d))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],i=h((u,f)=>{for(let g of t)if(u<g&&g<=f)return!0;return!1},"isBlocked"),o=-1,r=h((u,f)=>{const g=e.getStartLineNumber(u),m=e.getEndLineNumber(u);f||(f=e.isCollapsed(u)),f&&i(g,m)&&(f=!1),e.setCollapsed(u,f);const b=this._textModel.getLineMaxColumn(g),v={startLineNumber:g,startColumn:Math.max(b-1,1),endLineNumber:g,endColumn:b};n.push({range:v,options:this._decorationProvider.getDecorationOption(f,m<=o)}),f&&m>o&&(o=m)},"initRange"),a=0,l=h(()=>{for(;a<this._regions.length;){let u=this._regions.isCollapsed(a);if(a++,u)return a-1}return-1},"nextCollapsed"),d=0,c=l();for(;c!==-1&&d<e.length;){let u=this._textModel.getDecorationRange(this._editorDecorationIds[c]);if(u){let f=u.startLineNumber;if(u.startColumn===Math.max(u.endColumn-1,1)&&this._textModel.getLineMaxColumn(f)===u.endColumn)for(;d<e.length;){let g=e.getStartLineNumber(d);if(f>=g)r(d,f===g),d++;else break}}c=l()}for(;d<e.length;)r(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let i=n.startLineNumber,o=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:i,endLineNumber:o})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let i=this.getRegionAtLine(n.startLineNumber);i&&!i.isCollapsed&&t.push(i)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let i=this._regions.findRange(e),o=1;for(;i>=0;){let r=this._regions.toRegion(i);(!t||t(r,o))&&n.push(r),o++,i=r.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],i=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=i,l=this._regions.length;a<l;a++){let d=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;r.length>0&&!d.containedBy(r[r.length-1]);)r.pop();r.push(d),t(d,r.length)&&n.push(d)}else break}}else for(let r=i,a=this._regions.length;r<a;r++){let l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<o)(!t||t(l))&&n.push(l);else break}return n}}h(dH,"FoldingModel");function cre(s,e,t){let n=[];for(let i of t){let o=s.getRegionAtLine(i);if(o){const r=!o.isCollapsed;if(n.push(o),e>1){let a=s.getRegionsInside(o,(l,d)=>l.isCollapsed!==r&&d<e);n.push(...a)}}}s.toggleCollapseState(n)}h(cre,"toggleCollapseState");function Fg(s,e,t=Number.MAX_VALUE,n){let i=[];if(n&&n.length>0)for(let o of n){let r=s.getRegionAtLine(o);if(r&&(r.isCollapsed!==e&&i.push(r),t>1)){let a=s.getRegionsInside(r,(l,d)=>l.isCollapsed!==e&&d<t);i.push(...a)}}else{let o=s.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);i.push(...o)}s.toggleCollapseState(i)}h(Fg,"setCollapseStateLevelsDown");function cH(s,e,t,n){let i=[];for(let o of n){let r=s.getAllRegionsAtLine(o,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...r)}s.toggleCollapseState(i)}h(cH,"setCollapseStateLevelsUp");function hre(s,e,t){let n=[];for(let i of t){let o=s.getAllRegionsAtLine(i,r=>r.isCollapsed!==e);o.length>0&&n.push(o[0])}s.toggleCollapseState(n)}h(hre,"setCollapseStateUp");function ure(s,e,t,n){let i=h((r,a)=>a===e&&r.isCollapsed!==t&&!n.some(l=>r.containsLine(l)),"filter"),o=s.getRegionsInside(null,i);s.toggleCollapseState(o)}h(ure,"setCollapseStateAtLevel");function hH(s,e,t){let n=[];for(let r of t){const a=s.getAllRegionsAtLine(r,void 0);a.length>0&&n.push(a[0])}let i=h(r=>n.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,"filter"),o=s.getRegionsInside(null,i);s.toggleCollapseState(o)}h(hH,"setCollapseStateForRest");function gA(s,e,t){let n=s.textModel,i=s.regions,o=[];for(let r=i.length-1;r>=0;r--)if(t!==i.isCollapsed(r)){let a=i.getStartLineNumber(r);e.test(n.getLineContent(a))&&o.push(i.toRegion(r))}s.toggleCollapseState(o)}h(gA,"setCollapseStateForMatchingLines");function pA(s,e,t){let n=s.regions,i=[];for(let o=n.length-1;o>=0;o--)t!==n.isCollapsed(o)&&e===n.getType(o)&&i.push(n.toRegion(o));s.toggleCollapseState(i)}h(pA,"setCollapseStateForType");function fre(s,e){let t=null,n=e.getRegionAtLine(s);if(n!==null&&(t=n.startLineNumber,s===t)){let i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}h(fre,"getParentFoldLine");function gre(s,e){let t=e.getRegionAtLine(s);if(t!==null&&t.startLineNumber===s){if(s!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<s)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}h(gre,"getPreviousFoldLine");function pre(s,e){let t=e.getRegionAtLine(s);if(t!==null&&t.startLineNumber===s){let n=t.parentIndex,i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>s)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}h(pre,"getNextFoldLine");class uH{constructor(e){this._updateEventEmitter=new P,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||sh(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,i=0,o=Number.MAX_VALUE,r=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let l=a.getStartLineNumber(n)+1,d=a.getEndLineNumber(n);o<=l&&d<=r||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===d?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new T(l,1,d,1))),o=l,r=d)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new T(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return aP(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,i=null,o=h(r=>((!i||!mre(r,i))&&(i=aP(this._hiddenRanges,r)),i?i.startLineNumber-1:null),"adjustLine");for(let r=0,a=e.length;r<a;r++){let l=e[r],d=o(l.startLineNumber);d&&(l=l.setStartPosition(d,n.getLineMaxColumn(d)),t=!0);let c=o(l.endLineNumber);c&&(l=l.setEndPosition(c,n.getLineMaxColumn(c)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}h(uH,"HiddenRangeModel");function mre(s,e){return s>=e.startLineNumber&&s<=e.endLineNumber}h(mre,"isInside");function aP(s,e){let t=PP(s,n=>e<n.startLineNumber)-1;return t>=0&&s[t].endLineNumber>=e?s[t]:null}h(aP,"findRange");const _re=5e3,bre="indent";class fH{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.maxFoldingRegions=n,this.id=bre}dispose(){}compute(e,t){let n=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=n&&!!n.offSide,o=n&&n.markers;return Promise.resolve(vre(this.editorModel,i,o,this.maxFoldingRegions,t))}}h(fH,"IndentRangeProvider");class gH{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>ka||t>ka)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=this._length-1,o=0;i>=0;i--,o++)t[o]=this._startIndexes[i],n[o]=this._endIndexes[i];return new og(t,n)}else{this._notifyTooManyRegions&&this._notifyTooManyRegions(this._foldingRangesLimit);let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let l=this._indentOccurrences[a];if(l){if(l+t>this._foldingRangesLimit){n=a;break}t+=l}}const i=e.getOptions().tabSize;let o=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,l=0;a>=0;a--){let d=this._startIndexes[a],c=e.getLineContent(d),u=Y0(c,i);(u<n||u===n&&t++<this._foldingRangesLimit)&&(o[l]=d,r[l]=this._endIndexes[a],l++)}return new og(o,r)}}}h(gH,"RangesCollector$1");function vre(s,e,t,n,i){const o=s.getOptions().tabSize;n=n??_re;let r=new gH(n,i),a;t&&(a=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let l=[],d=s.getLineCount()+1;l.push({indent:-1,endAbove:d,line:d});for(let c=s.getLineCount();c>0;c--){let u=s.getLineContent(c),f=Y0(u,o),g=l[l.length-1];if(f===-1){e&&(g.endAbove=c);continue}let m;if(a&&(m=u.match(a)))if(m[1]){let b=l.length-1;for(;b>0&&l[b].indent!==-2;)b--;if(b>0){l.length=b+1,g=l[b],r.insertFirst(c,g.line,f),g.line=c,g.indent=f,g.endAbove=c;continue}}else{l.push({indent:-2,endAbove:c,line:c});continue}if(g.indent>f){do l.pop(),g=l[l.length-1];while(g.indent>f);let b=g.endAbove-1;b-c>=1&&r.insertFirst(c,b,f)}g.indent===f?g.endAbove=c:l.push({indent:f,endAbove:c,line:c})}return r.toIndentRanges(s)}h(vre,"computeRanges");const wre={},pH="syntax";class mH{constructor(e,t,n,i){this.editorModel=e,this.providers=t,this.limit=i,this.id=pH;for(const o of t)typeof o.onDidChange=="function"&&(this.disposables||(this.disposables=new Q),this.disposables.add(o.onDidChange(n)))}compute(e,t){return Cre(this.providers,this.editorModel,e).then(n=>n?bH(n,this.limit,t):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}h(mH,"SyntaxRangeProvider");function Cre(s,e,t){let n=null,i=s.map((o,r)=>Promise.resolve(o.provideFoldingRanges(e,wre,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let l=e.getLineCount();for(let d of a)d.start>0&&d.end>d.start&&d.end<=l&&n.push({start:d.start,end:d.end,rank:r,kind:d.kind})}},Nn));return Promise.all(i).then(o=>n)}h(Cre,"collectSyntaxRanges");class _H{constructor(e,t){this._notifyTooManyRegions=t,this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>ka||t>ka)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=i,this._types[o]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new og(e,t,this._types)}else{this._notifyTooManyRegions&&this._notifyTooManyRegions(this._foldingRangesLimit);let e=0,t=this._nestingLevelCounts.length;for(let r=0;r<this._nestingLevelCounts.length;r++){let a=this._nestingLevelCounts[r];if(a){if(a+e>this._foldingRangesLimit){t=r;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),i=new Uint32Array(this._foldingRangesLimit),o=[];for(let r=0,a=0;r<this._length;r++){let l=this._nestingLevels[r];(l<t||l===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[r],i[a]=this._endIndexes[r],o[a]=this._types[r],a++)}return new og(n,i,o)}}}h(_H,"RangesCollector");function bH(s,e,t){let n=s.sort((a,l)=>{let d=a.start-l.start;return d===0&&(d=a.rank-l.rank),d}),i=new _H(e,t),o,r=[];for(let a of n)if(!o)o=a,i.add(a.start,a.end,a.kind&&a.kind.value,r.length);else if(a.start>o.start)if(a.end<=o.end)r.push(o),o=a,i.add(a.start,a.end,a.kind&&a.kind.value,r.length);else{if(a.start>o.end){do o=r.pop();while(o&&a.start>o.end);o&&r.push(o),o=a}i.add(a.start,a.end,a.kind&&a.kind.value,r.length)}return i.toIndentRanges()}h(bH,"sanitizeRanges");const vH="init";class wH{constructor(e,t,n,i){if(this.editorModel=e,this.id=vH,t.length){let o=h(r=>({range:{startLineNumber:r.startLineNumber,startColumn:0,endLineNumber:r.endLineNumber,endColumn:e.getLineLength(r.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}}),"toDecorationRange");this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(n,i)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let i=this.editorModel.getDecorationRange(n);i&&t.push({start:i.startLineNumber,end:i.endLineNumber,rank:1})}return Promise.resolve(bH(t,Number.MAX_VALUE))}}h(wH,"InitializingRangeProvider");const mA=xn("folding-expanded",_.chevronDown,p("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),_A=xn("folding-collapsed",_.chevronRight,p("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class Uo{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?Uo.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?Uo.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Uo.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?Uo.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:Uo.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}h(Uo,"FoldingDecorationProvider");Uo.COLLAPSED_VISUAL_DECORATION=Pe.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:vt.asClassName(_A)});Uo.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Pe.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:vt.asClassName(_A)});Uo.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Pe.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:vt.asClassName(mA)});Uo.EXPANDED_VISUAL_DECORATION=Pe.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+vt.asClassName(mA)});Uo.HIDDEN_RANGE_DECORATION=Pe.register({description:"folding-hidden-range-decoration",stickiness:1});var yre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},dp=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const Si=new re("foldingEnabled",!1);let sg=h(class CH extends z{constructor(e,t,n,i,o,r){super();this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=r,this._tooManyRegionsNotified=!1,this.localToDispose=this._register(new Q),this.editor=e;const a=this.editor.getOptions();this._isEnabled=a.get(37),this._useFoldingProviders=a.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(42),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(40),this._maxFoldingRegions=a.get(41),this.updateDebounceInfo=o.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new Uo(e),this.foldingDecorationProvider.autoHideFoldingControls=a.get(99)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=a.get(39),this.foldingEnabled=Si.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._notifyTooManyRegions=l=>{this._tooManyRegionsNotified||(i.notify({severity:Ot.Warning,sticky:!0,message:p("maximum fold ranges",`The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?["editor.foldingMaximumRegions"]) to enable more.`,l)}),this._tooManyRegionsNotified=!0)},this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(41)&&(this._maxFoldingRegions=this.editor.getOptions().get(41),this._tooManyRegionsNotified=!1,this.onModelChanged()),l.hasChanged(99)||l.hasChanged(39)){const d=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=d.get(99)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=d.get(39),this.triggerFoldingModelChanged()}l.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(42)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(42)),l.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(CH.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===pH||e.provider===vH)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const i=this.getFoldingModel();i&&i.then(o=>{if(o){this._restoringViewState=!0;try{o.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,Ne)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new dH(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new uH(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new nr(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new gt(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new fH(e,this.languageConfigurationService,this._maxFoldingRegions),this._useFoldingProviders&&this.foldingModel){let t=this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new wH(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new mH(e,t,()=>this.triggerFoldingModelChanged(),this._maxFoldingRegions))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new wi(!0),n=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=Hn(o=>n.compute(o,this._notifyTooManyRegions));return i.then(o=>{if(o&&i===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const c=o.setCollapsedAllOfType(bs.Imports.value,!0);c&&(r=$a.capture(this.editor),this._currentModelHasFoldedImports=c)}let a=this.editor.getSelections(),l=a?a.map(c=>c.startLineNumber):[];e.update(o,l),r&&r.restore(this.editor);const d=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=d)}return e})}).then(void 0,e=>(Ne(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();!e||e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let i=[];for(let o of n){let r=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&i.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,Ne)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const i=e.target.detail,o=e.target.element.offsetLeft;if(i.offsetX-o<5)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let i=this.editor.getModel();if(i&&t.startColumn===i.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,o=e.target.range;if(!(!o||o.startLineNumber!==n)){if(i){if(e.target.type!==4)return}else{let r=this.editor.getModel();if(!r||o.startColumn!==r.getLineMaxColumn(n))return}t.then(r=>{if(r){let a=r.getRegionAtLine(n);if(a&&a.startLineNumber===n){let l=a.isCollapsed;if(i||l){let d=e.event.altKey,c=[];if(d){let u=h(g=>!g.containedBy(a)&&!a.containedBy(g),"filter"),f=r.getRegionsInside(null,u);for(const g of f)g.isCollapsed&&c.push(g);c.length===0&&(c=f)}else{let u=e.event.middleButton||e.event.shiftKey;if(u)for(const f of r.getRegionsInside(a))f.isCollapsed===l&&c.push(f);(l||!u||c.length===0)&&c.push(a)}r.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,Ne)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},"FoldingController");sg.ID="editor.contrib.folding";sg=yre([dp(1,De),dp(2,oi),dp(3,cn),dp(4,os),dp(5,ce)],sg);class xi extends le{runEditorCommand(e,t,n){const i=e.get(oi),o=sg.get(t);if(!o)return;const r=o.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(o,a,t,n,i);const l=t.getSelection();l&&o.reveal(l.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}h(xi,"FoldingAction");function yH(s){if(!Ji(s)){if(!Wi(s))return!1;const e=s;if(!Ji(e.levels)&&!Gc(e.levels)||!Ji(e.direction)&&!Yo(e.direction)||!Ji(e.selectionLines)&&(!BP(e.selectionLines)||!e.selectionLines.every(Gc)))return!1}return!0}h(yH,"foldingArgumentsConstraint");class SH extends xi{constructor(){super({id:"editor.unfold",label:p("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:yH,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){let o=i&&i.levels||1,r=this.getLineNumbers(i,n);i&&i.direction==="up"?cH(t,!1,o,r):Fg(t,!1,o,r)}}h(SH,"UnfoldAction");class xH extends xi{constructor(){super({id:"editor.unfoldRecursively",label:p("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2137),weight:100}})}invoke(e,t,n,i){Fg(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}h(xH,"UnFoldRecursivelyAction");class TH extends xi{constructor(){super({id:"editor.fold",label:p("foldAction.label","Fold"),alias:"Fold",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:yH,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){let o=this.getLineNumbers(i,n);const r=i&&i.levels,a=i&&i.direction;typeof r!="number"&&typeof a!="string"?hre(t,!0,o):a==="up"?cH(t,!0,r||1,o):Fg(t,!0,r||1,o)}}h(TH,"FoldAction");class LH extends xi{constructor(){super({id:"editor.toggleFold",label:p("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2090),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);cre(t,1,i)}}h(LH,"ToggleFoldAction");class kH extends xi{constructor(){super({id:"editor.foldRecursively",label:p("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2135),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);Fg(t,!0,Number.MAX_VALUE,i)}}h(kH,"FoldRecursivelyAction");class EH extends xi{constructor(){super({id:"editor.foldAllBlockComments",label:p("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2133),weight:100}})}invoke(e,t,n,i,o){if(t.regions.hasTypes())pA(t,bs.Comment.value,!0);else{const r=n.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){let l=new RegExp("^\\s*"+Xo(a.blockCommentStartToken));gA(t,l,!0)}}}}h(EH,"FoldAllBlockCommentsAction");class DH extends xi{constructor(){super({id:"editor.foldAllMarkerRegions",label:p("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2077),weight:100}})}invoke(e,t,n,i,o){if(t.regions.hasTypes())pA(t,bs.Region.value,!0);else{const r=n.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){let l=new RegExp(a.markers.start);gA(t,l,!0)}}}}h(DH,"FoldAllRegionsAction");class IH extends xi{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:p("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2078),weight:100}})}invoke(e,t,n,i,o){if(t.regions.hasTypes())pA(t,bs.Region.value,!1);else{const r=n.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){let l=new RegExp(a.markers.start);gA(t,l,!1)}}}}h(IH,"UnfoldAllRegionsAction");class NH extends xi{constructor(){super({id:"editor.foldAllExcept",label:p("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2131),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);hH(t,!0,i)}}h(NH,"FoldAllRegionsExceptAction");class AH extends xi{constructor(){super({id:"editor.unfoldAllExcept",label:p("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2129),weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);hH(t,!1,i)}}h(AH,"UnfoldAllRegionsExceptAction");class MH extends xi{constructor(){super({id:"editor.foldAll",label:p("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2069),weight:100}})}invoke(e,t,n){Fg(t,!0)}}h(MH,"FoldAllAction");class RH extends xi{constructor(){super({id:"editor.unfoldAll",label:p("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2088),weight:100}})}invoke(e,t,n){Fg(t,!1)}}h(RH,"UnfoldAllAction");class Sd extends xi{getFoldingLevel(){return parseInt(this.id.substr(Sd.ID_PREFIX.length))}invoke(e,t,n){ure(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}h(Sd,"FoldLevelAction");Sd.ID_PREFIX="editor.foldLevel";Sd.ID=s=>Sd.ID_PREFIX+s;class PH extends xi{constructor(){super({id:"editor.gotoParentFold",label:p("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let o=fre(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}h(PH,"GotoParentFoldAction");class OH extends xi{constructor(){super({id:"editor.gotoPreviousFold",label:p("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let o=gre(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}h(OH,"GotoPreviousFoldAction");class FH extends xi{constructor(){super({id:"editor.gotoNextFold",label:p("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,n){let i=this.getSelectedLines(n);if(i.length>0){let o=pre(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}h(FH,"GotoNextFoldAction");lt(sg.ID,sg);ne(SH);ne(xH);ne(TH);ne(kH);ne(MH);ne(RH);ne(EH);ne(DH);ne(IH);ne(NH);ne(AH);ne(LH);ne(PH);ne(OH);ne(FH);for(let s=1;s<=7;s++)O5(new Sd({id:Sd.ID(s),label:p("foldLevelAction.label","Fold Level {0}",s),alias:`Fold Level ${s}`,precondition:Si,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2048|21+s),weight:100}}));const Sre=A("editor.foldBackground",{light:xe(Hl,.3),dark:xe(Hl,.3),hc:null},p("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),xre=A("editorGutter.foldingControlForeground",{dark:Ay,light:Ay,hc:Ay},p("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));It((s,e)=>{const t=s.getColor(Sre);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=s.getColor(xre);n&&e.addRule(`
		.monaco-editor .cldr${vt.asCSSSelector(mA)},
		.monaco-editor .cldr${vt.asCSSSelector(_A)} {
			color: ${n} !important;
		}
		`)});class WH extends le{constructor(){super({id:"editor.action.fontZoomIn",label:p("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Ua.setZoomLevel(Ua.getZoomLevel()+1)}}h(WH,"EditorFontZoomIn");class VH extends le{constructor(){super({id:"editor.action.fontZoomOut",label:p("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Ua.setZoomLevel(Ua.getZoomLevel()-1)}}h(VH,"EditorFontZoomOut");class BH extends le{constructor(){super({id:"editor.action.fontZoomReset",label:p("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Ua.setZoomLevel(0)}}h(BH,"EditorFontZoomReset");ne(WH);ne(VH);ne(BH);var HH=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},QC=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},bA=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let s_=h(class{constructor(e,t,n){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._disposables=new Q,this._sessionDisposables=new Q,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(i=>{i.hasChanged(49)&&this._update()}))}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(49)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let n=new pc;for(let i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(i=>{let o=i.charCodeAt(i.length-1);n.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=new Bn,o=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){i.cancel(),o.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=n.lineNumber){i.cancel(),o.dispose();return}});_V(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),i.token).then(r=>{i.token.isCancellationRequested||io(r)&&(uh.execute(this._editor,r,!0),MN(r))}).finally(()=>{o.dispose()})}},"FormatOnType");s_.ID="editor.contrib.autoFormat";s_=HH([QC(1,ce),QC(2,is)],s_);let r_=h(class{constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new Q,this._callOnModel=new Q,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(48)&&(!this.editor.hasModel()||!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())||this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e))))}_trigger(e){!this.editor.hasModel()||this.editor.getSelections().length>1||this._instantiationService.invokeFunction(mV,this.editor,e,2,Md.None,je.None).catch(Ne)}},"FormatOnPaste");r_.ID="editor.contrib.formatOnPaste";r_=HH([QC(1,ce),QC(2,Ge)],r_);class zH extends le{constructor(){super({id:"editor.action.formatDocument",label:p("formatDocument.label","Format Document"),alias:"Format Document",precondition:se.and(I.notInCompositeEditor,I.writable,I.hasDocumentFormattingProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return bA(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(Ge);yield e.get(Rd).showWhile(n.invokeFunction(Ane,t,1,Md.None,je.None),250)}})}}h(zH,"FormatDocumentAction");class KH extends le{constructor(){super({id:"editor.action.formatSelection",label:p("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:se.and(I.writable,I.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2084),weight:100},contextMenuOpts:{when:I.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return bA(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(Ge),i=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new T(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);yield e.get(Rd).showWhile(n.invokeFunction(mV,t,o,1,Md.None,je.None),250)})}}h(KH,"FormatSelectionAction");lt(s_.ID,s_);lt(r_.ID,r_);ne(zH);ne(KH);tt.registerCommand("editor.action.format",s=>bA(void 0,void 0,void 0,function*(){const e=s.get(ht).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=s.get(ln);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));var Tre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},XS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},Lre=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class xc{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let o=0;t.children.get(i)!==void 0;o++)i=`${n}_${o}`;return i}static empty(e){return e.children.size===0}}h(xc,"TreeElement");class EE extends xc{constructor(e,t,n){super();this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}h(EE,"OutlineElement");class UH extends xc{constructor(e,t,n,i){super();this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}}h(UH,"OutlineGroup");class Ca extends xc{constructor(e){super();this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t,n){const i=new Bn(n),o=new Ca(t.uri),r=e.ordered(t),a=r.map((d,c)=>{var u;let f=xc.findId(`provider_${c}`,o),g=new UH(f,o,(u=d.displayName)!==null&&u!==void 0?u:"Unknown Outline Provider",c);return Promise.resolve(d.provideDocumentSymbols(t,i.token)).then(m=>{for(const b of m||[])Ca._makeOutlineElement(b,g);return g},m=>(Nn(m),g)).then(m=>{xc.empty(m)?m.remove():o._groups.set(f,m)})}),l=e.onDidChange(()=>{const d=e.ordered(t);xo(d,r)||i.cancel()});return Promise.all(a).then(()=>i.token.isCancellationRequested&&!n.isCancellationRequested?Ca.create(e,t,n):o._compact()).finally(()=>{l.dispose()})}static _makeOutlineElement(e,t){let n=xc.findId(e,t),i=new EE(n,t,e);if(e.children)for(const o of e.children)Ca._makeOutlineElement(o,i);t.children.set(i.id,i)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=Qe.first(this._groups.values());for(let[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof EE?e.push(t.symbol):e.push(...Qe.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>T.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Ca._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>W.compare(T.getStartPosition(n.range),T.getStartPosition(i.range))||W.compare(T.getEndPosition(i.range),T.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&Ca._flattenDocumentSymbols(e,i.children,i.name)}}h(Ca,"OutlineModel");const ty=Xe("IOutlineModelService");let DE=h(class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new Q,this._cache=new Qa(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved(i=>{this._cache.delete(i.id)}))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return Lre(this,void 0,void 0,function*(){const n=this._languageFeaturesService.documentSymbolProvider,i=n.ordered(e);let o=this._cache.get(e.id);if(!o||o.versionId!==e.getVersionId()||!xo(o.provider,i)){let a=new Bn;o={versionId:e.getVersionId(),provider:i,promiseCnt:0,source:a,promise:Ca.create(n,e,a.token),model:void 0},this._cache.set(e.id,o);const l=Date.now();o.promise.then(d=>{o.model=d,this._debounceInformation.update(e,Date.now()-l)}).catch(d=>{this._cache.delete(e.id)})}if(o.model)return o.model;o.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--o.promiseCnt===0&&(o.source.cancel(),this._cache.delete(e.id))});try{return yield o.promise}finally{r.dispose()}})}},"OutlineModelService");DE=Tre([XS(0,ce),XS(1,os),XS(2,Bt)],DE);it(ty,DE,!0);var kre=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};tt.registerCommand("_executeDocumentSymbolProvider",function(s,...e){return kre(this,void 0,void 0,function*(){const[t]=e;bt(Ce.isUri(t));const n=s.get(ty),o=yield s.get(Ui).createModelReference(t);try{return(yield n.getOrCreate(o.object.textEditorModel,je.None)).getTopLevelSymbols()}finally{o.dispose()}})});const jH="editor.action.inlineSuggest.commit";class vA{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return Ere(n,this.parts.map(o=>({range:{startLineNumber:1,endLineNumber:1,startColumn:o.column,endColumn:o.column},text:o.lines.join(`
`)}))).substring(this.parts[0].column-1)}}h(vA,"GhostText");class GH{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}h(GH,"PositionOffsetTransformer");function Ere(s,e){const t=new GH(s),n=e.map(i=>{const o=T.lift(i.range);return{startOffset:t.getOffset(o.getStartPosition()),endOffset:t.getOffset(o.getEndPosition()),text:i.text}});n.sort((i,o)=>o.startOffset-i.startOffset);for(const i of n)s=s.substring(0,i.startOffset)+i.text+s.substring(i.endOffset);return s}h(Ere,"applyEdits");class IE{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}h(IE,"GhostTextPart");class wA extends z{constructor(e){super();this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new P,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(106)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}h(wA,"BaseGhostTextWidgetModel");function Dre(s,e){return s===e?!0:!s||!e?!1:s.range.equalsRange(e.range)&&s.text===e.text&&s.command===e.command}h(Dre,"normalizedInlineCompletionsEquals");function $H(s,e,t,n,i=0){if(s.range.startLineNumber!==s.range.endLineNumber)return;const o=e.getLineContent(s.range.startLineNumber),r=pt(o).length;if(s.range.startColumn-1<=r){const g=pt(s.text).length,m=o.substring(s.range.startColumn-1,r),b=T.fromPositions(s.range.getStartPosition().delta(0,m.length),s.range.getEndPosition()),v=s.text.startsWith(m)?s.text.substring(m.length):s.text.substring(g);s={range:b,text:v,command:s.command}}const l=e.getValueInRange(s.range),d=Ire(l,s.text);if(!d)return;const c=s.range.startLineNumber,u=new Array;if(t==="prefix"){const g=d.filter(m=>m.originalLength===0);if(g.length>1||g.length===1&&g[0].originalStart!==l.length)return}const f=s.text.length-i;for(const g of d){const m=s.range.startColumn+g.originalStart+g.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===s.range.startLineNumber&&m<n.column||g.originalLength>0)return;if(g.modifiedLength===0)continue;const b=g.modifiedStart+g.modifiedLength,v=Math.max(g.modifiedStart,Math.min(b,f)),C=s.text.substring(g.modifiedStart,v),w=s.text.substring(v,Math.max(g.modifiedStart,b));if(C.length>0){const y=zr(C);u.push(new IE(m,y,!1))}if(w.length>0){const y=zr(w);u.push(new IE(m,y,!0))}}return new vA(c,u,0)}h($H,"inlineCompletionToGhostText");let wr;function Ire(s,e){if(wr?.originalValue===s&&wr?.newValue===e)return wr?.changes;{const t=Nre(s,e);return wr={originalValue:s,newValue:e,changes:t},t}}h(Ire,"cachingDiff");function Nre(s,e){if(s.length>5e3||e.length>5e3)return;function t(l){let d=0;for(let c=0,u=l.length;c<u;c++){const f=l.charCodeAt(c);f>d&&(d=f)}return d}h(t,"getMaxCharCode");const n=Math.max(t(s),t(e));function i(l){if(l<0)throw new Error("unexpected");return n+l+1}h(i,"getUniqueCharCode");function o(l){let d=0,c=0;const u=new Int32Array(l.length);for(let f=0,g=l.length;f<g;f++){const m=c*100+d;l[f]==="("?(u[f]=i(2*m),d++):l[f]===")"?(u[f]=i(2*m+1),d===1&&c++,d=Math.max(d-1,0)):u[f]=l.charCodeAt(f)}return u}h(o,"getElements");const r=o(s),a=o(e);return new Bs({getElements:()=>r},{getElements:()=>a}).ComputeDiff(!1).changes}h(Nre,"smartDiff");function Are(s,e){const t=new EI,n=new II(t,d=>e.getLanguageConfiguration(d)),i=new DI(new qH([s]),n),o=aL(i,[],void 0,!0);let r="";const a=s.getLineContent();function l(d,c){if(d.kind===2)l(d.openingBracket,c),c=gn(c,d.openingBracket.length),d.child&&(l(d.child,c),c=gn(c,d.child.length)),d.closingBracket?(l(d.closingBracket,c),c=gn(c,d.closingBracket.length)):r+=n.getSingleLanguageBracketTokens(d.openingBracket.languageId).findClosingTokenText(d.openingBracket.bracketIds);else if(d.kind!==3){if(d.kind===0||d.kind===1)r+=a.substring(c,gn(c,d.length));else if(d.kind===4)for(const u of d.children)l(u,c),c=gn(c,u.length)}}return h(l,"processNode"),l(o,Kr),r}h(Are,"fixBracketsInLine");class qH{constructor(e){this.lines=e}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}getLineTokens(e){return this.lines[e-1]}}h(qH,"StaticTokenizerSource");var Mre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Lv=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},ya=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let NE=h(class extends z{constructor(e,t,n,i,o,r){super();this.editor=e,this.cache=t,this.commandService=n,this.languageConfigurationService=i,this.languageFeaturesService=o,this.debounceService=r,this.onDidChangeEmitter=new P,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new hi),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:200}),this._register(n.onDidExecuteCommand(a=>{new Set([Zu.Tab.id,Zu.DeleteLeft.id,Zu.DeleteRight.id,jH,"acceptSelectedSuggestion"]).has(a.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(a=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(a=>{this.session&&!this.session.isValid&&this.hide()})),this._register(He(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){!this.editor.getOption(55).enabled||this.session&&this.session.isValid||this.trigger(Ho.Automatic)}trigger(e){if(this.completionSession.value){e===Ho.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new YH(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return ya(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}},"InlineCompletionsModel");NE=Mre([Lv(2,ln),Lv(3,oi),Lv(4,ce),Lv(5,os)],NE);class YH extends wA{constructor(e,t,n,i,o,r,a,l,d){super(e);this.triggerPosition=t,this.shouldUpdate=n,this.commandService=i,this.cache=o,this.initialTriggerKind=r,this.languageConfigurationService=a,this.registry=l,this.debounce=d,this.minReservedLineCount=0,this.updateOperation=this._register(new hi),this.updateSoon=this._register(new gt(()=>{let u=this.initialTriggerKind;return this.initialTriggerKind=Ho.Automatic,this.update(u)},50)),this.currentlySelectedCompletionId=void 0;let c;this._register(this.onDidChange(()=>{const u=this.currentCompletion;if(u&&u.sourceInlineCompletion!==c){c=u.sourceInlineCompletion;const f=u.sourceProvider;f.handleItemDidShow&&f.handleItemDidShow(u.sourceInlineCompletions,c)}})),this._register(He(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(u=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(u=>{this.scheduleAutomaticUpdate()})),this._register(this.registry.onDidChange(()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(!!this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return ya(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return ya(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return ya(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Ho.Explicit?yield this.updateOperation.value.promise:yield this.update(Ho.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Ho.Explicit&&(yield this.update(Ho.Explicit))})}hasMultipleInlineCompletions(){var e;return ya(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(55).mode;return e?$H(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(!!e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return ya(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=new Date,i=Hn(r=>ya(this,void 0,void 0,function*(){let a;try{a=yield JH(this.registry,t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},r,this.languageConfigurationService);const l=new Date;this.debounce.update(this.editor.getModel(),l.getTime()-n.getTime())}catch(l){Ne(l);return}r.isCancellationRequested||(this.cache.setValue(this.editor,a,e),this.onDidChangeEmitter.fire())})),o=new CA(i,e);this.updateOperation.value=o,yield i,this.updateOperation.value===o&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[jt.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t?.dispose()}).then(void 0,Nn):t?.dispose(),this.onDidChangeEmitter.fire()}}h(YH,"InlineCompletionsSession");class CA{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}h(CA,"UpdateOperation");class XH extends z{constructor(e,t,n,i){super();this.triggerKind=i;const o=e.deltaDecorations([],t.items.map(r=>({range:r.range,options:{description:"inline-completion-tracking-range"}})));this._register(He(()=>{e.deltaDecorations(o,[])})),this.completions=t.items.map((r,a)=>new ZH(r,o[a])),this._register(e.onDidChangeModelContent(()=>{let r=!1;const a=e.getModel();for(const l of this.completions){const d=a.getDecorationRange(l.decorationId);if(!d){Ne(new Error("Decoration has no range"));continue}l.synchronizedRange.equalsRange(d)||(r=!0,l.synchronizedRange=d)}r&&n()})),this._register(t)}}h(XH,"SynchronizedInlineCompletionsCache");class ZH{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}h(ZH,"CachedInlineCompletion");function Rre(s,e){const t=e.getWordAtPosition(s),n=e.getLineMaxColumn(s.lineNumber);return t?new T(s.lineNumber,t.startColumn,s.lineNumber,n):T.fromPositions(s,s.with(void 0,n))}h(Rre,"getDefaultRange");function JH(s,e,t,n,i=je.None,o){return ya(this,void 0,void 0,function*(){const r=Rre(e,t),a=s.all(t),l=yield Promise.all(a.map(c=>ya(this,void 0,void 0,function*(){const u=yield Promise.resolve(c.provideInlineCompletions(t,e,n,i)).catch(Nn);return{completions:u,provider:c,dispose:()=>{u&&c.freeInlineCompletions(u)}}}))),d=new Map;for(const c of l){const u=c.completions;if(u)for(const f of u.items){const g=f.range?T.lift(f.range):r;if(g.startLineNumber!==g.endLineNumber)continue;const m=o&&f.completeBracketPairs?Pre(f.text,g.getStartPosition(),t,o):f.text,b={text:m,range:g,command:f.command,sourceProvider:c.provider,sourceInlineCompletions:u,sourceInlineCompletion:f};d.set(JSON.stringify({text:m,range:f.range}),b)}}return{items:[...d.values()],dispose:()=>{for(const c of l)c.dispose()}}})}h(JH,"provideInlineCompletions");function Pre(s,e,t,n){const o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+s,r=t.tokenizeLineWithEdit(e,o.length-(e.column-1),s),a=r?.sliceAndInflate(e.column-1,o.length,0);return a?(console.log(a),Are(a,n)):s}h(Pre,"closeBrackets");function e0(s,e){if(!e)return e;const t=s.getValueInRange(e.range),n=uf(t,e.text),i=s.getOffsetAt(e.range.getStartPosition())+n,o=s.getPositionAt(i),r=t.substr(n),a=Kw(r,e.text),l=s.getPositionAt(Math.max(i,s.getOffsetAt(e.range.getEndPosition())-a));return{range:T.fromPositions(o,l),text:e.text.substr(n,e.text.length-n-a)}}h(e0,"minimizeInlineCompletion");const Rn=new Uint8Array(16),ui=[];for(let s=0;s<256;s++)ui.push(s.toString(16).padStart(2,"0"));let AE;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?AE=crypto.getRandomValues.bind(crypto):AE=h(function(s){for(let e=0;e<s.length;e++)s[e]=Math.floor(Math.random()*256);return s},"_fillRandomValues");function Ore(){AE(Rn),Rn[6]=Rn[6]&15|64,Rn[8]=Rn[8]&63|128;let s=0,e="";return e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+="-",e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+="-",e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+="-",e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+="-",e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+=ui[Rn[s++]],e+=ui[Rn[s++]],e}h(Ore,"generateUuid");Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class QH{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}h(QH,"CompositeSnippetVariableResolver");class ez{constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(n=o.value,i=o.multiline)}if(n&&i&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),r=pt(o,0,this._selection.startColumn-1);let a=r;e.snippet.walk(d=>d===e?!1:(d instanceof Fi&&(a=pt(zr(d.value).pop())),!0));const l=uf(a,r);n=n.replace(/(\r\n|\r|\n)(.*)/g,(d,c,u)=>`${c}${a.substr(l)}${u}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}h(ez,"SelectionBasedVariableResolver");class tz{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Lc(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Lc(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return EO(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(o1(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}h(tz,"ModelBasedVariableResolver");class nz{constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(!!t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!FO(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}h(nz,"ClipboardBasedVariableResolver");class iz{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=fn.getComments(n);if(!!i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}}h(iz,"CommentBasedVariableResolver");class Xs{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Xs.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Xs.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Xs.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Xs.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}h(Xs,"TimeBasedVariableResolver");Xs.dayNames=[p("Sunday","Sunday"),p("Monday","Monday"),p("Tuesday","Tuesday"),p("Wednesday","Wednesday"),p("Thursday","Thursday"),p("Friday","Friday"),p("Saturday","Saturday")];Xs.dayNamesShort=[p("SundayShort","Sun"),p("MondayShort","Mon"),p("TuesdayShort","Tue"),p("WednesdayShort","Wed"),p("ThursdayShort","Thu"),p("FridayShort","Fri"),p("SaturdayShort","Sat")];Xs.monthNames=[p("January","January"),p("February","February"),p("March","March"),p("April","April"),p("May","May"),p("June","June"),p("July","July"),p("August","August"),p("September","September"),p("October","October"),p("November","November"),p("December","December")];Xs.monthNamesShort=[p("JanuaryShort","Jan"),p("FebruaryShort","Feb"),p("MarchShort","Mar"),p("AprilShort","Apr"),p("MayShort","May"),p("JuneShort","Jun"),p("JulyShort","Jul"),p("AugustShort","Aug"),p("SeptemberShort","Sep"),p("OctoberShort","Oct"),p("NovemberShort","Nov"),p("DecemberShort","Dec")];class oz{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=YJ(this._workspaceService.getWorkspace());if(!!t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(E2(e))return Lc(e.uri.path);let t=Lc(e.configPath.path);return t.endsWith(NL)&&(t=t.substr(0,t.length-NL.length-1)),t}_resoveWorkspacePath(e){if(E2(e))return nE(e.uri.fsPath);let t=Lc(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?nE(n):"/"}}h(oz,"WorkspaceBasedVariableResolver");class sz{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return Ore()}}h(sz,"RandomBasedVariableResolver");class Vo{constructor(e,t,n,i){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=i,this._nestingLevel=1,this._placeholderGroups=$A(t.placeholders,Ko.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),o=this._snippet.fullLen(n),r=T.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+o)),a=n.isFinalTabstop?Vo._decor.inactiveFinal:Vo._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let i=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const r=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),d=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let c=1;c<d.length;c++)d[c]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+d[c]);i.push(jt.replace(a,d.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const o=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),d=this._editor.getModel().getDecorationRange(l);r.push(new oe(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?Vo._decor.activeFinal:Vo._decor.active),o.add(a);for(const c of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(c);i.changeDecorationOptions(u,c.isFinalTabstop?Vo._decor.activeFinal:Vo._decor.active),o.add(c)}}for(const[a,l]of this._placeholderDecorations)o.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?Vo._decor.inactiveFinal:Vo._decor.inactive);return r});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Ko){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const o=this._placeholderDecorations.get(i),r=this._editor.getModel().getDecorationRange(o);if(!r){e.delete(i.index);break}n.push(r)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(!o._placeholderDecorations);const r=o._snippet.placeholderInfo.last.index;for(const l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(r+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,o._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of o._snippet.placeholders){const d=o._snippet.offset(l),c=o._snippet.fullLen(l),u=T.fromPositions(t.getPositionAt(o._offset+d),t.getPositionAt(o._offset+d+c)),f=n.addDecoration(u,Vo._decor.inactive);this._placeholderDecorations.set(l,f)}}this._placeholderGroups=$A(this._snippet.placeholders,Ko.compareByIndex)})}}h(Vo,"OneSnippet");Vo._decor={active:Pe.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Pe.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Pe.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Pe.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const lP={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class Ms{constructor(e,t,n=lP){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,i,o){const r=e.getLineContent(t.lineNumber),a=pt(r,0,t.column-1);let l;return n.walk(d=>{if(!(d instanceof Fi)||d.parent instanceof Pg)return!0;const c=d.value.split(/\r\n|\r|\n/);if(i){const f=n.offset(d);if(f===0)c[0]=e.normalizeIndentation(c[0]);else{l=l??n.toString();let g=l.charCodeAt(f-1);(g===10||g===13)&&(c[0]=e.normalizeIndentation(a+c[0]))}for(let g=1;g<c.length;g++)c[g]=e.normalizeIndentation(a+c[g])}const u=c.join(e.getEOL());return u!==d.value&&(d.parent.replace(d,[new Fi(u)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:o,positionColumn:r}=t,a=r-n,l=r+i,d=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=oe.createWithDirection(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,i,o,r,a,l){const d=[],c=[];if(!e.hasModel())return{edits:d,snippets:c};const u=e.getModel(),f=e.invokeWithinContext(S=>S.get(j9)),g=e.invokeWithinContext(S=>new tz(S.get(q_),u)),m=h(()=>a,"readClipboardText");let b=0,v=u.getValueInRange(Ms.adjustSelection(u,e.getSelection(),n,0)),C=u.getValueInRange(Ms.adjustSelection(u,e.getSelection(),0,i)),w=u.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const y=e.getSelections().map((S,L)=>({selection:S,idx:L})).sort((S,L)=>T.compareRangesUsingStarts(S.selection,L.selection));for(const{selection:S,idx:L}of y){let E=Ms.adjustSelection(u,S,n,0),x=Ms.adjustSelection(u,S,0,i);v!==u.getValueInRange(E)&&(E=S),C!==u.getValueInRange(x)&&(x=S);const k=S.setStartPosition(E.startLineNumber,E.startColumn).setEndPosition(x.endLineNumber,x.endColumn),N=new pb().parse(t,!0,o),V=k.getStartPosition(),F=Ms.adjustWhitespace(u,V,N,r||L>0&&w!==u.getLineFirstNonWhitespaceColumn(S.positionLineNumber),!0);N.resolveVariables(new QH([g,new nz(m,L,y.length,e.getOption(71)==="spread"),new ez(u,S,L,l),new iz(u,S),new Xs,new oz(f),new sz]));const G=u.getOffsetAt(V)+b;b+=N.toString().length-u.getValueLengthInRange(k),d[L]=jt.replace(k,N.toString()),d[L].identifier={major:L,minor:0},c[L]=new Vo(e,N,G,F)}return{edits:d,snippets:c}}dispose(){et(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=Ms.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(i=>!!i.identifier).map(i=>oe.fromPositions(i.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=lP){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=Ms.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,o=>{for(const r of this._snippets)r.merge(i);return console.assert(i.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):o.filter(r=>!!r.identifier).map(r=>oe.fromPositions(r.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[o,r]of i){r.sort(T.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,r)=>{o.push(...i.get(r))})}e.sort(T.compareRangesUsingStarts);for(let[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(T.compareRangesUsingStarts);for(let o=0;o<i.length;o++)if(!i[o].containsRange(e[o])){t.delete(n);continue}}return t.size>0}}h(Ms,"SnippetSession");var Fre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ZS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const dP={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Xn=h(class Mp{constructor(e,t,n,i){this._editor=e,this._instantiationService=t,this._logService=n,this._snippetListener=new Q,this._modelVersionId=-1,this._inSnippet=Mp.InSnippetMode.bindTo(i),this._hasNextTabstop=Mp.HasNextTabstop.bindTo(i),this._hasPrevTabstop=Mp.HasPrevTabstop.bindTo(i)}static get(e){return e.getContribution(Mp.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?dP:Object.assign(Object.assign({},dP),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){!this._editor.hasModel()||(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Ms(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>oe.fromPositions(n.getStartPosition())));const[t]=e.options;this._instantiationService.invokeFunction(qoe,this._editor,e.options.map((n,i)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(i+1),range:T.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}},"SnippetController2");Xn.ID="snippetController2";Xn.InSnippetMode=new re("inSnippetMode",!1,p("inSnippetMode","Whether the editor in current in snippet mode"));Xn.HasNextTabstop=new re("hasNextTabstop",!1,p("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Xn.HasPrevTabstop=new re("hasPrevTabstop",!1,p("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Xn=Fre([ZS(1,Ge),ZS(2,Cs),ZS(3,De)],Xn);lt(Xn.ID,Xn);const ny=zn.bindToContribution(Xn.get);te(new ny({id:"jumpToNextSnippetPlaceholder",precondition:se.and(Xn.InSnippetMode,Xn.HasNextTabstop),handler:s=>s.next(),kbOpts:{weight:100+30,kbExpr:I.editorTextFocus,primary:2}}));te(new ny({id:"jumpToPrevSnippetPlaceholder",precondition:se.and(Xn.InSnippetMode,Xn.HasPrevTabstop),handler:s=>s.prev(),kbOpts:{weight:100+30,kbExpr:I.editorTextFocus,primary:1026}}));te(new ny({id:"leaveSnippet",precondition:Xn.InSnippetMode,handler:s=>s.cancel(!0),kbOpts:{weight:100+30,kbExpr:I.editorTextFocus,primary:9,secondary:[1033]}}));te(new ny({id:"acceptSnippet",precondition:Xn.InSnippetMode,handler:s=>s.finish()}));var Wre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cP=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class iy{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let i=n[0].score[0];for(let o=0;o<n.length;o++){const{score:r,completion:a}=n[o];if(r[0]!==i)break;if(a.preselect)return o}return 0}}h(iy,"Memory");class yA extends iy{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}h(yA,"NoMemory");class rz extends iy{constructor(){super("recentlyUsed");this._cache=new Qa(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);let o=n[0].score[0],r=-1,a=-1,l=-1;for(let d=0;d<n.length&&n[d].score[0]===o;d++){const c=`${e.getLanguageId()}/${n[d].textLabel}`,u=this._cache.peek(c);if(u&&u.touch>l&&u.type===n[d].completion.kind&&u.insertText===n[d].completion.insertText&&(l=u.touch,a=d),n[d].completion.preselect&&r===-1)return r=d}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:dm.fromString(i.type),this._cache.set(n,i);this._seq=this._cache.size}}h(rz,"LRUMemory");class az extends iy{constructor(){super("recentlyUsedByPrefix");this._trie=Wc.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${i}`;this._trie.set(o,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);let o=`${e.getLanguageId()}/${i}`,r=this._trie.get(o);if(r||(r=this._trie.findSubstr(o)),r)for(let a=0;a<n.length;a++){let{kind:l,insertText:d}=n[a].completion;if(l===r.type&&d===r.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:dm.fromString(n.type),this._trie.set(t,n)}}}h(az,"PrefixMemory");let a_=h(class kw{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Q,this._persistSoon=new gt(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===VC.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==i){this._saveState();const o=kw._strategyCtors.get(i)||yA;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${kw._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${kw._storagePrefix}/${this._strategy.name}`,n,t,1)}}},"SuggestMemoryService");a_._strategyCtors=new Map([["recentlyUsedByPrefix",az],["recentlyUsed",rz],["first",yA]]);a_._storagePrefix="suggest/memories";a_=Wre([cP(0,Qr),cP(1,wt)],a_);const lz=Xe("ISuggestMemories");it(lz,a_,!0);var Vre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Bre=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let l_=h(class dz{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=dz.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(111)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(111)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=h(()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),o=n.getWordAtPosition(i.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===i.getStartPosition().column)},"checkForWordEnd");this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},"WordContextKey");l_.AtEnd=new re("atEndOfWord",!1);l_=Vre([Bre(1,De)],l_);var Hre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zre=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let wh=h(class Ew{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=Ew.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(Ew._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(;i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits););return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(!!this._model)try{this._ignore=!0,this._index=Ew._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},"SuggestAlternatives");wh.OtherSuggestions=new re("hasOtherSuggestions",!1);wh=Hre([zre(1,De)],wh);class cz{constructor(e,t,n){this._disposables=new Q,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(i=>{if(this._active&&!t.isFrozen()){const o=i.charCodeAt(i.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!io(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new pc;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}h(cz,"CommitCharacterController");var Kre=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class $i{provideSelectionRanges(e,t){return Kre(this,void 0,void 0,function*(){const n=[];for(const i of t){const o=[];n.push(o);const r=new Map;yield new Promise(a=>$i._bracketsRightYield(a,0,e,i,r)),yield new Promise(a=>$i._bracketsLeftYield(a,0,e,i,r,o))}return n})}static _bracketsRightYield(e,t,n,i,o){const r=new Map,a=Date.now();for(;;){if(t>=$i._maxRounds){e();break}if(!i){e();break}let l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>$i._maxDuration){setTimeout(()=>$i._bracketsRightYield(e,t+1,n,i,o));break}const c=l.close[0];if(l.isOpen){let u=r.has(c)?r.get(c):0;r.set(c,u+1)}else{let u=r.has(c)?r.get(c):0;if(u-=1,r.set(c,Math.max(0,u)),u<0){let f=o.get(c);f||(f=new eo,o.set(c,f)),f.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,o,r){const a=new Map,l=Date.now();for(;;){if(t>=$i._maxRounds&&o.size===0){e();break}if(!i){e();break}let d=n.bracketPairs.findPrevBracket(i);if(!d){e();break}if(Date.now()-l>$i._maxDuration){setTimeout(()=>$i._bracketsLeftYield(e,t+1,n,i,o,r));break}const u=d.close[0];if(d.isOpen){let f=a.has(u)?a.get(u):0;if(f-=1,a.set(u,Math.max(0,f)),f<0){let g=o.get(u);if(g){let m=g.shift();g.size===0&&o.delete(u);const b=T.fromPositions(d.range.getEndPosition(),m.getStartPosition()),v=T.fromPositions(d.range.getStartPosition(),m.getEndPosition());r.push({range:b}),r.push({range:v}),$i._addBracketLeading(n,v,r)}}}else{let f=a.has(u)?a.get(u):0;a.set(u,f+1)}i=d.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(i);o!==0&&o!==t.startColumn&&(n.push({range:T.fromPositions(new W(i,o),t.getEndPosition())}),n.push({range:T.fromPositions(new W(i,1),t.getEndPosition())}));const r=i-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(n.push({range:T.fromPositions(new W(r,a),t.getEndPosition())}),n.push({range:T.fromPositions(new W(r,1),t.getEndPosition())}))}}}h($i,"BracketSelectionRangeProvider");$i._maxDuration=30;$i._maxRounds=2;var Ure=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class Ws{static create(e,t){return Ure(this,void 0,void 0,function*(){if(!t.getOption(106).localityBonus||!t.hasModel())return Ws.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return Ws.None;const[o]=yield new $i().provideSelectionRanges(n,[i]);if(o.length===0)return Ws.None;const r=yield e.computeWordRanges(n.uri,o[0].range);if(!r)return Ws.None;const a=n.getWordUntilPosition(i);return delete r[a.word],new class extends Ws{distance(l,d){if(!i.equals(t.getPosition()))return 0;if(d.kind===17)return 2<<20;let c=typeof d.label=="string"?d.label:d.label.label,u=r[c];if(OP(u))return 2<<20;let f=cD(u,T.fromPositions(l),T.compareRangesUsingStarts),g=f>=0?u[f]:u[Math.max(0,~f-1)],m=o.length;for(const b of o){if(!T.containsRange(b.range,g))break;m-=1}return m}}})}}h(Ws,"WordDistance");Ws.None=new class extends Ws{distance(){return 0}};class Ll{constructor(e,t,n,i,o,r,a){this.clipboardText=a,this._snippetCompareFn=Ll._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=o,this._refilterKind=1,this._lineContext=n,r==="top"?this._snippetCompareFn=Ll._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=Ll._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",o="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?Hf:NQ;for(let d=0;d<r.length;d++){const c=r[d];if(c.isInvalid)continue;this._providerInfo.set(c.provider,Boolean(c.container.incomplete));const u=c.position.column-c.editStart.column,f=u+n-(c.position.column-this._column);if(i.length!==f&&(i=f===0?"":t.slice(-f),o=i.toLowerCase()),c.word=i,f===0)c.score=er.Default;else{let g=0;for(;g<u;){const m=i.charCodeAt(g);if(m===32||m===9)g+=1;else break}if(g>=f)c.score=er.Default;else if(typeof c.completion.filterText=="string"){let m=l(i,o,g,c.completion.filterText,c.filterTextLow,0,!1);if(!m)continue;rT(c.completion.filterText,c.textLabel)===0?c.score=m:(c.score=kQ(i,o,g,c.textLabel,c.labelLow,0),c.score[0]=m[0])}else{let m=l(i,o,g,c.textLabel,c.labelLow,0,!1);if(!m)continue;c.score=m}}c.idx=d,c.distance=this._wordDistance.distance(c.position,c.completion),a.push(c),e.push(c.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?cx(e.length-.85,e,(d,c)=>d-c):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Ll._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Ll._compareCompletionItems(e,t)}}h(Ll,"CompletionModel");var jre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ud=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},Gre=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class ic{constructor(e,t,n,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=i}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column||!isNaN(Number(i.word)))}}h(ic,"LineContext");function $re(s,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?Boolean(n):!1}h($re,"canShowQuickSuggest");function qre(s,e,t){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?Boolean(n):!1}h(qre,"canShowSuggestOnTriggerCharacters");let ME=h(class hz{constructor(e,t,n,i,o,r,a,l){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=o,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._toDispose=new Q,this._quickSuggestDelay=10,this._triggerCharacterListener=new Q,this._triggerQuickSuggest=new Ki,this._state=0,this._completionDisposables=new Q,this._onDidCancel=new P,this._onDidTrigger=new P,this._onDidSuggest=new P,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new oe(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let d=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{d=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{d=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(c=>{d||this._onCursorChange(c)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{d||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){et(this._triggerCharacterListener),et([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(80),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(81)||!this._editor.hasModel()||!this._editor.getOption(109))return;const e=new Map;for(const n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let o=e.get(i);o||(o=new Set,o.add(joe()),e.set(i,o)),o.add(n)}const t=h(n=>{if(!qre(this._editor,this._contextKeyService,this._configurationService)||ic.shouldAutoTrigger(this._editor))return;if(!n){const r=this._editor.getPosition();n=this._editor.getModel().getLineContent(r.lineNumber).substr(0,r.column-1)}let i="";qc(n.charCodeAt(n.length-1))?Cn(n.charCodeAt(n.length-2))&&(i=n.substr(n.length-2)):i=n.charAt(n.length-1);const o=e.get(i);if(o){const r=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:i},Boolean(this._completionModel),o,r)}},"checkTriggerCharacter");this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;this._editor.getOption(79)!==!1&&(this._editor.getOption(106).snippetsPreventQuickSuggestions&&((e=Xn.get(this._editor))===null||e===void 0?void 0:e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!ic.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=this._editor.getOption(79);if(i!==!1){if(i!==!0){t.tokenizeIfCheap(n.lineNumber);const o=t.getLineTokens(n.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(!(i.other&&r===0||i.comments&&r===1||i.strings&&r===2))return}!$re(this._editor,this._contextKeyService,this._configurationService)||!this._languageFeaturesService.completionProvider.has(t)||this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new ic(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,i){var o;if(!this._editor.hasModel())return;const r=this._editor.getModel(),a=e.auto,l=new ic(r,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=l;let d={triggerKind:(o=e.triggerKind)!==null&&o!==void 0?o:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Bn;const c=this._editor.getOption(101);let u=1;switch(c){case"top":u=0;break;case"bottom":u=2;break}const{itemKind:f,showDeprecated:g}=hz._createSuggestFilter(this._editor),m=Ws.create(this._editorWorkerService,this._editor),b=pB(this._languageFeaturesService.completionProvider,r,this._editor.getPosition(),new i_(u,f,n,g),d,this._requestToken.token);Promise.all([b,m]).then(([v,C])=>Gre(this,void 0,void 0,function*(){var w;if((w=this._requestToken)===null||w===void 0||w.dispose(),!this._editor.hasModel())return;let y=i?.clipboardText;if(!y&&v.needsClipboard&&(y=yield this._clipboardService.readText()),this._state===0)return;const S=this._editor.getModel();let L=v.items;if(i){const x=mB(u);L=L.concat(i.items).sort(x)}const E=new ic(S,this._editor.getPosition(),a,e.shy);this._completionModel=new Ll(L,this._context.column,{leadingLineContent:E.leadingLineContent,characterCountDelta:E.column-this._context.column},C,this._editor.getOption(106),this._editor.getOption(101),y),this._completionDisposables.add(v.disposable),this._onNewContext(E),this._reportDurationsTelemetry(v.durations)})).catch(Ne)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(101)==="none"&&t.add(27);const i=e.getOption(106);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(!!this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(pt(e.leadingLineContent)!==pt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(!!this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(let i of this._completionModel.allProvider)t.delete(i);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(ic.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}},"SuggestModel");ME=jre([Ud(1,is),Ud(2,Uh),Ud(3,Yr),Ud(4,Cs),Ud(5,De),Ud(6,wt),Ud(7,ce)],ME);class vb{constructor(e,t){this._disposables=new Q,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),i=n.length;let o=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){o=!0;break}if(!o)return;this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(r.getValueLengthInRange(l)>vb._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}h(vb,"OvertypingCapturer");vb._maxSelectionLength=51200;var Yre=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},JS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class oy extends Jf{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=p("ddd","{0} ({1})",this._action.label,oy.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"\u23CE")}}h(oy,"StatusBarViewItem");let RE=h(class{constructor(e,t,n,i){this._menuService=n,this._contextKeyService=i,this._menuDisposables=new Q,this.element=j(e,X(".suggest-status-bar"));const o=h(r=>r instanceof id?t.createInstance(oy,r,void 0):void 0,"actionViewItemProvider");this._leftActions=new rr(this.element,{actionViewItemProvider:o}),this._rightActions=new rr(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(vd,this._contextKeyService),t=h(()=>{const n=[],i=[];for(let[o,r]of e.getActions())o==="left"?n.push(...r):i.push(...r);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)},"renderMenu");this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}},"SuggestWidgetStatus");RE=Yre([JS(1,Ge),JS(2,Wh),JS(3,De)],RE);const Xre=A("symbolIcon.arrayForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zre=A("symbolIcon.booleanForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jre=A("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},p("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qre=A("symbolIcon.colorForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),eae=A("symbolIcon.constantForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),tae=A("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},p("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),nae=A("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},p("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),iae=A("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},p("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oae=A("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},p("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),sae=A("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},p("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rae=A("symbolIcon.fileForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),aae=A("symbolIcon.folderForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lae=A("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},p("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),dae=A("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},p("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cae=A("symbolIcon.keyForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hae=A("symbolIcon.keywordForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),uae=A("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},p("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fae=A("symbolIcon.moduleForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gae=A("symbolIcon.namespaceForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pae=A("symbolIcon.nullForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),mae=A("symbolIcon.numberForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_ae=A("symbolIcon.objectForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),bae=A("symbolIcon.operatorForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),vae=A("symbolIcon.packageForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),wae=A("symbolIcon.propertyForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Cae=A("symbolIcon.referenceForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yae=A("symbolIcon.snippetForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Sae=A("symbolIcon.stringForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xae=A("symbolIcon.structForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Tae=A("symbolIcon.textForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Lae=A("symbolIcon.typeParameterForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kae=A("symbolIcon.unitForeground",{dark:ae,light:ae,hc:ae},p("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Eae=A("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},p("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));It((s,e)=>{const t=s.getColor(Xre);t&&e.addRule(`${_.symbolArray.cssSelector} { color: ${t}; }`);const n=s.getColor(Zre);n&&e.addRule(`${_.symbolBoolean.cssSelector} { color: ${n}; }`);const i=s.getColor(Jre);i&&e.addRule(`${_.symbolClass.cssSelector} { color: ${i}; }`);const o=s.getColor(uae);o&&e.addRule(`${_.symbolMethod.cssSelector} { color: ${o}; }`);const r=s.getColor(Qre);r&&e.addRule(`${_.symbolColor.cssSelector} { color: ${r}; }`);const a=s.getColor(eae);a&&e.addRule(`${_.symbolConstant.cssSelector} { color: ${a}; }`);const l=s.getColor(tae);l&&e.addRule(`${_.symbolConstructor.cssSelector} { color: ${l}; }`);const d=s.getColor(nae);d&&e.addRule(`
			${_.symbolValue.cssSelector},${_.symbolEnum.cssSelector} { color: ${d}; }`);const c=s.getColor(iae);c&&e.addRule(`${_.symbolEnumMember.cssSelector} { color: ${c}; }`);const u=s.getColor(oae);u&&e.addRule(`${_.symbolEvent.cssSelector} { color: ${u}; }`);const f=s.getColor(sae);f&&e.addRule(`${_.symbolField.cssSelector} { color: ${f}; }`);const g=s.getColor(rae);g&&e.addRule(`${_.symbolFile.cssSelector} { color: ${g}; }`);const m=s.getColor(aae);m&&e.addRule(`${_.symbolFolder.cssSelector} { color: ${m}; }`);const b=s.getColor(lae);b&&e.addRule(`${_.symbolFunction.cssSelector} { color: ${b}; }`);const v=s.getColor(dae);v&&e.addRule(`${_.symbolInterface.cssSelector} { color: ${v}; }`);const C=s.getColor(cae);C&&e.addRule(`${_.symbolKey.cssSelector} { color: ${C}; }`);const w=s.getColor(hae);w&&e.addRule(`${_.symbolKeyword.cssSelector} { color: ${w}; }`);const y=s.getColor(fae);y&&e.addRule(`${_.symbolModule.cssSelector} { color: ${y}; }`);const S=s.getColor(gae);S&&e.addRule(`${_.symbolNamespace.cssSelector} { color: ${S}; }`);const L=s.getColor(pae);L&&e.addRule(`${_.symbolNull.cssSelector} { color: ${L}; }`);const E=s.getColor(mae);E&&e.addRule(`${_.symbolNumber.cssSelector} { color: ${E}; }`);const x=s.getColor(_ae);x&&e.addRule(`${_.symbolObject.cssSelector} { color: ${x}; }`);const k=s.getColor(bae);k&&e.addRule(`${_.symbolOperator.cssSelector} { color: ${k}; }`);const N=s.getColor(vae);N&&e.addRule(`${_.symbolPackage.cssSelector} { color: ${N}; }`);const V=s.getColor(wae);V&&e.addRule(`${_.symbolProperty.cssSelector} { color: ${V}; }`);const F=s.getColor(Cae);F&&e.addRule(`${_.symbolReference.cssSelector} { color: ${F}; }`);const G=s.getColor(yae);G&&e.addRule(`${_.symbolSnippet.cssSelector} { color: ${G}; }`);const $=s.getColor(Sae);$&&e.addRule(`${_.symbolString.cssSelector} { color: ${$}; }`);const ue=s.getColor(xae);ue&&e.addRule(`${_.symbolStruct.cssSelector} { color: ${ue}; }`);const de=s.getColor(Tae);de&&e.addRule(`${_.symbolText.cssSelector} { color: ${de}; }`);const ye=s.getColor(Lae);ye&&e.addRule(`${_.symbolTypeParameter.cssSelector} { color: ${ye}; }`);const Ee=s.getColor(kae);Ee&&e.addRule(`${_.symbolUnit.cssSelector} { color: ${Ee}; }`);const Le=s.getColor(Eae);Le&&e.addRule(`${_.symbolVariable.cssSelector} { color: ${Le}; }`)});class SA{constructor(){this._onDidWillResize=new P,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new P,this.onDidResize=this._onDidResize.event,this._sashListener=new Q,this._size=new mt(0,0),this._minSize=new mt(0,0),this._maxSize=new mt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new jn(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new jn(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new jn(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:_C.North}),this._southSash=new jn(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:_C.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(fe.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(fe.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(fe.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(fe.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:o,width:r}=this._maxSize;e=Math.max(n,Math.min(o,e)),t=Math.max(i,Math.min(r,t));const a=new mt(t,e);mt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}h(SA,"ResizableHTMLElement");var Dae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Iae=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};function xA(s){return!!s&&Boolean(s.completion.documentation||s.completion.detail&&s.completion.detail!==s.completion.label)}h(xA,"canExpandCompletionItem");let PE=h(class{constructor(e,t){this._editor=e,this._onDidClose=new P,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new P,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Q,this._renderDisposeable=new Q,this._borderWidth=1,this._size=new mt(330,0),this.domNode=X(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Ja,{editor:e}),this._body=X(".body"),this._scrollbar=new Tg(this._body,{}),j(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=j(this._body,X(".header")),this._close=j(this._header,X("span"+_.close.cssSelector)),this._close.title=p("details.close","Close"),this._type=j(this._header,X("p.type")),this._docs=j(this._body,X("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(44)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(44),n=t.getMassagedFontFamily(vs?di.fontFamily:null),i=e.get(107)||t.fontSize,o=e.get(108)||t.lineHeight,r=t.fontWeight,a=`${i}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/i}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(108)||this._editor.getOption(44).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=p("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,i;this._renderDisposeable.clear();let{detail:o,documentation:r}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(i=e.completion.commitCharacters)===null||i===void 0?void 0:i.join("")}
`,r=new Zi().appendCodeblock("empty",a),o=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!xA(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){const a=o.length>1e5?`${o.substr(0,1e5)}\u2026`:o;this._type.textContent=a,this._type.title=a,bo(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Sn(this._type),this._type.title="",Oi(this._type),this.domNode.classList.add("no-type");if(Sn(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),Sn(this._docs);const a=this._markdownRenderer.render(r);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new mt(e,t);mt.equals(n,this._size)||(this._size=n,Z$(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}},"SuggestDetailsWidget");PE=Dae([Iae(1,Ge)],PE);class uz{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Q,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new SA,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,o=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=i.width-a.dimension.width,l=!0),a.north&&(o=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+o,left:n.left+r})}a.done&&(n=void 0,i=void 0,o=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var i;const o=D0(document.body),r=this.widget.getLayoutInfo(),a=new mt(220,2*r.lineHeight),l=e.top,d=function(){const y=o.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),S=-r.borderWidth+e.left+e.width,L=new mt(y,o.height-e.top-r.borderHeight-r.verticalPadding),E=L.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:S,fit:y-t.width,maxSizeTop:L,maxSizeBottom:E,minSize:a.with(Math.min(y,a.width))}}(),c=function(){const y=e.left-r.borderWidth-r.horizontalPadding,S=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),L=new mt(y,o.height-e.top-r.borderHeight-r.verticalPadding),E=L.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:l,left:S,fit:y-t.width,maxSizeTop:L,maxSizeBottom:E,minSize:a.with(Math.min(y,a.width))}}(),u=function(){const y=e.left,S=-r.borderWidth+e.top+e.height,L=new mt(e.width-r.borderHeight,o.height-e.top-e.height-r.verticalPadding);return{top:S,left:y,fit:L.height-t.height,maxSizeBottom:L,maxSizeTop:L,minSize:a.with(L.width)}}(),f=[d,c,u],g=(i=f.find(y=>y.fit>=0))!==null&&i!==void 0?i:f.sort((y,S)=>S.fit-y.fit)[0],m=e.top+e.height-r.borderHeight;let b,v=t.height;const C=Math.max(g.maxSizeTop.height,g.maxSizeBottom.height);v>C&&(v=C);let w;n?v<=g.maxSizeTop.height?(b=!0,w=g.maxSizeTop):(b=!1,w=g.maxSizeBottom):v<=g.maxSizeBottom.height?(b=!1,w=g.maxSizeBottom):(b=!0,w=g.maxSizeTop),this._applyTopLeft({left:g.left,top:b?g.top:m-v}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!b,g===d,b,g!==d),this._resizable.minSize=g.minSize,this._resizable.maxSize=w,this._resizable.layout(v,Math.min(w.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}h(uz,"SuggestDetailsOverlay");var Aa;(function(s){s[s.FILE=0]="FILE",s[s.FOLDER=1]="FOLDER",s[s.ROOT_FOLDER=2]="ROOT_FOLDER"})(Aa||(Aa={}));const Nae=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function kv(s,e,t,n){const i=n===Aa.ROOT_FOLDER?["rootfolder-icon"]:n===Aa.FOLDER?["folder-icon"]:["file-icon"];if(t){let o;if(t.scheme===Me.data)o=cd.parseMetaData(t).get(cd.META_DATA_LABEL);else{const r=t.path.match(Nae);r?(o=Ev(r[2].toLowerCase()),r[1]&&i.push(`${Ev(r[1].toLowerCase())}-name-dir-icon`)):o=Ev(t.authority.toLowerCase())}if(n===Aa.FOLDER)i.push(`${o}-name-folder-icon`);else{if(o){if(i.push(`${o}-name-file-icon`),i.push("name-file-icon"),o.length<=255){const a=o.split(".");for(let l=1;l<a.length;l++)i.push(`${a.slice(l).join(".")}-ext-file-icon`)}i.push("ext-file-icon")}const r=Aae(s,e,t);r&&i.push(`${Ev(r)}-lang-file-icon`)}}return i}h(kv,"getIconClasses");function Aae(s,e,t){if(!t)return null;let n=null;if(t.scheme===Me.data){const o=cd.parseMetaData(t).get(cd.META_DATA_MIME);o&&(n=e.getLanguageIdByMimeType(o))}else{const i=s.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==Zr?n:e.guessLanguageIdByFilepathOrFirstLine(t)}h(Aae,"detectLanguageId");function Ev(s){return s.replace(/[\11\12\14\15\40]/g,"/")}h(Ev,"cssEscape");var Mae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},QS=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},cp;function fz(s){return`suggest-aria-id:${s}`}h(fz,"getAriaId");const Rae=xn("suggest-more-info",_.chevronRight,p("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Pae=new(cp=h(class Dw{extract(e,t){if(e.textLabel.match(Dw._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(Dw._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=Dw._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},"ColorExtractor"),cp._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,cp._regexStrict=new RegExp(`^${cp._regexRelaxed.source}$`,"i"),cp);let OE=h(class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=i,this._onDidToggleDetails=new P,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Q,t.root=e,t.root.classList.add("show-file-icons"),t.icon=j(e,X(".icon")),t.colorspan=j(t.icon,X("span.colorspan"));const n=j(e,X(".contents")),i=j(n,X(".main"));t.iconContainer=j(i,X(".icon-label.codicon")),t.left=j(i,X("span.left")),t.right=j(i,X("span.right")),t.iconLabel=new qm(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=j(t.left,X("span.signature-label")),t.qualifierLabel=j(t.left,X("span.qualifier-label")),t.detailsLabel=j(t.right,X("span.details-label")),t.readMore=j(t.right,X("span.readMore"+vt.asCSSSelector(Rae))),t.readMore.title=p("readMore","Read More");const o=h(()=>{const r=this._editor.getOptions(),a=r.get(44),l=a.getMassagedFontFamily(vs?di.fontFamily:null),d=a.fontFeatureSettings,c=r.get(107)||a.fontSize,u=r.get(108)||a.lineHeight,f=a.fontWeight,g=`${c}px`,m=`${u}px`;t.root.style.fontSize=g,t.root.style.fontWeight=f,i.style.fontFamily=l,i.style.fontFeatureSettings=d,i.style.lineHeight=m,t.icon.style.height=m,t.icon.style.width=m,t.readMore.style.height=m,t.readMore.style.width=m},"configureFont");return o(),t.disposables.add(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(44)||r.hasChanged(107)||r.hasChanged(108))&&o()})),t}renderElement(e,t,n){const{completion:i}=e;n.root.id=fz(t),n.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:g1(e.score)};let r=[];if(i.kind===19&&Pae.extract(e,r))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=r[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=kv(this._modelService,this._languageService,Ce.from({scheme:"fake",path:e.textLabel}),Aa.FILE),l=kv(this._modelService,this._languageService,Ce.from({scheme:"fake",path:i.detail}),Aa.FILE);o.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=hD([kv(this._modelService,this._languageService,Ce.from({scheme:"fake",path:e.textLabel}),Aa.FOLDER),kv(this._modelService,this._languageService,Ce.from({scheme:"fake",path:i.detail}),Aa.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",..._i.asClassNameArray(dm.toIcon(i.kind))));i.tags&&i.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=ex(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=ex(i.label.detail||""),n.detailsLabel.textContent=ex(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(106).showInlineDetails?bo(n.detailsLabel):Oi(n.detailsLabel),xA(e)?(n.right.classList.add("can-expand-details"),bo(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Oi(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}},"ItemRenderer");OE=Mae([QS(1,Bt),QS(2,Vt),QS(3,Mt)],OE);function ex(s){return s.replace(/\r\n|\r|\n/g,"")}h(ex,"stripNewLines");var Oae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Dv=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},Fae=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};A("editorSuggestWidget.background",{dark:vi,light:vi,hc:vi},p("editorSuggestWidgetBackground","Background color of the suggest widget."));A("editorSuggestWidget.border",{dark:Ic,light:Ic,hc:Ic},p("editorSuggestWidgetBorder","Border color of the suggest widget."));const tx=A("editorSuggestWidget.foreground",{dark:Bl,light:Bl,hc:Bl},p("editorSuggestWidgetForeground","Foreground color of the suggest widget."));A("editorSuggestWidget.selectedForeground",{dark:qv,light:qv,hc:qv},p("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));A("editorSuggestWidget.selectedIconForeground",{dark:Yv,light:Yv,hc:Yv},p("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const Wae=A("editorSuggestWidget.selectedBackground",{dark:Xv,light:Xv,hc:Xv},p("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));A("editorSuggestWidget.highlightForeground",{dark:Wa,light:Wa,hc:Wa},p("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));A("editorSuggestWidget.focusHighlightForeground",{dark:Ry,light:Ry,hc:Ry},p("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));A("editorSuggestWidgetStatus.foreground",{dark:xe(tx,.5),light:xe(tx,.5),hc:xe(tx,.5)},p("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class gz{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof mh}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(mt.is(n))return mt.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}h(gz,"PersistedWidgetSize");let d_=h(class FE{constructor(e,t,n,i,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Ki,this._disposables=new Q,this._onDidSelect=new P,this._onDidFocus=new P,this._onDidHide=new P,this._onDidShow=new P,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new P,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new SA,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new pz(this,e),this._persistedSize=new gz(t,e);class r{constructor(g,m,b=!1,v=!1){this.persistedSize=g,this.currentSize=m,this.persistHeight=b,this.persistWidth=v}}h(r,"ResizeState");let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(f=>{var g,m,b,v;if(this._resize(f.dimension.width,f.dimension.height),a&&(a.persistHeight=a.persistHeight||!!f.north||!!f.south,a.persistWidth=a.persistWidth||!!f.east||!!f.west),!!f.done){if(a){const{itemHeight:C,defaultSize:w}=this.getLayoutInfo(),y=Math.round(C/2);let{width:S,height:L}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-L)<=y)&&(L=(m=(g=a.persistedSize)===null||g===void 0?void 0:g.height)!==null&&m!==void 0?m:w.height),(!a.persistWidth||Math.abs(a.currentSize.width-S)<=y)&&(S=(v=(b=a.persistedSize)===null||b===void 0?void 0:b.width)!==null&&v!==void 0?v:w.width),this._persistedSize.store(new mt(S,L))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=j(this.element.domNode,X(".message")),this._listElement=j(this.element.domNode,X(".tree"));const l=o.createInstance(PE,this.editor);l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new uz(l,this.editor);const d=h(()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(106).showIcons),"applyIconStyle");d();const c=o.createInstance(OE,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails(()=>this.toggleDetails())),this._list=new hr("SuggestWidget",this._listElement,{getHeight:f=>this.getLayoutInfo().itemHeight,getTemplateId:f=>"suggestion"},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>p("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:f=>{let g=f.textLabel;if(typeof f.completion.label!="string"){const{detail:C,description:w}=f.completion.label;C&&w?g=p("label.full","{0}{1}, {2}",g,C,w):C?g=p("label.detail","{0}{1}",g,C):w&&(g=p("label.desc","{0}, {1}",g,w))}if(!f.isResolved||!this._isDetailsVisible())return g;const{documentation:m,detail:b}=f.completion,v=jo("{0}{1}",b||"",m?typeof m=="string"?m:m.value:"");return p("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",g,v)}}}),this._status=o.createInstance(RE,this.element.domNode);const u=h(()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(106).showStatusBar),"applyStatusBarStyle");u(),this._disposables.add(lh(this._list,i,{listInactiveFocusBackground:Wae,listInactiveFocusOutline:ci})),this._disposables.add(i.onDidColorThemeChange(f=>this._onThemeChange(f))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(f=>this._onListMouseDownOrTap(f))),this._disposables.add(this._list.onTap(f=>this._onListMouseDownOrTap(f))),this._disposables.add(this._list.onDidChangeSelection(f=>this._onListSelection(f))),this._disposables.add(this._list.onDidChangeFocus(f=>this._onListFocus(f))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(f=>{f.hasChanged(106)&&(u(),d())})),this._ctxSuggestWidgetVisible=Ze.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Ze.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Ze.MultipleSuggestions.bindTo(n),this._disposables.add(Wn(this._details.widget.domNode,"keydown",f=>{this._onDetailsKeydown.fire(f)})),this._disposables.add(this.editor.onMouseDown(f=>this._onEditorMouseDown(f)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],i=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(i),this._currentSuggestionDetails=Hn(o=>Fae(this,void 0,void 0,function*(){const r=Xc(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=o.onCancellationRequested(()=>r.dispose()),l=yield n.resolve(o);return r.dispose(),a.dispose(),l})),this._currentSuggestionDetails.then(()=>{i>=this._list.length||n!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[n]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:fz(i)}))}).catch(Ne)),this._onDidFocus.fire({item:n,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Oi(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=FE.LOADING_MESSAGE,Oi(this._listElement,this._status.element),bo(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=FE.NO_SUGGESTIONS_MESSAGE,Oi(this._listElement,this._status.element),bo(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:Oi(this._messageElement),bo(this._listElement,this._status.element),this._show();break;case 4:Oi(this._messageElement),bo(this._listElement,this._status.element),this._show();break;case 5:Oi(this._messageElement),bo(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Xc(()=>this._setState(1),t)))}showSuggestions(e,t,n,i){var o,r;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(r=this._currentSuggestionDetails)===null||r===void 0||r.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,l=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),l){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(xA(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,i;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const o=D0(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let a=e.height,l=e.width;if(this._status.element.style.lineHeight=`${r.itemHeight}px`,this._state===2||this._state===1)a=r.itemHeight+r.borderHeight,l=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new mt(l,a),this._contentWidget.setPreference(2);else{const d=o.width-r.borderHeight-2*r.horizontalPadding;l>d&&(l=d);const c=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:l,u=r.statusBarHeight+this._list.contentHeight+r.borderHeight,f=r.itemHeight+r.statusBarHeight,g=$n(this.editor.getDomNode()),m=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),b=g.top+m.top+m.height,v=Math.min(o.height-b-r.verticalPadding,u),C=g.top+m.top-r.verticalPadding,w=Math.min(C,u);let y=Math.min(Math.max(w,v)+r.borderHeight,u);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<f&&(a=f),a>y&&(a=y);const S=150;a>v||this._forceRenderingAbove&&C>S?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),y=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),y=v),this.element.preferredSize=new mt(c,r.defaultSize.height),this.element.maxSize=new mt(d,y),this.element.minSize=new mt(220,f),this._cappedHeight=a===u?{wanted:(i=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&i!==void 0?i:e.height,capped:a}:void 0}this._resize(l,a)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(44),t=qi(this.editor.getOption(108)||e.lineHeight,8,1e3),n=!this.editor.getOption(106).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,o=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new mt(430,n+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},"SuggestWidget");d_.LOADING_MESSAGE=p("suggestWidget.loading","Loading...");d_.NO_SUGGESTIONS_MESSAGE=p("suggestWidget.noSuggestions","No suggestions.");d_=Oae([Dv(1,Qr),Dv(2,De),Dv(3,Mt),Dv(4,Ge)],d_);class pz{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new mt(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}h(pz,"SuggestContentWidget");var Vae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pu=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class mz{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),o=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:T.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}h(mz,"LineSuffix");let us=h(class _z{constructor(e,t,n,i,o,r,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=o,this._logService=r,this._telemetryService=a,this._lineSuffix=new hi,this._toDispose=new Q,this._selectors=new bz(u=>u.priority),this._telemetryGate=0,this.editor=e,this.model=o.createInstance(ME,this.editor);const l=Ze.InsertMode.bindTo(i);l.set(e.getOption(106).insertMode),this.model.onDidTrigger(()=>l.set(e.getOption(106).insertMode)),this.widget=this._toDispose.add(new Ra(()=>{const u=this._instantiationService.createInstance(d_,this.editor);this._toDispose.add(u),this._toDispose.add(u.onDidSelect(v=>this._insertSuggestion(v,0),this));const f=new cz(this.editor,u,v=>this._insertSuggestion(v,2));this._toDispose.add(f),this._toDispose.add(this.model.onDidSuggest(v=>{v.completionModel.items.length===0&&f.reset()}));const g=Ze.MakesTextEdit.bindTo(this._contextKeyService),m=Ze.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=Ze.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(He(()=>{g.reset(),m.reset(),b.reset()})),this._toDispose.add(u.onDidFocus(({item:v})=>{const C=this.editor.getPosition(),w=v.editStart.column,y=C.column;let S=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!v.completion.additionalTextEdits&&!(v.completion.insertTextRules&4)&&y-w===v.completion.insertText.length&&(S=this.editor.getModel().getValueInRange({startLineNumber:C.lineNumber,startColumn:w,endLineNumber:C.lineNumber,endColumn:y})!==v.completion.insertText),g.set(S),m.set(!W.equals(v.editInsertEnd,v.editReplaceEnd)),b.set(Boolean(v.provider.resolveCompletionItem)||Boolean(v.completion.documentation)||v.completion.detail!==v.completion.label)})),this._toDispose.add(u.onDetailsKeyDown(v=>{if(v.toKeybinding().equals(new Ql(!0,!1,!1,!1,33))||Ke&&v.toKeybinding().equals(new Ql(!1,!1,!1,!0,33))){v.stopPropagation();return}v.toKeybinding().isModifierKey()||this.editor.focus()})),u})),this._overtypingCapturer=this._toDispose.add(new Ra(()=>this._toDispose.add(new vb(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Ra(()=>this._toDispose.add(new wh(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(l_,e)),this._toDispose.add(this.model.onDidTrigger(u=>{this.widget.value.showTriggered(u.auto,u.shy?250:50),this._lineSuffix.value=new mz(this.editor.getModel(),u.position)})),this._toDispose.add(this.model.onDidSuggest(u=>{if(!u.shy){let f=-1;for(const g of this._selectors.itemsOrderedByPriorityDesc)if(f=g.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items),f!==-1)break;f===-1&&(f=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items)),this.widget.value.showSuggestions(u.completionModel,f,u.isFrozen,u.auto)}})),this._toDispose.add(this.model.onDidCancel(u=>{u.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let d=Ze.AcceptSuggestionsOnEnter.bindTo(i),c=h(()=>{const u=this.editor.getOption(1);d.set(u==="on"||u==="smart")},"updateFromConfig");this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}static get(e){return e.getContribution(_z.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=Xn.get(this.editor);if(!n)return;const i=this.editor.getModel(),o=i.getAlternativeVersionId(),{item:r}=e,a=[],l=new Bn;t&1||this.editor.pushUndoStop();const d=this.getOverwriteInfo(r,Boolean(t&8));if(this._memoryService.memorize(i,this.editor.getPosition(),r),Array.isArray(r.completion.additionalTextEdits)){const u=$a.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(f=>jt.replace(T.lift(f.range),f.text))),u.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!r.isResolved){const u=new wi(!0);let f;const g=i.onDidChangeContent(C=>{if(C.isFlush){l.cancel(),g.dispose();return}for(let w of C.changes){const y=T.getEndPosition(w.range);(!f||W.isBefore(y,f))&&(f=y)}});let m=t;t|=2;let b=!1,v=this.editor.onWillType(()=>{v.dispose(),b=!0,m&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested||f&&r.completion.additionalTextEdits.some(w=>W.isBefore(f,T.getStartPosition(w.range))))return!1;b&&this.editor.pushUndoStop();const C=$a.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(w=>jt.replace(T.lift(w.range),w.text))),C.restoreRelativeVerticalPositionOfCursor(this.editor),(b||!(m&2))&&this.editor.pushUndoStop(),!0}).then(C=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",u.elapsed(),C),g.dispose(),v.dispose()}))}let{insertText:c}=r.completion;r.completion.insertTextRules&4||(c=pb.escape(c)),n.insert(c,{overwriteBefore:d.overwriteBefore,overwriteAfter:d.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command?r.completion.command.id===Wg.id?this.model.trigger({auto:!0,shy:!1},!0):(a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(Ne)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,u=>{for(l.cancel();i.canUndo();){o!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(u,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(i,e),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t){var n;if(this._telemetryGate++%100!==0)return;const i=((n=t.item.provider._debugDisplayName)!==null&&n!==void 0?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:i,basenameHash:R4(ts(e.uri)).toString(16),languageId:e.getLanguageId(),fileExtension:kZ(e.uri)})}getOverwriteInfo(e,t){bt(this.editor.hasModel());let n=this.editor.getOption(106).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,o=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+r,overwriteAfter:o+a}}_alertCompletionItem(e){if(io(e.completion.additionalTextEdits)){let t=p("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);qn(t)}}triggerSuggest(e,t){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=h(()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},"fallback"),i=h(o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=o.editStart.column,l=r.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==o.completion.insertText},"makesTextEdit");fe.once(this.model.onDidTrigger)(o=>{let r=[];fe.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{et(r),n()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(et(r),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),d=a.items[l];if(!i(d)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:d,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){!this.widget.isInitialized||this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},"SuggestController");us.ID="editor.contrib.suggestController";us=Vae([pu(1,lz),pu(2,ln),pu(3,De),pu(4,Ge),pu(5,Cs),pu(6,Yr)],us);class bz{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}h(bz,"PriorityRegistry");class Wg extends le{constructor(){super({id:Wg.id,label:p("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:se.and(I.writable,I.hasCompletionItemProvider),kbOpts:{kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=us.get(t);if(!i)return;let o;n&&typeof n=="object"&&n.auto===!0&&(o=!0),i.triggerSuggest(void 0,o)}}h(Wg,"TriggerSuggestAction");Wg.id="editor.action.triggerSuggest";lt(us.ID,us);ne(Wg);const as=100+90,co=zn.bindToContribution(us.get);te(new co({id:"acceptSelectedSuggestion",precondition:Ze.Visible,handler(s){s.acceptSelectedSuggestion(!0,!1)}}));Ci.registerKeybindingRule({id:"acceptSelectedSuggestion",when:se.and(Ze.Visible,I.textInputFocus),primary:2,weight:as});Ci.registerKeybindingRule({id:"acceptSelectedSuggestion",when:se.and(Ze.Visible,I.textInputFocus,Ze.AcceptSuggestionsOnEnter,Ze.MakesTextEdit),primary:3,weight:as});Lo.appendMenuItem(vd,{command:{id:"acceptSelectedSuggestion",title:p("accept.insert","Insert")},group:"left",order:1,when:Ze.HasInsertAndReplaceRange.toNegated()});Lo.appendMenuItem(vd,{command:{id:"acceptSelectedSuggestion",title:p("accept.insert","Insert")},group:"left",order:1,when:se.and(Ze.HasInsertAndReplaceRange,Ze.InsertMode.isEqualTo("insert"))});Lo.appendMenuItem(vd,{command:{id:"acceptSelectedSuggestion",title:p("accept.replace","Replace")},group:"left",order:1,when:se.and(Ze.HasInsertAndReplaceRange,Ze.InsertMode.isEqualTo("replace"))});te(new co({id:"acceptAlternativeSelectedSuggestion",precondition:se.and(Ze.Visible,I.textInputFocus),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:1027,secondary:[1026]},handler(s){s.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:vd,group:"left",order:2,when:se.and(Ze.HasInsertAndReplaceRange,Ze.InsertMode.isEqualTo("insert")),title:p("accept.replace","Replace")},{menuId:vd,group:"left",order:2,when:se.and(Ze.HasInsertAndReplaceRange,Ze.InsertMode.isEqualTo("replace")),title:p("accept.insert","Insert")}]}));tt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");te(new co({id:"hideSuggestWidget",precondition:Ze.Visible,handler:s=>s.cancelSuggestWidget(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}}));te(new co({id:"selectNextSuggestion",precondition:se.and(Ze.Visible,Ze.MultipleSuggestions),handler:s=>s.selectNextSuggestion(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));te(new co({id:"selectNextPageSuggestion",precondition:se.and(Ze.Visible,Ze.MultipleSuggestions),handler:s=>s.selectNextPageSuggestion(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:12,secondary:[2060]}}));te(new co({id:"selectLastSuggestion",precondition:se.and(Ze.Visible,Ze.MultipleSuggestions),handler:s=>s.selectLastSuggestion()}));te(new co({id:"selectPrevSuggestion",precondition:se.and(Ze.Visible,Ze.MultipleSuggestions),handler:s=>s.selectPrevSuggestion(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));te(new co({id:"selectPrevPageSuggestion",precondition:se.and(Ze.Visible,Ze.MultipleSuggestions),handler:s=>s.selectPrevPageSuggestion(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:11,secondary:[2059]}}));te(new co({id:"selectFirstSuggestion",precondition:se.and(Ze.Visible,Ze.MultipleSuggestions),handler:s=>s.selectFirstSuggestion()}));te(new co({id:"toggleSuggestionDetails",precondition:Ze.Visible,handler:s=>s.toggleSuggestionDetails(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:vd,group:"right",order:1,when:se.and(Ze.DetailsVisible,Ze.CanResolve),title:p("detail.more","show less")},{menuId:vd,group:"right",order:1,when:se.and(Ze.DetailsVisible.toNegated(),Ze.CanResolve),title:p("detail.less","show more")}]}));te(new co({id:"toggleExplainMode",precondition:Ze.Visible,handler:s=>s.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));te(new co({id:"toggleSuggestionFocus",precondition:Ze.Visible,handler:s=>s.toggleSuggestionFocus(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:2570,mac:{primary:778}}}));te(new co({id:"insertBestCompletion",precondition:se.and(I.textInputFocus,se.equals("config.editor.tabCompletion","on"),l_.AtEnd,Ze.Visible.toNegated(),wh.OtherSuggestions.toNegated(),Xn.InSnippetMode.toNegated()),handler:(s,e)=>{s.triggerSuggestAndAcceptBest(Wi(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:as,primary:2}}));te(new co({id:"insertNextSuggestion",precondition:se.and(I.textInputFocus,se.equals("config.editor.tabCompletion","on"),wh.OtherSuggestions,Ze.Visible.toNegated(),Xn.InSnippetMode.toNegated()),handler:s=>s.acceptNextSuggestion(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:2}}));te(new co({id:"insertPrevSuggestion",precondition:se.and(I.textInputFocus,se.equals("config.editor.tabCompletion","on"),wh.OtherSuggestions,Ze.Visible.toNegated(),Xn.InSnippetMode.toNegated()),handler:s=>s.acceptPrevSuggestion(),kbOpts:{weight:as,kbExpr:I.textInputFocus,primary:1026}}));ne(class extends le{constructor(){super({id:"editor.action.resetSuggestSize",label:p("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(s,e){var t;(t=us.get(e))===null||t===void 0||t.resetWidgetSize()}});class vz extends z{constructor(e,t){super();this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new P,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new gt(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(i=>{i.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(i=>{i.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=us.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(r,a,l)=>{const d=this.editor.getModel(),c=e0(d,this.suggestControllerPreselector());if(!c)return-1;const u=W.lift(a),f=l.map((m,b)=>{const v=hP(n,u,m,this.isShiftKeyPressed),C=e0(d,v?.normalizedInlineCompletion);if(!C)return;const w=Bae(c.range,C.range)&&c.text.startsWith(C.text);return{index:b,valid:w,prefixLength:C.text.length,suggestItem:m}}).filter(m=>m&&m.valid),g=VP(f,Fv(m=>m.prefixLength,xj));return g?g.index:-1}}));let i=!1;const o=h(()=>{i||(i=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))},"bindToSuggestWidget");this._register(fe.once(n.model.onDidTrigger)(r=>{o()}))}this.update(this._isActive)}get state(){if(!!this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;Hae(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=us.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(!!t)return hP(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=us.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=us.get(this.editor);e&&e.forceRenderingAbove()}}h(vz,"SuggestWidgetInlineCompletionProvider");function Bae(s,e){return e.startLineNumber===s.startLineNumber&&e.startColumn===s.startColumn&&(e.endLineNumber<s.endLineNumber||e.endLineNumber===s.endLineNumber&&e.endColumn<=s.endColumn)}h(Bae,"rangeStartsWith");function Hae(s,e){return s===e?!0:!s||!e?!1:s.completionItemKind===e.completionItemKind&&s.isSnippetText===e.isSnippetText&&Dre(s.normalizedInlineCompletion,e.normalizedInlineCompletion)}h(Hae,"suggestItemInfoEquals");function hP(s,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:T.fromPositions(e,e),text:""}};let{insertText:i}=t.completion,o=!1;if(t.completion.insertTextRules&4){const a=new pb().parse(i),l=s.editor.getModel();if(a.children.length>100)return;Ms.adjustWhitespace(l,e,a,!0,!0),i=a.toString(),o=!0}const r=s.getOverwriteInfo(t,n);return{isSnippetText:o,completionItemKind:t.completion.kind,normalizedInlineCompletion:{text:i,range:T.fromPositions(e.delta(0,-r.overwriteBefore),e.delta(0,Math.max(r.overwriteAfter,0)))}}}h(hP,"suggestionToSuggestItemInfo");var zae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Kae=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},uP=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let WE=h(class extends wA{constructor(e,t,n){super(e);this.cache=t,this.languageFeaturesService=n,this.suggestionInlineCompletionSource=this._register(new vz(this.editor,()=>{var i,o;return(o=(i=this.cache.value)===null||i===void 0?void 0:i.completions[0])===null||o===void 0?void 0:o.toLiveInlineCompletion()})),this.updateOperation=this._register(new hi),this.updateCacheSoon=this._register(new gt(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const o=this.ghostText;o&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,Uae(o.parts.map(r=>r.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(i=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(He(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(106).preview}updateCache(){return uP(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.text,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition(),i=Hn(r=>uP(this,void 0,void 0,function*(){let a;try{a=yield JH(this.languageFeaturesService.inlineCompletionsProvider,n,this.editor.getModel(),{triggerKind:Ho.Automatic,selectedSuggestionInfo:t},r)}catch(l){Ne(l);return}r.isCancellationRequested||(this.cache.setValue(this.editor,a,Ho.Automatic),this.onDidChangeEmitter.fire())})),o=new CA(i,Ho.Automatic);this.updateOperation.value=o,yield i,this.updateOperation.value===o&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const i=this.isSuggestionPreviewEnabled(),o=e0(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),r=this.suggestionInlineCompletionSource.state,a=e0(this.editor.getModel(),(n=r?.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),l=o&&a&&o.text.startsWith(a.text)&&o.range.equalsRange(a.range);if(!i&&!l)return;const d=l?o:a||o,c=l?d.text.length-a.text.length:0;return this.toGhostText(d,c)}toGhostText(e,t){const n=this.editor.getOptions().get(106).previewMode;return e?$H(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new vA(e.range.endLineNumber,[],this.minReservedLineCount):void 0}},"SuggestWidgetPreviewModel");WE=zae([Kae(2,ce)],WE);function Uae(s){return s.reduce((e,t)=>e+t,0)}h(Uae,"sum");function jae(s,e){return{object:s,dispose:()=>e?.dispose()}}h(jae,"createDisposableRef");var Gae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$ae=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},qae=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class wz extends z{constructor(){super(...arguments);this.onDidChangeEmitter=new P,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new hi)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?jae(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}h(wz,"DelegatingModel");let VE=h(class extends wz{constructor(e,t){super();this.editor=e,this.instantiationService=t,this.sharedCache=this._register(new Cz),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(WE,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance(NE,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(i=>e.containsPosition(new W(n.lineNumber,i.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Ho.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return qae(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}},"GhostTextModel");VE=Gae([$ae(1,Ge)],VE);class Cz extends z{constructor(){super(...arguments);this.onDidChangeEmitter=new P,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new hi)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new XH(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}h(Cz,"SharedInlineCompletionCache");var Yae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fP=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},nx;const gP=(nx=window.trustedTypes)===null||nx===void 0?void 0:nx.createPolicy("editorGhostText",{createHTML:s=>s});let BE=h(class extends z{constructor(e,t,n,i){super();this.editor=e,this.model=t,this.instantiationService=n,this.languageService=i,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(yz,this.editor)),this.additionalLinesWidget=this._register(new Sz(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(o=>{(o.hasChanged(29)||o.hasChanged(105)||o.hasChanged(88)||o.hasChanged(83)||o.hasChanged(45)||o.hasChanged(44)||o.hasChanged(59))&&this.update()})),this._register(He(()=>{var o;this.disposed=!0,this.update(),(o=this.viewMoreContentWidget)===null||o===void 0||o.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,i=new Array;function o(d,c){if(i.length>0){const u=i[i.length-1];c&&u.decorations.push(new no(u.content.length+1,u.content.length+1+d[0].length,c,0)),u.content+=d[0],d=d.slice(1)}for(const u of d)i.push({content:u,decorations:c?[new no(1,u.length+1,c,0)]:[]})}h(o,"addToAdditionalLines");const r=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,l=0;for(const d of t.parts){let c=d.lines;a===void 0?(n.push({column:d.column,text:c[0],preview:d.preview}),c=c.slice(1)):o([r.substring(l,d.column-1)],void 0),c.length>0&&(o(c,"ghost-text"),a===void 0&&d.column<=r.length&&(a=d.column)),l=d.column-1}a!==void 0&&o([r.substring(l)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:r.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,i,t.additionalReservedLineCount),t.parts.some(d=>d.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new W(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const i=this.editor.getOption(44),o=document.createElement("div");o.className="suggest-preview-additional-widget",ti(o,i);const r=document.createElement("span");r.className="content-spacer",r.append(t),o.append(r);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("\u23CE  "),o.append(a);const l=new Q,d=document.createElement("div");return d.className="button suggest-preview-text",d.append(`+${n} lines\u2026`),l.add(Wn(d,"mousedown",c=>{var u;(u=this.model)===null||u===void 0||u.setExpanded(!0),c.preventDefault(),this.editor.focus()})),o.append(d),new xz(this.editor,e,o,l)}},"GhostTextWidget");BE=Yae([fP(2,Ge),fP(3,Vt)],BE);class yz{constructor(e){this.editor=e,this.decorationIds=[],this.disposableStore=new Q}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){if(this.disposableStore.clear(),!this.editor.getModel())return;const o=new Array;n&&o.push({range:T.fromPositions(new W(e,n.column),new W(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(r=>({range:T.fromPositions(new W(e,r.column)),options:{description:"ghost-text",after:{content:r.text,inlineClassName:r.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}})).concat(o))}}h(yz,"DecorationsWidget");class Sz{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:o}=i.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");Xae(l,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}h(Sz,"AdditionalLinesWidget");function Xae(s,e,t,n,i){const o=n.get(29),r=n.get(105),a="none",l=n.get(83),d=n.get(45),c=n.get(44),u=n.get(59),f=Yc(1e4);f.appendASCIIString('<div class="suggest-preview-text">');for(let b=0,v=t.length;b<v;b++){const C=t[b],w=C.content;f.appendASCIIString('<div class="view-line'),f.appendASCIIString('" style="top:'),f.appendASCIIString(String(b*u)),f.appendASCIIString('px;width:1000000px;">');const y=p0(w),S=g0(w),L=_n.createEmpty(w,i);x0(new Id(c.isMonospace&&!o,c.canUseHalfwidthRightwardsArrow,w,!1,y,S,0,L,C.decorations,e,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,r,a,l,d!==Yi.OFF,null),f),f.appendASCIIString("</div>")}f.appendASCIIString("</div>"),ti(s,c);const g=f.build(),m=gP?gP.createHTML(g):g;s.innerHTML=m}h(Xae,"renderLines");class xz extends z{constructor(e,t,n,i){super();this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(i),this._register(He(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}h(xz,"ViewMoreLinesContentWidget");It((s,e)=>{const t=s.getColor(bX);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=s.getColor(vX);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const i=s.getColor(_X);i&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${i}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${i}; }`))});var Tz=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},HE=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},sy=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let In=h(class Lz extends z{constructor(e,t){super();this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new hi),this.activeModelDidChangeEmitter=this._register(new P),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(106)&&this.updateModelController(),n.hasChanged(55)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(Lz.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(106),t=this.editor.getOption(55);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(zE,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return sy(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}},"GhostTextController");In.inlineSuggestionVisible=new re("inlineSuggestionVisible",!1,p("inlineSuggestionVisible","Whether an inline suggestion is visible"));In.inlineSuggestionHasIndentation=new re("inlineSuggestionHasIndentation",!1,p("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));In.inlineSuggestionHasIndentationLessThanTabSize=new re("inlineSuggestionHasIndentationLessThanTabSize",!0,p("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));In.ID="editor.contrib.ghostTextController";In=Tz([HE(1,Ge)],In);class kz{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=In.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=In.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=In.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}h(kz,"GhostTextContextKeys");let zE=h(class extends z{constructor(e,t,n){super();this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new kz(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(VE,this.editor)),this.widget=this._register(this.instantiationService.createInstance(BE,this.editor,this.model)),this._register(He(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const i=this.model.inlineCompletionsModel.ghostText;if(!!this.model.activeInlineCompletionsModel&&i&&i.parts.length>0){const{column:o,lines:r}=i.parts[0],a=r[0],l=this.editor.getModel().getLineIndentColumn(i.lineNumber);if(o<=l){let c=bi(a);c===-1&&(c=a.length-1),t=c>0;const u=this.editor.getModel().getOptions().tabSize;n=mn.visibleColumnFromColumn(a,c+1,u)<u}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}},"ActiveGhostTextController");zE=Tz([HE(1,Ge),HE(2,De)],zE);const Ez=zn.bindToContribution(In.get),c_=new Ez({id:jH,precondition:In.inlineSuggestionVisible,handler(s){s.commit(),s.editor.focus()}});te(c_);Ci.registerKeybindingRule({primary:2,weight:200,id:c_.id,when:se.and(c_.precondition,I.tabMovesFocus.toNegated(),In.inlineSuggestionHasIndentationLessThanTabSize)});te(new Ez({id:"editor.action.inlineSuggest.hide",precondition:In.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(s){s.hide()}}));class Ch extends le{constructor(){super({id:Ch.ID,label:p("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:se.and(I.writable,In.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return sy(this,void 0,void 0,function*(){const n=In.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}h(Ch,"ShowNextInlineSuggestionAction");Ch.ID="editor.action.inlineSuggest.showNext";class yh extends le{constructor(){super({id:yh.ID,label:p("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:se.and(I.writable,In.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return sy(this,void 0,void 0,function*(){const n=In.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}h(yh,"ShowPreviousInlineSuggestionAction");yh.ID="editor.action.inlineSuggest.showPrevious";class Dz extends le{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:p("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:I.writable})}run(e,t){return sy(this,void 0,void 0,function*(){const n=In.get(t);n&&n.trigger()})}}h(Dz,"TriggerInlineSuggestionAction");var Zae=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mu=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};class Iz{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}h(Iz,"InlineCompletionsHover");let KE=h(class{constructor(e,t,n,i,o,r,a){this._editor=e,this._commandService=t,this._menuService=n,this._contextKeyService=i,this._languageService=o,this._openerService=r,this.accessibilityService=a,this.hoverOrdinal=3}suggestHoverAnchor(e){const t=In.get(this._editor);if(!t)return null;const n=e.target;if(n.type===8){const i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new im(1e3,this,T.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}return n.type===7&&t.shouldShowHoverAt(n.range)?new im(1e3,this,n.range):n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)?new im(1e3,this,n.range):null}computeSync(e,t){const n=In.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new Iz(this,e.range,n)]:[]}renderHoverParts(e,t){const n=new Q,i=t[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,i,n);const o=n.add(this._menuService.createMenu(R.InlineCompletionsActions,this._contextKeyService)),r=e.statusBar.addAction({label:p("showNextInlineSuggestion","Next"),commandId:Ch.ID,run:()=>this._commandService.executeCommand(Ch.ID)}),a=e.statusBar.addAction({label:p("showPreviousInlineSuggestion","Previous"),commandId:yh.ID,run:()=>this._commandService.executeCommand(yh.ID)});e.statusBar.addAction({label:p("acceptInlineSuggestion","Accept"),commandId:c_.id,run:()=>this._commandService.executeCommand(c_.id)});const l=[r,a];for(const d of l)d.setEnabled(!1);i.hasMultipleSuggestions().then(d=>{for(const c of l)c.setEnabled(d)});for(const[d,c]of o.getActions())for(const u of c)u instanceof id&&e.statusBar.addAction({label:u.label,commandId:u.item.id,run:()=>this._commandService.executeCommand(u.item.id)});return n}renderScreenReaderText(e,t,n){var i,o;const r=X,a=r("div.hover-row.markdown-hover"),l=j(a,r("div.hover-contents")),d=n.add(new Ja({editor:this._editor},this._languageService,this._openerService)),c=h(f=>{n.add(d.onDidRenderAsync(()=>{l.className="hover-contents code-hover-contents",e.onContentsChanged()}));const g=p("inlineSuggestionFollows","Suggestion:"),m=n.add(d.render(new Zi().appendText(g).appendCodeblock("text",f)));l.replaceChildren(m.element)},"render"),u=(o=(i=t.controller.activeModel)===null||i===void 0?void 0:i.inlineCompletionsModel)===null||o===void 0?void 0:o.ghostText;if(u){const f=this._editor.getModel().getLineContent(u.lineNumber);c(u.renderForScreenReader(f))}e.fragment.appendChild(a)}},"InlineCompletionsHoverParticipant");KE=Zae([mu(1,ln),mu(2,Wh),mu(3,De),mu(4,Vt),mu(5,ss),mu(6,lo)],KE);lt(In.ID,In);ne(Dz);ne(Ch);ne(yh);Qh.register(KE);function Gi(s,e){let t=0;for(let n=0;n<s.length;n++)s.charAt(n)==="	"?t+=e:t++;return t}h(Gi,"getSpaceCnt");function sm(s,e,t){s=s<0?0:s;let n="";if(!t){let i=Math.floor(s/e);s=s%e;for(let o=0;o<i;o++)n+="	"}for(let i=0;i<s;i++)n+=" ";return n}h(sm,"generateIndent");function Nz(s,e,t,n,i){if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return[];const o=e.getLanguageConfiguration(s.getLanguageId()).indentationRules;if(!o)return[];for(n=Math.min(n,s.getLineCount());t<=n&&o.unIndentedLinePattern;){let v=s.getLineContent(t);if(!o.unIndentedLinePattern.test(v))break;t++}if(t>n-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=s.getOptions(),d=h((v,C)=>(C=C||1,Xi.shiftIndent(v,v.length+C,r,a,l)),"shiftIndent"),c=h((v,C)=>(C=C||1,Xi.unshiftIndent(v,v.length+C,r,a,l)),"unshiftIndent");let u=[],f,g=s.getLineContent(t),m=g;if(i!=null){f=i;let v=pt(g);m=f+g.substring(v.length),o.decreaseIndentPattern&&o.decreaseIndentPattern.test(m)&&(f=c(f),m=f+g.substring(v.length)),g!==m&&u.push(jt.replaceMove(new oe(t,1,t,v.length+1),aC(f,a,l)))}else f=pt(g);let b=f;o.increaseIndentPattern&&o.increaseIndentPattern.test(m)?(b=d(b),f=d(f)):o.indentNextLinePattern&&o.indentNextLinePattern.test(m)&&(b=d(b)),t++;for(let v=t;v<=n;v++){let C=s.getLineContent(v),w=pt(C),y=b+C.substring(w.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(y)&&(b=c(b),f=c(f)),w!==b&&u.push(jt.replaceMove(new oe(v,1,v,w.length+1),aC(b,a,l))),!(o.unIndentedLinePattern&&o.unIndentedLinePattern.test(C))&&(o.increaseIndentPattern&&o.increaseIndentPattern.test(y)?(f=d(f),b=f):o.indentNextLinePattern&&o.indentNextLinePattern.test(y)?b=d(b):b=f)}return u}h(Nz,"getReindentEditOperations");class wb extends le{constructor(){super({id:wb.ID,label:p("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:I.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),o=t.getSelection();if(!o)return;const r=new Oz(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}h(wb,"IndentationToSpacesAction");wb.ID="editor.action.indentationToSpaces";class Cb extends le{constructor(){super({id:Cb.ID,label:p("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:I.writable})}run(e,t){let n=t.getModel();if(!n)return;let i=n.getOptions(),o=t.getSelection();if(!o)return;const r=new Fz(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}h(Cb,"IndentationToTabsAction");Cb.ID="editor.action.indentationToTabs";class TA extends le{constructor(e,t){super(t);this.insertSpaces=e}run(e,t){const n=e.get(tl),i=e.get(Bt);let o=t.getModel();if(!o)return;const r=i.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===r.tabSize?p("configuredTabSize","Configured Tab Size"):void 0})),l=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:p({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[l]}).then(d=>{d&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(d.label,10),insertSpaces:this.insertSpaces})})},50)}}h(TA,"ChangeIndentationSizeAction");class yb extends TA{constructor(){super(!1,{id:yb.ID,label:p("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}h(yb,"IndentUsingTabs");yb.ID="editor.action.indentUsingTabs";class Sb extends TA{constructor(){super(!0,{id:Sb.ID,label:p("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}h(Sb,"IndentUsingSpaces");Sb.ID="editor.action.indentUsingSpaces";class xb extends le{constructor(){super({id:xb.ID,label:p("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(Bt);let i=t.getModel();if(!i)return;const o=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(o.insertSpaces,o.tabSize)}}h(xb,"DetectIndentation");xb.ID="editor.action.detectIndentation";class Az extends le{constructor(){super({id:"editor.action.reindentlines",label:p("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:I.writable})}run(e,t){const n=e.get(oi);let i=t.getModel();if(!i)return;let o=Nz(i,n,1,i.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}h(Az,"ReindentLinesAction");class Mz extends le{constructor(){super({id:"editor.action.reindentselectedlines",label:p("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:I.writable})}run(e,t){const n=e.get(oi);let i=t.getModel();if(!i)return;let o=t.getSelections();if(o===null)return;let r=[];for(let a of o){let l=a.startLineNumber,d=a.endLineNumber;if(l!==d&&a.endColumn===1&&d--,l===1){if(l===d)continue}else l--;let c=Nz(i,n,l,d);r.push(...c)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}h(Mz,"ReindentSelectedLinesAction");class Rz{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let i of this._edits)t.addEditOperation(T.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}h(Rz,"AutoIndentOnPasteCommand");class t0{constructor(e){this.callOnDispose=new Q,this.callOnModel=new Q,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(48))&&(!this.editor.hasModel()||this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)})))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(9),{tabSize:o,indentSize:r,insertSpaces:a}=n.getOptions();let l=[],d={shiftIndent:g=>Xi.shiftIndent(g,g.length+1,o,r,a),unshiftIndent:g=>Xi.unshiftIndent(g,g.length+1,o,r,a)},c=e.startLineNumber;for(;c<=e.endLineNumber;){if(this.shouldIgnoreLine(n,c)){c++;continue}break}if(c>e.endLineNumber)return;let u=n.getLineContent(c);if(!/\S/.test(u.substring(0,e.startColumn-1))){const g=fn.getGoodIndentForLine(i,n,n.getLanguageId(),c,d);if(g!==null){let m=pt(u),b=Gi(g,o),v=Gi(m,o);if(b!==v){let C=sm(b,o,a);l.push({range:new T(c,1,c,m.length+1),text:C}),u=C+u.substr(m.length)}else{let C=fn.getIndentMetadata(n,c);if(C===0||C===8)return}}}const f=c;for(;c<e.endLineNumber;){if(!/\S/.test(n.getLineContent(c+1))){c++;continue}break}if(c!==e.endLineNumber){let g={getLineTokens:b=>n.getLineTokens(b),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(b,v)=>n.getLanguageIdAtPosition(b,v),getLineContent:b=>b===f?u:n.getLineContent(b)},m=fn.getGoodIndentForLine(i,g,n.getLanguageId(),c+1,d);if(m!==null){let b=Gi(m,o),v=Gi(pt(n.getLineContent(c+1)),o);if(b!==v){let C=b-v;for(let w=c+1;w<=e.endLineNumber;w++){let y=n.getLineContent(w),S=pt(y),E=Gi(S,o)+C,x=sm(E,o,a);x!==S&&l.push({range:new T(w,1,w,S.length+1),text:x})}}}}if(l.length>0){this.editor.pushUndoStop();let g=new Rz(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",g),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;let i=e.getLineTokens(t);if(i.getCount()>0){let o=i.findTokenIndexAtOffset(n);if(o>=0&&i.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}h(t0,"AutoIndentOnPaste");t0.ID="editor.contrib.autoIndentOnPaste";function Pz(s,e,t,n){if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let i="";for(let r=0;r<t;r++)i+=" ";let o=new RegExp(i,"gi");for(let r=1,a=s.getLineCount();r<=a;r++){let l=s.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=s.getLineMaxColumn(r)),l===1)continue;const d=new T(r,1,r,l),c=s.getValueInRange(d),u=n?c.replace(/\t/ig,i):c.replace(o,"	");e.addEditOperation(d,u)}}h(Pz,"getIndentationEditOperations");class Oz{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Pz(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}h(Oz,"IndentationToSpacesCommand");class Fz{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Pz(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}h(Fz,"IndentationToTabsCommand");lt(t0.ID,t0);ne(wb);ne(Cb);ne(yb);ne(Sb);ne(xb);ne(Az);ne(Mz);var n0=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class LA{constructor(e,t){this.range=e,this.direction=t}}h(LA,"InlayHintAnchor");class ry{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){const t=new ry(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return n0(this,void 0,void 0,function*(){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return yield this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),yield this._currentResolve}})}_doResolve(e){var t,n;return n0(this,void 0,void 0,function*(){try{const i=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=i?.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(n=i?.label)!==null&&n!==void 0?n:this.hint.label,this._isResolved=!0}catch(i){Nn(i),this._isResolved=!1}})}}h(ry,"InlayHintItem");class rg{constructor(e,t,n){this._disposables=new Q,this.ranges=e,this.provider=new Set;const i=[];for(const[o,r]of t){this._disposables.add(o),this.provider.add(r);for(const a of o.hints){let l=n.validatePosition(a.position),d="before";const c=rg._getRangeAtPosition(n,l);let u;c.getStartPosition().isBefore(l)?(u=T.fromPositions(c.getStartPosition(),l),d="after"):(u=T.fromPositions(l,c.getEndPosition()),d="before"),i.push(new ry(a,new LA(u,d),r))}}this.items=i.sort((o,r)=>W.compare(o.hint.position,r.hint.position))}static create(e,t,n,i){return n0(this,void 0,void 0,function*(){const o=[],r=e.ordered(t).reverse().map(a=>n.map(l=>n0(this,void 0,void 0,function*(){try{const d=yield a.provideInlayHints(t,l,i);d?.hints.length&&o.push([d,a])}catch(d){Nn(d)}})));if(yield Promise.all(r.flat()),i.isCancellationRequested||t.isDisposed())throw new Dd;return new rg(n,o,t)})}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new T(n,i.startColumn,n,i.endColumn);e.tokenizeIfCheap(n);const o=e.getLineTokens(n),r=t.column-1,a=o.findTokenIndexAtOffset(r);let l=o.getStartOffset(a),d=o.getEndOffset(a);return d-l===1&&(l===r&&a>1?(l=o.getStartOffset(a-1),d=o.getEndOffset(a-1)):d===r&&a<o.getCount()-1&&(l=o.getStartOffset(a+1),d=o.getEndOffset(a+1))),new T(n,l+1,n,d+1)}}h(rg,"InlayHintsFragments");function Jae(s){return Ce.from({scheme:Me.command,path:s.id,query:s.arguments&&encodeURIComponent(JSON.stringify(s.arguments))}).toString()}h(Jae,"asCommandLink");var rm=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};function Qae(s,e,t,n){var i;return rm(this,void 0,void 0,function*(){const o=s.get(Ui),r=s.get(Ad),a=s.get(ln),l=s.get(Ge),d=s.get(cn);if(yield n.item.resolve(je.None),!n.part.location)return;const c=n.part.location,u=[],f=new Set(Lo.getMenuItems(R.EditorContext).map(m=>Nu(m)?m.command.id:""));for(const m of Ec.getEditorActions())m instanceof Od&&f.has(m.id)&&u.push(new Vi(m.id,m.label,void 0,!0,()=>rm(this,void 0,void 0,function*(){const b=yield o.createModelReference(c.uri);try{yield l.invokeFunction(m.run.bind(m),e,new eg(b.object.textEditorModel,T.getStartPosition(c.range)))}finally{b.dispose()}})));if(n.part.command){const{command:m}=n.part;u.push(new To),u.push(new Vi(m.id,m.title,void 0,!0,()=>rm(this,void 0,void 0,function*(){var b;try{yield a.executeCommand(m.id,...(b=m.arguments)!==null&&b!==void 0?b:[])}catch(v){d.notify({severity:i9.Error,source:n.item.provider.displayName,message:v})}})))}const g=e.getOption(115);r.showContextMenu({domForShadowRoot:g&&(i=e.getDomNode())!==null&&i!==void 0?i:void 0,getAnchor:()=>{const m=$n(t);return{x:m.left,y:m.top+m.height+8}},getActions:()=>u,onHide:()=>{e.focus()},autoSelectFirstItem:!0})})}h(Qae,"showGoToContextMenu");function ele(s,e,t,n){return rm(this,void 0,void 0,function*(){const o=yield s.get(Ui).createModelReference(n.uri);yield t.invokeWithinContext(r=>rm(this,void 0,void 0,function*(){const a=e.hasSideBySideModifier,l=r.get(De),d=zi.inPeekEditor.getValue(l),c=!a&&t.getOption(78)&&!d;return new Rg({openToSide:a,openInPeek:c,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(r,t,{model:o.object.textEditorModel,position:T.getStartPosition(n.range)})})),o.dispose()})}h(ele,"goToDefinitionWithLocation");var tle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_u=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},Eu=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class h_{constructor(){this._entries=new Qa(50)}get(e){const t=h_._key(e);return this._entries.get(t)}set(e,t){const n=h_._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}h(h_,"InlayHintsCache");const Wz=Xe("IInlayHintsCache");it(Wz,h_,!0);class i0{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}h(i0,"RenderedInlayHintLabelPart");class Vz{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}h(Vz,"ActiveInlayHintInfo");let Sh=h(class UE{constructor(e,t,n,i,o,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=i,this._commandService=o,this._notificationService=r,this._instaService=a,this._disposables=new Q,this._sessionDisposables=new Q,this._decorationsMetadata=new Map,this._ruleFactory=new Cg(this._editor),this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(127)&&this._update()})),this._update()}static get(e){var t;return(t=e.getContribution(UE.ID))!==null&&t!==void 0?t:void 0}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(127).enabled)return;const e=this._editor.getModel();if(!e||!this._languageFeaturesService.inlayHintsProvider.has(e))return;const t=this._inlayHintsCache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t),this._sessionDisposables.add(He(()=>{e.isDisposed()||this._cacheHintsForFastRestore(e)}));let n,i=new Set;const o=new gt(()=>Eu(this,void 0,void 0,function*(){const r=Date.now();n?.dispose(!0),n=new Bn;const a=e.onWillDispose(()=>n?.cancel());try{const l=n.token,d=yield rg.create(this._languageFeaturesService.inlayHintsProvider,e,this._getHintsRanges(),l);if(o.delay=this._debounceInfo.update(e,Date.now()-r),l.isCancellationRequested){d.dispose();return}for(const c of d.provider)typeof c.onDidChangeInlayHints=="function"&&!i.has(c)&&(i.add(c),this._sessionDisposables.add(c.onDidChangeInlayHints(()=>{o.isScheduled()||o.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(e)}catch(l){Ne(l)}finally{n.dispose(),a.dispose()}}),this._debounceInfo.get(e));this._sessionDisposables.add(o),this._sessionDisposables.add(He(()=>n?.dispose(!0))),o.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(r=>{(r.scrollTopChanged||!o.isScheduled())&&o.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(r=>{const a=Math.max(o.delay,1250);o.schedule(a)})),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installDblClickGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new Q,t=e.add(new G1(this._editor)),n=new Q;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(i=>{const[o]=i,r=this._getInlayHintLabelPart(o),a=this._editor.getModel();if(!r||!a){n.clear();return}const l=new Bn;n.add(He(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new Vz(r,o.hasTriggerModifier):void 0;const d=r.item.hint.position.lineNumber,c=new T(d,1,d,a.getLineMaxColumn(d)),u=new Set;for(const f of this._decorationsMetadata.values())c.containsRange(f.item.anchor.range)&&u.add(f.item);this._updateHintsDecorators([c],Array.from(u)),n.add(He(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([c],Array.from(u))}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(i=>Eu(this,void 0,void 0,function*(){const o=this._getInlayHintLabelPart(i);if(o){const r=o.part;r.location?this._instaService.invokeFunction(ele,i,this._editor,r.location):yx.is(r.command)&&(yield this._invokeCommand(r.command,o.item))}}))),e}_installDblClickGesture(){return this._editor.onMouseUp(e=>Eu(this,void 0,void 0,function*(){if(e.event.detail!==2)return;const t=this._getInlayHintLabelPart(e);!t||(e.event.preventDefault(),yield t.item.resolve(je.None),t.item.hint.command&&(yield this._invokeCommand(t.item.hint.command,t.item)))}))}_installContextMenu(){return this._editor.onContextMenu(e=>Eu(this,void 0,void 0,function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(Qae,this._editor,e.event.target,t))}))}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;const n=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(n instanceof ud&&n?.attachedData instanceof i0)return n.attachedData}_invokeCommand(e,t){var n;return Eu(this,void 0,void 0,function*(){try{yield this._commandService.executeCommand(e.id,...(n=e.arguments)!==null&&n!==void 0?n:[])}catch(i){this._notificationService.notify({severity:i9.Error,source:t.provider.displayName,message:i})}})}_cacheHintsForFastRestore(e){const t=new Map;for(const[n,i]of this._decorationsMetadata){if(t.has(i.item))continue;let o=i.item;const r=e.getDecorationRange(n);if(r){const a=new LA(r,i.item.anchor.direction);o=i.item.with({anchor:a})}t.set(i.item,o)}this._inlayHintsCache.set(e,Array.from(t.values()))}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const o of n.sort(T.compareRangesUsingStarts)){const r=t.validateRange(new T(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));i.length===0||!T.areIntersectingOrTouching(i[i.length-1],r)?i.push(r):i[i.length-1]=T.plusRange(i[i.length-1],r)}return i}_updateHintsDecorators(e,t){var n,i;const o=[],r=h((g,m,b,v,C)=>{o.push({item:g,classNameRef:m,decoration:{range:g.anchor.range,options:{description:"InlayHint",showIfCollapsed:g.anchor.range.isEmpty(),collapseOnReplaceEdit:!g.anchor.range.isEmpty(),stickiness:0,[g.anchor.direction]:{content:b,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:m.className,cursorStops:v,attachedData:C}}}})},"addInjectedText"),a=h((g,m)=>{const b=this._ruleFactory.createClassNameRef({width:`${l/3|0}px`,display:"inline-block"});r(g,b,"\u200A",m?Ar.Right:Ar.None)},"addInjectedWhitespace"),{fontSize:l,fontFamily:d}=this._getLayoutInfo(),c="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(c,d);for(const g of t){g.hint.paddingLeft&&a(g,!1);const m=typeof g.hint.label=="string"?[{label:g.hint.label}]:g.hint.label;for(let b=0;b<m.length;b++){const v=m[b],C=b===0,w=b===m.length-1,y={fontSize:`${l}px`,fontFamily:`var(${c}), ${di.fontFamily}`,verticalAlign:"middle"};g.hint.command&&(y.cursor="pointer"),this._fillInColors(y,g.hint),(v.command||v.location)&&((n=this._activeInlayHintPart)===null||n===void 0?void 0:n.part.item)===g&&this._activeInlayHintPart.part.index===b&&(y.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(y.color=Yt(dI),y.cursor="pointer")),C&&w?(y.padding=`1px ${Math.max(1,l/4)|0}px`,y.borderRadius=`${l/4|0}px`):C?(y.padding=`1px 0 1px ${Math.max(1,l/4)|0}px`,y.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):w?(y.padding=`1px ${Math.max(1,l/4)|0}px 1px 0`,y.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):y.padding="1px 0 1px 0",r(g,this._ruleFactory.createClassNameRef(y),nle(v.label),w&&!g.hint.paddingRight?Ar.Right:Ar.None,new i0(g,b))}if(g.hint.paddingRight&&a(g,!0),o.length>UE._MAX_DECORATORS)break}const u=[];for(const g of e)for(const{id:m}of(i=this._editor.getDecorationsInRange(g))!==null&&i!==void 0?i:[]){const b=this._decorationsMetadata.get(m);b&&(u.push(m),b.classNameRef.dispose(),this._decorationsMetadata.delete(m))}const f=this._editor.deltaDecorations(u,o.map(g=>g.decoration));for(let g=0;g<f.length;g++){const m=o[g];this._decorationsMetadata.set(f[g],{item:m.item,classNameRef:m.classNameRef})}}_fillInColors(e,t){t.kind===zw.Parameter?(e.backgroundColor=Yt(iY),e.color=Yt(nY)):t.kind===zw.Type?(e.backgroundColor=Yt(tY),e.color=Yt(eY)):(e.backgroundColor=Yt(Ac),e.color=Yt(Nc))}_getLayoutInfo(){const e=this._editor.getOption(127),t=this._editor.getOption(46);let n=e.fontSize;(!n||n<5||n>t)&&(n=t*.9|0);const i=e.fontFamily||this._editor.getOption(43);return{fontSize:n,fontFamily:i}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},"InlayHintsController");Sh.ID="editor.contrib.InlayHints";Sh._MAX_DECORATORS=1500;Sh=tle([_u(1,ce),_u(2,os),_u(3,Wz),_u(4,ln),_u(5,cn),_u(6,Ge)],Sh);function nle(s){const e="\xA0";return s.replace(/[ \t]/g,e)}h(nle,"fixSpace");tt.registerCommand("_executeInlayHintProvider",(s,...e)=>Eu(void 0,void 0,void 0,function*(){const[t,n]=e;bt(Ce.isUri(t)),bt(T.isIRange(n));const{inlayHintsProvider:i}=s.get(ce),o=yield s.get(Ui).createModelReference(t);try{const r=yield rg.create(i,o.object.textEditorModel,[T.lift(n)],je.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{o.dispose()}}));var ile=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hp=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},pP=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},ole=globalThis&&globalThis.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=s[o]&&function(r){return new Promise(function(a,l){r=s[o](r),i(a,l,r.done,r.value)})}}function i(o,r,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},r)}};class jE extends im{constructor(e,t){super(10,t,e.item.anchor.range);this.part=e}}h(jE,"InlayHintsHoverAnchor");let GE=h(class extends XC{constructor(e,t,n,i,o,r){super(e,t,n,i,r);this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!Sh.get(this._editor)||e.target.type!==6)return null;const i=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return i instanceof ud&&i.attachedData instanceof i0?new jE(i.attachedData,this):null}computeSync(){return[]}computeAsync(e,t,n){return e instanceof jE?new Qt(i=>pP(this,void 0,void 0,function*(){var o,r;const{part:a}=e;if(yield a.item.resolve(n),n.isCancellationRequested)return;let l;typeof a.item.hint.tooltip=="string"?l=new Zi().appendText(a.item.hint.tooltip):a.item.hint.tooltip&&(l=a.item.hint.tooltip),l&&i.emitOne(new Rr(this,e.range,[l],0));let d;if(typeof a.part.tooltip=="string"?d=new Zi().appendText(a.part.tooltip):a.part.tooltip&&(d=a.part.tooltip),d&&i.emitOne(new Rr(this,e.range,[d],1)),a.part.location||a.part.command){let g;const b=this._editor.getOption(70)==="altKey"?Ke?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Ke?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");a.part.location&&a.part.command?g=new Zi().appendText(p("hint.defAndCommand","Go to Definition ({0}), right click for more",b)):a.part.location?g=new Zi().appendText(p("hint.def","Go to Definition ({0})",b)):a.part.command&&(g=new Zi(`[${p("hint.cmd","Execute Command")}](${Jae(a.part.command)} "${a.part.command.title}") (${b})`,{isTrusted:!0})),g&&i.emitOne(new Rr(this,e.range,[g],1e4))}const c=yield this._resolveInlayHintLabelPartHover(a,n);try{for(var u=ole(c),f;f=yield u.next(),!f.done;){let g=f.value;i.emitOne(g)}}catch(g){o={error:g}}finally{try{f&&!f.done&&(r=u.return)&&(yield r.call(u))}finally{if(o)throw o.error}}})):Qt.EMPTY}_resolveInlayHintLabelPartHover(e,t){return pP(this,void 0,void 0,function*(){if(!e.part.location)return Qt.EMPTY;const{uri:n,range:i}=e.part.location,o=yield this._resolverService.createModelReference(n);try{const r=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?cA(this._languageFeaturesService.hoverProvider,r,new W(i.startLineNumber,i.startColumn),t).filter(a=>!zf(a.hover.contents)).map(a=>new Rr(this,e.item.anchor.range,a.hover.contents,2+a.ordinal)):Qt.EMPTY}finally{o.dispose()}})}},"InlayHintsHover");GE=ile([hp(1,Vt),hp(2,ss),hp(3,wt),hp(4,Ui),hp(5,ce)],GE);lt(Sh.ID,Sh);Qh.register(GE);class Bz{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new oe(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new oe(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}h(Bz,"InPlaceReplaceCommand");var sle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rle=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let xd=h(class $E{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(e){return e.getContribution($E.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),i=this.editor.getModel();if(!i||!n)return;let o=n;if(o.startLineNumber!==o.endLineNumber)return;const r=new qf(this.editor,5),a=i.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=Hn(l=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(l=>{if(!l||!l.range||!l.value||!r.validate(this.editor))return;let d=T.lift(l.range),c=l.range,u=l.value.length-(o.endColumn-o.startColumn);c={startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.startColumn+l.value.length},u>1&&(o=new oe(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+u-1));const f=new Bz(d,o,l.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,f),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:c,options:$E.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=Zl(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(Ne)}).catch(Ne)):Promise.resolve(void 0)}},"InPlaceReplaceController");xd.ID="editor.contrib.inPlaceReplaceController";xd.DECORATION=Pe.register({description:"in-place-replace",className:"valueSetReplacement"});xd=sle([rle(1,is)],xd);class Hz extends le{constructor(){super({id:"editor.action.inPlaceReplace.up",label:p("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=xd.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}h(Hz,"InPlaceReplaceUp");class zz extends le{constructor(){super({id:"editor.action.inPlaceReplace.down",label:p("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=xd.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}h(zz,"InPlaceReplaceDown");lt(xd.ID,xd);ne(Hz);ne(zz);It((s,e)=>{const t=s.getColor(OF);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class Kz extends le{constructor(){super({id:"expandLineSelection",label:p("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:I.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,Ln.expandLineSelection(i,i.getCursorStates())),i.revealPrimaryCursor(n.source,!0)}}h(Kz,"ExpandLineSelectionAction");ne(Kz);class Uz{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){const n=ale(e,this._cursors);for(let i=0,o=n.length;i<o;i++){const r=n[i];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}h(Uz,"TrimTrailingWhitespaceCommand");function ale(s,e){e.sort((r,a)=>r.lineNumber===a.lineNumber?r.column-a.column:r.lineNumber-a.lineNumber);for(let r=e.length-2;r>=0;r--)e[r].lineNumber===e[r+1].lineNumber&&e.splice(r,1);const t=[];let n=0,i=0;const o=e.length;for(let r=1,a=s.getLineCount();r<=a;r++){const l=s.getLineContent(r),d=l.length+1;let c=0;if(i<o&&e[i].lineNumber===r&&(c=e[i].column,i++,c===d)||l.length===0)continue;const u=Fr(l);let f=0;if(u===-1)f=1;else if(u!==l.length-1)f=u+2;else continue;f=Math.max(c,f),t[n++]=jt.delete(new T(r,f,r,d))}return t}h(ale,"trimTrailingWhitespace");class kA{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let i=[];for(let r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));const o=i.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new T(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new T(n.startLineNumber,1,n.startLineNumber,1),o+`
`):t.addEditOperation(new T(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,o=n.startColumn,r=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),n=oe.createWithDirection(i,o,r,a,this._selectionDirection)}return n}}h(kA,"CopyLinesCommand");class jz{constructor(e,t,n){this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let i=this._selection;i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const{tabSize:o,indentSize:r,insertSpaces:a}=e.getOptions();let l=this.buildIndentConverter(o,r,a),d={getLineTokens:c=>e.getLineTokens(c),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(c,u)=>e.getLanguageIdAtPosition(c,u),getLineContent:null};if(i.startLineNumber===i.endLineNumber&&e.getLineMaxColumn(i.startLineNumber)===1){let c=i.startLineNumber,u=this._isMovingDown?c+1:c-1;e.getLineMaxColumn(u)===1?t.addEditOperation(new T(1,1,1,1),null):(t.addEditOperation(new T(c,1,c,1),e.getLineContent(u)),t.addEditOperation(new T(u,1,u,e.getLineMaxColumn(u)),null)),i=new oe(u,1,u,1)}else{let c,u;if(this._isMovingDown){c=i.endLineNumber+1,u=e.getLineContent(c),t.addEditOperation(new T(c-1,e.getLineMaxColumn(c-1),c,e.getLineMaxColumn(c)),null);let f=u;if(this.shouldAutoIndent(e,i)){let g=this.matchEnterRule(e,l,o,c,i.startLineNumber-1);if(g!==null){let b=pt(e.getLineContent(c)),v=g+Gi(b,o);f=sm(v,o,a)+this.trimLeft(u)}else{d.getLineContent=v=>v===i.startLineNumber?e.getLineContent(c):e.getLineContent(v);let b=fn.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(c,1),i.startLineNumber,l);if(b!==null){let v=pt(e.getLineContent(c)),C=Gi(b,o),w=Gi(v,o);C!==w&&(f=sm(C,o,a)+this.trimLeft(u))}}t.addEditOperation(new T(i.startLineNumber,1,i.startLineNumber,1),f+`
`);let m=this.matchEnterRuleMovingDown(e,l,o,i.startLineNumber,c,f);if(m!==null)m!==0&&this.getIndentEditsOfMovingBlock(e,t,i,o,a,m);else{d.getLineContent=v=>v===i.startLineNumber?f:v>=i.startLineNumber+1&&v<=i.endLineNumber+1?e.getLineContent(v-1):e.getLineContent(v);let b=fn.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(c,1),i.startLineNumber+1,l);if(b!==null){const v=pt(e.getLineContent(i.startLineNumber)),C=Gi(b,o),w=Gi(v,o);if(C!==w){const y=C-w;this.getIndentEditsOfMovingBlock(e,t,i,o,a,y)}}}}else t.addEditOperation(new T(i.startLineNumber,1,i.startLineNumber,1),f+`
`)}else if(c=i.startLineNumber-1,u=e.getLineContent(c),t.addEditOperation(new T(c,1,c+1,1),null),t.addEditOperation(new T(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+u),this.shouldAutoIndent(e,i)){d.getLineContent=g=>g===c?e.getLineContent(i.startLineNumber):e.getLineContent(g);let f=this.matchEnterRule(e,l,o,i.startLineNumber,i.startLineNumber-2);if(f!==null)f!==0&&this.getIndentEditsOfMovingBlock(e,t,i,o,a,f);else{let g=fn.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(i.startLineNumber,1),c,l);if(g!==null){let m=pt(e.getLineContent(i.startLineNumber)),b=Gi(g,o),v=Gi(m,o);if(b!==v){let C=b-v;this.getIndentEditsOfMovingBlock(e,t,i,o,a,C)}}}}}this._selectionId=t.trackSelection(i)}buildIndentConverter(e,t,n){return{shiftIndent:i=>Xi.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>Xi.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,o){if(o){let r=o.indentation;o.indentAction===sn.None||o.indentAction===sn.Indent?r=o.indentation+o.appendText:o.indentAction===sn.IndentOutdent?r=o.indentation:o.indentAction===sn.Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);let a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(r))>=0){let l=pt(e.getLineContent(i)),d=pt(r),c=fn.getIndentMetadata(e,i);c!==null&&c&2&&(d=t.unshiftIndent(d));let u=Gi(d,n),f=Gi(l,n);return u-f}}return null}matchEnterRuleMovingDown(e,t,n,i,o,r){if(Fr(r)>=0){let a=e.getLineMaxColumn(o),l=fn.getEnterAction(this._autoIndent,e,new T(o,a,o,a));return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){let c=e.getLineContent(a);if(Fr(c)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),d=fn.getEnterAction(this._autoIndent,e,new T(a,l,a,l));return this.parseEnterResult(e,t,n,i,d)}}matchEnterRule(e,t,n,i,o,r){let a=o;for(;a>=1;){let c;if(a===o&&r!==void 0?c=r:c=e.getLineContent(a),Fr(c)>=0)break;a--}if(a<1||i>e.getLineCount())return null;let l=e.getLineMaxColumn(a),d=fn.getEnterAction(this._autoIndent,e,new T(a,l,a,l));return this.parseEnterResult(e,t,n,i,d)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||fn.getIndentRulesSupport(n)===null)}getIndentEditsOfMovingBlock(e,t,n,i,o,r){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){let l=e.getLineContent(a),d=pt(l),u=Gi(d,i)+r,f=sm(u,i,o);f!==d&&(t.addEditOperation(new T(a,1,a,d.length+1),f),a===n.endLineNumber&&n.endColumn<=d.length+1&&f===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}h(jz,"MoveLinesCommand");class Ha{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return Ha._COLLATOR||(Ha._COLLATOR=new Intl.Collator),Ha._COLLATOR}getEditOperations(e,t){let n=lle(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let i=Gz(e,t,n);if(!i)return!1;for(let o=0,r=i.before.length;o<r;o++)if(i.before[o]!==i.after[o])return!0;return!1}}h(Ha,"SortLinesCommand");Ha._COLLATOR=null;function Gz(s,e,t){let n=e.startLineNumber,i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;let o=[];for(let a=n;a<=i;a++)o.push(s.getLineContent(a));let r=o.slice(0);return r.sort(Ha.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:n,endLineNumber:i,before:o,after:r}}h(Gz,"getSortData");function lle(s,e,t){let n=Gz(s,e,t);return n?jt.replace(new T(n.startLineNumber,1,n.endLineNumber,s.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}h(lle,"sortLines");class EA extends le{constructor(e,t){super(t);this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));n.sort((r,a)=>T.compareRangesUsingStarts(r.selection,a.selection));let i=n[0];for(let r=1;r<n.length;r++){const a=n[r];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const o=[];for(const r of n)o.push(new kA(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}h(EA,"AbstractCopyLinesAction");class $z extends EA{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:p("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}h($z,"CopyLinesUpAction");class qz extends EA{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:p("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}h(qz,"CopyLinesDownAction");class Yz extends le{constructor(){super({id:"editor.action.duplicateSelection",label:p("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:I.writable,menuOpts:{menuId:R.MenubarSelectionMenu,group:"2_line",title:p({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],o=t.getSelections(),r=t.getModel();for(const a of o)if(a.isEmpty())i.push(new kA(a,!0));else{const l=new oe(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new $F(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}h(Yz,"DuplicateSelectionAction");class DA extends le{constructor(e,t){super(t);this.down=e}run(e,t){let n=[],i=t.getSelections()||[];const o=t.getOption(9);for(const r of i)n.push(new jz(r,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}h(DA,"AbstractMoveLinesAction");class Xz extends DA{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:p("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}h(Xz,"MoveLinesUpAction");class Zz extends DA{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:p("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}h(Zz,"MoveLinesDownAction");class IA extends le{constructor(e,t){super(t);this.descending=e}run(e,t){const n=t.getSelections()||[];for(const o of n)if(!Ha.canRun(t.getModel(),o,this.descending))return;let i=[];for(let o=0,r=n.length;o<r;o++)i[o]=new Ha(n[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}h(IA,"AbstractSortLinesAction");class Jz extends IA{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:p("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:I.writable})}}h(Jz,"SortLinesAscendingAction");class Qz extends IA{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:p("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:I.writable})}}h(Qz,"SortLinesDescendingAction");class eK extends le{constructor(){super({id:"editor.action.removeDuplicateLines",label:p("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:I.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let i=[],o=[],r=0;for(let a of t.getSelections()){let l=new Set,d=[];for(let g=a.startLineNumber;g<=a.endLineNumber;g++){let m=n.getLineContent(g);l.has(m)||(d.push(m),l.add(m))}let c=new oe(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),u=a.startLineNumber-r,f=new oe(u,1,u+d.length-1,d[d.length-1].length);i.push(jt.replace(c,d.join(`
`))),o.push(f),r+=a.endLineNumber-a.startLineNumber+1-d.length}t.pushUndoStop(),t.executeEdits(this.id,i,o),t.pushUndoStop()}}h(eK,"DeleteDuplicateLinesAction");class Tb extends le{constructor(){super({id:Tb.ID,label:p("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:An(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(a=>new W(a.positionLineNumber,a.positionColumn)));let o=t.getSelection();if(o===null)return;let r=new Uz(o,i);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}}h(Tb,"TrimTrailingWhitespaceAction");Tb.ID="editor.action.trimTrailingWhitespace";class tK extends le{constructor(){super({id:"editor.action.deleteLines",label:p("lines.delete","Delete Line"),alias:"Delete Line",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let o=0,r=[],a=[];for(let l=0,d=n.length;l<d;l++){const c=n[l];let u=c.startLineNumber,f=c.endLineNumber,g=1,m=i.getLineMaxColumn(f);f<i.getLineCount()?(f+=1,m=1):u>1&&(u-=1,g=i.getLineMaxColumn(u)),r.push(jt.replace(new oe(u,g,f,m),"")),a.push(new oe(u-o,c.positionColumn,u-o,c.positionColumn)),o+=c.endLineNumber-c.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(o=>{let r=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(r-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:r,positionColumn:o.positionColumn}});t.sort((o,r)=>o.startLineNumber===r.startLineNumber?o.endLineNumber-r.endLineNumber:o.startLineNumber-r.startLineNumber);let n=[],i=t[0];for(let o=1;o<t.length;o++)i.endLineNumber+1>=t[o].startLineNumber?i.endLineNumber=t[o].endLineNumber:(n.push(i),i=t[o]);return n.push(i),n}}h(tK,"DeleteLinesAction");class nK extends le{constructor(){super({id:"editor.action.indentLines",label:p("lines.indent","Indent Line"),alias:"Indent Line",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();!n||(t.pushUndoStop(),t.executeCommands(this.id,Rt.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}h(nK,"IndentLinesAction");class iK extends le{constructor(){super({id:"editor.action.outdentLines",label:p("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2135,weight:100}})}run(e,t){Zu.Outdent.runEditorCommand(e,t,null)}}h(iK,"OutdentLinesAction");class oK extends le{constructor(){super({id:"editor.action.insertLineBefore",label:p("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();!n||(t.pushUndoStop(),t.executeCommands(this.id,Rt.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}h(oK,"InsertLineBeforeAction");class sK extends le{constructor(){super({id:"editor.action.insertLineAfter",label:p("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();!n||(t.pushUndoStop(),t.executeCommands(this.id,Rt.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}h(sK,"InsertLineAfterAction");class NA extends le{run(e,t){if(!t.hasModel())return;const n=t.getSelection();let i=this._getRangesToDelete(t),o=[];for(let l=0,d=i.length-1;l<d;l++){let c=i[l],u=i[l+1];T.intersectRanges(c,u)===null?o.push(c):i[l+1]=T.plusRange(c,u)}o.push(i[i.length-1]);let r=this._getEndCursorState(n,o),a=o.map(l=>jt.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}h(NA,"AbstractDeleteAllToBoundaryAction");class rK extends NA{constructor(){super({id:"deleteAllLeft",label:p("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,i=[],o=0;return t.forEach(r=>{let a;if(r.endColumn===1&&o>0){let l=r.startLineNumber-o;a=new oe(l,r.startColumn,l,r.startColumn)}else a=new oe(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);o+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,i=e.getModel();return i===null?[]:(n.sort(T.compareRangesUsingStarts),n=n.map(o=>{if(o.isEmpty())if(o.startColumn===1){let r=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:i.getLineContent(r).length+1;return new T(r,a,o.startLineNumber,1)}else return new T(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new T(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),n)}}h(rK,"DeleteAllLeftAction");class aK extends NA{constructor(){super({id:"deleteAllRight",label:p("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,i=[];for(let o=0,r=t.length,a=0;o<r;o++){let l=t[o],d=new oe(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=d:i.push(d)}return n&&i.unshift(n),i}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let i=n.map(o=>{if(o.isEmpty()){const r=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===r?new T(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new T(o.startLineNumber,o.startColumn,o.startLineNumber,r)}return o});return i.sort(T.compareRangesUsingStarts),i}}h(aK,"DeleteAllRightAction");class lK extends le{constructor(){super({id:"editor.action.joinLines",label:p("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(T.compareRangesUsingStarts);let o=[],r=n.reduce((f,g)=>f.isEmpty()?f.endLineNumber===g.startLineNumber?(i.equalsSelection(f)&&(i=g),g):g.startLineNumber>f.endLineNumber+1?(o.push(f),g):new oe(f.startLineNumber,f.startColumn,g.endLineNumber,g.endColumn):g.startLineNumber>f.endLineNumber?(o.push(f),g):new oe(f.startLineNumber,f.startColumn,g.endLineNumber,g.endColumn));o.push(r);let a=t.getModel();if(a===null)return;let l=[],d=[],c=i,u=0;for(let f=0,g=o.length;f<g;f++){let m=o[f],b=m.startLineNumber,v=1,C=0,w,y,S=a.getLineContent(m.endLineNumber).length-m.endColumn;if(m.isEmpty()||m.startLineNumber===m.endLineNumber){let x=m.getStartPosition();x.lineNumber<a.getLineCount()?(w=b+1,y=a.getLineMaxColumn(w)):(w=x.lineNumber,y=a.getLineMaxColumn(x.lineNumber))}else w=m.endLineNumber,y=a.getLineMaxColumn(w);let L=a.getLineContent(b);for(let x=b+1;x<=w;x++){let k=a.getLineContent(x),N=a.getLineFirstNonWhitespaceColumn(x);if(N>=1){let V=!0;L===""&&(V=!1),V&&(L.charAt(L.length-1)===" "||L.charAt(L.length-1)==="	")&&(V=!1,L=L.replace(/[\s\uFEFF\xA0]+$/g," "));let F=k.substr(N-1);L+=(V?" ":"")+F,V?C=F.length+1:C=F.length}else C=0}let E=new T(b,v,w,y);if(!E.isEmpty()){let x;m.isEmpty()?(l.push(jt.replace(E,L)),x=new oe(E.startLineNumber-u,L.length-C+1,b-u,L.length-C+1)):m.startLineNumber===m.endLineNumber?(l.push(jt.replace(E,L)),x=new oe(m.startLineNumber-u,m.startColumn,m.endLineNumber-u,m.endColumn)):(l.push(jt.replace(E,L)),x=new oe(m.startLineNumber-u,m.startColumn,m.startLineNumber-u,L.length-S)),T.intersectRanges(E,i)!==null?c=x:d.push(x)}u+=E.endLineNumber-E.startLineNumber}d.unshift(c),t.pushUndoStop(),t.executeEdits(this.id,l,d),t.pushUndoStop()}}h(lK,"JoinLinesAction");class dK extends le{constructor(){super({id:"editor.action.transpose",label:p("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:I.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let i=t.getModel();if(i===null)return;let o=[];for(let r=0,a=n.length;r<a;r++){let l=n[r];if(!l.isEmpty())continue;let d=l.getStartPosition(),c=i.getLineMaxColumn(d.lineNumber);if(d.column>=c){if(d.lineNumber===i.getLineCount())continue;let u=new T(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),f=i.getValueInRange(u).split("").reverse().join("");o.push(new Pn(new oe(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),f))}else{let u=new T(d.lineNumber,Math.max(1,d.column-1),d.lineNumber,d.column+1),f=i.getValueInRange(u).split("").reverse().join("");o.push(new j0(u,f,new oe(d.lineNumber,d.column+1,d.lineNumber,d.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}h(dK,"TransposeAction");class Lb extends le{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const o=t.getOption(117),r=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),d=t.getConfiguredWordAtPosition(l);if(!d)continue;const c=new T(l.lineNumber,d.startColumn,l.lineNumber,d.endColumn),u=i.getValueInRange(c);r.push(jt.replace(c,this._modifyText(u,o)))}else{const l=i.getValueInRange(a);r.push(jt.replace(a,this._modifyText(l,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}h(Lb,"AbstractCaseAction");class cK extends Lb{constructor(){super({id:"editor.action.transformToUppercase",label:p("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:I.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}h(cK,"UpperCaseAction");class hK extends Lb{constructor(){super({id:"editor.action.transformToLowercase",label:p("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:I.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}h(hK,"LowerCaseAction");class ay{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}h(ay,"BackwardsCompatibleRegExp");class ag extends Lb{constructor(){super({id:"editor.action.transformToTitlecase",label:p("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:I.writable})}_modifyText(e,t){const n=ag.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}}h(ag,"TitleCaseAction");ag.titleBoundary=new ay("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class za extends Lb{constructor(){super({id:"editor.action.transformToSnakecase",label:p("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:I.writable})}_modifyText(e,t){const n=za.caseBoundary.get(),i=za.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}}h(za,"SnakeCaseAction");za.caseBoundary=new ay("(\\p{Ll})(\\p{Lu})","gmu");za.singleLetters=new ay("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");ne($z);ne(qz);ne(Yz);ne(Xz);ne(Zz);ne(Jz);ne(Qz);ne(eK);ne(Tb);ne(tK);ne(nK);ne(iK);ne(oK);ne(sK);ne(rK);ne(aK);ne(lK);ne(dK);ne(cK);ne(hK);za.caseBoundary.isSupported()&&za.singleLetters.isSupported()&&ne(za);ag.titleBoundary.isSupported()&&ne(ag);var dle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Iv=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},qE=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const uK=new re("LinkedEditingInputVisible",!1),fK="linked-editing-decoration";let Td=h(class YE extends z{constructor(e,t,n,i,o){super();this.languageConfigurationService=i,this._localToDispose=this._register(new Q),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=uK.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Q),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(62)||r.hasChanged(82))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(YE.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(62)||this._editor.getOption(82))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(fe.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const i=new nr(this._debounceInformation.get(t)),o=h(()=>{var l;this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),(l=this._debounceDuration)!==null&&l!==void 0?l:this._debounceInformation.get(t))},"triggerRangeUpdate"),r=new nr(0),a=h(l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))},"triggerRangeSync");this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const d=t.getDecorationRange(this._currentDecorations[0]);if(d&&l.changes.every(c=>d.intersectRanges(c.range))){a(this._currentDecorations);return}}o()})),this._localToDispose.add({dispose:()=>{i.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||e.length===0)return;const t=this._editor.getModel(),n=t.getDecorationRange(e[0]);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}let o=[];for(let r=1,a=e.length;r<a;r++){const l=t.getDecorationRange(e[r]);if(!!l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:i});else{let d=t.getValueInRange(l),c=i,u=l.startColumn,f=l.endColumn;const g=uf(d,c);u+=g,d=d.substr(g),c=c.substr(g);const m=Kw(d,c);f-=m,d=d.substr(0,d.length-m),c=c.substr(0,c.length-m),(u!==f||c.length!==0)&&o.push({range:new T(l.startLineNumber,u,l.endLineNumber,f),text:c})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return qE(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const r=n.getDecorationRange(this._currentDecorations[0]);if(r&&r.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=i;const o=Hn(r=>qE(this,void 0,void 0,function*(){try{const a=new wi(!1),l=yield pK(this._providers,n,t,r);if(this._debounceInformation.update(n,a.elapsed()),o!==this._currentRequest||(this._currentRequest=null,i!==n.getVersionId()))return;let d=[];l?.ranges&&(d=l.ranges),this._currentWordPattern=l?.wordPattern||this._languageWordPattern;let c=!1;for(let f=0,g=d.length;f<g;f++)if(T.containsPosition(d[f],t)){if(c=!0,f!==0){const m=d[f];d.splice(f,1),d.unshift(m)}break}if(!c){this.clearRanges();return}const u=d.map(f=>({range:f,options:YE.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,u)}catch(a){qr(a)||Ne(a),(this._currentRequest===o||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=o,o})}},"LinkedEditingContribution");Td.ID="editor.contrib.linkedEditing";Td.DECORATION=Pe.register({description:"linked-editing",stickiness:0,className:fK});Td=dle([Iv(1,De),Iv(2,ce),Iv(3,oi),Iv(4,os)],Td);class gK extends le{constructor(){super({id:"editor.action.linkedEditing",label:p("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:se.and(I.writable,I.hasRenameProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(ht),[i,o]=Array.isArray(t)&&t||[void 0,void 0];return Ce.isUri(i)&&W.isIPosition(o)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{!r||(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Ne):super.runCommand(e,t)}run(e,t){const n=Td.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}h(gK,"LinkedEditingAction");const cle=zn.bindToContribution(Td.get);te(new cle({id:"cancelLinkedEditingInput",precondition:uK,handler:s=>s.clearRanges(),kbOpts:{kbExpr:I.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function pK(s,e,t,n){const i=s.ordered(e);return S4(i.map(o=>()=>qE(this,void 0,void 0,function*(){try{return yield o.provideLinkedEditingRanges(e,t,n)}catch(r){Nn(r);return}})),o=>!!o&&io(o?.ranges))}h(pK,"getLinkedEditingRanges");const hle=A("editor.linkedEditingBackground",{dark:H.fromHex("#f00").transparent(.3),light:H.fromHex("#f00").transparent(.3),hc:H.fromHex("#f00").transparent(.3)},p("editorLinkedEditingBackground","Background color when the editor auto renames on type."));It((s,e)=>{const t=s.getColor(hle);t&&e.addRule(`.monaco-editor .${fK} { background: ${t}; border-left-color: ${t}; }`)});Xr("_executeLinkedEditingProvider",(s,e,t)=>{const{linkedEditingRangeProvider:n}=s.get(ce);return pK(n,e,t,je.None)});lt(Td.ID,Td);ne(gK);var mK=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class _K{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return mK(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}h(_K,"Link$1");class u_{constructor(e){this._disposables=new Q;let t=[];for(const[n,i]of e){const o=n.links.map(r=>new _K(r,i));t=u_._union(t,o),bD(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let n=[],i,o,r,a;for(i=0,r=0,o=e.length,a=t.length;i<o&&r<a;){const l=e[i],d=t[r];if(T.areIntersectingOrTouching(l.range,d.range)){i++;continue}T.compareRangesUsingStarts(l.range,d.range)<0?(n.push(l),i++):(n.push(d),r++)}for(;i<o;i++)n.push(e[i]);for(;r<a;r++)n.push(t[r]);return n}}h(u_,"LinksList");function bK(s,e,t){const n=[],i=s.ordered(e).reverse().map((o,r)=>Promise.resolve(o.provideLinks(e,t)).then(a=>{a&&(n[r]=[a,o])},Nn));return Promise.all(i).then(()=>{const o=new u_(Mh(n));return t.isCancellationRequested?(o.dispose(),new u_([])):o})}h(bK,"getLinks");tt.registerCommand("_executeLinkProvider",(s,...e)=>mK(void 0,void 0,void 0,function*(){let[t,n]=e;bt(t instanceof Ce),typeof n!="number"&&(n=0);const{linkProvider:i}=s.get(ce),o=s.get(Bt).getModel(t);if(!o)return[];const r=yield bK(i,o,je.None);if(!r)return[];for(let l=0;l<Math.min(n,r.links.length);l++)yield r.links[l].resolve(je.None);const a=r.links.slice(0);return r.dispose(),a}));var ule=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Nv=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},fle=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let lg=h(class vK extends z{constructor(e,t,n,i,o){super();this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=i,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new gt(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new G1(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{!a.hasChanged(63)||(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{!this.editor.hasModel()||this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}static get(e){return e.getContribution(vK.ID)}computeLinksNow(){return fle(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.editor.getOption(63))return;const e=this.editor.getModel();if(!!this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Hn(t=>bK(this.providers,e,t));try{const t=new wi(!1);if(this.activeLinksList=yield this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Ne(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(70)==="altKey",n=[],i=Object.keys(this.currentOccurrences);for(const a of i){const l=this.currentOccurrences[a];n.push(l.decorationId)}const o=[];if(e)for(const a of e)o.push(Kc.decoration(a,t));const r=this.editor.deltaDecorations(n,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let a=0,l=r.length;a<l;a++){const d=new Kc(e[a],r[a]);this.currentOccurrences[d.decorationId]=d}}_onEditorMouseMove(e,t){const n=this.editor.getOption(70)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(o=>{i.activate(o,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(70)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);!t||this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(je.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===Me.file&&o.startsWith(`${Me.file}:`)){const a=Ce.parse(o);if(a.scheme===Me.file){const l=yr(a);let d=null;l.startsWith("/./")?d=`.${l.substr(1)}`:l.startsWith("//./")&&(d=`.${l.substr(2)}`),d&&(o=EZ(r,d))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0})},o=>{const r=o instanceof Error?o.message:o;r==="invalid"?this.notificationService.warn(p("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):r==="missing"?this.notificationService.warn(p("missing.url","Failed to open this link because its target is missing.")):Ne(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return Boolean(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},"LinkDetector");lg.ID="editor.linkDetector";lg=ule([Nv(1,ss),Nv(2,cn),Nv(3,ce),Nv(4,os)],lg);const mP={general:Pe.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Pe.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Kc{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:Kc._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i=Object.assign({},n?mP.active:mP.general);return i.hoverMessage=gle(e,t),i}activate(e,t){e.changeDecorationOptions(this.decorationId,Kc._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Kc._getOptions(this.link,t,!1))}}h(Kc,"LinkOccurrence");function gle(s,e){const t=s.url&&/^command:/i.test(s.url.toString()),n=s.tooltip?s.tooltip:t?p("links.navigate.executeCmd","Execute command"):p("links.navigate.follow","Follow link"),i=e?Ke?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):Ke?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");if(s.url){let o="";if(/^command:/i.test(s.url.toString())){const a=s.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];o=` "${p("tooltip.explanation","Execute command {0}",l)}"`}}return new Zi("",!0).appendMarkdown(`[${n}](${s.url.toString(!0).replace(/ /g,"%20")}${o}) (${i})`)}else return new Zi().appendText(`${n} (${i})`)}h(gle,"getHoverMessage");class wK extends le{constructor(){super({id:"editor.action.openLink",label:p("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const n=lg.get(t);if(!n||!t.hasModel())return;const i=t.getSelections();for(const o of i){const r=n.getLinkOccurrence(o.getEndPosition());r&&n.openLinkOccurrence(r,!1)}}}h(wK,"OpenLinkAction");lt(lg.ID,lg);ne(wK);It((s,e)=>{const t=s.getColor(dI);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});var ple=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mle=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};function Vg(s,e){const t=e.filter(n=>!s.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),i=t.length===1?p("cursorAdded","Cursor added: {0}",n):p("cursorsAdded","Cursors added: {0}",n);Jw(i)}}h(Vg,"announceCursorChange");class CK extends le{constructor(){super({id:"editor.action.insertCursorAbove",label:p("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(n.source,3,Ln.addCursorUp(o,r,i)),o.revealTopMostCursor(n.source),Vg(r,o.getCursorStates())}}h(CK,"InsertCursorAbove");class yK extends le{constructor(){super({id:"editor.action.insertCursorBelow",label:p("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(n.source,3,Ln.addCursorDown(o,r,i)),o.revealBottomMostCursor(n.source),Vg(r,o.getCursorStates())}}h(yK,"InsertCursorBelow");class SK extends le{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){let o=t.getLineMaxColumn(i);n.push(new oe(i,o,i,o))}e.endColumn>1&&n.push(new oe(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),o=t._getViewModel(),r=o.getCursorStates();let a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),Vg(r,o.getCursorStates())}}h(SK,"InsertCursorAtEndOfEachLineSelected");class xK extends le{constructor(){super({id:"editor.action.addCursorsToBottom",label:p("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount();let o=[];for(let l=n[0].startLineNumber;l<=i;l++)o.push(new oe(l,n[0].startColumn,l,n[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();o.length>0&&t.setSelections(o),Vg(a,r.getCursorStates())}}h(xK,"InsertCursorAtEndOfLineSelected");class TK extends le{constructor(){super({id:"editor.action.addCursorsToTop",label:p("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new oe(a,n[0].startColumn,a,n[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();i.length>0&&t.setSelections(i),Vg(r,o.getCursorStates())}}h(TK,"InsertCursorAtTopOfLineSelected");class Rp{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}h(Rp,"MultiCursorSessionResult");class dg{constructor(e,t,n,i,o,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=o,this.matchCase=r,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new dg(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,o,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,o=!0,r=!0):(o=n.wholeWord,r=n.matchCase);const l=e.getSelection();let d,c=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;d=u.word,c=new oe(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else d=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new dg(e,t,i,d,o,r,c)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Rp(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new Rp(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1);return n?new oe(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Rp(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new Rp(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1);return n?new oe(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(117):null,!1,1073741824)):[]}}h(dg,"MultiCursorSession");class Ld extends z{constructor(e){super();this._sessionDispose=this._register(new Q),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(Ld.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=dg.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new oe(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){!e||(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(!!this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!MK(this._editor.getModel(),t,i)){const r=this._editor.getModel();let a=[];for(let l=0,d=t.length;l<d;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(117):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const i=n.searchScope;let o=[];t.forEach(r=>{i.forEach(a=>{r.range.endLineNumber<=a.endLineNumber&&r.range.startLineNumber>=a.startLineNumber&&o.push(r)})}),t=o}if(t.length>0){const i=this._editor.getSelection();for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a.range.intersectRanges(i)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new oe(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}}h(Ld,"MultiCursorSelectionController");Ld.ID="editor.contrib.multiCursorController";class tu extends le{run(e,t){const n=Ld.get(t);if(!n)return;const i=ao.get(t);if(!i)return;const o=t._getViewModel();if(o){const r=o.getCursorStates();this._run(n,i),Vg(r,o.getCursorStates())}}}h(tu,"MultiCursorSelectionControllerAction");class LK extends tu{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2082,weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}h(LK,"AddSelectionToNextFindMatchAction");class kK extends tu{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:R.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}h(kK,"AddSelectionToPreviousFindMatchAction");class EK extends tu{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:An(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}h(EK,"MoveSelectionToNextFindMatchAction");class DK extends tu{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}h(DK,"MoveSelectionToPreviousFindMatchAction");class IK extends tu{constructor(){super({id:"editor.action.selectHighlights",label:p("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:3114,weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"3_multi",title:p({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}h(IK,"SelectHighlightsAction");class NK extends tu{constructor(){super({id:"editor.action.changeAll",label:p("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:se.and(I.writable,I.editorTextFocus),kbOpts:{kbExpr:I.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}h(NK,"CompatChangeAll");class AK{constructor(e,t,n,i,o){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(T.compareRangesUsingStarts)),this._cachedFindMatches}}h(AK,"SelectionHighlighterState");let xh=h(class Iw extends z{constructor(e,t){super();this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(97),this.decorations=[],this.updateSoon=this._register(new gt(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(i=>{this._isEnabled=e.getOption(97)})),this._register(e.onDidChangeCursorSelection(i=>{!this._isEnabled||(i.selection.isEmpty()?i.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(i=>{this._setState(null)})),this._register(e.onDidChangeModelContent(i=>{this._isEnabled&&this.updateSoon.schedule()}));const n=ao.get(e);n&&this._register(n.getState().onFindReplaceStateChange(i=>{this._update()}))}_update(){this._setState(Iw._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const o=Ld.get(n);if(!o)return null;const r=ao.get(n);if(!r)return null;let a=o.getSession(r);if(!a){const c=n.getSelections();if(c.length>1){const f=r.getState().matchCase;if(!MK(n.getModel(),c,f))return null}a=dg.create(n,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),d=l.matchCase;if(l.isRevealed){let c=l.searchString;d||(c=c.toLowerCase());let u=a.searchText;if(d||(u=u.toLowerCase()),c===u&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new AK(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(117):null,e)}_setState(e){if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(T.compareRangesUsingStarts);const o=[];for(let l=0,d=0,c=n.length,u=i.length;l<c;){const f=n[l];if(d>=u)o.push(f),l++;else{const g=T.compareRangesUsingStarts(f,i[d]);g<0?((i[d].isEmpty()||!T.areIntersecting(f,i[d]))&&o.push(f),l++):(g>0||l++,d++)}}const r=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(72),a=o.map(l=>({range:l,options:r?Iw._SELECTION_HIGHLIGHT:Iw._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}},"SelectionHighlighter");xh.ID="editor.contrib.selectionHighlighter";xh._SELECTION_HIGHLIGHT_OVERVIEW=Pe.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Yt(B0),position:$o.Inline},overviewRuler:{color:Yt(aF),position:Jo.Center}});xh._SELECTION_HIGHLIGHT=Pe.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});xh=ple([mle(1,ce)],xh);function MK(s,e,t){const n=_P(s,e[0],!t);for(let i=1,o=e.length;i<o;i++){const r=e[i];if(r.isEmpty())return!1;const a=_P(s,r,!t);if(n!==a)return!1}return!0}h(MK,"modelRangesContainSameText");function _P(s,e,t){const n=s.getValueInRange(e);return t?n.toLowerCase():n}h(_P,"getValueInRange");lt(Ld.ID,Ld);lt(xh.ID,xh);ne(CK);ne(yK);ne(SK);ne(LK);ne(kK);ne(EK);ne(DK);ne(IK);ne(NK);ne(xK);ne(TK);var RK=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const Th={Visible:new re("parameterHintsVisible",!1),MultipleSignatures:new re("parameterHintsMultipleSignatures",!1)};function PK(s,e,t,n,i){return RK(this,void 0,void 0,function*(){const o=s.ordered(e);for(const r of o)try{const a=yield r.provideSignatureHelp(e,t,i,n);if(a)return a}catch(a){Nn(a)}})}h(PK,"provideSignatureHelp");tt.registerCommand("_executeSignatureHelpProvider",(s,...e)=>RK(void 0,void 0,void 0,function*(){const[t,n,i]=e;bt(Ce.isUri(t)),bt(W.isIPosition(n)),bt(typeof i=="string"||!i);const o=s.get(ce),r=yield s.get(Ui).createModelReference(t);try{const a=yield PK(o.signatureHelpProvider,r.object.textEditorModel,W.lift(n),{triggerKind:Or.Invoke,isRetrigger:!1,triggerCharacter:i},je.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}}));var _le=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},Cl;(function(s){s.Default={type:0};class e{constructor(i,o){this.request=i,this.previouslyActiveHints=o,this.type=2}}h(e,"Pending"),s.Pending=e;class t{constructor(i){this.hints=i,this.type=1}}h(t,"Active"),s.Active=t})(Cl||(Cl={}));class kb extends z{constructor(e,t,n=kb.DEFAULT_DELAY){super();this._onChangedHints=this._register(new P),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Cl.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new hi),this.triggerChars=new pc,this.retriggerChars=new pc,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new nr(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(i=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(i=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(i=>this.onCursorChange(i))),this._register(this.editor.onDidChangeModelContent(i=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(i=>this.onDidType(i))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Cl.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!this.providers.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(Ne)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(76).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(76).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Cl.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return _le(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(ble);this._pendingTriggers=[];const o={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new Cl.Pending(Hn(l=>PK(this.providers,r,a,o,l)),n);try{const l=yield this.state.request;return e!==this.triggerId?(l?.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Cl.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Cl.Default),Ne(l),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new pc,this.retriggerChars=new pc;const e=this.editor.getModel();if(!!e)for(const t of this.providers.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:Or.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Or.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Or.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(76).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}h(kb,"ParameterHintsModel");kb.DEFAULT_DELAY=120;function ble(s,e){switch(e.triggerKind){case Or.Invoke:return e;case Or.ContentChange:return s;case Or.TriggerCharacter:default:return e}}h(ble,"mergeTriggerContexts");var vle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Av=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const fo=X,wle=xn("parameter-hints-next",_.chevronDown,p("parameterHintsNextIcon","Icon for show next parameter hint.")),Cle=xn("parameter-hints-previous",_.chevronUp,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let o0=h(class OK extends z{constructor(e,t,n,i,o){super();this.editor=e,this.renderDisposeables=this._register(new Q),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Ja({editor:e},i,n)),this.model=this._register(new kb(e,o.signatureHelpProvider)),this.keyVisible=Th.Visible.bindTo(t),this.keyMultipleSignatures=Th.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(r=>{r?(this.show(),this.render(r)):this.hide()}))}createParameterHintDOMNodes(){const e=fo(".editor-widget.parameter-hints-widget"),t=j(e,fo(".phwrapper"));t.tabIndex=-1;const n=j(t,fo(".controls")),i=j(n,fo(".button"+vt.asCSSSelector(Cle))),o=j(n,fo(".overloads")),r=j(n,fo(".button"+vt.asCSSSelector(wle)));this._register(J(i,"click",f=>{ct.stop(f),this.previous()})),this._register(J(r,"click",f=>{ct.stop(f),this.next()}));const a=fo(".body"),l=new Tg(a,{});this._register(l),t.appendChild(l.getDomNode());const d=j(a,fo(".signature")),c=j(a,fo(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:o,docs:c,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(f=>{this.visible&&this.editor.layoutContentWidget(this)}));const u=h(()=>{if(!this.domNodes)return;const f=this.editor.getOption(44);this.domNodes.element.style.fontSize=`${f.fontSize}px`,this.domNodes.element.style.lineHeight=`${f.lineHeight/f.fontSize}`},"updateFont");u(),this._register(fe.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(f=>f.hasChanged(44)).on(u,null)),this._register(this.editor.onDidLayoutChange(f=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const o=j(this.domNodes.signature,fo(".code")),r=this.editor.getOption(44);o.style.fontSize=`${r.fontSize}px`,o.style.fontFamily=r.fontFamily;const a=i.parameters.length>0,l=(t=i.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(o,i,l);else{const u=j(o,fo("span"));u.textContent=i.label}const d=i.parameters[l];if(d?.documentation){const u=fo("span.documentation");if(typeof d.documentation=="string")u.textContent=d.documentation;else{const f=this.renderMarkdownDocs(d.documentation);u.appendChild(f.element)}j(this.domNodes.docs,fo("p",{},u))}if(i.documentation!==void 0)if(typeof i.documentation=="string")j(this.domNodes.docs,fo("p",{},i.documentation));else{const u=this.renderMarkdownDocs(i.documentation);j(this.domNodes.docs,u.element)}const c=this.hasDocs(i,d);if(this.domNodes.signature.classList.toggle("has-docs",c),this.domNodes.docs.classList.toggle("empty",!c),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let u="";const f=i.parameters[l];Array.isArray(f.label)?u=i.label.substring(f.label[0],f.label[1]):u=f.label,f.documentation&&(u+=typeof f.documentation=="string"?`, ${f.documentation}`:`, ${f.documentation.value}`),i.documentation&&(u+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==u&&(qn(p("hint","{0}, hint",u)),this.announcedLabel=u)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&Vb(t.documentation).length>0||t&&typeof t.documentation=="object"&&Vb(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&Vb(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&Vb(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,o]=this.getParameterLabelOffsets(t,n),r=document.createElement("span");r.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,o),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(o),j(e,r,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${Xo(n.label)}(?=\\W|$)`,"g");i.test(e.label);const o=i.lastIndex-n.label.length;return o>=0?[o,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return OK.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}},"ParameterHintsWidget");o0.ID="editor.widget.parameterHintsWidget";o0=vle([Av(1,De),Av(2,ss),Av(3,Vt),Av(4,ce)],o0);const yle=A("editorHoverWidget.highlightForeground",{dark:Wa,light:Wa,hc:Wa},p("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));It((s,e)=>{const t=s.getColor(lI);if(t){const d=s.type===fs.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${d}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=s.getColor(th);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const i=s.getColor(F0);i&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${i}; }`);const o=s.getColor(W0);o&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${o}; }`);const r=s.getColor(aI);r&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${r}; }`);const a=s.getColor($5);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const l=s.getColor(yle);l&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${l}}`)});var Sle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xle=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let Lh=h(class FK extends z{constructor(e,t){super();this.editor=e,this.widget=this._register(t.createInstance(o0,this.editor))}static get(e){return e.getContribution(FK.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}},"ParameterHintsController");Lh.ID="editor.controller.parameterHints";Lh=Sle([xle(1,Ge)],Lh);class WK extends le{constructor(){super({id:"editor.action.triggerParameterHints",label:p("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:I.hasSignatureHelpProvider,kbOpts:{kbExpr:I.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=Lh.get(t);n&&n.trigger({triggerKind:Or.Invoke})}}h(WK,"TriggerParameterHintsAction");lt(Lh.ID,Lh);ne(WK);const AA=100+75,MA=zn.bindToContribution(Lh.get);te(new MA({id:"closeParameterHints",precondition:Th.Visible,handler:s=>s.cancel(),kbOpts:{weight:AA,kbExpr:I.focus,primary:9,secondary:[1033]}}));te(new MA({id:"showPrevParameterHint",precondition:se.and(Th.Visible,Th.MultipleSignatures),handler:s=>s.previous(),kbOpts:{weight:AA,kbExpr:I.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));te(new MA({id:"showNextParameterHint",precondition:se.and(Th.Visible,Th.MultipleSignatures),handler:s=>s.next(),kbOpts:{weight:AA,kbExpr:I.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var Tle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ix=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const ly=new re("renameInputVisible",!1,p("renameInputVisible","Whether the rename input widget is visible"));let XE=h(class{constructor(e,t,n,i,o){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._disposables=new Q,this.allowEditorOverflow=!0,this._visibleContextKey=ly.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(44)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",p("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=h(()=>{var t,n;const[i,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=p({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(i))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(o))===null||n===void 0?void 0:n.getLabel())},"updateLabel");e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,i,o;if(!this._input||!this._domNode)return;const r=e.getColor(od);this._domNode.style.backgroundColor=String((t=e.getColor(vi))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.color=String((n=e.getColor(nI))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((i=e.getColor(tI))!==null&&i!==void 0?i:"");const a=e.getColor(iI);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(o=a?.toString())!==null&&o!==void 0?o:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(44);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,n,i,o,r){this._domNode.classList.toggle("preview",o),this._position=new W(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Q;return new Promise(l=>{this._currentCancelInput=d=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l(d),!0),this._currentAcceptInput=d=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,l({newName:this._input.value,wantsPreview:o&&d})},a.add(r.onCancellationRequested(()=>this.cancelInput(!0))),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}},"RenameInputField");XE=Tle([ix(2,Mt),ix(3,Xt),ix(4,De)],XE);var Lle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jd=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},Uc=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class dy{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return Uc(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;let o=yield i.resolveRenameLocation(this.model,this.position,e);if(!!o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}const n=this.model.getWordAtPosition(this.position);return n?{range:new T(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:T.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return Uc(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,i){return Uc(this,void 0,void 0,function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:n.join(`
`)};const r=yield o.provideRenameEdits(this.model,this.position,e,i);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(r.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(p("no result","No result.")),i);return r})}}h(dy,"RenameSkeleton");function kle(s,e,t,n){return Uc(this,void 0,void 0,function*(){const i=new dy(e,t,s),o=yield i.resolveRenameLocation(je.None);return o?.rejectReason?{edits:[],rejectReason:o.rejectReason}:i.provideRenameEdits(n,je.None)})}h(kle,"rename");let kh=h(class VK{constructor(e,t,n,i,o,r,a,l){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=o,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._dispoableStore=new Q,this._cts=new Bn,this._renameInputField=this._dispoableStore.add(new Ra(()=>this._dispoableStore.add(this._instaService.createInstance(XE,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(VK.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return Uc(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const n=this.editor.getPosition(),i=new dy(this.editor.getModel(),n,this._languageFeaturesService.renameProvider);if(!i.hasProvider())return;this._cts=new Yf(this.editor,5);let o;try{const f=i.resolveRenameLocation(this._cts.token);this._progressService.showWhile(f,250),o=yield f}catch(f){(e=Io.get(this.editor))===null||e===void 0||e.showMessage(f||p("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),n);return}if(!o)return;if(o.rejectReason){(t=Io.get(this.editor))===null||t===void 0||t.showMessage(o.rejectReason,n);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new Yf(this.editor,5,o.range);let r=this.editor.getSelection(),a=0,l=o.text.length;!T.isEmpty(r)&&!T.spansMultipleLines(r)&&T.containsRange(o.range,r)&&(a=Math.max(0,r.startColumn-o.range.startColumn),l=Math.min(o.range.endColumn,r.endColumn)-o.range.startColumn);const d=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),c=yield this._renameInputField.value.getInput(o.range,o.text,a,l,d,this._cts.token);if(typeof c=="boolean"){c&&this.editor.focus();return}this.editor.focus();const u=FD(i.provideRenameEdits(c.newName,this._cts.token),this._cts.token).then(f=>Uc(this,void 0,void 0,function*(){if(!(!f||!this.editor.hasModel())){if(f.rejectReason){this._notificationService.info(f.rejectReason);return}this.editor.setSelection(T.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(j_.convert(f),{editor:this.editor,showPreview:c.wantsPreview,label:p("label","Renaming '{0}'",o?.text),quotableLabel:p("quotableLabel","Renaming {0}",o?.text)}).then(g=>{g.ariaSummary&&qn(p("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,c.newName,g.ariaSummary))}).catch(g=>{this._notificationService.error(p("rename.failedApply","Rename failed to apply edits")),this._logService.error(g)})}}),f=>{this._notificationService.error(p("rename.failed","Rename failed to compute edits")),this._logService.error(f)});return this._progressService.showWhile(u,250),u})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}},"RenameController");kh.ID="editor.contrib.renameController";kh=Lle([jd(1,Ge),jd(2,cn),jd(3,zI),jd(4,Rd),jd(5,Cs),jd(6,HD),jd(7,ce)],kh);class BK extends le{constructor(){super({id:"editor.action.rename",label:p("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:se.and(I.writable,I.hasRenameProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(ht),[i,o]=Array.isArray(t)&&t||[void 0,void 0];return Ce.isUri(i)&&W.isIPosition(o)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{!r||(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Ne):super.runCommand(e,t)}run(e,t){const n=kh.get(t);return n?n.run():Promise.resolve()}}h(BK,"RenameAction");lt(kh.ID,kh);ne(BK);const RA=zn.bindToContribution(kh.get);te(new RA({id:"acceptRenameInput",precondition:ly,handler:s=>s.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:I.focus,primary:3}}));te(new RA({id:"acceptRenameInputWithPreview",precondition:se.and(ly,se.has("config.editor.rename.enablePreview")),handler:s=>s.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:I.focus,primary:1024+3}}));te(new RA({id:"cancelRenameInput",precondition:ly,handler:s=>s.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:I.focus,primary:9,secondary:[1033]}}));Xr("_executeDocumentRenameProvider",function(s,e,t,...n){const[i]=n;bt(typeof i=="string");const{renameProvider:o}=s.get(ce);return kle(o,e,t,i)});Xr("_executePrepareRename",function(s,e,t){return Uc(this,void 0,void 0,function*(){const{renameProvider:n}=s.get(ce),o=yield new dy(e,t,n).resolveRenameLocation(je.None);if(o?.rejectReason)throw new Error(o.rejectReason);return o})});dn.as(zh.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:p("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});class HK{provideSelectionRanges(e,t){const n=[];for(const i of t){const o=[];n.push(o),this._addInWordRanges(o,e,i),this._addWordRanges(o,e,i),this._addWhitespaceLine(o,e,i),o.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;let{word:o,startColumn:r}=i,a=n.column-r,l=a,d=a,c=0;for(;l>=0;l--){let u=o.charCodeAt(l);if(l!==a&&(u===95||u===45))break;if(kl(u)&&Lr(c))break;c=u}for(l+=1;d<o.length;d++){let u=o.charCodeAt(d);if(Lr(u)&&kl(c))break;if(u===95||u===45)break;c=u}l<d&&e.push({range:new T(n.lineNumber,r+l,n.lineNumber,r+d)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new T(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new T(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}h(HK,"WordSelectionRangeProvider");var Ele=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Dle=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},cy=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};class hy{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new hy(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}h(hy,"SelectionRanges");let cg=h(class zK{constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}static get(e){return e.getContribution(zK.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return cy(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||(yield jK(this._languageFeaturesService.selectionRangeProvider,n,t.map(o=>o.getPosition()),this._editor.getOption(102),je.None).then(o=>{var r;if(!(!io(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!xo(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new hy(0,a)),(r=this._selectionListener)===null||r===void 0||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state)return;this._state=this._state.map(o=>o.mov(e));const i=this._state.map(o=>oe.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}})}},"SmartSelectController");cg.ID="editor.contrib.smartSelectController";cg=Ele([Dle(1,ce)],cg);class PA extends le{constructor(e,t){super(t);this._forward=e}run(e,t){return cy(this,void 0,void 0,function*(){let n=cg.get(t);n&&(yield n.run(this._forward))})}}h(PA,"AbstractSmartSelect");class KK extends PA{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:p("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}h(KK,"GrowSelectionAction");tt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class UK extends PA{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:p("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:R.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}h(UK,"ShrinkSelectionAction");lt(cg.ID,cg);ne(KK);ne(UK);function jK(s,e,t,n,i){return cy(this,void 0,void 0,function*(){const o=s.all(e).concat(new HK);o.length===1&&o.unshift(new $i);let r=[],a=[];for(const l of o)r.push(Promise.resolve(l.provideSelectionRanges(e,t,i)).then(d=>{if(io(d)&&d.length===t.length)for(let c=0;c<t.length;c++){a[c]||(a[c]=[]);for(const u of d[c])T.isIRange(u.range)&&T.containsPosition(u.range,t[c])&&a[c].push(T.lift(u.range))}},Nn));return yield Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((f,g)=>W.isBefore(f.getStartPosition(),g.getStartPosition())?1:W.isBefore(g.getStartPosition(),f.getStartPosition())||W.isBefore(f.getEndPosition(),g.getEndPosition())?-1:W.isBefore(g.getEndPosition(),f.getEndPosition())?1:0);let d=[],c;for(const f of l)(!c||T.containsRange(f,c)&&!T.equalsRange(f,c))&&(d.push(f),c=f);if(!n.selectLeadingAndTrailingWhitespace)return d;let u=[d[0]];for(let f=1;f<d.length;f++){const g=d[f-1],m=d[f];if(m.startLineNumber!==g.startLineNumber||m.endLineNumber!==g.endLineNumber){const b=new T(g.startLineNumber,e.getLineFirstNonWhitespaceColumn(g.startLineNumber),g.endLineNumber,e.getLineLastNonWhitespaceColumn(g.endLineNumber));b.containsRange(g)&&!b.equalsRange(g)&&m.containsRange(b)&&!m.equalsRange(b)&&u.push(b);const v=new T(g.startLineNumber,1,g.endLineNumber,e.getLineMaxColumn(g.endLineNumber));v.containsRange(g)&&!v.equalsRange(b)&&m.containsRange(v)&&!m.equalsRange(v)&&u.push(v)}u.push(m)}return u})})}h(jK,"provideSelectionRanges");tt.registerCommand("_executeSelectionRangeProvider",function(s,...e){return cy(this,void 0,void 0,function*(){const[t,n]=e;bt(Ce.isUri(t));const i=s.get(ce).selectionRangeProvider,o=yield s.get(Ui).createModelReference(t);try{return jK(i,o.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0},je.None)}finally{o.dispose()}})});class GK extends le{constructor(){super({id:"editor.action.forceRetokenize",label:p("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.resetTokenization();const i=new wi(!0);n.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}}h(GK,"ForceRetokenizeAction");ne(GK);class Eh extends le{constructor(){super({id:Eh.ID,label:p({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const i=!iC.getTabFocusMode();iC.setTabFocusMode(i),qn(i?p("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):p("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}h(Eh,"ToggleTabFocusModeAction");Eh.ID="editor.action.toggleTabFocusMode";ne(Eh);var Ile=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Nle=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let ZE=h(class extends z{constructor(e,t,n={},i){var o;super();this._link=t,this._enabled=!0,this.el=j(e,X("a.monaco-link",{tabIndex:(o=t.tabIndex)!==null&&o!==void 0?o:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const r=this._register(new ft(this.el,"click")),a=this._register(new ft(this.el,"keypress")),l=fe.chain(a.event).map(u=>new Et(u)).filter(u=>u.keyCode===3).event,d=this._register(new ft(this.el,kt.Tap)).event;this._register(dt.addTarget(this.el));const c=fe.any(r.event,l,d);this._register(c(u=>{!this.enabled||(ct.stop(u,!0),n?.opener?n.opener(this._link.href):i.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}},"Link");ZE=Ile([Nle(3,ss)],ZE);It((s,e)=>{const t=s.getColor(F0);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=s.getColor(W0);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var $K=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qK=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const Ale=26;let JE=h(class extends z{constructor(e,t){super();this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(QE))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{this.hide(),e.onClose&&e.onClose()}})),this._editor.setBanner(this.banner.element,Ale)}},"BannerController");JE=$K([qK(1,Ge)],JE);let QE=h(class extends z{constructor(e){super();this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Ja,{}),this.element=X("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=X("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Sn(this.element)}show(e){Sn(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=j(this.element,X("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(X(`div${vt.asCSSSelector(e.icon)}`));const i=j(this.element,X("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=j(this.element,X("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(ZE,this.messageActionsContainer,Object.assign(Object.assign({},r),{tabIndex:-1}),{}));const o=j(this.element,X("div.action-container"));this.actionBar=this._register(new rr(o)),this.actionBar.push(this._register(new Vi("banner.close","Close Banner",vt.asClassName(_9),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}},"Banner");QE=$K([qK(0,Ge)],QE);var OA=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cf=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},ei=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const Mle=xn("extensions-warning-message",_.warning,p("warningIcon","Icon shown with a warning message in the extensions editor."));let hg=h(class extends z{constructor(e,t,n,i){super();this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const r=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new iu};else if(o.ambiguousCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new nl};else if(o.invisibleCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new nu};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:Mle,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(JE,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(113),this._register(n.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(113)&&(this._options=e.getOption(113),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=Rle(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(n=>n==="_os"?new Intl.NumberFormat().resolvedOptions().locale:n==="_vscode"?fj:n)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new eD(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new YK(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},"UnicodeHighlighter");hg.ID="editor.contrib.unicodeHighlighter";hg=OA([cf(1,is),cf(2,$9),cf(3,Ge)],hg);function Rle(s,e){return{nonBasicASCII:e.nonBasicASCII===po?!s:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===po?!s:e.includeComments,includeStrings:e.includeStrings===po?!s:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}h(Rle,"resolveOptions");let eD=h(class extends z{constructor(e,t,n,i){super();this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new gt(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:Dh.instance.getDecorationFromOptions(this._options)});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),n))})}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e),i={range:n,options:Dh.instance.getDecorationFromOptions(this._options),id:e,ownerId:0};if(!TI(t,i))return null;const o=t.getValueInRange(n);return{reason:XK(o,this._options),inComment:LI(t,i),inString:kI(t,i)}}},"DocumentUnicodeHighlighter");eD=OA([cf(3,is)],eD);class YK extends z{constructor(e,t,n){super();this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new gt(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const o=C0.computeUnicodeHighlights(this._model,this._options,i);for(const r of o.ranges)n.ranges.push(r);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||o.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:Dh.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),t))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e),i=t.getValueInRange(n),o={range:n,options:Dh.instance.getDecorationFromOptions(this._options),id:e,ownerId:0};return TI(t,o)?{reason:XK(i,this._options),inComment:LI(t,o),inString:kI(t,o)}:null}}h(YK,"ViewportUnicodeHighlighter");let tD=h(class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=4}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(hg.ID);if(!i)return[];const o=[];let r=300;for(const a of t){const l=i.getDecorationInfo(a.id);if(!l)continue;const c=n.getValueInRange(a.range).codePointAt(0),u=bP(c);let f;switch(l.reason.kind){case 0:f=p("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",u,bP(l.reason.confusableWith.codePointAt(0)));break;case 1:f=p("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",u);break;case 2:f=p("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",u);break}const g={codePoint:c,reason:l.reason,inComment:l.inComment,inString:l.inString},m=p("unicodeHighlight.adjustSettings","Adjust settings"),b=[{value:`${f} [${m}](command:${Bg.ID}?${encodeURIComponent(JSON.stringify(g))})`,isTrusted:!0}];o.push(new Rr(this,a.range,b,r++))}return o}renderHoverParts(e,t){return kB(e,t,this._editor,this._languageService,this._openerService)}},"UnicodeHighlighterHoverParticipant");tD=OA([cf(1,Vt),cf(2,ss)],tD);function nD(s){return`U+${s.toString(16).padStart(4,"0")}`}h(nD,"codePointToHex");function bP(s){let e=`\`${nD(s)}\``;return Qs.isInvisibleCharacter(s)||(e+=` "${`${Ple(s)}`}"`),e}h(bP,"formatCodePointMarkdown");function Ple(s){return s===96?"`` ` ``":"`"+String.fromCodePoint(s)+"`"}h(Ple,"renderCodePointAsInlineCode");function XK(s,e){return C0.computeUnicodeHighlightReason(s,e)}h(XK,"computeReason");class Dh{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const n=`${e}${t}`;let i=this.map.get(n);return i||(i=Pe.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,i)),i}}h(Dh,"Decorations");Dh.instance=new Dh;class ZK extends le{constructor(){super({id:nl.ID,label:p("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0});this.shortLabel=p("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}run(e,t,n){return ei(this,void 0,void 0,function*(){let i=e?.get(wt);i&&this.runAction(i)})}runAction(e){return ei(this,void 0,void 0,function*(){yield e.updateValue(Ri.includeComments,!1,1)})}}h(ZK,"DisableHighlightingInCommentsAction");class JK extends le{constructor(){super({id:nl.ID,label:p("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0});this.shortLabel=p("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}run(e,t,n){return ei(this,void 0,void 0,function*(){let i=e?.get(wt);i&&this.runAction(i)})}runAction(e){return ei(this,void 0,void 0,function*(){yield e.updateValue(Ri.includeStrings,!1,1)})}}h(JK,"DisableHighlightingInStringsAction");class nl extends le{constructor(){super({id:nl.ID,label:p("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0});this.shortLabel=p("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return ei(this,void 0,void 0,function*(){let i=e?.get(wt);i&&this.runAction(i)})}runAction(e){return ei(this,void 0,void 0,function*(){yield e.updateValue(Ri.ambiguousCharacters,!1,1)})}}h(nl,"DisableHighlightingOfAmbiguousCharactersAction");nl.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class nu extends le{constructor(){super({id:nu.ID,label:p("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0});this.shortLabel=p("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return ei(this,void 0,void 0,function*(){let i=e?.get(wt);i&&this.runAction(i)})}runAction(e){return ei(this,void 0,void 0,function*(){yield e.updateValue(Ri.invisibleCharacters,!1,1)})}}h(nu,"DisableHighlightingOfInvisibleCharactersAction");nu.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class iu extends le{constructor(){super({id:iu.ID,label:p("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0});this.shortLabel=p("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return ei(this,void 0,void 0,function*(){let i=e?.get(wt);i&&this.runAction(i)})}runAction(e){return ei(this,void 0,void 0,function*(){yield e.updateValue(Ri.nonBasicASCII,!1,1)})}}h(iu,"DisableHighlightingOfNonBasicAsciiCharactersAction");iu.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class Bg extends le{constructor(){super({id:Bg.ID,label:p("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return ei(this,void 0,void 0,function*(){const{codePoint:i,reason:o,inString:r,inComment:a}=n,l=String.fromCodePoint(i),d=e.get(tl),c=e.get(wt);function u(m){return Qs.isInvisibleCharacter(m)?p("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",nD(m)):p("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${nD(m)} "${l}"`)}h(u,"getExcludeCharFromBeingHighlightedLabel");const f=[];if(o.kind===0)for(const m of o.notAmbiguousInLocales)f.push({label:p("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',m),run:()=>ei(this,void 0,void 0,function*(){Fle(c,[m])})});if(f.push({label:u(i),run:()=>Ole(c,[i])}),a){const m=new ZK;f.push({label:m.label,run:()=>ei(this,void 0,void 0,function*(){return m.runAction(c)})})}else if(r){const m=new JK;f.push({label:m.label,run:()=>ei(this,void 0,void 0,function*(){return m.runAction(c)})})}if(o.kind===0){const m=new nl;f.push({label:m.label,run:()=>ei(this,void 0,void 0,function*(){return m.runAction(c)})})}else if(o.kind===1){const m=new nu;f.push({label:m.label,run:()=>ei(this,void 0,void 0,function*(){return m.runAction(c)})})}else if(o.kind===2){const m=new iu;f.push({label:m.label,run:()=>ei(this,void 0,void 0,function*(){return m.runAction(c)})})}else Wle(o);const g=yield d.pick(f,{title:p("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});g&&(yield g.run())})}}h(Bg,"ShowExcludeOptions");Bg.ID="editor.action.unicodeHighlight.showExcludeOptions";function Ole(s,e){return ei(this,void 0,void 0,function*(){const t=s.getValue(Ri.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;yield s.updateValue(Ri.allowedCharacters,n,1)})}h(Ole,"excludeCharFromBeingHighlighted");function Fle(s,e){var t;return ei(this,void 0,void 0,function*(){const n=(t=s.inspect(Ri.allowedLocales).user)===null||t===void 0?void 0:t.value;let i;typeof n=="object"&&n?i=Object.assign({},n):i={};for(const o of e)i[o]=!0;yield s.updateValue(Ri.allowedLocales,i,1)})}h(Fle,"excludeLocaleFromBeingHighlighted");function Wle(s){throw new Error(`Unexpected value: ${s}`)}h(Wle,"expectNever");ne(nl);ne(nu);ne(iu);ne(Bg);lt(hg.ID,hg);Qh.register(tD);var Vle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vP=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},Ble=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};const QK="ignoreUnusualLineTerminators";function Hle(s,e,t){s.setModelProperty(e.uri,QK,t)}h(Hle,"writeIgnoreState");function zle(s,e){return s.getModelProperty(e.uri,QK)}h(zle,"readIgnoreState");let f_=h(class extends z{constructor(e,t,n){super();this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(114),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(114)&&(this._config=this._editor.getOption(114),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return Ble(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||zle(this._codeEditorService,e)===!0||this._editor.getOption(81))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:p("unusualLineTerminators.title","Unusual Line Terminators"),message:p("unusualLineTerminators.message","Detected unusual line terminators"),detail:p("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",ts(e.uri)),primaryButton:p("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:p("unusualLineTerminators.ignore","Ignore")})).confirmed){Hle(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}},"UnusualLineTerminatorsDetector");f_.ID="editor.contrib.unusualLineTerminatorsDetector";f_=Vle([vP(1,U_),vP(2,ht)],f_);lt(f_.ID,f_);var Kle=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},up=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let g_=h(class extends z{constructor(e,t,n,i,o,r){super();this._modelService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new gt(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=h(()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))},"scheduleTokenizeViewport");this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(oN)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!ek(e,this._themeService,this._configurationService)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}if(!nee(this._provider,e)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=Hn(r=>Promise.resolve(nN(this._provider,e,t,r))),o=new wi(!1);return i.then(r=>{if(this._debounceInformation.update(e,o.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:a,tokens:l}=r,d=this._modelService.getSemanticTokensProviderStyling(a);e.setPartialSemanticTokens(t,u8(l,d,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}},"ViewportSemanticTokensContribution");g_.ID="editor.contrib.viewportSemanticTokens";g_=Kle([up(1,Bt),up(2,Mt),up(3,wt),up(4,os),up(5,ce)],g_);lt(g_.ID,g_);var Ule=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wP=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const jle=A("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},p("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Gle=A("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},p("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),$le=A("editor.wordHighlightBorder",{light:null,dark:null,hc:ci},p("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),qle=A("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:ci},p("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),Yle=A("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},p("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Xle=A("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},p("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),uy=new re("hasWordHighlights",!1);function eU(s,e,t,n){const i=s.ordered(e);return S4(i.map(o=>()=>Promise.resolve(o.provideDocumentHighlights(e,t,n)).then(void 0,Nn)),io)}h(eU,"getOccurrencesAtPosition");class FA{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Hn(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new T(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,o=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=Boolean(this._wordRange&&this._wordRange.equalsRange(a));for(let d=0,c=n.length;!l&&d<c;d++){let u=e.getDecorationRange(n[d]);u&&u.startLineNumber===i&&u.startColumn<=o&&u.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}h(FA,"OccurenceAtPositionRequest");class tU extends FA{constructor(e,t,n,i){super(e,t,n);this._providers=i}_compute(e,t,n,i){return eU(this._providers,e,t.getPosition(),i).then(o=>o||[])}}h(tU,"SemanticOccurenceAtPositionRequest");class nU extends FA{constructor(e,t,n){super(e,t,n);this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,i){return Zl(250,i).then(()=>{if(!t.isEmpty())return[];const o=e.getWordAtPosition(t.getPosition());return!o||o.word.length>1e3?[]:e.findMatches(o.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:cm.Text}))})}isValid(e,t,n){const i=t.isEmpty();return this._selectionIsEmpty!==i?!1:super.isValid(e,t,n)}}h(nU,"TextualOccurenceAtPositionRequest");function Zle(s,e,t,n){return s.has(e)?new tU(e,t,n,s):new nU(e,t,n)}h(Zle,"computeOccurencesAtPosition");Xr("_executeDocumentHighlights",(s,e,t)=>{const n=s.get(ce);return eU(n.documentHighlightProvider,e,t,je.None)});class ou{constructor(e,t,n){this.toUnhook=new Q,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this._hasWordHighlights=uy.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(72),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(i=>{this._ignorePositionChangeEvent||!this.occurrencesHighlight||this._onPositionChanged(i)})),this.toUnhook.add(e.onDidChangeModelContent(i=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(i=>{let o=this.editor.getOption(72);this.occurrencesHighlight!==o&&(this.occurrencesHighlight=o,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){!this.occurrencesHighlight||this._run()}_getSortedHighlights(){return Mh(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(T.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(i.startLineNumber);qn(`${r}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(i.startLineNumber);qn(`${r}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,n=e.endColumn;const i=this._getWord();if(!i||i.startColumn>t||i.endColumn<n){this._stopAll();return}const o=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),o)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let r=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=Zle(this.providers,this.model,this.editor.getSelection(),this.editor.getOption(117)),this.workerRequest.result.then(a=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},Ne)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:ou._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===cm.Write?this._WRITE_OPTIONS:e===cm.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}h(ou,"WordHighlighter");ou._WRITE_OPTIONS=Pe.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Yt(Xle),position:Jo.Center},minimap:{color:Yt(B0),position:$o.Inline}});ou._TEXT_OPTIONS=Pe.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Yt(aF),position:Jo.Center},minimap:{color:Yt(B0),position:$o.Inline}});ou._REGULAR_OPTIONS=Pe.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Yt(Yle),position:Jo.Center},minimap:{color:Yt(B0),position:$o.Inline}});let Ih=h(class iU extends z{constructor(e,t,n){super();this.wordHighlighter=null;const i=h(()=>{e.hasModel()&&(this.wordHighlighter=new ou(e,n.documentHighlightProvider,t))},"createWordHighlighterIfPossible");this._register(e.onDidChangeModel(o=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()})),i()}static get(e){return e.getContribution(iU.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}},"WordHighlighterContribution");Ih.ID="editor.contrib.wordHighlighter";Ih=Ule([wP(1,De),wP(2,ce)],Ih);class WA extends le{constructor(e,t){super(t);this._isNext=e}run(e,t){const n=Ih.get(t);!n||(this._isNext?n.moveNext():n.moveBack())}}h(WA,"WordHighlightNavigationAction");class oU extends WA{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:p("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:uy,kbOpts:{kbExpr:I.editorTextFocus,primary:65,weight:100}})}}h(oU,"NextWordHighlightAction");class sU extends WA{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:p("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:uy,kbOpts:{kbExpr:I.editorTextFocus,primary:1089,weight:100}})}}h(sU,"PrevWordHighlightAction");class rU extends le{constructor(){super({id:"editor.action.wordHighlight.trigger",label:p("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:uy.toNegated(),kbOpts:{kbExpr:I.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=Ih.get(t);!i||i.restoreViewState(!0)}}h(rU,"TriggerWordHighlightAction");lt(Ih.ID,Ih);ne(oU);ne(sU);ne(rU);It((s,e)=>{const t=s.getColor(rI);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=s.getColor(jle);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const i=s.getColor(Gle);i&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${i}; }`);const o=s.getColor($q);o&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${s.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const r=s.getColor($le);r&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${s.type==="hc"?"dashed":"solid"} ${r}; box-sizing: border-box; }`);const a=s.getColor(qle);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${s.type==="hc"?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class Eb extends zn{constructor(e){super(e);this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=Qo(t.getOption(117)),o=t.getModel(),a=t.getSelections().map(l=>{const d=new W(l.positionLineNumber,l.positionColumn),c=this._move(i,o,d,this._wordNavigationType);return this._moveTo(l,c,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(l=>Be.fromModelSelection(l))),a.length===1){const l=new W(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(l,0)}}_moveTo(e,t,n){return n?new oe(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new oe(t.lineNumber,t.column,t.lineNumber,t.column)}}h(Eb,"MoveWordCommand");class il extends Eb{_move(e,t,n,i){return Je.moveWordLeft(e,t,n,i)}}h(il,"WordLeftCommand");class ol extends Eb{_move(e,t,n,i){return Je.moveWordRight(e,t,n,i)}}h(ol,"WordRightCommand");class aU extends il{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}h(aU,"CursorWordStartLeft");class lU extends il{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}h(lU,"CursorWordEndLeft");class dU extends il{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:se.and(I.textInputFocus,(e=se.and(P_,k1))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}h(dU,"CursorWordLeft");class cU extends il{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}h(cU,"CursorWordStartLeftSelect");class hU extends il{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}h(hU,"CursorWordEndLeftSelect");class uU extends il{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:se.and(I.textInputFocus,(e=se.and(P_,k1))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}h(uU,"CursorWordLeftSelect");class fU extends il{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i){return super._move(Qo(cr.wordSeparators.defaultValue),t,n,i)}}h(fU,"CursorWordAccessibilityLeft");class gU extends il{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i){return super._move(Qo(cr.wordSeparators.defaultValue),t,n,i)}}h(gU,"CursorWordAccessibilityLeftSelect");class pU extends ol{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}h(pU,"CursorWordStartRight");class mU extends ol{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:se.and(I.textInputFocus,(e=se.and(P_,k1))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}h(mU,"CursorWordEndRight");class _U extends ol{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}h(_U,"CursorWordRight");class bU extends ol{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}h(bU,"CursorWordStartRightSelect");class vU extends ol{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:se.and(I.textInputFocus,(e=se.and(P_,k1))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}h(vU,"CursorWordEndRightSelect");class wU extends ol{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}h(wU,"CursorWordRightSelect");class CU extends ol{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i){return super._move(Qo(cr.wordSeparators.defaultValue),t,n,i)}}h(CU,"CursorWordAccessibilityRight");class yU extends ol{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i){return super._move(Qo(cr.wordSeparators.defaultValue),t,n,i)}}h(yU,"CursorWordAccessibilityRightSelect");class Db extends zn{constructor(e){super(e);this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){const i=e.get(oi);if(!t.hasModel())return;const o=Qo(t.getOption(117)),r=t.getModel(),a=t.getSelections(),l=t.getOption(5),d=t.getOption(8),c=i.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),f=a.map(g=>{const m=this._delete({wordSeparators:o,model:r,selection:g,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:l,autoClosingQuotes:d,autoClosingPairs:c,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Pn(m,"")});t.pushUndoStop(),t.executeCommands(this.id,f),t.pushUndoStop()}}h(Db,"DeleteWordCommand");class fy extends Db{_delete(e,t){let n=Je.deleteWordLeft(e,t);return n||new T(1,1,1,1)}}h(fy,"DeleteWordLeftCommand");class gy extends Db{_delete(e,t){let n=Je.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return new T(i,o,i,o)}}h(gy,"DeleteWordRightCommand");class SU extends fy{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:I.writable})}}h(SU,"DeleteWordStartLeft");class xU extends fy{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:I.writable})}}h(xU,"DeleteWordEndLeft");class TU extends fy{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}h(TU,"DeleteWordLeft");class LU extends gy{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:I.writable})}}h(LU,"DeleteWordStartRight");class kU extends gy{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:I.writable})}}h(kU,"DeleteWordEndRight");class EU extends gy{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}h(EU,"DeleteWordRight");class DU extends le{constructor(){super({id:"deleteInsideWord",precondition:I.writable,label:p("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=Qo(t.getOption(117)),o=t.getModel(),a=t.getSelections().map(l=>{const d=Je.deleteInsideWord(i,o,l);return new Pn(d,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}h(DU,"DeleteInsideWord");te(new aU);te(new lU);te(new dU);te(new cU);te(new hU);te(new uU);te(new pU);te(new mU);te(new _U);te(new bU);te(new vU);te(new wU);te(new fU);te(new gU);te(new CU);te(new yU);te(new SU);te(new xU);te(new TU);te(new LU);te(new kU);te(new EU);ne(DU);class IU extends Db{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let n=W_.deleteWordPartLeft(e);return n||new T(1,1,1,1)}}h(IU,"DeleteWordPartLeft");class NU extends Db{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=W_.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return new T(i,o,i,o)}}h(NU,"DeleteWordPartRight");class VA extends Eb{_move(e,t,n,i){return W_.moveWordPartLeft(e,t,n)}}h(VA,"WordPartLeftCommand");class AU extends VA{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}h(AU,"CursorWordPartLeft");tt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class MU extends VA{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}h(MU,"CursorWordPartLeftSelect");tt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class BA extends Eb{_move(e,t,n,i){return W_.moveWordPartRight(e,t,n)}}h(BA,"WordPartRightCommand");class RU extends BA{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}h(RU,"CursorWordPartRight");class PU extends BA{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}h(PU,"CursorWordPartRightSelect");te(new IU);te(new NU);te(new AU);te(new MU);te(new RU);te(new PU);var OU=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Nw=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};const FU=new re("accessibilityHelpWidgetVisible",!1);let Nh=h(class WU extends z{constructor(e,t){super();this._editor=e,this._widget=this._register(t.createInstance(ug,this._editor))}static get(e){return e.getContribution(WU.ID)}show(){this._widget.show()}hide(){this._widget.hide()}},"AccessibilityHelpController");Nh.ID="editor.contrib.accessibilityHelpController";Nh=OU([Nw(1,Ge)],Nh);function Jle(s,e){return!s||s.length===0?un.noSelection:s.length===1?e?jo(un.singleSelectionRange,s[0].positionLineNumber,s[0].positionColumn,e):jo(un.singleSelection,s[0].positionLineNumber,s[0].positionColumn):e?jo(un.multiSelectionRange,s.length,e):s.length>0?jo(un.multiSelection,s.length):""}h(Jle,"getSelectionLabel");let ug=h(class Aw extends ns{constructor(e,t,n,i){super();this._contextKeyService=t,this._keybindingService=n,this._openerService=i,this._editor=e,this._isVisibleKey=FU.bindTo(this._contextKeyService),this._domNode=nt(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=nt(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(Wn(this._contentDomNode.domNode,"keydown",o=>{if(!!this._isVisible&&(o.equals(2083)&&(qn(un.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Sn(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),o.preventDefault(),o.stopPropagation()),o.equals(2086))){qn(un.openingDocs);let r=this._editor.getRawOptions().accessibilityHelpUrl;typeof r>"u"&&(r="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(Ce.parse(r)),o.preventDefault(),o.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Aw.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){const i=this._keybindingService.lookupKeybinding(e);return i?jo(t,i.getAriaLabel()):jo(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(l=>{n+=a.getValueLengthInRange(l)})}let i=Jle(t,n);e.get(54)?e.get(81)?i+=un.readonlyDiffEditor:i+=un.editableDiffEditor:e.get(81)?i+=un.readonlyEditor:i+=un.editableEditor;const o=Ke?un.changeConfigToOnMac:un.changeConfigToOnWinLinux;switch(e.get(2)){case 0:i+=`

 - `+o;break;case 2:i+=`

 - `+un.auto_on;break;case 1:i+=`

 - `+un.auto_off,i+=" "+o;break}e.get(130)?i+=`

 - `+this._descriptionForCommand(Eh.ID,un.tabFocusModeOnMsg,un.tabFocusModeOnMsgNoKb):i+=`

 - `+this._descriptionForCommand(Eh.ID,un.tabFocusModeOffMsg,un.tabFocusModeOffMsgNoKb);const r=Ke?un.openDocMac:un.openDocWinLinux;i+=`

 - `+r,i+=`

`+un.outroMsg,this._contentDomNode.domNode.appendChild(L8(i)),this._contentDomNode.domNode.setAttribute("aria-label",i)}hide(){!this._isVisible||(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Sn(this._contentDomNode.domNode),this._editor.focus())}_layout(){const e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(Aw.WIDTH,e.width-40)),n=Math.max(5,Math.min(Aw.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);const i=Math.round((e.height-n)/2);this._domNode.setTop(i);const o=Math.round((e.width-t)/2);this._domNode.setLeft(o)}},"AccessibilityHelpWidget");ug.ID="editor.contrib.accessibilityHelpWidget";ug.WIDTH=500;ug.HEIGHT=300;ug=OU([Nw(1,De),Nw(2,Xt),Nw(3,ss)],ug);class VU extends le{constructor(){super({id:"editor.action.showAccessibilityHelp",label:un.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){const n=Nh.get(t);n&&n.show()}}h(VU,"ShowAccessibilityHelpAction");lt(Nh.ID,Nh);ne(VU);const Qle=zn.bindToContribution(Nh.get);te(new Qle({id:"closeAccessibilityHelp",precondition:FU,handler:s=>s.hide(),kbOpts:{weight:100+100,kbExpr:I.focus,primary:9,secondary:[1033]}}));It((s,e)=>{const t=s.getColor(vi);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=s.getColor(Fa);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const i=s.getColor(od);i&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${i}; }`);const o=s.getColor(Pt);o&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${o}; }`)});class s0 extends z{constructor(e){super();this.editor=e,this.widget=null,tr&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(81);!this.widget&&e?this.widget=new Ib(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}h(s0,"IPadShowKeyboard");s0.ID="editor.contrib.iPadShowKeyboard";class Ib extends z{constructor(e){super();this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(J(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(J(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return Ib.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}h(Ib,"ShowKeyboardWidget");Ib.ID="editor.contrib.ShowKeyboardWidget";lt(s0.ID,s0);var ede=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},CP=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let fg=h(class BU extends z{constructor(e,t,n){super();this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(Ft.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}static get(e){return e.getContribution(BU.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||!this._editor.hasModel()||(this._widget=new Nb(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},"InspectTokensController");fg.ID="editor.contrib.inspectTokens";fg=ede([CP(1,Ao),CP(2,Vt)],fg);class HU extends le{constructor(){super({id:"editor.action.inspectTokens",label:AL.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const n=fg.get(t);n&&n.launch()}}h(HU,"InspectTokens");function tde(s){let e="";for(let t=0,n=s.length;t<n;t++){const i=s.charCodeAt(t);switch(i){case 9:e+="\u2192";break;case 32:e+="\xB7";break;default:e+=String.fromCharCode(i)}}return e}h(tde,"renderTokenText");function nde(s,e){const t=Ft.get(e);if(t)return t;const n=s.encodeLanguageId(e);return{getInitialState:()=>mf,tokenize:(i,o,r)=>v4(e,r),tokenizeEncoded:(i,o,r)=>OD(n,r)}}h(nde,"getSafeTokenizationSupport");class Nb extends z{constructor(e,t){super();this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=nde(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return Nb._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let n=0;for(let l=t.tokens1.length-1;l>=0;l--){const d=t.tokens1[l];if(e.column-1>=d.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}const o=this._model.getLineContent(e.lineNumber);let r="";if(n<t.tokens1.length){const l=t.tokens1[n].offset,d=n+1<t.tokens1.length?t.tokens1[n+1].offset:o.length;r=o.substring(l,d)}td(this._domNode,X("h2.tm-token",void 0,tde(r),X("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),j(this._domNode,X("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;j(this._domNode,X("table.tm-metadata-table",void 0,X("tbody",void 0,X("tr",void 0,X("td.tm-metadata-key",void 0,"language"),X("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),X("tr",void 0,X("td.tm-metadata-key",void 0,"token type"),X("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),X("tr",void 0,X("td.tm-metadata-key",void 0,"font style"),X("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),X("tr",void 0,X("td.tm-metadata-key",void 0,"foreground"),X("td.tm-metadata-value",void 0,`${a?H.Format.CSS.formatHex(a.foreground):"-?-"}`)),X("tr",void 0,X("td.tm-metadata-key",void 0,"background"),X("td.tm-metadata-value",void 0,`${a?H.Format.CSS.formatHex(a.background):"-?-"}`))))),j(this._domNode,X("hr.tokens-inspect-separator")),n<t.tokens1.length&&j(this._domNode,X("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Ft.getColorMap(),n=Gn.getLanguageId(e),i=Gn.getTokenType(e),o=Gn.getFontStyle(e),r=Gn.getForeground(e),a=Gn.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:o,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}h(Nb,"InspectTokensWidget");Nb._ID="editor.contrib.inspectTokensWidget";lt(fg.ID,fg);ne(HU);It((s,e)=>{const t=s.getColor(lI);if(t){const o=s.type===fs.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${o}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=s.getColor(th);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const i=s.getColor(aI);i&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${i}; }`)});var ide=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ode=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let r0=h(class Mw{constructor(e){this.quickInputService=e,this.registry=dn.as(qh.Quickaccess)}provide(e){const t=new Q;t.add(e.onDidAccept(()=>{const[o]=e.selectedItems;o&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(o=>{const r=this.registry.getQuickAccessProvider(o.substr(Mw.PREFIX.length));r&&r.prefix&&r.prefix!==Mw.PREFIX&&this.quickInputService.quickAccess.show(r.prefix,{preserveValue:!0})}));const{editorProviders:n,globalProviders:i}=this.getQuickAccessProviders();return e.items=n.length===0||i.length===0?[...n.length===0?i:n]:[{label:p("globalCommands","global commands"),type:"separator"},...i,{label:p("editorCommands","editor commands"),type:"separator"},...n],t}getQuickAccessProviders(){const e=[],t=[];for(const n of this.registry.getQuickAccessProviders().sort((i,o)=>i.prefix.localeCompare(o.prefix)))if(n.prefix!==Mw.PREFIX)for(const i of n.helpEntries){const o=i.prefix||n.prefix,r=o||"\u2026";(i.needsEditor?t:e).push({prefix:o,label:r,ariaLabel:p("helpPickAriaLabel","{0}, {1}",r,i.description),description:i.description})}return{editorProviders:t,globalProviders:e}}},"HelpQuickAccessProvider");r0.PREFIX="?";r0=ide([ode(0,tl)],r0);dn.as(qh.Quickaccess).registerQuickAccessProvider({ctor:r0,prefix:"",helpEntries:[{description:ML.helpQuickAccessActionLabel,needsEditor:!0}]});class HA{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const i=new Q;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=i.add(new hi);return o.value=this.doProvide(e,t),i.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),i}doProvide(e,t){const n=new Q,i=this.activeTextEditorControl;if(i&&this.canProvideWithTextEditor(i)){const o={editor:i},r=gV(i);if(r){let a=Qi(i.saveViewState());n.add(r.onDidChangeCursorPosition(()=>{a=Qi(i.saveViewState())})),o.restoreViewState=()=>{a&&i===this.activeTextEditorControl&&i.restoreViewState(a)},n.add(Ka(t.onCancellationRequested)(()=>{var l;return(l=o.restoreViewState)===null||l===void 0?void 0:l.call(o)}))}n.add(He(()=>this.clearDecorations(i))),n.add(this.provideWithTextEditor(o,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return fV(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Yt(wX),position:Jo.Full}}}],[r,a]=n.deltaDecorations(i,o);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}h(HA,"AbstractEditorNavigationQuickAccessProvider");class Ab extends HA{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=p("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,z.None}provideWithTextEditor(e,t,n){const i=e.editor,o=new Q;o.add(t.onDidAccept(l=>{const[d]=t.selectedItems;if(d){if(!this.isValidLineNumber(i,d.lineNumber))return;this.gotoLocation(e,{range:this.toRange(d.lineNumber,d.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=h(()=>{const l=this.parsePosition(i,t.value.trim().substr(Ab.PREFIX.length)),d=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:d}],t.ariaLabel=d,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const c=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(c,0),this.addDecorations(i,c)},"updatePickerAndEditor");r(),o.add(t.onDidChangeValue(()=>r()));const a=gV(i);return a&&a.getOptions().get(60).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(He(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?p("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):p("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?p("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,o):p("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const o={lineNumber:t,column:n};return i.validatePosition(o).equals(o)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}h(Ab,"AbstractGotoLineQuickAccessProvider");Ab.PREFIX=":";var sde=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rde=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let p_=h(class extends Ab{constructor(e){super();this.editorService=e,this.onDidActiveTextEditorControlChange=fe.None}get activeTextEditorControl(){return Qi(this.editorService.getFocusedCodeEditor())}},"StandaloneGotoLineQuickAccessProvider");p_=sde([rde(0,ht)],p_);dn.as(qh.Quickaccess).registerQuickAccessProvider({ctor:p_,prefix:p_.PREFIX,helpEntries:[{description:SC.gotoLineActionLabel,needsEditor:!0}]});class zU extends le{constructor(){super({id:"editor.action.gotoLine",label:SC.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(tl).quickAccess.show(p_.PREFIX)}}h(zU,"GotoLineAction$2");ne(zU);const KU=[void 0,[]];function ox(s,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?ade(s,i.values,t,n):UU(s,e,t,n)}h(ox,"scoreFuzzy2");function ade(s,e,t,n){let i=0;const o=[];for(const r of e){const[a,l]=UU(s,r,t,n);if(typeof a!="number")return KU;i+=a,o.push(...l)}return[i,lde(o)]}h(ade,"doScoreFuzzy2Multiple");function UU(s,e,t,n){const i=Hf(e.original,e.originalLowercase,t,s,s.toLowerCase(),n,!0);return i?[i[0],g1(i)]:KU}h(UU,"doScoreFuzzy2Single");Object.freeze({score:0});function lde(s){const e=s.sort((i,o)=>i.start-o.start),t=[];let n;for(const i of e)!n||!dde(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}h(lde,"normalizeMatches");function dde(s,e){return!(s.end<e.start||e.end<s.start)}h(dde,"matchOverlaps");function yP(s){return s.startsWith('"')&&s.endsWith('"')}h(yP,"queryExpectsExactMatch");const jU=" ";function iD(s){typeof s!="string"&&(s="");const e=s.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=SP(s),o=t.indexOf(Pr)>=0,r=yP(s);let a;const l=s.split(jU);if(l.length>1)for(const d of l){const c=yP(d),{pathNormalized:u,normalized:f,normalizedLowercase:g}=SP(d);f&&(a||(a=[]),a.push({original:d,originalLowercase:d.toLowerCase(),pathNormalized:u,normalized:f,normalizedLowercase:g,expectContiguousMatch:c}))}return{original:s,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:o,expectContiguousMatch:r}}h(iD,"prepareQuery");function SP(s){let e;Vn?e=s.replace(/\//g,Pr):e=s.replace(/\\/g,Pr);const t=pG(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}h(SP,"normalizeQuery");function xP(s){return Array.isArray(s)?iD(s.map(e=>e.original).join(jU)):iD(s.original)}h(xP,"pieceToQuery");var cde=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},TP=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},fp=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let _s=h(class oD extends HA{constructor(e,t,n=Object.create(null)){super(n);this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,p("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),z.None}provideWithTextEditor(e,t,n){const i=e.editor,o=this.getModel(i);return o?this._languageFeaturesService.documentSymbolProvider.has(o)?this.doProvideWithEditorSymbols(e,o,t,n):this.doProvideWithoutEditorSymbols(e,o,t,n):z.None}doProvideWithoutEditorSymbols(e,t,n,i){const o=new Q;return this.provideLabelPick(n,p("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),fp(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,o))||i.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,n,i))}),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return fp(this,void 0,void 0,function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const n=new v0,i=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(He(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,i){const o=e.editor,r=new Q;r.add(n.onDidAccept(u=>{const[f]=n.selectedItems;f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:n.keyMods,preserveFocus:u.inBackground}),u.inBackground||n.hide())})),r.add(n.onDidTriggerItemButton(({item:u})=>{u&&u.range&&(this.gotoLocation(e,{range:u.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const a=this.getDocumentSymbols(t,i);let l;const d=h(()=>fp(this,void 0,void 0,function*(){l?.dispose(!0),n.busy=!1,l=new Bn(i),n.busy=!0;try{const u=iD(n.value.substr(oD.PREFIX.length).trim()),f=yield this.doGetSymbolPicks(a,u,void 0,l.token);if(i.isCancellationRequested)return;f.length>0?n.items=f:u.original.length>0?this.provideLabelPick(n,p("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,p("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}}),"updatePickerItems");r.add(n.onDidChangeValue(()=>d())),d();let c=!0;return r.add(n.onDidChangeActive(()=>{const[u]=n.activeItems;if(u&&u.range){if(c){c=!1;return}o.revealRangeInCenter(u.range.selection,0),this.addDecorations(o,u.range.decoration)}})),r}doGetSymbolPicks(e,t,n,i){return fp(this,void 0,void 0,function*(){const o=yield e;if(i.isCancellationRequested)return[];const r=t.original.indexOf(oD.SCOPE_PREFIX)===0,a=r?1:0;let l,d;t.values&&t.values.length>1?(l=xP(t.values[0]),d=xP(t.values.slice(1))):l=t;const c=[];for(let g=0;g<o.length;g++){const m=o[g],b=fG(m.name),v=`$(${Cx.toIcon(m.kind).id}) ${b}`,C=v.length-b.length;let w=m.containerName;n?.extraContainerLabel&&(w?w=`${n.extraContainerLabel} \u2022 ${w}`:w=n.extraContainerLabel);let y,S,L,E;if(t.original.length>a){let k=!1;if(l!==t&&([y,S]=ox(v,Object.assign(Object.assign({},t),{values:void 0}),a,C),typeof y=="number"&&(k=!0)),typeof y!="number"&&([y,S]=ox(v,l,a,C),typeof y!="number"))continue;if(!k&&d){if(w&&d.original.length>0&&([L,E]=ox(w,d)),typeof L!="number")continue;typeof y=="number"&&(y+=L)}}const x=m.tags&&m.tags.indexOf(1)>=0;c.push({index:g,kind:m.kind,score:y,label:v,ariaLabel:b,description:w,highlights:x?void 0:{label:S,description:E},range:{selection:T.collapseToStart(m.selectionRange),decoration:m.range},strikethrough:x,buttons:(()=>{var k,N;const V=!((k=this.options)===null||k===void 0)&&k.openSideBySideDirection?(N=this.options)===null||N===void 0?void 0:N.openSideBySideDirection():void 0;if(!!V)return[{iconClass:V==="right"?_.splitHorizontal.classNames:_.splitVertical.classNames,tooltip:V==="right"?p("openToSide","Open to the Side"):p("openToBottom","Open to the Bottom")}]})()})}const u=c.sort((g,m)=>r?this.compareByKindAndScore(g,m):this.compareByScore(g,m));let f=[];if(r){let v=function(){m&&typeof g=="number"&&b>0&&(m.label=jo(rx[g]||sx,b))};h(v,"updateLastSeparatorLabel");let g,m,b=0;for(const C of u)g!==C.kind?(v(),g=C.kind,b=1,m={type:"separator"},f.push(m)):b++,f.push(C);v()}else u.length>0&&(f=[{label:p("symbols","symbols ({0})",c.length),type:"separator"},...u]);return f})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=rx[e.kind]||sx,i=rx[t.kind]||sx,o=n.localeCompare(i);return o===0?this.compareByScore(e,t):o}getDocumentSymbols(e,t){return fp(this,void 0,void 0,function*(){const n=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}},"AbstractGotoSymbolQuickAccessProvider");_s.PREFIX="@";_s.SCOPE_PREFIX=":";_s.PREFIX_BY_CATEGORY=`${_s.PREFIX}${_s.SCOPE_PREFIX}`;_s=cde([TP(0,ce),TP(1,ty)],_s);const sx=p("property","properties ({0})"),rx={[5]:p("method","methods ({0})"),[11]:p("function","functions ({0})"),[8]:p("_constructor","constructors ({0})"),[12]:p("variable","variables ({0})"),[4]:p("class","classes ({0})"),[22]:p("struct","structs ({0})"),[23]:p("event","events ({0})"),[24]:p("operator","operators ({0})"),[10]:p("interface","interfaces ({0})"),[2]:p("namespace","namespaces ({0})"),[3]:p("package","packages ({0})"),[25]:p("typeParameter","type parameters ({0})"),[1]:p("modules","modules ({0})"),[6]:p("property","properties ({0})"),[9]:p("enum","enumerations ({0})"),[21]:p("enumMember","enumeration members ({0})"),[14]:p("string","strings ({0})"),[0]:p("file","files ({0})"),[17]:p("array","arrays ({0})"),[15]:p("number","numbers ({0})"),[16]:p("boolean","booleans ({0})"),[18]:p("object","objects ({0})"),[19]:p("key","keys ({0})"),[7]:p("field","fields ({0})"),[13]:p("constant","constants ({0})")};var hde=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ax=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let sD=h(class extends _s{constructor(e,t,n){super(t,n);this.editorService=e,this.onDidActiveTextEditorControlChange=fe.None}get activeTextEditorControl(){return Qi(this.editorService.getFocusedCodeEditor())}},"StandaloneGotoSymbolQuickAccessProvider");sD=hde([ax(0,ht),ax(1,ce),ax(2,ty)],sD);dn.as(qh.Quickaccess).registerQuickAccessProvider({ctor:sD,prefix:_s.PREFIX,helpEntries:[{description:Um.quickOutlineActionLabel,prefix:_s.PREFIX,needsEditor:!0},{description:Um.quickOutlineByCategoryActionLabel,prefix:_s.PREFIX_BY_CATEGORY,needsEditor:!0}]});class GU extends le{constructor(){super({id:"editor.action.quickOutline",label:Um.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:I.hasDocumentSymbolProvider,kbOpts:{kbExpr:I.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(tl).quickAccess.show(_s.PREFIX)}}h(GU,"GotoLineAction$1");ne(GU);function lx(s,e){return e&&(s.stack||s.stacktrace)?p("stackTrace.format","{0}: {1}",kP(s),LP(s.stack)||LP(s.stacktrace)):kP(s)}h(lx,"exceptionToErrorMessage");function LP(s){return Array.isArray(s)?s.join(`
`):s}h(LP,"stackToString");function kP(s){return typeof s.code=="string"&&typeof s.errno=="number"&&typeof s.syscall=="string"?p("nodeExceptionMessage","A system error occurred ({0})",s.message):s.message||p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}h(kP,"detectSystemErrorMessage");function $U(s=null,e=!1){if(!s)return p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(s)){const t=Mh(s),n=$U(t[0],e);return t.length>1?p("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(Yo(s))return s;if(s.detail){const t=s.detail;if(t.error)return lx(t.error,e);if(t.exception)return lx(t.exception,e)}return s.stack?lx(s,e):s.message?s.message:p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}h($U,"toErrorMessage");var Mv=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})},Wu;(function(s){s[s.NO_ACTION=0]="NO_ACTION",s[s.CLOSE_PICKER=1]="CLOSE_PICKER",s[s.REFRESH_PICKER=2]="REFRESH_PICKER",s[s.REMOVE_ITEM=3]="REMOVE_ITEM"})(Wu||(Wu={}));function dx(s){const e=s;return Array.isArray(e.items)}h(dx,"isPicksWithActive");function ude(s){const e=s;return!!e.picks&&e.additionalPicks instanceof Promise}h(ude,"isFastAndSlowPicks");class Mb extends z{constructor(e,t){super();this.prefix=e,this.options=t}provide(e,t){var n;const i=new Q;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const r=i.add(new hi),a=h(()=>Mv(this,void 0,void 0,function*(){const l=r.value=new Q;o?.dispose(!0),e.busy=!1,o=new Bn(t);const d=o.token,c=e.value.substr(this.prefix.length).trim(),u=this._getPicks(c,l,d),f=h((g,m)=>{var b;let v,C;if(dx(g)?(v=g.items,C=g.active):v=g,v.length===0){if(m)return!1;c.length>0&&((b=this.options)===null||b===void 0?void 0:b.noResultsPick)&&(v=[this.options.noResultsPick])}return e.items=v,C&&(e.activeItems=[C]),!0},"applyPicks");if(u!==null)if(ude(u)){let g=!1,m=!1;yield Promise.all([(()=>Mv(this,void 0,void 0,function*(){yield Zl(Mb.FAST_PICKS_RACE_DELAY),!d.isCancellationRequested&&(m||(g=f(u.picks,!0)))}))(),(()=>Mv(this,void 0,void 0,function*(){e.busy=!0;try{const b=yield u.additionalPicks;if(d.isCancellationRequested)return;let v,C;dx(u.picks)?(v=u.picks.items,C=u.picks.active):v=u.picks;let w,y;if(dx(b)?(w=b.items,y=b.active):w=b,w.length>0||!g){let S;if(!C&&!y){const L=e.activeItems[0];L&&v.indexOf(L)!==-1&&(S=L)}f({items:[...v,...w],active:C||y||S})}}finally{d.isCancellationRequested||(e.busy=!1),m=!0}}))()])}else if(!(u instanceof Promise))f(u);else{e.busy=!0;try{const g=yield u;if(d.isCancellationRequested)return;f(g)}finally{d.isCancellationRequested||(e.busy=!1)}}}),"updatePickerItems");return i.add(e.onDidChangeValue(()=>a())),a(),i.add(e.onDidAccept(l=>{const[d]=e.selectedItems;typeof d?.accept=="function"&&(l.inBackground||e.hide(),d.accept(e.keyMods,l))})),i.add(e.onDidTriggerItemButton(({button:l,item:d})=>Mv(this,void 0,void 0,function*(){var c,u;if(typeof d.trigger=="function"){const f=(u=(c=d.buttons)===null||c===void 0?void 0:c.indexOf(l))!==null&&u!==void 0?u:-1;if(f>=0){const g=d.trigger(f,e.keyMods),m=typeof g=="number"?g:yield g;if(t.isCancellationRequested)return;switch(m){case Wu.NO_ACTION:break;case Wu.CLOSE_PICKER:e.hide();break;case Wu.REFRESH_PICKER:a();break;case Wu.REMOVE_ITEM:{const b=e.items.indexOf(d);if(b!==-1){const v=e.items.slice(),C=v.splice(b,1),w=e.activeItems.filter(S=>S!==C[0]),y=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=v,w&&(e.activeItems=w),e.keepScrollPosition=y}break}}}}}))),i}}h(Mb,"PickerQuickAccessProvider");Mb.FAST_PICKS_RACE_DELAY=200;var qU=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uc=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},EP=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let m_=h(class Rw extends Mb{constructor(e,t,n,i,o,r){super(Rw.PREFIX,e);this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=o,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(Ah)),this.options=e}_getPicks(e,t,n){return EP(this,void 0,void 0,function*(){const i=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const o=[];for(const d of i){const c=Qi(Rw.WORD_FILTER(e,d.label)),u=d.commandAlias?Qi(Rw.WORD_FILTER(e,d.commandAlias)):void 0;c||u?(d.highlights={label:c,detail:this.options.showAlias?u:void 0},o.push(d)):e===d.commandId&&o.push(d)}const r=new Map;for(const d of o){const c=r.get(d.label);c?(d.description=d.commandId,c.description=c.commandId):r.set(d.label,d)}o.sort((d,c)=>{const u=this.commandsHistory.peek(d.commandId),f=this.commandsHistory.peek(c.commandId);return u&&f?u>f?-1:1:u?-1:f?1:d.label.localeCompare(c.label)});const a=[];let l=!1;for(let d=0;d<o.length;d++){const c=o[d],u=this.keybindingService.lookupKeybinding(c.commandId),f=u?p("commandPickAriaLabelWithKeybinding","{0}, {1}",c.label,u.getAriaLabel()):c.label;d===0&&this.commandsHistory.peek(c.commandId)&&(a.push({type:"separator",label:p("recentlyUsed","recently used")}),l=!0),d!==0&&l&&!this.commandsHistory.peek(c.commandId)&&(a.push({type:"separator",label:p("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},c),{ariaLabel:f,detail:this.options.showAlias&&c.commandAlias!==c.label?c.commandAlias:void 0,keybinding:u,accept:()=>EP(this,void 0,void 0,function*(){this.commandsHistory.push(c.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"quick open"});try{yield this.commandService.executeCommand(c.commandId)}catch(g){qr(g)||this.dialogService.show(Ot.Error,p("canNotRun","Command '{0}' resulted in an error ({1})",c.label,$U(g)))}})}))}return a})}},"AbstractCommandsQuickAccessProvider");m_.PREFIX=">";m_.WORD_FILTER=$I(u1,xQ,e8);m_=qU([uc(1,Ge),uc(2,Xt),uc(3,ln),uc(4,Yr),uc(5,U_)],m_);let Ah=h(class Tn extends z{constructor(e,t){super();this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=Tn.getConfiguredCommandHistoryLength(this.configurationService),Tn.cache&&Tn.cache.limit!==this.configuredCommandsHistoryLength&&(Tn.cache.limit=this.configuredCommandsHistoryLength,Tn.saveState(this.storageService))}load(){const e=this.storageService.get(Tn.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=Tn.cache=new Qa(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((o,r)=>o.value-r.value),i.forEach(o=>n.set(o.key,o.value))}Tn.counter=this.storageService.getNumber(Tn.PREF_KEY_COUNTER,0,Tn.counter)}push(e){!Tn.cache||(Tn.cache.set(e,Tn.counter++),Tn.saveState(this.storageService))}peek(e){var t;return(t=Tn.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Tn.cache)return;const t={usesLRU:!0,entries:[]};Tn.cache.forEach((n,i)=>t.entries.push({key:i,value:n})),e.store(Tn.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Tn.PREF_KEY_COUNTER,Tn.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const o=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof o=="number"?o:Tn.DEFAULT_COMMANDS_HISTORY_LENGTH}},"CommandsHistory");Ah.DEFAULT_COMMANDS_HISTORY_LENGTH=50;Ah.PREF_KEY_CACHE="commandPalette.mru.cache";Ah.PREF_KEY_COUNTER="commandPalette.mru.counter";Ah.counter=1;Ah=qU([uc(0,Qr),uc(1,wt)],Ah);class YU extends m_{constructor(e,t,n,i,o,r){super(e,t,n,i,o,r)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:QI(n.label)||n.id});return t}}h(YU,"AbstractEditorCommandsQuickAccessProvider");var fde=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bu=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}},gde=globalThis&&globalThis.__awaiter||function(s,e,t,n){function i(o){return o instanceof t?o:new t(function(r){r(o)})}return h(i,"adopt"),new(t||(t=Promise))(function(o,r){function a(c){try{d(n.next(c))}catch(u){r(u)}}h(a,"fulfilled");function l(c){try{d(n.throw(c))}catch(u){r(u)}}h(l,"rejected");function d(c){c.done?o(c.value):i(c.value).then(a,l)}h(d,"step"),d((n=n.apply(s,e||[])).next())})};let __=h(class extends YU{constructor(e,t,n,i,o,r){super({showAlias:!1},e,n,i,o,r);this.codeEditorService=t}get activeTextEditorControl(){return Qi(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return gde(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}},"StandaloneCommandsQuickAccessProvider");__=fde([bu(0,Ge),bu(1,ht),bu(2,Xt),bu(3,ln),bu(4,Yr),bu(5,U_)],__);dn.as(qh.Quickaccess).registerQuickAccessProvider({ctor:__,prefix:__.PREFIX,helpEntries:[{description:xC.quickCommandHelp,needsEditor:!0}]});class XU extends le{constructor(){super({id:"editor.action.quickCommand",label:xC.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(tl).quickAccess.show(__.PREFIX)}}h(XU,"GotoLineAction");ne(XU);var pde=globalThis&&globalThis.__decorate||function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vu=globalThis&&globalThis.__param||function(s,e){return function(t,n){e(t,n,s)}};let rD=h(class extends bd{constructor(e,t,n,i,o,r,a){super(!0,e,t,n,i,o,r,a)}},"StandaloneReferencesController");rD=pde([vu(1,De),vu(2,ht),vu(3,cn),vu(4,Ge),vu(5,Qr),vu(6,wt)],rD);lt(bd.ID,rD);class ZU extends le{constructor(){super({id:"editor.action.toggleHighContrast",label:RL.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0});this._originalThemeName=null}run(e,t){const n=e.get(Ao);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getColorTheme().themeName,n.setTheme("hc-black"))}}h(ZU,"ToggleHighContrast");ne(ZU);function mde(){return new Worker("/assets/editor.worker.35d145c7.js",{type:"module"})}h(mde,"WorkerWrapper$1");function _de(){return new Worker("/assets/ts.worker.55d18713.js",{type:"module"})}h(_de,"WorkerWrapper");function bde(){const s=globalThis;if(s.MonacoEnvironment)return;s.MonacoEnvironment={getWorker(t,n){return n==="typescript"||n==="javascript"?new _de:new mde}},Lu.typescript.typescriptDefaults.setCompilerOptions({strict:!0,target:Lu.typescript.ScriptTarget.ESNext,module:Lu.typescript.ModuleKind.ESNext,moduleResolution:Lu.typescript.ModuleResolutionKind.NodeJs,forceConsistentCasingInFileNames:!0,allowSyntheticDefaultImports:!0,esModuleInterop:!0,jsx:Lu.typescript.JsxEmit.Preserve,jsxImportSource:"solid-js",allowNonTsExtensions:!0});for(const t in{"jsx-runtime.d.ts":'export * from "./types/jsx"',"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.3.17",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "web/dist",
    "web/types",
    "h/dist",
    "h/types",
    "html/dist",
    "html/types",
    "universal/dist",
    "universal/types",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "browser": {
        "development": {
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "import": "./dist/solid.js",
        "require": "./dist/solid.cjs"
      },
      "node": {
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/solid.js",
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./store": {
      "browser": {
        "development": {
          "import": "./store/dist/dev.js",
          "require": "./store/dist/dev.cjs"
        },
        "import": "./store/dist/store.js",
        "require": "./store/dist/store.cjs"
      },
      "node": {
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "import": "./store/dist/dev.js",
        "require": "./store/dist/dev.cjs"
      },
      "import": "./store/dist/store.js",
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "browser": {
        "development": {
          "import": "./web/dist/dev.js",
          "require": "./web/dist/dev.cjs"
        },
        "import": "./web/dist/web.js",
        "require": "./web/dist/web.cjs"
      },
      "node": {
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "import": "./web/dist/dev.js",
        "require": "./web/dist/dev.cjs"
      },
      "import": "./web/dist/web.js",
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "import": "./universal/dist/dev.js",
        "require": "./universal/dist/dev.cjs"
      },
      "import": "./universal/dist/universal.js",
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "import": "./h/dist/h.js",
      "require": "./h/dist/h.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "import": "./html/dist/html.js",
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*"
  },
  "scripts": {
    "prebuild": "npm run clean",
    "clean": "rimraf dist/ types/ coverage/ store/dist/ store/types/ web/dist/ web/types/ h/dist/ h/types/ html/dist/ html/types/",
    "build": "npm-run-all -cnl build:*",
    "build:link": "symlink-dir . node_modules/solid-js",
    "build:js": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && rollup -c",
    "build:types": "tsc --project ./tsconfig.build.json",
    "build:types-store": "tsc --project ./store/tsconfig.build.json && tsconfig-replace-paths --project ./store/tsconfig.types.json",
    "build:types-web": "tsc --project ./web/tsconfig.build.json && tsconfig-replace-paths --project ./web/tsconfig.types.json",
    "build:types-html": "tsc --project ./html/tsconfig.json",
    "build:types-h": "tsc --project ./h/tsconfig.json",
    "build:types-universal": "tsc --project ./universal/tsconfig.json",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "test": "jest && npm run test:types",
    "test:coverage": "jest --coverage && npm run test:types",
    "test:types": "tsc --project tsconfig.test.json"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "gitHead": "88ce357264a4966d38d143143a3efe8a394e57c0"
}
`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "browser": {
        "development": {
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "import": "./dist/store.js",
        "require": "./dist/store.cjs"
      },
      "node": {
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/store.js",
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { createRoot, createSignal, createEffect, createRenderEffect, createComputed, createReaction, createDeferred, createSelector, createMemo, createResource, onMount, onCleanup, onError, untrack, batch, on, enableScheduling, enableExternalSource, startTransition, useTransition, refetchResources, createContext, useContext, children, getListener, getOwner, runWithOwner, equalFn, $DEVCOMP, $PROXY } from "./reactive/signal";
export type { Accessor, Setter, Signal, Resource, ResourceReturn, ResourceFetcher, ResourceFetcherInfo, Context, ReturnTypes } from "./reactive/signal";
export * from "./reactive/observable";
export * from "./reactive/scheduler";
export * from "./reactive/array";
export * from "./render";
import type { JSX } from "./jsx";
declare type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { writeSignal, serializeGraph, registerGraph, hashValue } from "./reactive/signal";
declare let DEV: {
    writeSignal: typeof writeSignal;
    serializeGraph: typeof serializeGraph;
    registerGraph: typeof registerGraph;
    hashValue: typeof hashValue;
};
export { DEV };
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  interface Directives {}
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onChange?: EventHandlerUnion<T, Event>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onReset?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onLoad?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onAbort?: EventHandlerUnion<T, Event>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;

    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    onchange?: EventHandlerUnion<T, Event>;
    oninvalid?: EventHandlerUnion<T, Event>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onreset?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onload?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onabort?: EventHandlerUnion<T, Event>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onencrypted?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
  }
  type CSSWideKeyword = "initial" | "inherit" | "unset";
  type CSSPercentage = string;
  type CSSLength = number | string;
  interface CSSProperties {
    /**
     * Aligns a flex container's lines within the flex container when there is extra space in the cross-axis, similar to how justify-content aligns individual items within the main-axis.
     */
    "align-content"?:
      | CSSWideKeyword
      | "flex-start"
      | "flex-end"
      | "center"
      | "space-between"
      | "space-around"
      | "stretch";
    /**
     * Sets the default alignment in the cross axis for all of the flex container's items, including anonymous flex items, similarly to how justify-content aligns items along the main axis.
     */
    "align-items"?: CSSWideKeyword | "flex-start" | "flex-end" | "center" | "baseline" | "stretch";
    /**
     * Allows the default alignment to be overridden for individual flex items.
     */
    "align-self"?:
      | CSSWideKeyword
      | "auto"
      | "flex-start"
      | "flex-end"
      | "center"
      | "baseline"
      | "stretch";
    /**
     * This property allows precise alignment of elements, such as graphics,
     * that do not have a baseline-table or lack the desired baseline in their baseline-table.
     * With the alignment-adjust property, the position of the baseline identified by the alignment-baseline
     * can be explicitly determined. It also determines precisely the alignment point for each glyph within a textual element.
     */
    "alignment-adjust"?: CSSWideKeyword | any;
    "alignment-baseline"?: CSSWideKeyword | any;
    /**
     * Defines a length of time to elapse before an animation starts, allowing an animation to begin execution some time after it is applied.
     */
    "animation-delay"?: CSSWideKeyword | any;
    /**
     * Defines whether an animation should run in reverse on some or all cycles.
     */
    "animation-direction"?: CSSWideKeyword | any;
    /**
     * Defines how long an animation runs for.
     */
     "animation-duration"?: CSSWideKeyword | any;
    /**
     * Specifies how many times an animation cycle should play.
     */
    "animation-iteration-count"?: CSSWideKeyword | any;
    /**
     * Defines the list of animations that apply to the element.
     */
    "animation-name"?: CSSWideKeyword | any;
    /**
     * Defines whether an animation is running or paused.
     */
    "animation-play-state"?: CSSWideKeyword | any;
    /**
     * Allows changing the style of any element to platform-based interface elements or vice versa.
     */
    appearance?: CSSWideKeyword | any;
    /**
     * Determines whether or not the \u201Cback\u201D side of a transformed element is visible when facing the viewer.
     */
    "backface-visibility"?: CSSWideKeyword | any;
    /**
     * Shorthand property to set the values for one or more of:
     * background-clip, background-color, background-image,
     * background-origin, background-position, background-repeat,
     * background-size, and background-attachment.
     */
    background?: CSSWideKeyword | any;
    /**
     * If a background-image is specified, this property determines
     * whether that image's position is fixed within the viewport,
     * or scrolls along with its containing block.
     * See CSS 3 background-attachment property https://drafts.csswg.org/css-backgrounds-3/#the-background-attachment
     */
    "background-attachment"?: CSSWideKeyword | "scroll" | "fixed" | "local";
    /**
     * This property describes how the element's background images should blend with each other and the element's background color.
     * The value is a list of blend modes that corresponds to each background image. Each element in the list will apply to the
     * corresponding element of background-image. If a property doesn\u2019t have enough comma-separated values to match the number of layers,
     * the UA must calculate its used value by repeating the list of values until there are enough.
     */
    "background-blend-mode"?: CSSWideKeyword | any;
    /**
     * Sets the background color of an element.
     */
    "background-color"?: CSSWideKeyword | any;
    "background-composite"?: CSSWideKeyword | any;
    /**
     * Applies one or more background images to an element. These can be any valid CSS image, including url() paths to image files or CSS gradients.
     */
    "background-image"?: CSSWideKeyword | any;
    /**
     * Specifies what the background-position property is relative to.
     */
    "background-origin"?: CSSWideKeyword | any;
    /**
     * Sets the position of a background image.
     */
    "background-position"?: CSSWideKeyword | any;
    /**
     * Background-repeat defines if and how background images will be repeated after they have been sized and positioned
     */
    "background-repeat"?: CSSWideKeyword | any;
    /**
     * Defines the size of the background images
     */
    "background-size"?: CSSWideKeyword | any;
    /**
     * Obsolete - spec retired, not implemented.
     */
    "baseline-shift"?: CSSWideKeyword | any;
    /**
     * Non standard. Sets or retrieves the location of the Dynamic HTML (DHTML) behavior.
     */
    behavior?: CSSWideKeyword | any;
    /**
     * Shorthand property that defines the different properties of all four sides of an element's border in a single declaration.
     * It can be used to set border-width, border-style and border-color, or a subset of these.
     */
    border?: CSSWideKeyword | any;
    /**
     * Shorthand that sets the values of border-bottom-color,
     * border-bottom-style, and border-bottom-width.
     */
    "border-bottom"?: CSSWideKeyword | any;
    /**
     * Sets the color of the bottom border of an element.
     */
    "border-bottom-color"?: CSSWideKeyword | any;
    /**
     * Defines the shape of the border of the bottom-left corner.
     */
    "border-bottom-left-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Defines the shape of the border of the bottom-right corner.
     */
    "border-bottom-right-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Sets the line style of the bottom border of a box.
     */
    "border-bottom-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's bottom border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-bottom-width"?: CSSWideKeyword | any;
    /**
     * Border-collapse can be used for collapsing the borders between table cells
     */
    "border-collapse"?: CSSWideKeyword | any;
    /**
     * The CSS border-color property sets the color of an element's four borders.
     * This property can have from one to four values, made up of the elementary properties:
     *      \u2022       border-top-color
     *      \u2022       border-right-color
     *      \u2022       border-bottom-color
     *      \u2022       border-left-color The default color is the currentColor of each of these values.
     * If you provide one value, it sets the color for the element. Two values set the horizontal and vertical values,
     * respectively. Providing three values sets the top, vertical, and bottom values, in that order.
     * Four values set all for sides: top, right, bottom, and left, in that order.
     */
    "border-color"?: CSSWideKeyword | any;
    /**
     * Specifies different corner clipping effects, such as scoop (inner curves), bevel (straight cuts) or notch (cut-off rectangles).
     * Works along with border-radius to specify the size of each corner effect.
     */
    "border-corner-shape"?: CSSWideKeyword | any;
    /**
     * The property border-image-source is used to set the image to be used instead of the border style.
     * If this is set to none the border-style is used instead.
     */
    "border-image-source"?: CSSWideKeyword | any;
    /**
     * The border-image-width CSS property defines the offset to use for dividing the border image in nine parts,
     * the top-left corner, central top edge, top-right-corner, central right edge, bottom-right corner, central bottom edge,
     * bottom-left corner, and central right edge. They represent inward distance from the top, right, bottom, and left edges.
     */
    "border-image-width"?: CSSWideKeyword | any;
    /**
     * Shorthand property that defines the border-width, border-style and border-color of an element's left border in a single declaration.
     * Note that you can use the corresponding longhand properties to set specific individual properties of the left border \u2014 border-left-width,
     * border-left-style and border-left-color.
     */
    "border-left"?: CSSWideKeyword | any;
    /**
     * The CSS border-left-color property sets the color of an element's left border. This page explains the border-left-color value,
     * but often you will find it more convenient to fix the border's left color as part of a shorthand set, either border-left or border-color.
     * Colors can be defined several ways. For more information, see Usage.
     */
    "border-left-color"?: CSSWideKeyword | any;
    /**
     * Sets the style of an element's left border. To set all four borders, use the shorthand property, border-style.
     * Otherwise, you can set the borders individually with border-top-style, border-right-style, border-bottom-style, border-left-style.
     */
    "border-left-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's left border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-left-width"?: CSSWideKeyword | any;
    /**
     * Shorthand property that sets the rounding of all four corners.
     */
    "border-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Shorthand property that defines the border-width, border-style and border-color of an element's right border
     * in a single declaration. Note that you can use the corresponding longhand properties to set specific
     * individual properties of the right border \u2014 border-right-width, border-right-style and border-right-color.
     */
    "border-right"?: CSSWideKeyword | any;
    /**
     * Sets the color of an element's right border. This page explains the border-right-color value,
     * but often you will find it more convenient to fix the border's right color as part of a shorthand set,
     * either border-right or border-color.
     * Colors can be defined several ways. For more information, see Usage.
     */
    "border-right-color"?: CSSWideKeyword | any;
    /**
     * Sets the style of an element's right border. To set all four borders, use the shorthand property,
     * border-style. Otherwise, you can set the borders individually with border-top-style, border-right-style,
     * border-bottom-style, border-left-style.
     */
    "border-right-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's right border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-right-width"?: CSSWideKeyword | any;
    /**
     * Specifies the distance between the borders of adjacent cells.
     */
    "border-spacing"?: CSSWideKeyword | any;
    /**
     * Sets the style of an element's four borders. This property can have from one to four values.
     * With only one value, the value will be applied to all four borders;
     * otherwise, this works as a shorthand property for each of border-top-style, border-right-style,
     * border-bottom-style, border-left-style, where each border style may be assigned a separate value.
     */
    "border-style"?: CSSWideKeyword | any;
    /**
     * Shorthand property that defines the border-width, border-style and border-color of an element's top border
     * in a single declaration. Note that you can use the corresponding longhand properties to set specific
     * individual properties of the top border \u2014 border-top-width, border-top-style and border-top-color.
     */
    "border-top"?: CSSWideKeyword | any;
    /**
     * Sets the color of an element's top border. This page explains the border-top-color value,
     * but often you will find it more convenient to fix the border's top color as part of a shorthand set,
     * either border-top or border-color.
     * Colors can be defined several ways. For more information, see Usage.
     */
    "border-top-color"?: CSSWideKeyword | any;
    /**
     * Sets the rounding of the top-left corner of the element.
     */
    "border-top-left-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Sets the rounding of the top-right corner of the element.
     */
    "border-top-right-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Sets the style of an element's top border. To set all four borders, use the shorthand property, border-style.
     * Otherwise, you can set the borders individually with border-top-style, border-right-style, border-bottom-style, border-left-style.
     */
    "border-top-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's top border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-top-width"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's four borders. This property can have from one to four values.
     * This is a shorthand property for setting values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-width"?: CSSWideKeyword | any;
    /**
     * This property specifies how far an absolutely positioned box's bottom margin edge
     * is offset above the bottom edge of the box's containing block. For relatively positioned boxes,
     * the offset is with respect to the bottom edges of the box itself
     * (i.e., the box is given a position in the normal flow, then offset from that position according to these properties).
     */
    bottom?: CSSWideKeyword | any;
    /**
     * Obsolete.
     */
    "box-align"?: CSSWideKeyword | any;
    /**
     * Breaks a box into fragments creating new borders,
     * padding and repeating backgrounds or lets it stay as a continuous box on a page break,
     * column break, or, for inline elements, at a line break.
     */
    "box-decoration-break"?: CSSWideKeyword | any;
    /**
     * Deprecated
     */
    "box-direction"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been replaced by the flex-wrap property.
     * Gets or sets a value that specifies the direction to add successive rows or columns when the value of box-lines is set to multiple.
     */
    "box-line-progression"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been replaced by the flex-wrap property.
     * Gets or sets a value that specifies whether child elements wrap onto multiple lines or columns based on the space available in the object.
     */
    "box-lines"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been replaced by flex-order.
     * Specifies the ordinal group that a child element of the object belongs to.
     * This ordinal value identifies the display order (along the axis defined by the box-orient property) for the group.
     */
    "box-ordinal-group"?: CSSWideKeyword | any;
    /**
     * Deprecated.
     */
    "box-flex"?: CSSWideKeyword | number;
    /**
     * Deprecated.
     */
    "box-flex-group"?: CSSWideKeyword | number;
    /**
     * Cast a drop shadow from the frame of almost any element.
     * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow
     */
    "box-shadow"?: CSSWideKeyword | any;
    /**
     * The CSS break-after property allows you to force a break on multi-column layouts.
     * More specifically, it allows you to force a break after an element.
     * It allows you to determine if a break should occur, and what type of break it should be.
     * The break-after CSS property describes how the page, column or region break behaves after the generated box.
     * If there is no generated box, the property is ignored.
     */
    "break-after"?: CSSWideKeyword | any;
    /**
     * Control page/column/region breaks that fall above a block of content
     */
    "break-before"?: CSSWideKeyword | any;
    /**
     * Control page/column/region breaks that fall within a block of content
     */
    "break-inside"?: CSSWideKeyword | any;
    /**
     * The clear CSS property specifies if an element can be positioned next to
     * or must be positioned below the floating elements that precede it in the markup.
     */
    clear?: CSSWideKeyword | any;
    /**
     * Deprecated; see clip-path.
     * Lets you specify the dimensions of an absolutely positioned element that should be visible,
     * and the element is clipped into this shape, and displayed.
     */
    clip?: CSSWideKeyword | any;
    /**
     * Clipping crops an graphic, so that only a portion of the graphic is rendered, or filled.
     * This clip-rule property, when used with the clip-path property, defines which clip rule, or algorithm,
     * to use when filling the different parts of a graphics.
     */
    "clip-rule"?: CSSWideKeyword | any;
    /**
     * The color property sets the color of an element's foreground content (usually text),
     * accepting any standard CSS color from keywords and hex values to RGB(a) and HSL(a).
     */
    color?: CSSWideKeyword | any;
    /**
     * Describes the number of columns of the element.
     * See CSS 3 column-count property https://www.w3.org/TR/css3-multicol/#cc
     */
    "column-count"?: CSSWideKeyword | number | "auto";
    /**
     * Specifies how to fill columns (balanced or sequential).
     */
    "column-fill"?: CSSWideKeyword | any;
    /**
     * The column-gap property controls the width of the gap between columns in multi-column elements.
     */
    "column-gap"?: CSSWideKeyword | any;
    /**
     * Sets the width, style, and color of the rule between columns.
     */
    "column-rule"?: CSSWideKeyword | any;
    /**
     * Specifies the color of the rule between columns.
     */
    "column-rule-color"?: CSSWideKeyword | any;
    /**
     * Specifies the width of the rule between columns.
     */
    "column-rule-width"?: CSSWideKeyword | any;
    /**
     * The column-span CSS property makes it possible for an element to span across all columns when its value is set to all.
     * An element that spans more than one column is called a spanning element.
     */
    "column-span"?: CSSWideKeyword | any;
    /**
     * Specifies the width of columns in multi-column elements.
     */
    "column-width"?: CSSWideKeyword | any;
    /**
     * This property is a shorthand property for setting column-width and/or column-count.
     */
    columns?: CSSWideKeyword | any;
    /**
     * The counter-increment property accepts one or more names of counters (identifiers),
     * each one optionally followed by an integer which specifies the value by which the counter should be incremented
     * (e.g. if the value is 2, the counter increases by 2 each time it is invoked).
     */
    "counter-increment"?: CSSWideKeyword | any;
    /**
     * The counter-reset property contains a list of one or more names of counters,
     * each one optionally followed by an integer (otherwise, the integer defaults to 0.).
     * Each time the given element is invoked, the counters specified by the property are set to the given integer.
     */
    "counter-reset"?: CSSWideKeyword | any;
    /**
     * The cue property specifies sound files (known as an "auditory icon") to be played by speech media agents
     * before and after presenting an element's content; if only one file is specified, it is played both before and after.
     * The volume at which the file(s) should be played, relative to the volume of the main element, may also be specified.
     * The icon files may also be set separately with the cue-before and cue-after properties.
     */
    cue?: CSSWideKeyword | any;
    /**
     * The cue-after property specifies a sound file (known as an "auditory icon") to be played by speech media agents
     * after presenting an element's content; the volume at which the file should be played may also be specified.
     * The shorthand property cue sets cue sounds for both before and after the element is presented.
     */
    "cue-after"?: CSSWideKeyword | any;
    /**
     * Specifies the mouse cursor displayed when the mouse pointer is over an element.
     */
    cursor?: CSSWideKeyword | any;
    /**
     * The direction CSS property specifies the text direction/writing direction. The rtl is used for Hebrew or Arabic text, the ltr is for other languages.
     */
    direction?: CSSWideKeyword | any;
    /**
     * This property specifies the type of rendering box used for an element. It is a shorthand property for many other display properties.
     */
    display?: CSSWideKeyword | any;
    /**
     * The \u2018fill\u2019 property paints the interior of the given graphical element.
     * The area to be painted consists of any areas inside the outline of the shape.
     * To determine the inside of the shape, all subpaths are considered,
     * and the interior is determined according to the rules associated with the current value of the \u2018fill-rule\u2019 property.
     * The zero-width geometric outline of a shape is included in the area to be painted.
     */
    fill?: CSSWideKeyword | any;
    /**
     * SVG: Specifies the opacity of the color or the content the current object is filled with.
     * See SVG 1.1 https://www.w3.org/TR/SVG/painting.html#FillOpacityProperty
     */
    "fill-opacity"?: CSSWideKeyword | number;
    /**
     * The \u2018fill-rule\u2019 property indicates the algorithm which is to be used to determine what parts of the canvas are included inside the shape.
     * For a simple, non-intersecting path, it is intuitively clear what region lies "inside";
     * however, for a more complex path, such as a path that intersects itself or where one subpath encloses another,
     * the interpretation of "inside" is not so obvious.
     * The \u2018fill-rule\u2019 property provides two options for how the inside of a shape is determined:
     */
    "fill-rule"?: CSSWideKeyword | any;
    /**
     * Applies various image processing effects. This property is largely unsupported. See Compatibility section for more information.
     */
    filter?: CSSWideKeyword | any;
    /**
     * Shorthand for \`flex-grow\`, \`flex-shrink\`, and \`flex-basis\`.
     */
    flex?: CSSWideKeyword | number | string;
    /**
     * Obsolete, do not use. This property has been renamed to align-items.
     * Specifies the alignment (perpendicular to the layout axis defined by the flex-direction property) of child elements of the object.
     */
    "flex-align"?: CSSWideKeyword | any;
    /**
     * The flex-basis CSS property describes the initial main size of the flex item
     * before any free space is distributed according to the flex factors described in the flex property (flex-grow and flex-shrink).
     */
    "flex-basis"?: CSSWideKeyword | any;
    /**
     * The flex-direction CSS property describes how flex items are placed in the flex container, by setting the direction of the flex container's main axis.
     */
    "flex-direction"?: CSSWideKeyword | "row" | "row-reverse" | "column" | "column-reverse";
    /**
     * The flex-flow CSS property defines the flex container's main and cross axis. It is a shorthand property for the flex-direction and flex-wrap properties.
     */
    "flex-flow"?: CSSWideKeyword | string;
    /**
     * Specifies the flex grow factor of a flex item.
     * See CSS flex-grow property https://drafts.csswg.org/css-flexbox-1/#flex-grow-property
     */
    "flex-grow"?: CSSWideKeyword | number;
    /**
     * Do not use. This property has been renamed to align-self
     * Specifies the alignment (perpendicular to the layout axis defined by flex-direction) of child elements of the object.
     */
    "flex-item-align"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been renamed to align-content.
     * Specifies how a flexbox's lines align within the flexbox when there is extra space along the axis that is perpendicular to the axis defined by the flex-direction property.
     */
    "flex-line-pack"?: CSSWideKeyword | any;
    /**
     * Gets or sets a value that specifies the ordinal group that a flexbox element belongs to. This ordinal value identifies the display order for the group.
     */
    "flex-order"?: CSSWideKeyword | any;
    /**
     * Specifies the flex shrink factor of a flex item.
     * See CSS flex-shrink property https://drafts.csswg.org/css-flexbox-1/#flex-shrink-property
     */
    "flex-shrink"?: CSSWideKeyword | number;
    /**
     * Specifies whether flex items are forced into a single line or can be wrapped onto multiple lines.
     * If wrapping is allowed, this property also enables you to control the direction in which lines are stacked.
     * See CSS flex-wrap property https://drafts.csswg.org/css-flexbox-1/#flex-wrap-property
     */
    "flex-wrap"?: CSSWideKeyword | "nowrap" | "wrap" | "wrap-reverse";
    /**
     * Elements which have the style float are floated horizontally.
     * These elements can move as far to the left or right of the containing element.
     * All elements after the floating element will flow around it, but elements before the floating element are not impacted.
     * If several floating elements are placed after each other, they will float next to each other as long as there is room.
     */
    float?: CSSWideKeyword | any;
    /**
     * Flows content from a named flow (specified by a corresponding flow-into) through selected elements to form a dynamic chain of layout regions.
     */
    "flow-from"?: CSSWideKeyword | any;
    /**
     * The font property is shorthand that allows you to do one of two things: you can either set up six of the most mature font properties in one line,
     * or you can set one of a choice of keywords to adopt a system font setting.
     */
    font?: CSSWideKeyword | any;
    /**
     * The font-family property allows one or more font family names and/or generic family names to be specified for usage on the selected element(s)' text.
     * The browser then goes through the list; for each character in the selection it applies the first font family that has an available glyph for that character.
     */
    "font-family"?: CSSWideKeyword | any;
    /**
     * The font-kerning property allows contextual adjustment of inter-glyph spacing, i.e. the spaces between the characters in text.
     * This property controls <bold>metric kerning</bold> - that utilizes adjustment data contained in the font. Optical Kerning is not supported as yet.
     */
    "font-kerning"?: CSSWideKeyword | any;
    /**
     * Specifies the size of the font. Used to compute em and ex units.
     * See CSS 3 font-size property https://www.w3.org/TR/css-fonts-3/#propdef-font-size
     */
    "font-size"?:
      | CSSWideKeyword
      | "xx-small"
      | "x-small"
      | "small"
      | "medium"
      | "large"
      | "x-large"
      | "xx-large"
      | "larger"
      | "smaller"
      | CSSLength
      | CSSPercentage;
    /**
     * The font-size-adjust property adjusts the font-size of the fallback fonts defined with font-family,
     * so that the x-height is the same no matter what font is used.
     * This preserves the readability of the text when fallback happens.
     * See CSS 3 font-size-adjust property https://www.w3.org/TR/css-fonts-3/#propdef-font-size-adjust
     */
    "font-size-adjust"?: CSSWideKeyword | "none" | number;
    /**
     * Allows you to expand or condense the widths for a normal, condensed, or expanded font face.
     * See CSS 3 font-stretch property https://drafts.csswg.org/css-fonts-3/#propdef-font-stretch
     */
    "font-stretch"?:
      | CSSWideKeyword
      | "normal"
      | "ultra-condensed"
      | "extra-condensed"
      | "condensed"
      | "semi-condensed"
      | "semi-expanded"
      | "expanded"
      | "extra-expanded"
      | "ultra-expanded";
    /**
     * The font-style property allows normal, italic, or oblique faces to be selected.
     * Italic forms are generally cursive in nature while oblique faces are typically sloped versions of the regular face.
     * Oblique faces can be simulated by artificially sloping the glyphs of the regular face.
     * See CSS 3 font-style property https://www.w3.org/TR/css-fonts-3/#propdef-font-style
     */
    "font-style"?: CSSWideKeyword | "normal" | "italic" | "oblique";
    /**
     * This value specifies whether the user agent is allowed to synthesize bold or oblique font faces when a font family lacks bold or italic faces.
     */
    "font-synthesis"?: CSSWideKeyword | any;
    /**
     * The font-variant property enables you to select the small-caps font within a font family.
     */
    "font-variant"?: CSSWideKeyword | any;
    /**
     * Fonts can provide alternate glyphs in addition to default glyph for a character. This property provides control over the selection of these alternate glyphs.
     */
    "font-variant-alternates"?: CSSWideKeyword | any;
    /**
     * Specifies the weight or boldness of the font.
     * See CSS 3 'font-weight' property https://www.w3.org/TR/css-fonts-3/#propdef-font-weight
     */
    "font-weight"?:
      | CSSWideKeyword
      | "normal"
      | "bold"
      | "bolder"
      | "lighter"
      | 100
      | 200
      | 300
      | 400
      | 500
      | 600
      | 700
      | 800
      | 900;
    /**
     * Lays out one or more grid items bound by 4 grid lines. Shorthand for setting grid-column-start, grid-column-end, grid-row-start, and grid-row-end in a single declaration.
     */
    "grid-area"?: CSSWideKeyword | any;
    /**
     * Controls a grid item's placement in a grid area, particularly grid position and a grid span. Shorthand for setting grid-column-start and grid-column-end in a single declaration.
     */
    "grid-column"?: CSSWideKeyword | any;
    /**
     * Controls a grid item's placement in a grid area as well as grid position and a grid span.
     * The grid-column-end property (with grid-row-start, grid-row-end, and grid-column-start) determines a grid item's placement by specifying the grid lines of a grid item's grid area.
     */
    "grid-column-end"?: CSSWideKeyword | any;
    /**
     * Determines a grid item's placement by specifying the starting grid lines of a grid item's grid area.
     * A grid item's placement in a grid area consists of a grid position and a grid span.
     * See also ( grid-row-start, grid-row-end, and grid-column-end)
     */
    "grid-column-start"?: CSSWideKeyword | any;
    /**
     * Gets or sets a value that indicates which row an element within a Grid should appear in. Shorthand for setting grid-row-start and grid-row-end in a single declaration.
     */
    "grid-row"?: CSSWideKeyword | any;
    /**
     * Determines a grid item\u2019s placement by specifying the block-end. A grid item's placement in a grid area consists of a grid position and a grid span.
     * The grid-row-end property (with grid-row-start, grid-column-start, and grid-column-end) determines a grid item's placement by specifying the grid lines of a grid item's grid area.
     */
    "grid-row-end"?: CSSWideKeyword | any;
    /**
     * Specifies a row position based upon an integer location, string value, or desired row size.
     * css/properties/grid-row is used as short-hand for grid-row-position and grid-row-position
     */
    "grid-row-position"?: CSSWideKeyword | any;
    "grid-row-span"?: CSSWideKeyword | any;
    /**
     * Specifies named grid areas which are not associated with any particular grid item, but can be referenced from the grid-placement properties.
     * The syntax of the grid-template-areas property also provides a visualization of the structure of the grid, making the overall layout of the grid container easier to understand.
     */
    "grid-template-areas"?: CSSWideKeyword | any;
    /**
     * Specifies (with grid-template-rows) the line names and track sizing functions of the grid.
     * Each sizing function can be specified as a length, a percentage of the grid container\u2019s size,
     * a measurement of the contents occupying the column or row, or a fraction of the free space in the grid.
     */
    "grid-template-columns"?: CSSWideKeyword | any;
    /**
     * Specifies (with grid-template-columns) the line names and track sizing functions of the grid.
     * Each sizing function can be specified as a length, a percentage of the grid container\u2019s size,
     * a measurement of the contents occupying the column or row, or a fraction of the free space in the grid.
     */
    "grid-template-rows"?: CSSWideKeyword | any;
    /**
     * Sets the height of an element. The content area of the element height does not include the padding, border, and margin of the element.
     */
    height?: CSSWideKeyword | any;
    /**
     * Specifies the minimum number of characters in a hyphenated word
     */
    "hyphenate-limit-chars"?: CSSWideKeyword | any;
    /**
     * Indicates the maximum number of successive hyphenated lines in an element. The \u2018no-limit\u2019 value means that there is no limit.
     */
    "hyphenate-limit-lines"?: CSSWideKeyword | any;
    /**
     * Specifies the maximum amount of trailing whitespace (before justification) that may be left in a line before hyphenation is triggered
     * to pull part of a word from the next line back up into the current one.
     */
    "hyphenate-limit-zone"?: CSSWideKeyword | any;
    /**
     * Specifies whether or not words in a sentence can be split by the use of a manual or automatic hyphenation mechanism.
     */
    hyphens?: CSSWideKeyword | any;
    "ime-mode"?: CSSWideKeyword | any;
    /**
     * Defines how the browser distributes space between and around flex items
     * along the main-axis of their container.
     * See CSS justify-content property https://www.w3.org/TR/css-flexbox-1/#justify-content-property
     */
    "justify-content"?:
      | CSSWideKeyword
      | "flex-start"
      | "flex-end"
      | "center"
      | "space-between"
      | "space-around"
      | "space-evenly"
      | "stretch";
    "layout-grid"?: CSSWideKeyword | any;
    "layout-grid-char"?: CSSWideKeyword | any;
    "layout-grid-line"?: CSSWideKeyword | any;
    "layout-grid-mode"?: CSSWideKeyword | any;
    "layout-grid-type"?: CSSWideKeyword | any;
    /**
     * Sets the left edge of an element
     */
    left?: CSSWideKeyword | any;
    /**
     * The letter-spacing CSS property specifies the spacing behavior between text characters.
     */
    "letter-spacing"?: CSSWideKeyword | any;
    /**
     * Deprecated. Gets or sets line-breaking rules for text in selected languages such as Japanese, Chinese, and Korean.
     */
    "line-break"?: CSSWideKeyword | any;
    "line-clamp"?: CSSWideKeyword | number;
    /**
     * Specifies the height of an inline block level element.
     * See CSS 2.1 line-height property https://www.w3.org/TR/CSS21/visudet.html#propdef-line-height
     */
    "line-height"?: CSSWideKeyword | "normal" | number | CSSLength | CSSPercentage;
    /**
     * Shorthand property that sets the list-style-type, list-style-position and list-style-image properties in one declaration.
     */
    "list-style"?: CSSWideKeyword | any;
    /**
     * This property sets the image that will be used as the list item marker. When the image is available,
     * it will replace the marker set with the 'list-style-type' marker. That also means that if the image is not available,
     * it will show the style specified by list-style-property
     */
    "list-style-image"?: CSSWideKeyword | any;
    /**
     * Specifies if the list-item markers should appear inside or outside the content flow.
     */
    "list-style-position"?: CSSWideKeyword | any;
    /**
     * Specifies the type of list-item marker in a list.
     */
    "list-style-type"?: CSSWideKeyword | any;
    /**
     * The margin property is shorthand to allow you to set all four margins of an element at once.
     * Its equivalent longhand properties are margin-top, margin-right, margin-bottom and margin-left.
     * Negative values are also allowed.
     */
    margin?: CSSWideKeyword | any;
    /**
     * margin-bottom sets the bottom margin of an element.
     */
    "margin-bottom"?: CSSWideKeyword | any;
    /**
     * margin-left sets the left margin of an element.
     */
    "margin-left"?: CSSWideKeyword | any;
    /**
     * margin-right sets the right margin of an element.
     */
    "margin-right"?: CSSWideKeyword | any;
    /**
     * margin-top sets the top margin of an element.
     */
    "margin-top"?: CSSWideKeyword | any;
    /**
     * The marquee-direction determines the initial direction in which the marquee content moves.
     */
    "marquee-direction"?: CSSWideKeyword | any;
    /**
     * The 'marquee-style' property determines a marquee's scrolling behavior.
     */
    "marquee-style"?: CSSWideKeyword | any;
    /**
     * This property is shorthand for setting mask-image, mask-mode, mask-repeat, mask-position, mask-clip, mask-origin, mask-composite and mask-size.
     * Omitted values are set to their original properties' initial values.
     */
    mask?: CSSWideKeyword | any;
    /**
     * This property is shorthand for setting mask-border-source, mask-border-slice, mask-border-width, mask-border-outset, and mask-border-repeat.
     * Omitted values are set to their original properties' initial values.
     */
    "mask-border"?: CSSWideKeyword | any;
    /**
     * This property specifies how the images for the sides and the middle part of the mask image are scaled and tiled.
     * The first keyword applies to the horizontal sides, the second one applies to the vertical ones.
     * If the second keyword is absent, it is assumed to be the same as the first, similar to the CSS border-image-repeat property.
     */
    "mask-border-repeat"?: CSSWideKeyword | any;
    /**
     * This property specifies inward offsets from the top, right, bottom, and left edges of the mask image,
     * dividing it into nine regions: four corners, four edges, and a middle.
     * The middle image part is discarded and treated as fully transparent black unless the fill keyword is present.
     * The four values set the top, right, bottom and left offsets in that order, similar to the CSS border-image-slice property.
     */
    "mask-border-slice"?: CSSWideKeyword | any;
    /**
     * Specifies an image to be used as a mask. An image that is empty, fails to download, is non-existent, or cannot be displayed is ignored and does not mask the element.
     */
    "mask-border-source"?: CSSWideKeyword | any;
    /**
     * This property sets the width of the mask box image, similar to the CSS border-image-width property.
     */
    "mask-border-width"?: CSSWideKeyword | any;
    /**
     * Determines the mask painting area, which defines the area that is affected by the mask.
     * The painted content of an element may be restricted to this area.
     */
    "mask-clip"?: CSSWideKeyword | any;
    /**
     * For elements rendered as a single box, specifies the mask positioning area.
     * For elements rendered as multiple boxes (e.g., inline boxes on several lines, boxes on several pages)
     * specifies which boxes box-decoration-break operates on to determine the mask positioning area(s).
     */
    "mask-origin"?: CSSWideKeyword | any;
    /**
     * This property must not be used. It is no longer included in any standard or standard track specification,
     * nor is it implemented in any browser. It is only used when the text-align-last property is set to size.
     * It controls allowed adjustments of font-size to fit line content.
     */
    "max-font-size"?: CSSWideKeyword | any;
    /**
     * Sets the maximum height for an element. It prevents the height of the element to exceed the specified value.
     * If min-height is specified and is greater than max-height, max-height is overridden.
     */
    "max-height"?: CSSWideKeyword | any;
    /**
     * Sets the maximum width for an element. It limits the width property to be larger than the value specified in max-width.
     */
    "max-width"?: CSSWideKeyword | any;
    /**
     * Sets the minimum height for an element. It prevents the height of the element to be smaller than the specified value.
     * The value of min-height overrides both max-height and height.
     */
    "min-height"?: CSSWideKeyword | any;
    /**
     * Sets the minimum width of an element. It limits the width property to be not smaller than the value specified in min-width.
     */
    "min-width"?: CSSWideKeyword | any;
    /**
     * Specifies the transparency of an element.
     * See CSS 3 opacity property https://drafts.csswg.org/css-color-3/#opacity
     */
    opacity?: CSSWideKeyword | number;
    /**
     * Specifies the order used to lay out flex items in their flex container.
     * Elements are laid out in the ascending order of the order value.
     * See CSS order property https://drafts.csswg.org/css-flexbox-1/#order-property
     */
    order?: CSSWideKeyword | number;
    /**
     * In paged media, this property defines the minimum number of lines in
     * a block container that must be left at the bottom of the page.
     * See CSS 3 orphans, widows properties https://drafts.csswg.org/css-break-3/#widows-orphans
     */
    orphans?: CSSWideKeyword | number;
    /**
     * The CSS outline property is a shorthand property for setting one or more of the individual outline properties outline-style,
     * outline-width and outline-color in a single rule. In most cases the use of this shortcut is preferable and more convenient.
     * Outlines differ from borders in the following ways:
     *      \u2022       Outlines do not take up space, they are drawn above the content.
     *      \u2022       Outlines may be non-rectangular. They are rectangular in Gecko/Firefox.
     *              Internet Explorer attempts to place the smallest contiguous outline around all elements or shapes that are indicated to have an outline.
     *              Opera draws a non-rectangular shape around a construct.
     */
    outline?: CSSWideKeyword | any;
    /**
     * The outline-color property sets the color of the outline of an element. An outline is a line that is drawn around elements, outside the border edge, to make the element stand out.
     */
    "outline-color"?: CSSWideKeyword | any;
    /**
     * The outline-offset property offsets the outline and draw it beyond the border edge.
     */
    "outline-offset"?: CSSWideKeyword | any;
    /**
     * The overflow property controls how extra content exceeding the bounding box of an element is rendered.
     * It can be used in conjunction with an element that has a fixed width and height, to eliminate text-induced page distortion.
     */
    overflow?: CSSWideKeyword | "auto" | "hidden" | "scroll" | "visible";
    /**
     * Specifies the preferred scrolling methods for elements that overflow.
     */
    "overflow-style"?: CSSWideKeyword | any;
    /**
     * Controls how extra content exceeding the x-axis of the bounding box of an element is rendered.
     */
    "overflow-x"?: CSSWideKeyword | "auto" | "hidden" | "scroll" | "visible";
    /**
     * Controls how extra content exceeding the y-axis of the bounding box of an element is rendered.
     */
    "overflow-y"?: CSSWideKeyword | "auto" | "hidden" | "scroll" | "visible";
    /**
     * The padding optional CSS property sets the required padding space on one to four sides of an element.
     * The padding area is the space between an element and its border. Negative values are not allowed but decimal values are permitted.
     * The element size is treated as fixed, and the content of the element shifts toward the center as padding is increased.
     * The padding property is a shorthand to avoid setting each side separately (padding-top, padding-right, padding-bottom, padding-left).
     */
    padding?: CSSWideKeyword | any;
    /**
     * The padding-bottom CSS property of an element sets the padding space required on the bottom of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-bottom values, negative values of padding-bottom are invalid.
     */
    "padding-bottom"?: CSSWideKeyword | any;
    /**
     * The padding-left CSS property of an element sets the padding space required on the left side of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-left values, negative values of padding-left are invalid.
     */
    "padding-left"?: CSSWideKeyword | any;
    /**
     * The padding-right CSS property of an element sets the padding space required on the right side of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-right values, negative values of padding-right are invalid.
     */
    "padding-right"?: CSSWideKeyword | any;
    /**
     * The padding-top CSS property of an element sets the padding space required on the top of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-top values, negative values of padding-top are invalid.
     */
    "padding-top"?: CSSWideKeyword | any;
    /**
     * The page-break-after property is supported in all major browsers. With CSS3, page-break-* properties are only aliases of the break-* properties.
     * The CSS3 Fragmentation spec defines breaks for all CSS box fragmentation.
     */
    "page-break-after"?: CSSWideKeyword | any;
    /**
     * The page-break-before property sets the page-breaking behavior before an element.
     * With CSS3, page-break-* properties are only aliases of the break-* properties.
     * The CSS3 Fragmentation spec defines breaks for all CSS box fragmentation.
     */
    "page-break-before"?: CSSWideKeyword | any;
    /**
     * Sets the page-breaking behavior inside an element. With CSS3, page-break-* properties are only aliases of the break-* properties.
     * The CSS3 Fragmentation spec defines breaks for all CSS box fragmentation.
     */
    "page-break-inside"?: CSSWideKeyword | any;
    /**
     * The pause property determines how long a speech media agent should pause before and after presenting an element.
     * It is a shorthand for the pause-before and pause-after properties.
     */
    pause?: CSSWideKeyword | any;
    /**
     * The pause-after property determines how long a speech media agent should pause after presenting an element.
     * It may be replaced by the shorthand property pause, which sets pause time before and after.
     */
    "pause-after"?: CSSWideKeyword | any;
    /**
     * The pause-before property determines how long a speech media agent should pause before presenting an element.
     * It may be replaced by the shorthand property pause, which sets pause time before and after.
     */
    "pause-before"?: CSSWideKeyword | any;
    /**
     * The perspective property defines how far an element is placed from the view on the z-axis, from the screen to the viewer.
     * Perspective defines how an object is viewed. In graphic arts, perspective is the representation on a flat surface of what the viewer's eye would see in a 3D space.
     * (See Wikipedia for more information about graphical perspective and for related illustrations.)
     * The illusion of perspective on a flat surface, such as a computer screen,
     * is created by projecting points on the flat surface as they would appear if the flat surface were a window
     * through which the viewer was looking at the object. In discussion of virtual environments, this flat surface is called a projection plane.
     */
    perspective?: CSSWideKeyword | any;
    /**
     * The perspective-origin property establishes the origin for the perspective property.
     * It effectively sets the X and Y position at which the viewer appears to be looking at the children of the element.
     * When used with perspective, perspective-origin changes the appearance of an object,
     * as if a viewer were looking at it from a different origin.
     * An object appears differently if a viewer is looking directly at it versus looking at it from below, above, or from the side.
     * Thus, the perspective-origin is like a vanishing point.
     * The default value of perspective-origin is 50% 50%.
     * This displays an object as if the viewer's eye were positioned directly at the center of the screen, both top-to-bottom and left-to-right.
     * A value of 0% 0% changes the object as if the viewer was looking toward the top left angle.
     * A value of 100% 100% changes the appearance as if viewed toward the bottom right angle.
     */
    "perspective-origin"?: CSSWideKeyword | any;
    /**
     * The pointer-events property allows you to control whether an element can be the target for the pointing device (e.g, mouse, pen) events.
     */
    "pointer-events"?: CSSWideKeyword | any;
    /**
     * The position property controls the type of positioning used by an element within its parent elements.
     * The effect of the position property depends on a lot of factors, for example the position property of parent elements.
     */
    position?: CSSWideKeyword | "static" | "relative" | "absolute" | "fixed" | "sticky";
    /**
     * Obsolete: unsupported.
     * This property determines whether or not a full-width punctuation mark character should be trimmed if it appears at the beginning of a line,
     * so that its "ink" lines up with the first glyph in the line above and below.
     */
    "punctuation-trim"?: CSSWideKeyword | any;
    /**
     * Sets the type of quotation marks for embedded quotations.
     */
    quotes?: CSSWideKeyword | any;
    /**
     * Controls whether the last region in a chain displays additional 'overset' content according its default overflow property,
     * or if it displays a fragment of content as if it were flowing into a subsequent region.
     */
    "region-fragment"?: CSSWideKeyword | any;
    /**
     * The rest-after property determines how long a speech media agent should pause after presenting an element's main content,
     * before presenting that element's exit cue sound. It may be replaced by the shorthand property rest, which sets rest time before and after.
     */
    "rest-after"?: CSSWideKeyword | any;
    /**
     * The rest-before property determines how long a speech media agent should pause after presenting an intro cue sound for an element,
     * before presenting that element's main content. It may be replaced by the shorthand property rest, which sets rest time before and after.
     */
    "rest-before"?: CSSWideKeyword | any;
    /**
     * Specifies the position an element in relation to the right side of the containing element.
     */
    right?: CSSWideKeyword | any;
    "ruby-align"?: CSSWideKeyword | any;
    "ruby-position"?: CSSWideKeyword | any;
    /**
     * Defines the alpha channel threshold used to extract a shape from an image. Can be thought of as a "minimum opacity" threshold;
     * that is, a value of 0.5 means that the shape will enclose all the pixels that are more than 50% opaque.
     */
    "shape-image-threshold"?: CSSWideKeyword | any;
    /**
     * A future level of CSS Shapes will define a shape-inside property, which will define a shape to wrap content within the element.
     * See Editor's Draft <http://dev.w3.org/csswg/css-shapes/> and CSSWG wiki page on next-level plans <http://wiki.csswg.org/spec/css-shapes>
     */
    "shape-inside"?: CSSWideKeyword | any;
    /**
     * Adds a margin to a shape-outside. In effect, defines a new shape that is the smallest contour around all the points
     * that are the shape-margin distance outward perpendicular to each point on the underlying shape.
     * For points where a perpendicular direction is not defined (e.g., a triangle corner),
     * takes all points on a circle centered at the point and with a radius of the shape-margin distance.
     * This property accepts only non-negative values.
     */
    "shape-margin"?: CSSWideKeyword | any;
    /**
     * Declares a shape around which text should be wrapped, with possible modifications from the shape-margin property.
     * The shape defined by shape-outside and shape-margin changes the geometry of a float element's float area.
     */
    "shape-outside"?: CSSWideKeyword | any;
    /**
     * The speak property determines whether or not a speech synthesizer will read aloud the contents of an element.
     */
    speak?: CSSWideKeyword | any;
    /**
     * The speak-as property determines how the speech synthesizer interprets the content: words as whole words or as a sequence of letters,
     * numbers as a numerical value or a sequence of digits, punctuation as pauses in speech or named punctuation characters.
     */
    "speak-as"?: CSSWideKeyword | any;
    /**
     * SVG: Specifies the opacity of the outline on the current object.
     * See SVG 1.1 https://www.w3.org/TR/SVG/painting.html#StrokeOpacityProperty
     */
    "stroke-opacity"?: CSSWideKeyword | number;
    /**
     * SVG: Specifies the width of the outline on the current object.
     * See SVG 1.1 https://www.w3.org/TR/SVG/painting.html#StrokeWidthProperty
     */
    "stroke-width"?: CSSWideKeyword | CSSPercentage | CSSLength;
    /**
     * The tab-size CSS property is used to customise the width of a tab (U+0009) character.
     */
    "tab-size"?: CSSWideKeyword | any;
    /**
     * The 'table-layout' property controls the algorithm used to lay out the table cells, rows, and columns.
     */
    "table-layout"?: CSSWideKeyword | any;
    /**
     * The text-align CSS property describes how inline content like text is aligned in its parent block element.
     * text-align does not control the alignment of block elements itself, only their inline content.
     */
    "text-align"?: CSSWideKeyword | any;
    /**
     * The text-align-last CSS property describes how the last line of a block element or a line before line break is aligned in its parent block element.
     */
    "text-align-last"?: CSSWideKeyword | any;
    /**
     * The text-decoration CSS property is used to set the text formatting to underline, overline, line-through or blink.
     * underline and overline decorations are positioned under the text, line-through over it.
     */
    "text-decoration"?: CSSWideKeyword | any;
    /**
     * Sets the color of any text decoration, such as underlines, overlines, and strike throughs.
     */
    "text-decoration-color"?: CSSWideKeyword | any;
    /**
     * Sets what kind of line decorations are added to an element, such as underlines, overlines, etc.
     */
    "text-decoration-line"?: CSSWideKeyword | any;
    "text-decoration-line-through"?: CSSWideKeyword | any;
    "text-decoration-none"?: CSSWideKeyword | any;
    "text-decoration-overline"?: CSSWideKeyword | any;
    /**
     * Specifies what parts of an element\u2019s content are skipped over when applying any text decoration.
     */
    "text-decoration-skip"?: CSSWideKeyword | any;
    /**
     * This property specifies the style of the text decoration line drawn on the specified element.
     * The intended meaning for the values are the same as those of the border-style-properties.
     */
    "text-decoration-style"?: CSSWideKeyword | any;
    "text-decoration-underline"?: CSSWideKeyword | any;
    /**
     * The text-emphasis property will apply special emphasis marks to the elements text.
     * Slightly similar to the text-decoration property only that this property can have affect on the line-height.
     * It also is noted that this is shorthand for text-emphasis-style and for text-emphasis-color.
     */
    "text-emphasis"?: CSSWideKeyword | any;
    /**
     * The text-emphasis-color property specifies the foreground color of the emphasis marks.
     */
    "text-emphasis-color"?: CSSWideKeyword | any;
    /**
     * The text-emphasis-style property applies special emphasis marks to an element's text.
     */
    "text-emphasis-style"?: CSSWideKeyword | any;
    /**
     * This property helps determine an inline box's block-progression dimension,
     * derived from the text-height and font-size properties for non-replaced elements,
     * the height or the width for replaced elements, and the stacked block-progression dimension for inline-block elements.
     * The block-progression dimension determines the position of the padding, border and margin for the element.
     */
    "text-height"?: CSSWideKeyword | any;
    /**
     * Specifies the amount of space horizontally that should be left on the first line of the text of an element.
     * This horizontal spacing is at the beginning of the first line and is in respect to the left edge of the containing block box.
     */
    "text-indent"?: CSSWideKeyword | any;
    "text-justify-trim"?: CSSWideKeyword | any;
    "text-kashida-space"?: CSSWideKeyword | any;
    /**
     * The text-line-through property is a shorthand property for text-line-through-style, text-line-through-color and text-line-through-mode.
     * (Considered obsolete; use text-decoration instead.)
     */
    "text-line-through"?: CSSWideKeyword | any;
    /**
     * Specifies the line colors for the line-through text decoration.
     * (Considered obsolete; use text-decoration-color instead.)
     */
    "text-line-through-color"?: CSSWideKeyword | any;
    /**
     * Sets the mode for the line-through text decoration, determining whether the text decoration affects the space characters or not.
     * (Considered obsolete; use text-decoration-skip instead.)
     */
    "text-line-through-mode"?: CSSWideKeyword | any;
    /**
     * Specifies the line style for line-through text decoration.
     * (Considered obsolete; use text-decoration-style instead.)
     */
    "text-line-through-style"?: CSSWideKeyword | any;
    /**
     * Specifies the line width for the line-through text decoration.
     */
    "text-line-through-width"?: CSSWideKeyword | any;
    /**
     * The text-overflow shorthand CSS property determines how overflowed content that is not displayed is signaled to the users.
     * It can be clipped, display an ellipsis ('\u2026', U+2026 HORIZONTAL ELLIPSIS) or a Web author-defined string.
     * It covers the two long-hand properties text-overflow-mode and text-overflow-ellipsis
     */
    "text-overflow"?: CSSWideKeyword | any;
    /**
     * The text-overline property is the shorthand for the text-overline-style, text-overline-width, text-overline-color, and text-overline-mode properties.
     */
    "text-overline"?: CSSWideKeyword | any;
    /**
     * Specifies the line color for the overline text decoration.
     */
    "text-overline-color"?: CSSWideKeyword | any;
    /**
     * Sets the mode for the overline text decoration, determining whether the text decoration affects the space characters or not.
     */
    "text-overline-mode"?: CSSWideKeyword | any;
    /**
     * Specifies the line style for overline text decoration.
     */
    "text-overline-style"?: CSSWideKeyword | any;
    /**
     * Specifies the line width for the overline text decoration.
     */
    "text-overline-width"?: CSSWideKeyword | any;
    /**
     * The text-rendering CSS property provides information to the browser about how to optimize when rendering text.
     * Options are: legibility, speed or geometric precision.
     */
    "text-rendering"?: CSSWideKeyword | any;
    /**
     * Obsolete: unsupported.
     */
    "text-script"?: CSSWideKeyword | any;
    /**
     * The CSS text-shadow property applies one or more drop shadows to the text and <text-decorations> of an element.
     * Each shadow is specified as an offset from the text, along with optional color and blur radius values.
     */
    "text-shadow"?: CSSWideKeyword | any;
    /**
     * This property transforms text for styling purposes. (It has no effect on the underlying content.)
     */
    "text-transform"?: CSSWideKeyword | any;
    /**
     * Unsupported.
     * This property will add a underline position value to the element that has an underline defined.
     */
    "text-underline-position"?: CSSWideKeyword | any;
    /**
     * After review this should be replaced by text-decoration should it not?
     * This property will set the underline style for text with a line value for underline, overline, and line-through.
     */
    "text-underline-style"?: CSSWideKeyword | any;
    /**
     * This property specifies how far an absolutely positioned box's top margin edge is offset below the top edge of the box's containing block.
     * For relatively positioned boxes, the offset is with respect to the top edges of the box itself (i.e., the box is given a position in the normal flow,
     * then offset from that position according to these properties).
     */
    top?: CSSWideKeyword | any;
    /**
     * Determines whether touch input may trigger default behavior supplied by the user agent, such as panning or zooming.
     */
    "touch-action"?: CSSWideKeyword | any;
    /**
     * CSS transforms allow elements styled with CSS to be transformed in two-dimensional or three-dimensional space.
     * Using this property, elements can be translated, rotated, scaled, and skewed. The value list may consist of 2D and/or 3D transform values.
     */
    transform?: CSSWideKeyword | any;
    /**
     * This property defines the origin of the transformation axes relative to the element to which the transformation is applied.
     */
    "transform-origin"?: CSSWideKeyword | any;
    /**
     * This property allows you to define the relative position of the origin of the transformation grid along the z-axis.
     */
    "transform-origin-z"?: CSSWideKeyword | any;
    /**
     * This property specifies how nested elements are rendered in 3D space relative to their parent.
     */
    "transform-style"?: CSSWideKeyword | any;
    /**
     * The transition CSS property is a shorthand property for transition-property, transition-duration, transition-timing-function,
     * and transition-delay. It allows to define the transition between two states of an element.
     */
    transition?: CSSWideKeyword | any;
    /**
     * Defines when the transition will start. A value of \u20180s\u2019 means the transition will execute as soon as the property is changed.
     * Otherwise, the value specifies an offset from the moment the property is changed, and the transition will delay execution by that offset.
     */
    "transition-delay"?: CSSWideKeyword | any;
    /**
     * The 'transition-duration' property specifies the length of time a transition animation takes to complete.
     */
    "transition-duration"?: CSSWideKeyword | any;
    /**
     * The 'transition-property' property specifies the name of the CSS property to which the transition is applied.
     */
    "transition-property"?: CSSWideKeyword | any;
    /**
     * Sets the pace of action within a transition
     */
    "transition-timing-function"?: CSSWideKeyword | any;
    /**
     * The unicode-bidi CSS property specifies the level of embedding with respect to the bidirectional algorithm.
     */
    "unicode-bidi"?: CSSWideKeyword | any;
    /**
     * unicode-range allows you to set a specific range of characters to be downloaded from a font (embedded using @font-face) and made available for use on the current page.
     */
    "unicode-range"?: CSSWideKeyword | any;
    /**
     * This is for all the high level UX stuff.
     */
    "user-focus"?: CSSWideKeyword | any;
    /**
     * For inputing user content
     */
    "user-input"?: CSSWideKeyword | any;
    /**
     * The vertical-align property controls how inline elements or text are vertically aligned compared to the baseline.
     * If this property is used on table-cells it controls the vertical alignment of content of the table cell.
     */
    "vertical-align"?: CSSWideKeyword | any;
    /**
     * The visibility property specifies whether the boxes generated by an element are rendered.
     */
    visibility?: CSSWideKeyword | any;
    /**
     * The voice-balance property sets the apparent position (in stereo sound) of the synthesized voice for spoken media.
     */
    "voice-balance"?: CSSWideKeyword | any;
    /**
     * The voice-duration property allows the author to explicitly set the amount of time it should take a speech synthesizer to read an element's content,
     * for example to allow the speech to be synchronized with other media.
     * With a value of auto (the default) the length of time it takes to read the content is determined by the content itself and the voice-rate property.
     */
    "voice-duration"?: CSSWideKeyword | any;
    /**
     * The voice-family property sets the speaker's voice used by a speech media agent to read an element.
     * The speaker may be specified as a named character (to match a voice option in the speech reading software)
     * or as a generic description of the age and gender of the voice.
     * Similar to the font-family property for visual media,
     * a comma-separated list of fallback options may be given in case the speech reader does not recognize the character name
     * or cannot synthesize the requested combination of generic properties.
     */
    "voice-family"?: CSSWideKeyword | any;
    /**
     * The voice-pitch property sets pitch or tone (high or low) for the synthesized speech when reading an element;
     * the pitch may be specified absolutely or relative to the normal pitch for the voice-family used to read the text.
     */
    "voice-pitch"?: CSSWideKeyword | any;
    /**
     * The voice-range property determines how much variation in pitch or tone will be created by the speech synthesize when reading an element.
     * Emphasized text, grammatical structures and punctuation may all be rendered as changes in pitch,
     * this property determines how strong or obvious those changes are;
     * large ranges are associated with enthusiastic or emotional speech,
     * while small ranges are associated with flat or mechanical speech.
     */
    "voice-range"?: CSSWideKeyword | any;
    /**
     * The voice-rate property sets the speed at which the voice synthesized by a speech media agent will read content.
     */
    "voice-rate"?: CSSWideKeyword | any;
    /**
     * The voice-stress property sets the level of vocal emphasis to be used for synthesized speech reading the element.
     */
    "voice-stress"?: CSSWideKeyword | any;
    /**
     * The voice-volume property sets the volume for spoken content in speech media. It replaces the deprecated volume property.
     */
    "voice-volume"?: CSSWideKeyword | any;
    /**
     * The white-space property controls whether and how white space inside the element is collapsed, and whether lines may wrap at unforced "soft wrap" opportunities.
     */
    "white-space"?: CSSWideKeyword | any;
    /**
     * Obsolete: unsupported.
     */
    "white-space-treatment"?: CSSWideKeyword | any;
    /**
     * In paged media, this property defines the mimimum number of lines
     * that must be left at the top of the second page.
     * See CSS 3 orphans, widows properties https://drafts.csswg.org/css-break-3/#widows-orphans
     */
    widows?: CSSWideKeyword | number;
    /**
     * Specifies the width of the content area of an element. The content area of the element width does not include the padding, border, and margin of the element.
     */
    width?: CSSWideKeyword | any;
    /**
     * The word-break property is often used when there is long generated content that is strung together without and spaces or hyphens to beak apart.
     * A common case of this is when there is a long URL that does not have any hyphens. This case could potentially cause the breaking of the layout as it could extend past the parent element.
     */
    "word-break"?: CSSWideKeyword | any;
    /**
     * The word-spacing CSS property specifies the spacing behavior between "words".
     */
    "word-spacing"?: CSSWideKeyword | any;
    /**
     * An alias of css/properties/overflow-wrap, word-wrap defines whether to break words when the content exceeds the boundaries of its container.
     */
    "word-wrap"?: CSSWideKeyword | any;
    /**
     * Specifies how exclusions affect inline content within block-level elements. Elements lay out their inline content in their content area but wrap around exclusion areas.
     */
    "wrap-flow"?: CSSWideKeyword | any;
    /**
     * Set the value that is used to offset the inner wrap shape from other shapes. Inline content that intersects a shape with this property will be pushed by this shape's margin.
     */
    "wrap-margin"?: CSSWideKeyword | any;
    /**
     * Obsolete and unsupported. Do not use.
     * This CSS property controls the text when it reaches the end of the block in which it is enclosed.
     */
    "wrap-option"?: CSSWideKeyword | any;
    /**
     * writing-mode specifies if lines of text are laid out horizontally or vertically, and the direction which lines of text and blocks progress.
     */
    "writing-mode"?: CSSWideKeyword | any;
    /**
     * The z-index property specifies the z-order of an element and its descendants.
     * When elements overlap, z-order determines which one covers the other.
     * See CSS 2 z-index property https://www.w3.org/TR/CSS2/visuren.html#z-index
     */
    "z-index"?: CSSWideKeyword | "auto" | number;
    /**
     * Sets the initial zoom factor of a document defined by @viewport.
     * See CSS zoom descriptor https://drafts.csswg.org/css-device-adapt/#zoom-desc
     */
    zoom?: CSSWideKeyword | "auto" | number | CSSPercentage;
    [propertyName: string]: any;
  }
  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: string;
    className?: string;
    class?: string;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean;
    hidden?: boolean;
    id?: string;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    acceptCharset?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    htmlFor?: string;
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    href?: string;
    hreflang?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    httpequiv?: string;
    name?: string;
    httpEquiv?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    htmlFor?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: 'col' | 'row' | 'rowgroup' | 'colgroup';
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string;
    className?: string;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  interface IntrinsicElements {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    big: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableDataCellElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableHeaderCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/universal.js",
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "browser": {
        "development": {
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "import": "./dist/web.js",
        "require": "./dist/web.cjs"
      },
      "node": {
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/web.js",
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/types/index.d.ts":`declare const _default: import("hyper-dom-expressions").HyperScript;
export default _default;
`,"html/types/index.d.ts":`declare const _default: import("lit-dom-expressions").HTMLTag;
export default _default;
`,"store/types/index.d.ts":`export { createStore, unwrap, $RAW } from "./store";
export type { Store, SetStoreFunction, NotWrappable, SolidStore, StoreNode, StoreSetter, StorePathRange, ArrayFilterFn, Part, DeepReadonly, DeepMutable } from "./store";
export * from "./mutable";
export * from "./modifiers";
`,"store/types/modifiers.d.ts":`import { DeepMutable } from "./store";
export declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: DeepMutable<T>) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
`,"store/types/server.d.ts":`import type { DeepMutable, SetStoreFunction, Store } from "store";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: any): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: DeepMutable<T>) => void): (state: T) => T;
export {};
`,"store/types/store.d.ts":`import { Accessor } from "../..";
export declare const $RAW: unique symbol, $NODE: unique symbol, $NAME: unique symbol;
export declare type StoreNode = Record<PropertyKey, any>;
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export declare type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export declare type Store<T> = DeepReadonly<T>;
export declare function isWrappable(obj: any): any;
export declare function unwrap<T extends StoreNode>(item: any, set?: Set<unknown>): T;
export declare function getDataNodes(target: StoreNode): any;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): PropertyDescriptor | undefined;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function createDataNode(): Accessor<void> & {
    $: () => void;
};
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
export declare type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
export declare type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export declare type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export declare type ArrayFilterFn<T> = (item: DeepReadonly<T>, index: number) => boolean;
export declare type StoreSetter<T, U extends PropertyKey[] = []> = ((prevState: DeepReadonly<T>, traversed: U) => T | Partial<T> | DeepReadonly<T> | Partial<DeepReadonly<T>> | void) | T | Partial<T> | DeepReadonly<T> | Partial<DeepReadonly<T>>;
export declare type Part<T, K extends KeyOf<T> = KeyOf<T>> = [K] extends [never] ? never : K | readonly K[] | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
declare type W<T> = Exclude<T, NotWrappable>;
declare type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [readonly unknown[]] ? number : [T] extends [never] ? never : keyof T : keyof T;
declare type Rest<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | (0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : DistributeRest<W<T>, KeyOf<W<T>>, U>);
declare type DistributeRest<T, K, U extends PropertyKey[]> = [T] extends [never] ? never : K extends KeyOf<T> ? [Part<T, K>, ...Rest<T[K], [K, ...U]>] : never;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends KeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends StoreNode>(store: T | Store<T>, options?: {
    name?: string;
}): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal";
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal";
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): {
    [x: number]: () => any;
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`import { requestCallback } from "./scheduler";
import type { JSX } from "../jsx";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const NOTPENDING: {};
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
declare global {
    var _$afterUpdate: () => void;
}
export interface SignalState<T> {
    value?: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    pending: T | {};
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
    name?: string;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: Record<string, {
        value: unknown;
    }>;
    name?: string;
    componentName?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: number;
    tState?: number;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
declare type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export declare type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: Owner): T;
export declare type Accessor<T> = () => T;
export declare type Setter<T> = (undefined extends T ? (value?: undefined) => undefined : {}) & (<U extends T>(value: Exclude<U, Function> | ((prev: T) => U)) => U);
export declare type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export declare type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export declare type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
export declare function createComputed<Next, Init = undefined>(..._: undefined extends Init ? [fn: EffectFunction<Init | Next, Next>, value?: Init, options?: EffectOptions] : [fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions]): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
export declare function createRenderEffect<Next, Init = undefined>(..._: undefined extends Init ? [fn: EffectFunction<Init | Next, Next>, value?: Init, options?: EffectOptions] : [fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions]): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
export declare function createEffect<Next, Init = undefined>(..._: undefined extends Init ? [fn: EffectFunction<Init | Next, Next>, value?: Init, options?: EffectOptions] : [fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions]): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends _Next, Init = Next, _Next = Next>(fn: EffectFunction<Init | _Next, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
export declare function createMemo<Next extends _Next, Init = undefined, _Next = Next>(..._: undefined extends Init ? [fn: EffectFunction<Init | _Next, Next>, value?: Init, options?: MemoOptions<Next>] : [fn: EffectFunction<Init | _Next, Next>, value: Init, options?: MemoOptions<Next>]): Accessor<Next>;
export interface Resource<T> extends Accessor<T> {
    loading: boolean;
    error: any;
}
export declare type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => T | Promise<T> | undefined | null;
};
export declare type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export declare type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function to toggle the request, optional
 * @param fetcher - function that receives the source (or true) and an accessor for the last or initial value and returns a value or a Promise with the value:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, > = (
 *   sourceOutput: ReturnValue<typeof source>,
 *   info: ResourceFetcherInfo<T>
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes)
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function refetchResources(info?: unknown): Promise<any[]>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export declare type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
export declare type ReturnTypes<T> = T extends (() => any)[] ? {
    [I in keyof T]: ReturnTypes<T[I]>;
} : T extends () => any ? ReturnType<T> : never;
export declare type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: ReturnTypes<S>, prevInput: ReturnTypes<S>, v: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<T extends Array<() => any> | (() => any), U>(
 *   deps: T | T[],
 *   fn: (input: T, prevInput: T, prevValue?: U) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue?: U) => U | undefined;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S extends Accessor<unknown> | Accessor<unknown>[] | [], Next, Init = unknown>(deps: S, fn: OnEffectFunction<S, Init | Next, Next>, options?: OnOptions): EffectFunction<NoInfer<Init> | NoInfer<Next>, NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup(fn: () => void): () => void;
/**
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: Owner, fn: () => T): T;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export declare type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export declare function devComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function hashValue(v: any): string;
export declare function registerGraph(name: string, value: {
    value: unknown;
}): string;
interface GraphRecord {
    [k: string]: GraphRecord | unknown;
}
export declare function serializeGraph(owner?: Owner | null): GraphRecord;
export declare type ContextProviderComponent<T> = (props: {
    value: T;
    children: any;
}) => any;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: (props: { value: T; children: any }) => any;
 *   defaultValue: T;
 * }
 * export function createContext<T>(defaultValue?: T): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export declare type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement | JSX.FunctionElement>;
export declare type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): Accessor<ResolvedChildren>;
export declare type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
declare type SuspenseContext = Context<SuspenseContextType> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspenselist%3E-(experimental)
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspense%3E
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx";
export declare function enableHydration(): void;
export declare type PropsWithChildren<P = {}> = P & {
    children?: JSX.Element;
};
export declare type Component<P = {}> = (props: PropsWithChildren<P>) => JSX.Element;
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export declare type ComponentProps<T extends keyof JSX.IntrinsicElements | Component<any>> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : {};
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
declare type UnboxLazy<T> = T extends () => infer U ? U : T;
declare type BoxedTupleTypes<T extends any[]> = {
    [P in keyof T]: [UnboxLazy<T[P]>];
}[Exclude<keyof T, keyof any[]>];
declare type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never;
declare type UnboxIntersection<T> = T extends {
    0: infer U;
} ? U : never;
declare type MergeProps<T extends any[]> = UnboxIntersection<UnionToIntersection<BoxedTupleTypes<T>>>;
export declare function mergeProps<T extends any[]>(...sources: T): MergeProps<T>;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal";
import type { JSX } from "../jsx";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cfor%3E
 */
export declare function For<T, U extends JSX.Element>(props: {
    each: readonly T[] | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T, index: Accessor<number>) => U;
}): Accessor<U[]>;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cindex%3E
 */
export declare function Index<T, U extends JSX.Element>(props: {
    each: readonly T[] | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T>, index: number) => U;
}): Accessor<U[]>;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#%3Cshow%3E
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    fallback?: JSX.Element;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): () => JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): Accessor<JSX.Element>;
export declare type MatchProps<T> = {
    when: T | undefined | null | false;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Match<T>(props: MatchProps<T>): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cerrorboundary%3E
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): Accessor<JSX.Element>;
`,"types/render/hydration.d.ts":`export declare type HydrationContext = {
    id: string;
    count: number;
};
declare type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component";
export * from "./flow";
export * from "./Suspense";
export { sharedConfig } from "./hydration";
`,"types/server/index.d.ts":`export { createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, DEV, enableExternalSource } from "./reactive";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, refetchResources, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering";
export type { Component, Resource } from "./rendering";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: {};
export declare type Accessor<T> = () => T;
export declare type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
}
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): void;
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
export declare function children(fn: () => any): () => unknown;
export declare function runWithOwner(o: Owner, fn: () => any): any;
export declare function lookup(owner: Owner | null, key: symbol | string): any;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    [x: number]: () => any;
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
export {};
`,"types/server/rendering.d.ts":`import { Setter } from "./reactive";
import type { JSX } from "../jsx";
declare type PropsWithChildren<P> = P & {
    children?: JSX.Element;
};
export declare type Component<P = {}> = (props: PropsWithChildren<P>) => JSX.Element;
declare type PossiblyWrapped<T> = {
    [P in keyof T]: T[P] | (() => T[P]);
};
declare type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: PossiblyWrapped<T>): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
export declare function Show<T>(props: {
    when: T | false;
    fallback?: string;
    children: string | ((item: T) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
declare type MatchProps<T> = {
    when: T | false;
    children: string | ((item: T) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): any;
export interface Resource<T> {
    (): T | undefined;
    loading: boolean;
    error: any;
}
declare type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export declare type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export declare type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export declare type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function refetchResources(info?: unknown): void;
export declare function lazy(fn: () => Promise<{
    default: any;
}>): (props: any) => string;
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
declare type HydrationContext = {
    id: string;
    count: number;
    writeResource?: (id: string, v: Promise<any> | any, error?: boolean) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    async?: boolean;
    streaming?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): any;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType;
  getFirstChild(node: NodeType): NodeType;
  getNextSibling(node: NodeType): NodeType;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx";
export const Aliases: Record<string, string>;
export const PropAliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, count: number, isSVG?: boolean): Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function HydrationScript(): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
`,"web/types/core.d.ts":`import { createRoot, createRenderEffect, createComponent, getOwner, sharedConfig } from "../..";
declare function memo<T>(fn: () => T, equals: boolean): import("../..").Accessor<T>;
export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, memo, sharedConfig };
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client";
import { Component, JSX, Accessor } from "../..";
export * from "./client";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "../..";
export * from "./server-mock";
export declare const isServer = false;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cportal%3E
 */
export declare function Portal(props: {
    mount?: Node;
    useShadow?: boolean;
    isSVG?: boolean;
    children: JSX.Element;
}): Text;
declare type DynamicProps<T> = T & {
    children?: any;
    component?: Component<T> | string | keyof JSX.IntrinsicElements;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cdynamic%3E
 */
export declare function Dynamic<T>(props: DynamicProps<T>): Accessor<JSX.Element>;
`,"web/types/jsx.d.ts":`export { JSX } from "../..";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function resolveSSRNode(node: any): string;
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrSpread(accessor: any): () => string;
export declare function ssrBoolean(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function escape(html: string): string;
export declare function generateHydrationScript(): string;
export declare type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`})lf.createModel({"jsx-runtime.d.ts":'export * from "./types/jsx"',"package.json":`{
  "name": "solid-js",
  "description": "A declarative JavaScript library for building user interfaces.",
  "version": "1.3.17",
  "author": "Ryan Carniato",
  "license": "MIT",
  "homepage": "https://solidjs.com",
  "repository": {
    "type": "git",
    "url": "https://github.com/solidjs/solid"
  },
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/solid.cjs",
    "./dist/server.js": "./dist/solid.js"
  },
  "unpkg": "./dist/solid.cjs",
  "types": "types/index.d.ts",
  "sideEffects": false,
  "type": "module",
  "files": [
    "dist",
    "store/dist",
    "store/types",
    "web/dist",
    "web/types",
    "h/dist",
    "h/types",
    "html/dist",
    "html/types",
    "universal/dist",
    "universal/types",
    "types",
    "jsx-runtime.d.ts"
  ],
  "exports": {
    ".": {
      "browser": {
        "development": {
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "import": "./dist/solid.js",
        "require": "./dist/solid.cjs"
      },
      "node": {
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/solid.js",
      "require": "./dist/solid.cjs"
    },
    "./dist/*": "./dist/*",
    "./store": {
      "browser": {
        "development": {
          "import": "./store/dist/dev.js",
          "require": "./store/dist/dev.cjs"
        },
        "import": "./store/dist/store.js",
        "require": "./store/dist/store.cjs"
      },
      "node": {
        "import": "./store/dist/server.js",
        "require": "./store/dist/server.cjs"
      },
      "development": {
        "import": "./store/dist/dev.js",
        "require": "./store/dist/dev.cjs"
      },
      "import": "./store/dist/store.js",
      "require": "./store/dist/store.cjs"
    },
    "./store/dist/*": "./store/dist/*",
    "./web": {
      "browser": {
        "development": {
          "import": "./web/dist/dev.js",
          "require": "./web/dist/dev.cjs"
        },
        "import": "./web/dist/web.js",
        "require": "./web/dist/web.cjs"
      },
      "node": {
        "import": "./web/dist/server.js",
        "require": "./web/dist/server.cjs"
      },
      "development": {
        "import": "./web/dist/dev.js",
        "require": "./web/dist/dev.cjs"
      },
      "import": "./web/dist/web.js",
      "require": "./web/dist/web.cjs"
    },
    "./web/dist/*": "./web/dist/*",
    "./universal": {
      "development": {
        "import": "./universal/dist/dev.js",
        "require": "./universal/dist/dev.cjs"
      },
      "import": "./universal/dist/universal.js",
      "require": "./universal/dist/universal.cjs"
    },
    "./universal/dist/*": "./universal/dist/*",
    "./h": {
      "import": "./h/dist/h.js",
      "require": "./h/dist/h.cjs"
    },
    "./h/dist/*": "./h/dist/*",
    "./html": {
      "import": "./html/dist/html.js",
      "require": "./html/dist/html.cjs"
    },
    "./html/dist/*": "./html/dist/*"
  },
  "scripts": {
    "prebuild": "npm run clean",
    "clean": "rimraf dist/ types/ coverage/ store/dist/ store/types/ web/dist/ web/types/ h/dist/ h/types/ html/dist/ html/types/",
    "build": "npm-run-all -cnl build:*",
    "build:link": "symlink-dir . node_modules/solid-js",
    "build:js": "ncp ../../node_modules/dom-expressions/src/jsx.d.ts ./src/jsx.d.ts && rollup -c",
    "build:types": "tsc --project ./tsconfig.build.json",
    "build:types-store": "tsc --project ./store/tsconfig.build.json && tsconfig-replace-paths --project ./store/tsconfig.types.json",
    "build:types-web": "tsc --project ./web/tsconfig.build.json && tsconfig-replace-paths --project ./web/tsconfig.types.json",
    "build:types-html": "tsc --project ./html/tsconfig.json",
    "build:types-h": "tsc --project ./h/tsconfig.json",
    "build:types-universal": "tsc --project ./universal/tsconfig.json",
    "bench": "node --allow-natives-syntax bench/bench.cjs",
    "test": "jest && npm run test:types",
    "test:coverage": "jest --coverage && npm run test:types",
    "test:types": "tsc --project tsconfig.test.json"
  },
  "keywords": [
    "solid",
    "solidjs",
    "ui",
    "reactive",
    "components",
    "compiler",
    "performance"
  ],
  "gitHead": "88ce357264a4966d38d143143a3efe8a394e57c0"
}
`,"h/package.json":`{
  "name": "solid-js/h",
  "main": "./dist/h.cjs",
  "module": "./dist/h.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"html/package.json":`{
  "name": "solid-js/html",
  "main": "./dist/html.cjs",
  "module": "./dist/html.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false
}
`,"store/package.json":`{
  "name": "solid-js/store",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/store.cjs",
    "./dist/server.js": "./dist/store.js"
  },
  "unpkg": "./dist/store.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "browser": {
        "development": {
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "import": "./dist/store.js",
        "require": "./dist/store.cjs"
      },
      "node": {
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/store.js",
      "require": "./dist/store.cjs"
    }
  }
}
`,"types/index.d.ts":`export { createRoot, createSignal, createEffect, createRenderEffect, createComputed, createReaction, createDeferred, createSelector, createMemo, createResource, onMount, onCleanup, onError, untrack, batch, on, enableScheduling, enableExternalSource, startTransition, useTransition, refetchResources, createContext, useContext, children, getListener, getOwner, runWithOwner, equalFn, $DEVCOMP, $PROXY } from "./reactive/signal";
export type { Accessor, Setter, Signal, Resource, ResourceReturn, ResourceFetcher, ResourceFetcherInfo, Context, ReturnTypes } from "./reactive/signal";
export * from "./reactive/observable";
export * from "./reactive/scheduler";
export * from "./reactive/array";
export * from "./render";
import type { JSX } from "./jsx";
declare type JSXElement = JSX.Element;
export type { JSXElement, JSX };
import { writeSignal, serializeGraph, registerGraph, hashValue } from "./reactive/signal";
declare let DEV: {
    writeSignal: typeof writeSignal;
    serializeGraph: typeof serializeGraph;
    registerGraph: typeof registerGraph;
    hashValue: typeof hashValue;
};
export { DEV };
declare global {
    var Solid$$: boolean;
}
`,"types/jsx.d.ts":`/**
 * Based on JSX types for Surplus and Inferno and adapted for \`dom-expressions\`.
 *
 * https://github.com/adamhaile/surplus/blob/master/index.d.ts
 * https://github.com/infernojs/inferno/blob/master/packages/inferno/src/core/types.ts
 */
type DOMElement = Element;

export namespace JSX {
  type Element =
    | Node
    | ArrayElement
    | FunctionElement
    | (string & {})
    | number
    | boolean
    | null
    | undefined;
  interface ArrayElement extends Array<Element> {}
  interface FunctionElement {
    (): Element;
  }
  interface ElementClass {
    // empty, libs can define requirements downstream
  }
  interface ElementAttributesProperty {
    // empty, libs can define requirements downstream
  }
  interface ElementChildrenAttribute {
    children: {};
  }
  interface EventHandler<T, E extends Event> {
    (
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ): void;
  }
  interface BoundEventHandler<T, E extends Event> {
    0: (
      data: any,
      e: E & {
        currentTarget: T;
        target: DOMElement;
      }
    ) => void;
    1: any;
  }
  type EventHandlerUnion<T, E extends Event> = EventHandler<T, E> | BoundEventHandler<T, E>;
  interface IntrinsicAttributes {
    ref?: unknown | ((e: unknown) => void);
  }
  interface CustomAttributes<T> {
    ref?: T | ((el: T) => void);
    classList?: {
      [k: string]: boolean | undefined;
    };
    $ServerOnly?: boolean;
  }
  interface Directives {}
  interface ExplicitProperties {}
  interface ExplicitAttributes {}
  interface CustomEvents {}
  interface CustomCaptureEvents {}
  type DirectiveAttributes = {
    [Key in keyof Directives as \`use:\${Key}\`]?: Directives[Key];
  };
  type PropAttributes = {
    [Key in keyof ExplicitProperties as \`prop:\${Key}\`]?: ExplicitProperties[Key];
  };
  type AttrAttributes = {
    [Key in keyof ExplicitAttributes as \`attr:\${Key}\`]?: ExplicitAttributes[Key];
  };
  type OnAttributes<T> = {
    [Key in keyof CustomEvents as \`on:\${Key}\`]?: EventHandler<T, CustomEvents[Key]>;
  }
  type OnCaptureAttributes<T> = {
    [Key in keyof CustomCaptureEvents as \`oncapture:\${Key}\`]?: EventHandler<T, CustomCaptureEvents[Key]>;
  }
  interface DOMAttributes<T> extends CustomAttributes<T>, DirectiveAttributes, PropAttributes, AttrAttributes, OnAttributes<T>, OnCaptureAttributes<T> {
    children?: Element;
    innerHTML?: string;
    innerText?: string | number;
    textContent?: string | number;
    onCopy?: EventHandlerUnion<T, ClipboardEvent>;
    onCut?: EventHandlerUnion<T, ClipboardEvent>;
    onPaste?: EventHandlerUnion<T, ClipboardEvent>;
    onCompositionEnd?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionStart?: EventHandlerUnion<T, CompositionEvent>;
    onCompositionUpdate?: EventHandlerUnion<T, CompositionEvent>;
    onFocus?: EventHandlerUnion<T, FocusEvent>;
    onFocusOut?: EventHandlerUnion<T, FocusEvent>;
    onFocusIn?: EventHandlerUnion<T, FocusEvent>;
    onBlur?: EventHandlerUnion<T, FocusEvent>;
    onChange?: EventHandlerUnion<T, Event>;
    onInvalid?: EventHandlerUnion<T, Event>;
    onInput?: EventHandlerUnion<T, InputEvent>;
    onBeforeInput?: EventHandlerUnion<T, InputEvent>;
    onReset?: EventHandlerUnion<T, Event>;
    onSubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onLoad?: EventHandlerUnion<T, Event>;
    onError?: EventHandlerUnion<T, Event>;
    onKeyDown?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyPress?: EventHandlerUnion<T, KeyboardEvent>;
    onKeyUp?: EventHandlerUnion<T, KeyboardEvent>;
    onGotPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onLostPointerCapture?: EventHandlerUnion<T, PointerEvent>;
    onPointerCancel?: EventHandlerUnion<T, PointerEvent>;
    onPointerDown?: EventHandlerUnion<T, PointerEvent>;
    onPointerEnter?: EventHandlerUnion<T, PointerEvent>;
    onPointerLeave?: EventHandlerUnion<T, PointerEvent>;
    onPointerMove?: EventHandlerUnion<T, PointerEvent>;
    onPointerOver?: EventHandlerUnion<T, PointerEvent>;
    onPointerOut?: EventHandlerUnion<T, PointerEvent>;
    onPointerUp?: EventHandlerUnion<T, PointerEvent>;
    onAbort?: EventHandlerUnion<T, Event>;
    onCanPlay?: EventHandlerUnion<T, Event>;
    onCanPlayThrough?: EventHandlerUnion<T, Event>;
    onDurationChange?: EventHandlerUnion<T, Event>;
    onEmptied?: EventHandlerUnion<T, Event>;
    onEncrypted?: EventHandlerUnion<T, Event>;
    onEnded?: EventHandlerUnion<T, Event>;
    onLoadedData?: EventHandlerUnion<T, Event>;
    onLoadedMetadata?: EventHandlerUnion<T, Event>;
    onLoadStart?: EventHandlerUnion<T, Event>;
    onPause?: EventHandlerUnion<T, Event>;
    onPlay?: EventHandlerUnion<T, Event>;
    onPlaying?: EventHandlerUnion<T, Event>;
    onProgress?: EventHandlerUnion<T, Event>;
    onRateChange?: EventHandlerUnion<T, Event>;
    onSeeked?: EventHandlerUnion<T, Event>;
    onSeeking?: EventHandlerUnion<T, Event>;
    onStalled?: EventHandlerUnion<T, Event>;
    onSuspend?: EventHandlerUnion<T, Event>;
    onTimeUpdate?: EventHandlerUnion<T, Event>;
    onVolumeChange?: EventHandlerUnion<T, Event>;
    onWaiting?: EventHandlerUnion<T, Event>;
    onClick?: EventHandlerUnion<T, MouseEvent>;
    onContextMenu?: EventHandlerUnion<T, MouseEvent>;
    onDblClick?: EventHandlerUnion<T, MouseEvent>;
    onDrag?: EventHandlerUnion<T, DragEvent>;
    onDragEnd?: EventHandlerUnion<T, DragEvent>;
    onDragEnter?: EventHandlerUnion<T, DragEvent>;
    onDragExit?: EventHandlerUnion<T, DragEvent>;
    onDragLeave?: EventHandlerUnion<T, DragEvent>;
    onDragOver?: EventHandlerUnion<T, DragEvent>;
    onDragStart?: EventHandlerUnion<T, DragEvent>;
    onDrop?: EventHandlerUnion<T, DragEvent>;
    onMouseDown?: EventHandlerUnion<T, MouseEvent>;
    onMouseEnter?: EventHandlerUnion<T, MouseEvent>;
    onMouseLeave?: EventHandlerUnion<T, MouseEvent>;
    onMouseMove?: EventHandlerUnion<T, MouseEvent>;
    onMouseOut?: EventHandlerUnion<T, MouseEvent>;
    onMouseOver?: EventHandlerUnion<T, MouseEvent>;
    onMouseUp?: EventHandlerUnion<T, MouseEvent>;
    onSelect?: EventHandlerUnion<T, UIEvent>;
    onTouchCancel?: EventHandlerUnion<T, TouchEvent>;
    onTouchEnd?: EventHandlerUnion<T, TouchEvent>;
    onTouchMove?: EventHandlerUnion<T, TouchEvent>;
    onTouchStart?: EventHandlerUnion<T, TouchEvent>;
    onScroll?: EventHandlerUnion<T, UIEvent>;
    onWheel?: EventHandlerUnion<T, WheelEvent>;
    onAnimationStart?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationEnd?: EventHandlerUnion<T, AnimationEvent>;
    onAnimationIteration?: EventHandlerUnion<T, AnimationEvent>;
    onTransitionEnd?: EventHandlerUnion<T, TransitionEvent>;

    // lower case events
    oncopy?: EventHandlerUnion<T, ClipboardEvent>;
    oncut?: EventHandlerUnion<T, ClipboardEvent>;
    onpaste?: EventHandlerUnion<T, ClipboardEvent>;
    oncompositionend?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionstart?: EventHandlerUnion<T, CompositionEvent>;
    oncompositionupdate?: EventHandlerUnion<T, CompositionEvent>;
    onfocus?: EventHandlerUnion<T, FocusEvent>;
    onfocusout?: EventHandlerUnion<T, FocusEvent>;
    onfocusin?: EventHandlerUnion<T, FocusEvent>;
    onblur?: EventHandlerUnion<T, FocusEvent>;
    onchange?: EventHandlerUnion<T, Event>;
    oninvalid?: EventHandlerUnion<T, Event>;
    oninput?: EventHandlerUnion<T, InputEvent>;
    onbeforeinput?: EventHandlerUnion<T, InputEvent>;
    onreset?: EventHandlerUnion<T, Event>;
    onsubmit?: EventHandlerUnion<
      T,
      Event & {
        submitter: HTMLElement;
      }
    >;
    onload?: EventHandlerUnion<T, Event>;
    onerror?: EventHandlerUnion<T, Event>;
    onkeydown?: EventHandlerUnion<T, KeyboardEvent>;
    onkeypress?: EventHandlerUnion<T, KeyboardEvent>;
    onkeyup?: EventHandlerUnion<T, KeyboardEvent>;
    ongotpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onlostpointercapture?: EventHandlerUnion<T, PointerEvent>;
    onpointercancel?: EventHandlerUnion<T, PointerEvent>;
    onpointerdown?: EventHandlerUnion<T, PointerEvent>;
    onpointerenter?: EventHandlerUnion<T, PointerEvent>;
    onpointerleave?: EventHandlerUnion<T, PointerEvent>;
    onpointermove?: EventHandlerUnion<T, PointerEvent>;
    onpointerover?: EventHandlerUnion<T, PointerEvent>;
    onpointerout?: EventHandlerUnion<T, PointerEvent>;
    onpointerup?: EventHandlerUnion<T, PointerEvent>;
    onabort?: EventHandlerUnion<T, Event>;
    oncanplay?: EventHandlerUnion<T, Event>;
    oncanplaythrough?: EventHandlerUnion<T, Event>;
    ondurationchange?: EventHandlerUnion<T, Event>;
    onemptied?: EventHandlerUnion<T, Event>;
    onencrypted?: EventHandlerUnion<T, Event>;
    onended?: EventHandlerUnion<T, Event>;
    onloadeddata?: EventHandlerUnion<T, Event>;
    onloadedmetadata?: EventHandlerUnion<T, Event>;
    onloadstart?: EventHandlerUnion<T, Event>;
    onpause?: EventHandlerUnion<T, Event>;
    onplay?: EventHandlerUnion<T, Event>;
    onplaying?: EventHandlerUnion<T, Event>;
    onprogress?: EventHandlerUnion<T, Event>;
    onratechange?: EventHandlerUnion<T, Event>;
    onseeked?: EventHandlerUnion<T, Event>;
    onseeking?: EventHandlerUnion<T, Event>;
    onstalled?: EventHandlerUnion<T, Event>;
    onsuspend?: EventHandlerUnion<T, Event>;
    ontimeupdate?: EventHandlerUnion<T, Event>;
    onvolumechange?: EventHandlerUnion<T, Event>;
    onwaiting?: EventHandlerUnion<T, Event>;
    onclick?: EventHandlerUnion<T, MouseEvent>;
    oncontextmenu?: EventHandlerUnion<T, MouseEvent>;
    ondblclick?: EventHandlerUnion<T, MouseEvent>;
    ondrag?: EventHandlerUnion<T, DragEvent>;
    ondragend?: EventHandlerUnion<T, DragEvent>;
    ondragenter?: EventHandlerUnion<T, DragEvent>;
    ondragexit?: EventHandlerUnion<T, DragEvent>;
    ondragleave?: EventHandlerUnion<T, DragEvent>;
    ondragover?: EventHandlerUnion<T, DragEvent>;
    ondragstart?: EventHandlerUnion<T, DragEvent>;
    ondrop?: EventHandlerUnion<T, DragEvent>;
    onmousedown?: EventHandlerUnion<T, MouseEvent>;
    onmouseenter?: EventHandlerUnion<T, MouseEvent>;
    onmouseleave?: EventHandlerUnion<T, MouseEvent>;
    onmousemove?: EventHandlerUnion<T, MouseEvent>;
    onmouseout?: EventHandlerUnion<T, MouseEvent>;
    onmouseover?: EventHandlerUnion<T, MouseEvent>;
    onmouseup?: EventHandlerUnion<T, MouseEvent>;
    onselect?: EventHandlerUnion<T, UIEvent>;
    ontouchcancel?: EventHandlerUnion<T, TouchEvent>;
    ontouchend?: EventHandlerUnion<T, TouchEvent>;
    ontouchmove?: EventHandlerUnion<T, TouchEvent>;
    ontouchstart?: EventHandlerUnion<T, TouchEvent>;
    onscroll?: EventHandlerUnion<T, UIEvent>;
    onwheel?: EventHandlerUnion<T, WheelEvent>;
    onanimationstart?: EventHandlerUnion<T, AnimationEvent>;
    onanimationend?: EventHandlerUnion<T, AnimationEvent>;
    onanimationiteration?: EventHandlerUnion<T, AnimationEvent>;
    ontransitionend?: EventHandlerUnion<T, TransitionEvent>;
  }
  type CSSWideKeyword = "initial" | "inherit" | "unset";
  type CSSPercentage = string;
  type CSSLength = number | string;
  interface CSSProperties {
    /**
     * Aligns a flex container's lines within the flex container when there is extra space in the cross-axis, similar to how justify-content aligns individual items within the main-axis.
     */
    "align-content"?:
      | CSSWideKeyword
      | "flex-start"
      | "flex-end"
      | "center"
      | "space-between"
      | "space-around"
      | "stretch";
    /**
     * Sets the default alignment in the cross axis for all of the flex container's items, including anonymous flex items, similarly to how justify-content aligns items along the main axis.
     */
    "align-items"?: CSSWideKeyword | "flex-start" | "flex-end" | "center" | "baseline" | "stretch";
    /**
     * Allows the default alignment to be overridden for individual flex items.
     */
    "align-self"?:
      | CSSWideKeyword
      | "auto"
      | "flex-start"
      | "flex-end"
      | "center"
      | "baseline"
      | "stretch";
    /**
     * This property allows precise alignment of elements, such as graphics,
     * that do not have a baseline-table or lack the desired baseline in their baseline-table.
     * With the alignment-adjust property, the position of the baseline identified by the alignment-baseline
     * can be explicitly determined. It also determines precisely the alignment point for each glyph within a textual element.
     */
    "alignment-adjust"?: CSSWideKeyword | any;
    "alignment-baseline"?: CSSWideKeyword | any;
    /**
     * Defines a length of time to elapse before an animation starts, allowing an animation to begin execution some time after it is applied.
     */
    "animation-delay"?: CSSWideKeyword | any;
    /**
     * Defines whether an animation should run in reverse on some or all cycles.
     */
    "animation-direction"?: CSSWideKeyword | any;
    /**
     * Defines how long an animation runs for.
     */
     "animation-duration"?: CSSWideKeyword | any;
    /**
     * Specifies how many times an animation cycle should play.
     */
    "animation-iteration-count"?: CSSWideKeyword | any;
    /**
     * Defines the list of animations that apply to the element.
     */
    "animation-name"?: CSSWideKeyword | any;
    /**
     * Defines whether an animation is running or paused.
     */
    "animation-play-state"?: CSSWideKeyword | any;
    /**
     * Allows changing the style of any element to platform-based interface elements or vice versa.
     */
    appearance?: CSSWideKeyword | any;
    /**
     * Determines whether or not the \u201Cback\u201D side of a transformed element is visible when facing the viewer.
     */
    "backface-visibility"?: CSSWideKeyword | any;
    /**
     * Shorthand property to set the values for one or more of:
     * background-clip, background-color, background-image,
     * background-origin, background-position, background-repeat,
     * background-size, and background-attachment.
     */
    background?: CSSWideKeyword | any;
    /**
     * If a background-image is specified, this property determines
     * whether that image's position is fixed within the viewport,
     * or scrolls along with its containing block.
     * See CSS 3 background-attachment property https://drafts.csswg.org/css-backgrounds-3/#the-background-attachment
     */
    "background-attachment"?: CSSWideKeyword | "scroll" | "fixed" | "local";
    /**
     * This property describes how the element's background images should blend with each other and the element's background color.
     * The value is a list of blend modes that corresponds to each background image. Each element in the list will apply to the
     * corresponding element of background-image. If a property doesn\u2019t have enough comma-separated values to match the number of layers,
     * the UA must calculate its used value by repeating the list of values until there are enough.
     */
    "background-blend-mode"?: CSSWideKeyword | any;
    /**
     * Sets the background color of an element.
     */
    "background-color"?: CSSWideKeyword | any;
    "background-composite"?: CSSWideKeyword | any;
    /**
     * Applies one or more background images to an element. These can be any valid CSS image, including url() paths to image files or CSS gradients.
     */
    "background-image"?: CSSWideKeyword | any;
    /**
     * Specifies what the background-position property is relative to.
     */
    "background-origin"?: CSSWideKeyword | any;
    /**
     * Sets the position of a background image.
     */
    "background-position"?: CSSWideKeyword | any;
    /**
     * Background-repeat defines if and how background images will be repeated after they have been sized and positioned
     */
    "background-repeat"?: CSSWideKeyword | any;
    /**
     * Defines the size of the background images
     */
    "background-size"?: CSSWideKeyword | any;
    /**
     * Obsolete - spec retired, not implemented.
     */
    "baseline-shift"?: CSSWideKeyword | any;
    /**
     * Non standard. Sets or retrieves the location of the Dynamic HTML (DHTML) behavior.
     */
    behavior?: CSSWideKeyword | any;
    /**
     * Shorthand property that defines the different properties of all four sides of an element's border in a single declaration.
     * It can be used to set border-width, border-style and border-color, or a subset of these.
     */
    border?: CSSWideKeyword | any;
    /**
     * Shorthand that sets the values of border-bottom-color,
     * border-bottom-style, and border-bottom-width.
     */
    "border-bottom"?: CSSWideKeyword | any;
    /**
     * Sets the color of the bottom border of an element.
     */
    "border-bottom-color"?: CSSWideKeyword | any;
    /**
     * Defines the shape of the border of the bottom-left corner.
     */
    "border-bottom-left-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Defines the shape of the border of the bottom-right corner.
     */
    "border-bottom-right-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Sets the line style of the bottom border of a box.
     */
    "border-bottom-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's bottom border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-bottom-width"?: CSSWideKeyword | any;
    /**
     * Border-collapse can be used for collapsing the borders between table cells
     */
    "border-collapse"?: CSSWideKeyword | any;
    /**
     * The CSS border-color property sets the color of an element's four borders.
     * This property can have from one to four values, made up of the elementary properties:
     *      \u2022       border-top-color
     *      \u2022       border-right-color
     *      \u2022       border-bottom-color
     *      \u2022       border-left-color The default color is the currentColor of each of these values.
     * If you provide one value, it sets the color for the element. Two values set the horizontal and vertical values,
     * respectively. Providing three values sets the top, vertical, and bottom values, in that order.
     * Four values set all for sides: top, right, bottom, and left, in that order.
     */
    "border-color"?: CSSWideKeyword | any;
    /**
     * Specifies different corner clipping effects, such as scoop (inner curves), bevel (straight cuts) or notch (cut-off rectangles).
     * Works along with border-radius to specify the size of each corner effect.
     */
    "border-corner-shape"?: CSSWideKeyword | any;
    /**
     * The property border-image-source is used to set the image to be used instead of the border style.
     * If this is set to none the border-style is used instead.
     */
    "border-image-source"?: CSSWideKeyword | any;
    /**
     * The border-image-width CSS property defines the offset to use for dividing the border image in nine parts,
     * the top-left corner, central top edge, top-right-corner, central right edge, bottom-right corner, central bottom edge,
     * bottom-left corner, and central right edge. They represent inward distance from the top, right, bottom, and left edges.
     */
    "border-image-width"?: CSSWideKeyword | any;
    /**
     * Shorthand property that defines the border-width, border-style and border-color of an element's left border in a single declaration.
     * Note that you can use the corresponding longhand properties to set specific individual properties of the left border \u2014 border-left-width,
     * border-left-style and border-left-color.
     */
    "border-left"?: CSSWideKeyword | any;
    /**
     * The CSS border-left-color property sets the color of an element's left border. This page explains the border-left-color value,
     * but often you will find it more convenient to fix the border's left color as part of a shorthand set, either border-left or border-color.
     * Colors can be defined several ways. For more information, see Usage.
     */
    "border-left-color"?: CSSWideKeyword | any;
    /**
     * Sets the style of an element's left border. To set all four borders, use the shorthand property, border-style.
     * Otherwise, you can set the borders individually with border-top-style, border-right-style, border-bottom-style, border-left-style.
     */
    "border-left-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's left border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-left-width"?: CSSWideKeyword | any;
    /**
     * Shorthand property that sets the rounding of all four corners.
     */
    "border-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Shorthand property that defines the border-width, border-style and border-color of an element's right border
     * in a single declaration. Note that you can use the corresponding longhand properties to set specific
     * individual properties of the right border \u2014 border-right-width, border-right-style and border-right-color.
     */
    "border-right"?: CSSWideKeyword | any;
    /**
     * Sets the color of an element's right border. This page explains the border-right-color value,
     * but often you will find it more convenient to fix the border's right color as part of a shorthand set,
     * either border-right or border-color.
     * Colors can be defined several ways. For more information, see Usage.
     */
    "border-right-color"?: CSSWideKeyword | any;
    /**
     * Sets the style of an element's right border. To set all four borders, use the shorthand property,
     * border-style. Otherwise, you can set the borders individually with border-top-style, border-right-style,
     * border-bottom-style, border-left-style.
     */
    "border-right-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's right border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-right-width"?: CSSWideKeyword | any;
    /**
     * Specifies the distance between the borders of adjacent cells.
     */
    "border-spacing"?: CSSWideKeyword | any;
    /**
     * Sets the style of an element's four borders. This property can have from one to four values.
     * With only one value, the value will be applied to all four borders;
     * otherwise, this works as a shorthand property for each of border-top-style, border-right-style,
     * border-bottom-style, border-left-style, where each border style may be assigned a separate value.
     */
    "border-style"?: CSSWideKeyword | any;
    /**
     * Shorthand property that defines the border-width, border-style and border-color of an element's top border
     * in a single declaration. Note that you can use the corresponding longhand properties to set specific
     * individual properties of the top border \u2014 border-top-width, border-top-style and border-top-color.
     */
    "border-top"?: CSSWideKeyword | any;
    /**
     * Sets the color of an element's top border. This page explains the border-top-color value,
     * but often you will find it more convenient to fix the border's top color as part of a shorthand set,
     * either border-top or border-color.
     * Colors can be defined several ways. For more information, see Usage.
     */
    "border-top-color"?: CSSWideKeyword | any;
    /**
     * Sets the rounding of the top-left corner of the element.
     */
    "border-top-left-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Sets the rounding of the top-right corner of the element.
     */
    "border-top-right-radius"?: CSSWideKeyword | CSSLength;
    /**
     * Sets the style of an element's top border. To set all four borders, use the shorthand property, border-style.
     * Otherwise, you can set the borders individually with border-top-style, border-right-style, border-bottom-style, border-left-style.
     */
    "border-top-style"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's top border. To set all four borders,
     * use the border-width shorthand property which sets the values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-top-width"?: CSSWideKeyword | any;
    /**
     * Sets the width of an element's four borders. This property can have from one to four values.
     * This is a shorthand property for setting values simultaneously for border-top-width,
     * border-right-width, border-bottom-width, and border-left-width.
     */
    "border-width"?: CSSWideKeyword | any;
    /**
     * This property specifies how far an absolutely positioned box's bottom margin edge
     * is offset above the bottom edge of the box's containing block. For relatively positioned boxes,
     * the offset is with respect to the bottom edges of the box itself
     * (i.e., the box is given a position in the normal flow, then offset from that position according to these properties).
     */
    bottom?: CSSWideKeyword | any;
    /**
     * Obsolete.
     */
    "box-align"?: CSSWideKeyword | any;
    /**
     * Breaks a box into fragments creating new borders,
     * padding and repeating backgrounds or lets it stay as a continuous box on a page break,
     * column break, or, for inline elements, at a line break.
     */
    "box-decoration-break"?: CSSWideKeyword | any;
    /**
     * Deprecated
     */
    "box-direction"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been replaced by the flex-wrap property.
     * Gets or sets a value that specifies the direction to add successive rows or columns when the value of box-lines is set to multiple.
     */
    "box-line-progression"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been replaced by the flex-wrap property.
     * Gets or sets a value that specifies whether child elements wrap onto multiple lines or columns based on the space available in the object.
     */
    "box-lines"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been replaced by flex-order.
     * Specifies the ordinal group that a child element of the object belongs to.
     * This ordinal value identifies the display order (along the axis defined by the box-orient property) for the group.
     */
    "box-ordinal-group"?: CSSWideKeyword | any;
    /**
     * Deprecated.
     */
    "box-flex"?: CSSWideKeyword | number;
    /**
     * Deprecated.
     */
    "box-flex-group"?: CSSWideKeyword | number;
    /**
     * Cast a drop shadow from the frame of almost any element.
     * MDN: https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow
     */
    "box-shadow"?: CSSWideKeyword | any;
    /**
     * The CSS break-after property allows you to force a break on multi-column layouts.
     * More specifically, it allows you to force a break after an element.
     * It allows you to determine if a break should occur, and what type of break it should be.
     * The break-after CSS property describes how the page, column or region break behaves after the generated box.
     * If there is no generated box, the property is ignored.
     */
    "break-after"?: CSSWideKeyword | any;
    /**
     * Control page/column/region breaks that fall above a block of content
     */
    "break-before"?: CSSWideKeyword | any;
    /**
     * Control page/column/region breaks that fall within a block of content
     */
    "break-inside"?: CSSWideKeyword | any;
    /**
     * The clear CSS property specifies if an element can be positioned next to
     * or must be positioned below the floating elements that precede it in the markup.
     */
    clear?: CSSWideKeyword | any;
    /**
     * Deprecated; see clip-path.
     * Lets you specify the dimensions of an absolutely positioned element that should be visible,
     * and the element is clipped into this shape, and displayed.
     */
    clip?: CSSWideKeyword | any;
    /**
     * Clipping crops an graphic, so that only a portion of the graphic is rendered, or filled.
     * This clip-rule property, when used with the clip-path property, defines which clip rule, or algorithm,
     * to use when filling the different parts of a graphics.
     */
    "clip-rule"?: CSSWideKeyword | any;
    /**
     * The color property sets the color of an element's foreground content (usually text),
     * accepting any standard CSS color from keywords and hex values to RGB(a) and HSL(a).
     */
    color?: CSSWideKeyword | any;
    /**
     * Describes the number of columns of the element.
     * See CSS 3 column-count property https://www.w3.org/TR/css3-multicol/#cc
     */
    "column-count"?: CSSWideKeyword | number | "auto";
    /**
     * Specifies how to fill columns (balanced or sequential).
     */
    "column-fill"?: CSSWideKeyword | any;
    /**
     * The column-gap property controls the width of the gap between columns in multi-column elements.
     */
    "column-gap"?: CSSWideKeyword | any;
    /**
     * Sets the width, style, and color of the rule between columns.
     */
    "column-rule"?: CSSWideKeyword | any;
    /**
     * Specifies the color of the rule between columns.
     */
    "column-rule-color"?: CSSWideKeyword | any;
    /**
     * Specifies the width of the rule between columns.
     */
    "column-rule-width"?: CSSWideKeyword | any;
    /**
     * The column-span CSS property makes it possible for an element to span across all columns when its value is set to all.
     * An element that spans more than one column is called a spanning element.
     */
    "column-span"?: CSSWideKeyword | any;
    /**
     * Specifies the width of columns in multi-column elements.
     */
    "column-width"?: CSSWideKeyword | any;
    /**
     * This property is a shorthand property for setting column-width and/or column-count.
     */
    columns?: CSSWideKeyword | any;
    /**
     * The counter-increment property accepts one or more names of counters (identifiers),
     * each one optionally followed by an integer which specifies the value by which the counter should be incremented
     * (e.g. if the value is 2, the counter increases by 2 each time it is invoked).
     */
    "counter-increment"?: CSSWideKeyword | any;
    /**
     * The counter-reset property contains a list of one or more names of counters,
     * each one optionally followed by an integer (otherwise, the integer defaults to 0.).
     * Each time the given element is invoked, the counters specified by the property are set to the given integer.
     */
    "counter-reset"?: CSSWideKeyword | any;
    /**
     * The cue property specifies sound files (known as an "auditory icon") to be played by speech media agents
     * before and after presenting an element's content; if only one file is specified, it is played both before and after.
     * The volume at which the file(s) should be played, relative to the volume of the main element, may also be specified.
     * The icon files may also be set separately with the cue-before and cue-after properties.
     */
    cue?: CSSWideKeyword | any;
    /**
     * The cue-after property specifies a sound file (known as an "auditory icon") to be played by speech media agents
     * after presenting an element's content; the volume at which the file should be played may also be specified.
     * The shorthand property cue sets cue sounds for both before and after the element is presented.
     */
    "cue-after"?: CSSWideKeyword | any;
    /**
     * Specifies the mouse cursor displayed when the mouse pointer is over an element.
     */
    cursor?: CSSWideKeyword | any;
    /**
     * The direction CSS property specifies the text direction/writing direction. The rtl is used for Hebrew or Arabic text, the ltr is for other languages.
     */
    direction?: CSSWideKeyword | any;
    /**
     * This property specifies the type of rendering box used for an element. It is a shorthand property for many other display properties.
     */
    display?: CSSWideKeyword | any;
    /**
     * The \u2018fill\u2019 property paints the interior of the given graphical element.
     * The area to be painted consists of any areas inside the outline of the shape.
     * To determine the inside of the shape, all subpaths are considered,
     * and the interior is determined according to the rules associated with the current value of the \u2018fill-rule\u2019 property.
     * The zero-width geometric outline of a shape is included in the area to be painted.
     */
    fill?: CSSWideKeyword | any;
    /**
     * SVG: Specifies the opacity of the color or the content the current object is filled with.
     * See SVG 1.1 https://www.w3.org/TR/SVG/painting.html#FillOpacityProperty
     */
    "fill-opacity"?: CSSWideKeyword | number;
    /**
     * The \u2018fill-rule\u2019 property indicates the algorithm which is to be used to determine what parts of the canvas are included inside the shape.
     * For a simple, non-intersecting path, it is intuitively clear what region lies "inside";
     * however, for a more complex path, such as a path that intersects itself or where one subpath encloses another,
     * the interpretation of "inside" is not so obvious.
     * The \u2018fill-rule\u2019 property provides two options for how the inside of a shape is determined:
     */
    "fill-rule"?: CSSWideKeyword | any;
    /**
     * Applies various image processing effects. This property is largely unsupported. See Compatibility section for more information.
     */
    filter?: CSSWideKeyword | any;
    /**
     * Shorthand for \`flex-grow\`, \`flex-shrink\`, and \`flex-basis\`.
     */
    flex?: CSSWideKeyword | number | string;
    /**
     * Obsolete, do not use. This property has been renamed to align-items.
     * Specifies the alignment (perpendicular to the layout axis defined by the flex-direction property) of child elements of the object.
     */
    "flex-align"?: CSSWideKeyword | any;
    /**
     * The flex-basis CSS property describes the initial main size of the flex item
     * before any free space is distributed according to the flex factors described in the flex property (flex-grow and flex-shrink).
     */
    "flex-basis"?: CSSWideKeyword | any;
    /**
     * The flex-direction CSS property describes how flex items are placed in the flex container, by setting the direction of the flex container's main axis.
     */
    "flex-direction"?: CSSWideKeyword | "row" | "row-reverse" | "column" | "column-reverse";
    /**
     * The flex-flow CSS property defines the flex container's main and cross axis. It is a shorthand property for the flex-direction and flex-wrap properties.
     */
    "flex-flow"?: CSSWideKeyword | string;
    /**
     * Specifies the flex grow factor of a flex item.
     * See CSS flex-grow property https://drafts.csswg.org/css-flexbox-1/#flex-grow-property
     */
    "flex-grow"?: CSSWideKeyword | number;
    /**
     * Do not use. This property has been renamed to align-self
     * Specifies the alignment (perpendicular to the layout axis defined by flex-direction) of child elements of the object.
     */
    "flex-item-align"?: CSSWideKeyword | any;
    /**
     * Do not use. This property has been renamed to align-content.
     * Specifies how a flexbox's lines align within the flexbox when there is extra space along the axis that is perpendicular to the axis defined by the flex-direction property.
     */
    "flex-line-pack"?: CSSWideKeyword | any;
    /**
     * Gets or sets a value that specifies the ordinal group that a flexbox element belongs to. This ordinal value identifies the display order for the group.
     */
    "flex-order"?: CSSWideKeyword | any;
    /**
     * Specifies the flex shrink factor of a flex item.
     * See CSS flex-shrink property https://drafts.csswg.org/css-flexbox-1/#flex-shrink-property
     */
    "flex-shrink"?: CSSWideKeyword | number;
    /**
     * Specifies whether flex items are forced into a single line or can be wrapped onto multiple lines.
     * If wrapping is allowed, this property also enables you to control the direction in which lines are stacked.
     * See CSS flex-wrap property https://drafts.csswg.org/css-flexbox-1/#flex-wrap-property
     */
    "flex-wrap"?: CSSWideKeyword | "nowrap" | "wrap" | "wrap-reverse";
    /**
     * Elements which have the style float are floated horizontally.
     * These elements can move as far to the left or right of the containing element.
     * All elements after the floating element will flow around it, but elements before the floating element are not impacted.
     * If several floating elements are placed after each other, they will float next to each other as long as there is room.
     */
    float?: CSSWideKeyword | any;
    /**
     * Flows content from a named flow (specified by a corresponding flow-into) through selected elements to form a dynamic chain of layout regions.
     */
    "flow-from"?: CSSWideKeyword | any;
    /**
     * The font property is shorthand that allows you to do one of two things: you can either set up six of the most mature font properties in one line,
     * or you can set one of a choice of keywords to adopt a system font setting.
     */
    font?: CSSWideKeyword | any;
    /**
     * The font-family property allows one or more font family names and/or generic family names to be specified for usage on the selected element(s)' text.
     * The browser then goes through the list; for each character in the selection it applies the first font family that has an available glyph for that character.
     */
    "font-family"?: CSSWideKeyword | any;
    /**
     * The font-kerning property allows contextual adjustment of inter-glyph spacing, i.e. the spaces between the characters in text.
     * This property controls <bold>metric kerning</bold> - that utilizes adjustment data contained in the font. Optical Kerning is not supported as yet.
     */
    "font-kerning"?: CSSWideKeyword | any;
    /**
     * Specifies the size of the font. Used to compute em and ex units.
     * See CSS 3 font-size property https://www.w3.org/TR/css-fonts-3/#propdef-font-size
     */
    "font-size"?:
      | CSSWideKeyword
      | "xx-small"
      | "x-small"
      | "small"
      | "medium"
      | "large"
      | "x-large"
      | "xx-large"
      | "larger"
      | "smaller"
      | CSSLength
      | CSSPercentage;
    /**
     * The font-size-adjust property adjusts the font-size of the fallback fonts defined with font-family,
     * so that the x-height is the same no matter what font is used.
     * This preserves the readability of the text when fallback happens.
     * See CSS 3 font-size-adjust property https://www.w3.org/TR/css-fonts-3/#propdef-font-size-adjust
     */
    "font-size-adjust"?: CSSWideKeyword | "none" | number;
    /**
     * Allows you to expand or condense the widths for a normal, condensed, or expanded font face.
     * See CSS 3 font-stretch property https://drafts.csswg.org/css-fonts-3/#propdef-font-stretch
     */
    "font-stretch"?:
      | CSSWideKeyword
      | "normal"
      | "ultra-condensed"
      | "extra-condensed"
      | "condensed"
      | "semi-condensed"
      | "semi-expanded"
      | "expanded"
      | "extra-expanded"
      | "ultra-expanded";
    /**
     * The font-style property allows normal, italic, or oblique faces to be selected.
     * Italic forms are generally cursive in nature while oblique faces are typically sloped versions of the regular face.
     * Oblique faces can be simulated by artificially sloping the glyphs of the regular face.
     * See CSS 3 font-style property https://www.w3.org/TR/css-fonts-3/#propdef-font-style
     */
    "font-style"?: CSSWideKeyword | "normal" | "italic" | "oblique";
    /**
     * This value specifies whether the user agent is allowed to synthesize bold or oblique font faces when a font family lacks bold or italic faces.
     */
    "font-synthesis"?: CSSWideKeyword | any;
    /**
     * The font-variant property enables you to select the small-caps font within a font family.
     */
    "font-variant"?: CSSWideKeyword | any;
    /**
     * Fonts can provide alternate glyphs in addition to default glyph for a character. This property provides control over the selection of these alternate glyphs.
     */
    "font-variant-alternates"?: CSSWideKeyword | any;
    /**
     * Specifies the weight or boldness of the font.
     * See CSS 3 'font-weight' property https://www.w3.org/TR/css-fonts-3/#propdef-font-weight
     */
    "font-weight"?:
      | CSSWideKeyword
      | "normal"
      | "bold"
      | "bolder"
      | "lighter"
      | 100
      | 200
      | 300
      | 400
      | 500
      | 600
      | 700
      | 800
      | 900;
    /**
     * Lays out one or more grid items bound by 4 grid lines. Shorthand for setting grid-column-start, grid-column-end, grid-row-start, and grid-row-end in a single declaration.
     */
    "grid-area"?: CSSWideKeyword | any;
    /**
     * Controls a grid item's placement in a grid area, particularly grid position and a grid span. Shorthand for setting grid-column-start and grid-column-end in a single declaration.
     */
    "grid-column"?: CSSWideKeyword | any;
    /**
     * Controls a grid item's placement in a grid area as well as grid position and a grid span.
     * The grid-column-end property (with grid-row-start, grid-row-end, and grid-column-start) determines a grid item's placement by specifying the grid lines of a grid item's grid area.
     */
    "grid-column-end"?: CSSWideKeyword | any;
    /**
     * Determines a grid item's placement by specifying the starting grid lines of a grid item's grid area.
     * A grid item's placement in a grid area consists of a grid position and a grid span.
     * See also ( grid-row-start, grid-row-end, and grid-column-end)
     */
    "grid-column-start"?: CSSWideKeyword | any;
    /**
     * Gets or sets a value that indicates which row an element within a Grid should appear in. Shorthand for setting grid-row-start and grid-row-end in a single declaration.
     */
    "grid-row"?: CSSWideKeyword | any;
    /**
     * Determines a grid item\u2019s placement by specifying the block-end. A grid item's placement in a grid area consists of a grid position and a grid span.
     * The grid-row-end property (with grid-row-start, grid-column-start, and grid-column-end) determines a grid item's placement by specifying the grid lines of a grid item's grid area.
     */
    "grid-row-end"?: CSSWideKeyword | any;
    /**
     * Specifies a row position based upon an integer location, string value, or desired row size.
     * css/properties/grid-row is used as short-hand for grid-row-position and grid-row-position
     */
    "grid-row-position"?: CSSWideKeyword | any;
    "grid-row-span"?: CSSWideKeyword | any;
    /**
     * Specifies named grid areas which are not associated with any particular grid item, but can be referenced from the grid-placement properties.
     * The syntax of the grid-template-areas property also provides a visualization of the structure of the grid, making the overall layout of the grid container easier to understand.
     */
    "grid-template-areas"?: CSSWideKeyword | any;
    /**
     * Specifies (with grid-template-rows) the line names and track sizing functions of the grid.
     * Each sizing function can be specified as a length, a percentage of the grid container\u2019s size,
     * a measurement of the contents occupying the column or row, or a fraction of the free space in the grid.
     */
    "grid-template-columns"?: CSSWideKeyword | any;
    /**
     * Specifies (with grid-template-columns) the line names and track sizing functions of the grid.
     * Each sizing function can be specified as a length, a percentage of the grid container\u2019s size,
     * a measurement of the contents occupying the column or row, or a fraction of the free space in the grid.
     */
    "grid-template-rows"?: CSSWideKeyword | any;
    /**
     * Sets the height of an element. The content area of the element height does not include the padding, border, and margin of the element.
     */
    height?: CSSWideKeyword | any;
    /**
     * Specifies the minimum number of characters in a hyphenated word
     */
    "hyphenate-limit-chars"?: CSSWideKeyword | any;
    /**
     * Indicates the maximum number of successive hyphenated lines in an element. The \u2018no-limit\u2019 value means that there is no limit.
     */
    "hyphenate-limit-lines"?: CSSWideKeyword | any;
    /**
     * Specifies the maximum amount of trailing whitespace (before justification) that may be left in a line before hyphenation is triggered
     * to pull part of a word from the next line back up into the current one.
     */
    "hyphenate-limit-zone"?: CSSWideKeyword | any;
    /**
     * Specifies whether or not words in a sentence can be split by the use of a manual or automatic hyphenation mechanism.
     */
    hyphens?: CSSWideKeyword | any;
    "ime-mode"?: CSSWideKeyword | any;
    /**
     * Defines how the browser distributes space between and around flex items
     * along the main-axis of their container.
     * See CSS justify-content property https://www.w3.org/TR/css-flexbox-1/#justify-content-property
     */
    "justify-content"?:
      | CSSWideKeyword
      | "flex-start"
      | "flex-end"
      | "center"
      | "space-between"
      | "space-around"
      | "space-evenly"
      | "stretch";
    "layout-grid"?: CSSWideKeyword | any;
    "layout-grid-char"?: CSSWideKeyword | any;
    "layout-grid-line"?: CSSWideKeyword | any;
    "layout-grid-mode"?: CSSWideKeyword | any;
    "layout-grid-type"?: CSSWideKeyword | any;
    /**
     * Sets the left edge of an element
     */
    left?: CSSWideKeyword | any;
    /**
     * The letter-spacing CSS property specifies the spacing behavior between text characters.
     */
    "letter-spacing"?: CSSWideKeyword | any;
    /**
     * Deprecated. Gets or sets line-breaking rules for text in selected languages such as Japanese, Chinese, and Korean.
     */
    "line-break"?: CSSWideKeyword | any;
    "line-clamp"?: CSSWideKeyword | number;
    /**
     * Specifies the height of an inline block level element.
     * See CSS 2.1 line-height property https://www.w3.org/TR/CSS21/visudet.html#propdef-line-height
     */
    "line-height"?: CSSWideKeyword | "normal" | number | CSSLength | CSSPercentage;
    /**
     * Shorthand property that sets the list-style-type, list-style-position and list-style-image properties in one declaration.
     */
    "list-style"?: CSSWideKeyword | any;
    /**
     * This property sets the image that will be used as the list item marker. When the image is available,
     * it will replace the marker set with the 'list-style-type' marker. That also means that if the image is not available,
     * it will show the style specified by list-style-property
     */
    "list-style-image"?: CSSWideKeyword | any;
    /**
     * Specifies if the list-item markers should appear inside or outside the content flow.
     */
    "list-style-position"?: CSSWideKeyword | any;
    /**
     * Specifies the type of list-item marker in a list.
     */
    "list-style-type"?: CSSWideKeyword | any;
    /**
     * The margin property is shorthand to allow you to set all four margins of an element at once.
     * Its equivalent longhand properties are margin-top, margin-right, margin-bottom and margin-left.
     * Negative values are also allowed.
     */
    margin?: CSSWideKeyword | any;
    /**
     * margin-bottom sets the bottom margin of an element.
     */
    "margin-bottom"?: CSSWideKeyword | any;
    /**
     * margin-left sets the left margin of an element.
     */
    "margin-left"?: CSSWideKeyword | any;
    /**
     * margin-right sets the right margin of an element.
     */
    "margin-right"?: CSSWideKeyword | any;
    /**
     * margin-top sets the top margin of an element.
     */
    "margin-top"?: CSSWideKeyword | any;
    /**
     * The marquee-direction determines the initial direction in which the marquee content moves.
     */
    "marquee-direction"?: CSSWideKeyword | any;
    /**
     * The 'marquee-style' property determines a marquee's scrolling behavior.
     */
    "marquee-style"?: CSSWideKeyword | any;
    /**
     * This property is shorthand for setting mask-image, mask-mode, mask-repeat, mask-position, mask-clip, mask-origin, mask-composite and mask-size.
     * Omitted values are set to their original properties' initial values.
     */
    mask?: CSSWideKeyword | any;
    /**
     * This property is shorthand for setting mask-border-source, mask-border-slice, mask-border-width, mask-border-outset, and mask-border-repeat.
     * Omitted values are set to their original properties' initial values.
     */
    "mask-border"?: CSSWideKeyword | any;
    /**
     * This property specifies how the images for the sides and the middle part of the mask image are scaled and tiled.
     * The first keyword applies to the horizontal sides, the second one applies to the vertical ones.
     * If the second keyword is absent, it is assumed to be the same as the first, similar to the CSS border-image-repeat property.
     */
    "mask-border-repeat"?: CSSWideKeyword | any;
    /**
     * This property specifies inward offsets from the top, right, bottom, and left edges of the mask image,
     * dividing it into nine regions: four corners, four edges, and a middle.
     * The middle image part is discarded and treated as fully transparent black unless the fill keyword is present.
     * The four values set the top, right, bottom and left offsets in that order, similar to the CSS border-image-slice property.
     */
    "mask-border-slice"?: CSSWideKeyword | any;
    /**
     * Specifies an image to be used as a mask. An image that is empty, fails to download, is non-existent, or cannot be displayed is ignored and does not mask the element.
     */
    "mask-border-source"?: CSSWideKeyword | any;
    /**
     * This property sets the width of the mask box image, similar to the CSS border-image-width property.
     */
    "mask-border-width"?: CSSWideKeyword | any;
    /**
     * Determines the mask painting area, which defines the area that is affected by the mask.
     * The painted content of an element may be restricted to this area.
     */
    "mask-clip"?: CSSWideKeyword | any;
    /**
     * For elements rendered as a single box, specifies the mask positioning area.
     * For elements rendered as multiple boxes (e.g., inline boxes on several lines, boxes on several pages)
     * specifies which boxes box-decoration-break operates on to determine the mask positioning area(s).
     */
    "mask-origin"?: CSSWideKeyword | any;
    /**
     * This property must not be used. It is no longer included in any standard or standard track specification,
     * nor is it implemented in any browser. It is only used when the text-align-last property is set to size.
     * It controls allowed adjustments of font-size to fit line content.
     */
    "max-font-size"?: CSSWideKeyword | any;
    /**
     * Sets the maximum height for an element. It prevents the height of the element to exceed the specified value.
     * If min-height is specified and is greater than max-height, max-height is overridden.
     */
    "max-height"?: CSSWideKeyword | any;
    /**
     * Sets the maximum width for an element. It limits the width property to be larger than the value specified in max-width.
     */
    "max-width"?: CSSWideKeyword | any;
    /**
     * Sets the minimum height for an element. It prevents the height of the element to be smaller than the specified value.
     * The value of min-height overrides both max-height and height.
     */
    "min-height"?: CSSWideKeyword | any;
    /**
     * Sets the minimum width of an element. It limits the width property to be not smaller than the value specified in min-width.
     */
    "min-width"?: CSSWideKeyword | any;
    /**
     * Specifies the transparency of an element.
     * See CSS 3 opacity property https://drafts.csswg.org/css-color-3/#opacity
     */
    opacity?: CSSWideKeyword | number;
    /**
     * Specifies the order used to lay out flex items in their flex container.
     * Elements are laid out in the ascending order of the order value.
     * See CSS order property https://drafts.csswg.org/css-flexbox-1/#order-property
     */
    order?: CSSWideKeyword | number;
    /**
     * In paged media, this property defines the minimum number of lines in
     * a block container that must be left at the bottom of the page.
     * See CSS 3 orphans, widows properties https://drafts.csswg.org/css-break-3/#widows-orphans
     */
    orphans?: CSSWideKeyword | number;
    /**
     * The CSS outline property is a shorthand property for setting one or more of the individual outline properties outline-style,
     * outline-width and outline-color in a single rule. In most cases the use of this shortcut is preferable and more convenient.
     * Outlines differ from borders in the following ways:
     *      \u2022       Outlines do not take up space, they are drawn above the content.
     *      \u2022       Outlines may be non-rectangular. They are rectangular in Gecko/Firefox.
     *              Internet Explorer attempts to place the smallest contiguous outline around all elements or shapes that are indicated to have an outline.
     *              Opera draws a non-rectangular shape around a construct.
     */
    outline?: CSSWideKeyword | any;
    /**
     * The outline-color property sets the color of the outline of an element. An outline is a line that is drawn around elements, outside the border edge, to make the element stand out.
     */
    "outline-color"?: CSSWideKeyword | any;
    /**
     * The outline-offset property offsets the outline and draw it beyond the border edge.
     */
    "outline-offset"?: CSSWideKeyword | any;
    /**
     * The overflow property controls how extra content exceeding the bounding box of an element is rendered.
     * It can be used in conjunction with an element that has a fixed width and height, to eliminate text-induced page distortion.
     */
    overflow?: CSSWideKeyword | "auto" | "hidden" | "scroll" | "visible";
    /**
     * Specifies the preferred scrolling methods for elements that overflow.
     */
    "overflow-style"?: CSSWideKeyword | any;
    /**
     * Controls how extra content exceeding the x-axis of the bounding box of an element is rendered.
     */
    "overflow-x"?: CSSWideKeyword | "auto" | "hidden" | "scroll" | "visible";
    /**
     * Controls how extra content exceeding the y-axis of the bounding box of an element is rendered.
     */
    "overflow-y"?: CSSWideKeyword | "auto" | "hidden" | "scroll" | "visible";
    /**
     * The padding optional CSS property sets the required padding space on one to four sides of an element.
     * The padding area is the space between an element and its border. Negative values are not allowed but decimal values are permitted.
     * The element size is treated as fixed, and the content of the element shifts toward the center as padding is increased.
     * The padding property is a shorthand to avoid setting each side separately (padding-top, padding-right, padding-bottom, padding-left).
     */
    padding?: CSSWideKeyword | any;
    /**
     * The padding-bottom CSS property of an element sets the padding space required on the bottom of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-bottom values, negative values of padding-bottom are invalid.
     */
    "padding-bottom"?: CSSWideKeyword | any;
    /**
     * The padding-left CSS property of an element sets the padding space required on the left side of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-left values, negative values of padding-left are invalid.
     */
    "padding-left"?: CSSWideKeyword | any;
    /**
     * The padding-right CSS property of an element sets the padding space required on the right side of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-right values, negative values of padding-right are invalid.
     */
    "padding-right"?: CSSWideKeyword | any;
    /**
     * The padding-top CSS property of an element sets the padding space required on the top of an element.
     * The padding area is the space between the content of the element and its border.
     * Contrary to margin-top values, negative values of padding-top are invalid.
     */
    "padding-top"?: CSSWideKeyword | any;
    /**
     * The page-break-after property is supported in all major browsers. With CSS3, page-break-* properties are only aliases of the break-* properties.
     * The CSS3 Fragmentation spec defines breaks for all CSS box fragmentation.
     */
    "page-break-after"?: CSSWideKeyword | any;
    /**
     * The page-break-before property sets the page-breaking behavior before an element.
     * With CSS3, page-break-* properties are only aliases of the break-* properties.
     * The CSS3 Fragmentation spec defines breaks for all CSS box fragmentation.
     */
    "page-break-before"?: CSSWideKeyword | any;
    /**
     * Sets the page-breaking behavior inside an element. With CSS3, page-break-* properties are only aliases of the break-* properties.
     * The CSS3 Fragmentation spec defines breaks for all CSS box fragmentation.
     */
    "page-break-inside"?: CSSWideKeyword | any;
    /**
     * The pause property determines how long a speech media agent should pause before and after presenting an element.
     * It is a shorthand for the pause-before and pause-after properties.
     */
    pause?: CSSWideKeyword | any;
    /**
     * The pause-after property determines how long a speech media agent should pause after presenting an element.
     * It may be replaced by the shorthand property pause, which sets pause time before and after.
     */
    "pause-after"?: CSSWideKeyword | any;
    /**
     * The pause-before property determines how long a speech media agent should pause before presenting an element.
     * It may be replaced by the shorthand property pause, which sets pause time before and after.
     */
    "pause-before"?: CSSWideKeyword | any;
    /**
     * The perspective property defines how far an element is placed from the view on the z-axis, from the screen to the viewer.
     * Perspective defines how an object is viewed. In graphic arts, perspective is the representation on a flat surface of what the viewer's eye would see in a 3D space.
     * (See Wikipedia for more information about graphical perspective and for related illustrations.)
     * The illusion of perspective on a flat surface, such as a computer screen,
     * is created by projecting points on the flat surface as they would appear if the flat surface were a window
     * through which the viewer was looking at the object. In discussion of virtual environments, this flat surface is called a projection plane.
     */
    perspective?: CSSWideKeyword | any;
    /**
     * The perspective-origin property establishes the origin for the perspective property.
     * It effectively sets the X and Y position at which the viewer appears to be looking at the children of the element.
     * When used with perspective, perspective-origin changes the appearance of an object,
     * as if a viewer were looking at it from a different origin.
     * An object appears differently if a viewer is looking directly at it versus looking at it from below, above, or from the side.
     * Thus, the perspective-origin is like a vanishing point.
     * The default value of perspective-origin is 50% 50%.
     * This displays an object as if the viewer's eye were positioned directly at the center of the screen, both top-to-bottom and left-to-right.
     * A value of 0% 0% changes the object as if the viewer was looking toward the top left angle.
     * A value of 100% 100% changes the appearance as if viewed toward the bottom right angle.
     */
    "perspective-origin"?: CSSWideKeyword | any;
    /**
     * The pointer-events property allows you to control whether an element can be the target for the pointing device (e.g, mouse, pen) events.
     */
    "pointer-events"?: CSSWideKeyword | any;
    /**
     * The position property controls the type of positioning used by an element within its parent elements.
     * The effect of the position property depends on a lot of factors, for example the position property of parent elements.
     */
    position?: CSSWideKeyword | "static" | "relative" | "absolute" | "fixed" | "sticky";
    /**
     * Obsolete: unsupported.
     * This property determines whether or not a full-width punctuation mark character should be trimmed if it appears at the beginning of a line,
     * so that its "ink" lines up with the first glyph in the line above and below.
     */
    "punctuation-trim"?: CSSWideKeyword | any;
    /**
     * Sets the type of quotation marks for embedded quotations.
     */
    quotes?: CSSWideKeyword | any;
    /**
     * Controls whether the last region in a chain displays additional 'overset' content according its default overflow property,
     * or if it displays a fragment of content as if it were flowing into a subsequent region.
     */
    "region-fragment"?: CSSWideKeyword | any;
    /**
     * The rest-after property determines how long a speech media agent should pause after presenting an element's main content,
     * before presenting that element's exit cue sound. It may be replaced by the shorthand property rest, which sets rest time before and after.
     */
    "rest-after"?: CSSWideKeyword | any;
    /**
     * The rest-before property determines how long a speech media agent should pause after presenting an intro cue sound for an element,
     * before presenting that element's main content. It may be replaced by the shorthand property rest, which sets rest time before and after.
     */
    "rest-before"?: CSSWideKeyword | any;
    /**
     * Specifies the position an element in relation to the right side of the containing element.
     */
    right?: CSSWideKeyword | any;
    "ruby-align"?: CSSWideKeyword | any;
    "ruby-position"?: CSSWideKeyword | any;
    /**
     * Defines the alpha channel threshold used to extract a shape from an image. Can be thought of as a "minimum opacity" threshold;
     * that is, a value of 0.5 means that the shape will enclose all the pixels that are more than 50% opaque.
     */
    "shape-image-threshold"?: CSSWideKeyword | any;
    /**
     * A future level of CSS Shapes will define a shape-inside property, which will define a shape to wrap content within the element.
     * See Editor's Draft <http://dev.w3.org/csswg/css-shapes/> and CSSWG wiki page on next-level plans <http://wiki.csswg.org/spec/css-shapes>
     */
    "shape-inside"?: CSSWideKeyword | any;
    /**
     * Adds a margin to a shape-outside. In effect, defines a new shape that is the smallest contour around all the points
     * that are the shape-margin distance outward perpendicular to each point on the underlying shape.
     * For points where a perpendicular direction is not defined (e.g., a triangle corner),
     * takes all points on a circle centered at the point and with a radius of the shape-margin distance.
     * This property accepts only non-negative values.
     */
    "shape-margin"?: CSSWideKeyword | any;
    /**
     * Declares a shape around which text should be wrapped, with possible modifications from the shape-margin property.
     * The shape defined by shape-outside and shape-margin changes the geometry of a float element's float area.
     */
    "shape-outside"?: CSSWideKeyword | any;
    /**
     * The speak property determines whether or not a speech synthesizer will read aloud the contents of an element.
     */
    speak?: CSSWideKeyword | any;
    /**
     * The speak-as property determines how the speech synthesizer interprets the content: words as whole words or as a sequence of letters,
     * numbers as a numerical value or a sequence of digits, punctuation as pauses in speech or named punctuation characters.
     */
    "speak-as"?: CSSWideKeyword | any;
    /**
     * SVG: Specifies the opacity of the outline on the current object.
     * See SVG 1.1 https://www.w3.org/TR/SVG/painting.html#StrokeOpacityProperty
     */
    "stroke-opacity"?: CSSWideKeyword | number;
    /**
     * SVG: Specifies the width of the outline on the current object.
     * See SVG 1.1 https://www.w3.org/TR/SVG/painting.html#StrokeWidthProperty
     */
    "stroke-width"?: CSSWideKeyword | CSSPercentage | CSSLength;
    /**
     * The tab-size CSS property is used to customise the width of a tab (U+0009) character.
     */
    "tab-size"?: CSSWideKeyword | any;
    /**
     * The 'table-layout' property controls the algorithm used to lay out the table cells, rows, and columns.
     */
    "table-layout"?: CSSWideKeyword | any;
    /**
     * The text-align CSS property describes how inline content like text is aligned in its parent block element.
     * text-align does not control the alignment of block elements itself, only their inline content.
     */
    "text-align"?: CSSWideKeyword | any;
    /**
     * The text-align-last CSS property describes how the last line of a block element or a line before line break is aligned in its parent block element.
     */
    "text-align-last"?: CSSWideKeyword | any;
    /**
     * The text-decoration CSS property is used to set the text formatting to underline, overline, line-through or blink.
     * underline and overline decorations are positioned under the text, line-through over it.
     */
    "text-decoration"?: CSSWideKeyword | any;
    /**
     * Sets the color of any text decoration, such as underlines, overlines, and strike throughs.
     */
    "text-decoration-color"?: CSSWideKeyword | any;
    /**
     * Sets what kind of line decorations are added to an element, such as underlines, overlines, etc.
     */
    "text-decoration-line"?: CSSWideKeyword | any;
    "text-decoration-line-through"?: CSSWideKeyword | any;
    "text-decoration-none"?: CSSWideKeyword | any;
    "text-decoration-overline"?: CSSWideKeyword | any;
    /**
     * Specifies what parts of an element\u2019s content are skipped over when applying any text decoration.
     */
    "text-decoration-skip"?: CSSWideKeyword | any;
    /**
     * This property specifies the style of the text decoration line drawn on the specified element.
     * The intended meaning for the values are the same as those of the border-style-properties.
     */
    "text-decoration-style"?: CSSWideKeyword | any;
    "text-decoration-underline"?: CSSWideKeyword | any;
    /**
     * The text-emphasis property will apply special emphasis marks to the elements text.
     * Slightly similar to the text-decoration property only that this property can have affect on the line-height.
     * It also is noted that this is shorthand for text-emphasis-style and for text-emphasis-color.
     */
    "text-emphasis"?: CSSWideKeyword | any;
    /**
     * The text-emphasis-color property specifies the foreground color of the emphasis marks.
     */
    "text-emphasis-color"?: CSSWideKeyword | any;
    /**
     * The text-emphasis-style property applies special emphasis marks to an element's text.
     */
    "text-emphasis-style"?: CSSWideKeyword | any;
    /**
     * This property helps determine an inline box's block-progression dimension,
     * derived from the text-height and font-size properties for non-replaced elements,
     * the height or the width for replaced elements, and the stacked block-progression dimension for inline-block elements.
     * The block-progression dimension determines the position of the padding, border and margin for the element.
     */
    "text-height"?: CSSWideKeyword | any;
    /**
     * Specifies the amount of space horizontally that should be left on the first line of the text of an element.
     * This horizontal spacing is at the beginning of the first line and is in respect to the left edge of the containing block box.
     */
    "text-indent"?: CSSWideKeyword | any;
    "text-justify-trim"?: CSSWideKeyword | any;
    "text-kashida-space"?: CSSWideKeyword | any;
    /**
     * The text-line-through property is a shorthand property for text-line-through-style, text-line-through-color and text-line-through-mode.
     * (Considered obsolete; use text-decoration instead.)
     */
    "text-line-through"?: CSSWideKeyword | any;
    /**
     * Specifies the line colors for the line-through text decoration.
     * (Considered obsolete; use text-decoration-color instead.)
     */
    "text-line-through-color"?: CSSWideKeyword | any;
    /**
     * Sets the mode for the line-through text decoration, determining whether the text decoration affects the space characters or not.
     * (Considered obsolete; use text-decoration-skip instead.)
     */
    "text-line-through-mode"?: CSSWideKeyword | any;
    /**
     * Specifies the line style for line-through text decoration.
     * (Considered obsolete; use text-decoration-style instead.)
     */
    "text-line-through-style"?: CSSWideKeyword | any;
    /**
     * Specifies the line width for the line-through text decoration.
     */
    "text-line-through-width"?: CSSWideKeyword | any;
    /**
     * The text-overflow shorthand CSS property determines how overflowed content that is not displayed is signaled to the users.
     * It can be clipped, display an ellipsis ('\u2026', U+2026 HORIZONTAL ELLIPSIS) or a Web author-defined string.
     * It covers the two long-hand properties text-overflow-mode and text-overflow-ellipsis
     */
    "text-overflow"?: CSSWideKeyword | any;
    /**
     * The text-overline property is the shorthand for the text-overline-style, text-overline-width, text-overline-color, and text-overline-mode properties.
     */
    "text-overline"?: CSSWideKeyword | any;
    /**
     * Specifies the line color for the overline text decoration.
     */
    "text-overline-color"?: CSSWideKeyword | any;
    /**
     * Sets the mode for the overline text decoration, determining whether the text decoration affects the space characters or not.
     */
    "text-overline-mode"?: CSSWideKeyword | any;
    /**
     * Specifies the line style for overline text decoration.
     */
    "text-overline-style"?: CSSWideKeyword | any;
    /**
     * Specifies the line width for the overline text decoration.
     */
    "text-overline-width"?: CSSWideKeyword | any;
    /**
     * The text-rendering CSS property provides information to the browser about how to optimize when rendering text.
     * Options are: legibility, speed or geometric precision.
     */
    "text-rendering"?: CSSWideKeyword | any;
    /**
     * Obsolete: unsupported.
     */
    "text-script"?: CSSWideKeyword | any;
    /**
     * The CSS text-shadow property applies one or more drop shadows to the text and <text-decorations> of an element.
     * Each shadow is specified as an offset from the text, along with optional color and blur radius values.
     */
    "text-shadow"?: CSSWideKeyword | any;
    /**
     * This property transforms text for styling purposes. (It has no effect on the underlying content.)
     */
    "text-transform"?: CSSWideKeyword | any;
    /**
     * Unsupported.
     * This property will add a underline position value to the element that has an underline defined.
     */
    "text-underline-position"?: CSSWideKeyword | any;
    /**
     * After review this should be replaced by text-decoration should it not?
     * This property will set the underline style for text with a line value for underline, overline, and line-through.
     */
    "text-underline-style"?: CSSWideKeyword | any;
    /**
     * This property specifies how far an absolutely positioned box's top margin edge is offset below the top edge of the box's containing block.
     * For relatively positioned boxes, the offset is with respect to the top edges of the box itself (i.e., the box is given a position in the normal flow,
     * then offset from that position according to these properties).
     */
    top?: CSSWideKeyword | any;
    /**
     * Determines whether touch input may trigger default behavior supplied by the user agent, such as panning or zooming.
     */
    "touch-action"?: CSSWideKeyword | any;
    /**
     * CSS transforms allow elements styled with CSS to be transformed in two-dimensional or three-dimensional space.
     * Using this property, elements can be translated, rotated, scaled, and skewed. The value list may consist of 2D and/or 3D transform values.
     */
    transform?: CSSWideKeyword | any;
    /**
     * This property defines the origin of the transformation axes relative to the element to which the transformation is applied.
     */
    "transform-origin"?: CSSWideKeyword | any;
    /**
     * This property allows you to define the relative position of the origin of the transformation grid along the z-axis.
     */
    "transform-origin-z"?: CSSWideKeyword | any;
    /**
     * This property specifies how nested elements are rendered in 3D space relative to their parent.
     */
    "transform-style"?: CSSWideKeyword | any;
    /**
     * The transition CSS property is a shorthand property for transition-property, transition-duration, transition-timing-function,
     * and transition-delay. It allows to define the transition between two states of an element.
     */
    transition?: CSSWideKeyword | any;
    /**
     * Defines when the transition will start. A value of \u20180s\u2019 means the transition will execute as soon as the property is changed.
     * Otherwise, the value specifies an offset from the moment the property is changed, and the transition will delay execution by that offset.
     */
    "transition-delay"?: CSSWideKeyword | any;
    /**
     * The 'transition-duration' property specifies the length of time a transition animation takes to complete.
     */
    "transition-duration"?: CSSWideKeyword | any;
    /**
     * The 'transition-property' property specifies the name of the CSS property to which the transition is applied.
     */
    "transition-property"?: CSSWideKeyword | any;
    /**
     * Sets the pace of action within a transition
     */
    "transition-timing-function"?: CSSWideKeyword | any;
    /**
     * The unicode-bidi CSS property specifies the level of embedding with respect to the bidirectional algorithm.
     */
    "unicode-bidi"?: CSSWideKeyword | any;
    /**
     * unicode-range allows you to set a specific range of characters to be downloaded from a font (embedded using @font-face) and made available for use on the current page.
     */
    "unicode-range"?: CSSWideKeyword | any;
    /**
     * This is for all the high level UX stuff.
     */
    "user-focus"?: CSSWideKeyword | any;
    /**
     * For inputing user content
     */
    "user-input"?: CSSWideKeyword | any;
    /**
     * The vertical-align property controls how inline elements or text are vertically aligned compared to the baseline.
     * If this property is used on table-cells it controls the vertical alignment of content of the table cell.
     */
    "vertical-align"?: CSSWideKeyword | any;
    /**
     * The visibility property specifies whether the boxes generated by an element are rendered.
     */
    visibility?: CSSWideKeyword | any;
    /**
     * The voice-balance property sets the apparent position (in stereo sound) of the synthesized voice for spoken media.
     */
    "voice-balance"?: CSSWideKeyword | any;
    /**
     * The voice-duration property allows the author to explicitly set the amount of time it should take a speech synthesizer to read an element's content,
     * for example to allow the speech to be synchronized with other media.
     * With a value of auto (the default) the length of time it takes to read the content is determined by the content itself and the voice-rate property.
     */
    "voice-duration"?: CSSWideKeyword | any;
    /**
     * The voice-family property sets the speaker's voice used by a speech media agent to read an element.
     * The speaker may be specified as a named character (to match a voice option in the speech reading software)
     * or as a generic description of the age and gender of the voice.
     * Similar to the font-family property for visual media,
     * a comma-separated list of fallback options may be given in case the speech reader does not recognize the character name
     * or cannot synthesize the requested combination of generic properties.
     */
    "voice-family"?: CSSWideKeyword | any;
    /**
     * The voice-pitch property sets pitch or tone (high or low) for the synthesized speech when reading an element;
     * the pitch may be specified absolutely or relative to the normal pitch for the voice-family used to read the text.
     */
    "voice-pitch"?: CSSWideKeyword | any;
    /**
     * The voice-range property determines how much variation in pitch or tone will be created by the speech synthesize when reading an element.
     * Emphasized text, grammatical structures and punctuation may all be rendered as changes in pitch,
     * this property determines how strong or obvious those changes are;
     * large ranges are associated with enthusiastic or emotional speech,
     * while small ranges are associated with flat or mechanical speech.
     */
    "voice-range"?: CSSWideKeyword | any;
    /**
     * The voice-rate property sets the speed at which the voice synthesized by a speech media agent will read content.
     */
    "voice-rate"?: CSSWideKeyword | any;
    /**
     * The voice-stress property sets the level of vocal emphasis to be used for synthesized speech reading the element.
     */
    "voice-stress"?: CSSWideKeyword | any;
    /**
     * The voice-volume property sets the volume for spoken content in speech media. It replaces the deprecated volume property.
     */
    "voice-volume"?: CSSWideKeyword | any;
    /**
     * The white-space property controls whether and how white space inside the element is collapsed, and whether lines may wrap at unforced "soft wrap" opportunities.
     */
    "white-space"?: CSSWideKeyword | any;
    /**
     * Obsolete: unsupported.
     */
    "white-space-treatment"?: CSSWideKeyword | any;
    /**
     * In paged media, this property defines the mimimum number of lines
     * that must be left at the top of the second page.
     * See CSS 3 orphans, widows properties https://drafts.csswg.org/css-break-3/#widows-orphans
     */
    widows?: CSSWideKeyword | number;
    /**
     * Specifies the width of the content area of an element. The content area of the element width does not include the padding, border, and margin of the element.
     */
    width?: CSSWideKeyword | any;
    /**
     * The word-break property is often used when there is long generated content that is strung together without and spaces or hyphens to beak apart.
     * A common case of this is when there is a long URL that does not have any hyphens. This case could potentially cause the breaking of the layout as it could extend past the parent element.
     */
    "word-break"?: CSSWideKeyword | any;
    /**
     * The word-spacing CSS property specifies the spacing behavior between "words".
     */
    "word-spacing"?: CSSWideKeyword | any;
    /**
     * An alias of css/properties/overflow-wrap, word-wrap defines whether to break words when the content exceeds the boundaries of its container.
     */
    "word-wrap"?: CSSWideKeyword | any;
    /**
     * Specifies how exclusions affect inline content within block-level elements. Elements lay out their inline content in their content area but wrap around exclusion areas.
     */
    "wrap-flow"?: CSSWideKeyword | any;
    /**
     * Set the value that is used to offset the inner wrap shape from other shapes. Inline content that intersects a shape with this property will be pushed by this shape's margin.
     */
    "wrap-margin"?: CSSWideKeyword | any;
    /**
     * Obsolete and unsupported. Do not use.
     * This CSS property controls the text when it reaches the end of the block in which it is enclosed.
     */
    "wrap-option"?: CSSWideKeyword | any;
    /**
     * writing-mode specifies if lines of text are laid out horizontally or vertically, and the direction which lines of text and blocks progress.
     */
    "writing-mode"?: CSSWideKeyword | any;
    /**
     * The z-index property specifies the z-order of an element and its descendants.
     * When elements overlap, z-order determines which one covers the other.
     * See CSS 2 z-index property https://www.w3.org/TR/CSS2/visuren.html#z-index
     */
    "z-index"?: CSSWideKeyword | "auto" | number;
    /**
     * Sets the initial zoom factor of a document defined by @viewport.
     * See CSS zoom descriptor https://drafts.csswg.org/css-device-adapt/#zoom-desc
     */
    zoom?: CSSWideKeyword | "auto" | number | CSSPercentage;
    [propertyName: string]: any;
  }
  type HTMLAutocapitalize = "off" | "none" | "on" | "sentences" | "words" | "characters";
  type HTMLDir = "ltr" | "rtl" | "auto";
  type HTMLFormEncType = "application/x-www-form-urlencoded" | "multipart/form-data" | "text/plain";
  type HTMLFormMethod = "post" | "get" | "dialog";
  type HTMLCrossorigin = "anonymous" | "use-credentials" | "";
  type HTMLReferrerPolicy =
    | "no-referrer"
    | "no-referrer-when-downgrade"
    | "origin"
    | "origin-when-cross-origin"
    | "same-origin"
    | "strict-origin"
    | "strict-origin-when-cross-origin"
    | "unsafe-url";
  type HTMLIframeSandbox =
    | "allow-downloads-without-user-activation"
    | "allow-downloads"
    | "allow-forms"
    | "allow-modals"
    | "allow-orientation-lock"
    | "allow-pointer-lock"
    | "allow-popups"
    | "allow-popups-to-escape-sandbox"
    | "allow-presentation"
    | "allow-same-origin"
    | "allow-scripts"
    | "allow-storage-access-by-user-activation"
    | "allow-top-navigation"
    | "allow-top-navigation-by-user-activation";
  type HTMLLinkAs =
    | "audio"
    | "document"
    | "embed"
    | "fetch"
    | "font"
    | "image"
    | "object"
    | "script"
    | "style"
    | "track"
    | "video"
    | "worker";

  // All the WAI-ARIA 1.1 attributes from https://www.w3.org/TR/wai-aria-1.1/
  interface AriaAttributes {
    /** Identifies the currently active element when DOM focus is on a composite widget, textbox, group, or application. */
    "aria-activedescendant"?: string;
    /** Indicates whether assistive technologies will present all, or only parts of, the changed region based on the change notifications defined by the aria-relevant attribute. */
    "aria-atomic"?: boolean | "false" | "true";
    /**
     * Indicates whether inputting text could trigger display of one or more predictions of the user's intended value for an input and specifies how predictions would be
     * presented if they are made.
     */
    "aria-autocomplete"?: "none" | "inline" | "list" | "both";
    /** Indicates an element is being modified and that assistive technologies MAY want to wait until the modifications are complete before exposing them to the user. */
    "aria-busy"?: boolean | "false" | "true";
    /**
     * Indicates the current "checked" state of checkboxes, radio buttons, and other widgets.
     * @see aria-pressed @see aria-selected.
     */
    "aria-checked"?: boolean | "false" | "mixed" | "true";
    /**
     * Defines the total number of columns in a table, grid, or treegrid.
     * @see aria-colindex.
     */
    "aria-colcount"?: number | string;
    /**
     * Defines an element's column index or position with respect to the total number of columns within a table, grid, or treegrid.
     * @see aria-colcount @see aria-colspan.
     */
    "aria-colindex"?: number | string;
    /**
     * Defines the number of columns spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-colindex @see aria-rowspan.
     */
    "aria-colspan"?: number | string;
    /**
     * Identifies the element (or elements) whose contents or presence are controlled by the current element.
     * @see aria-owns.
     */
    "aria-controls"?: string;
    /** Indicates the element that represents the current item within a container or set of related elements. */
    "aria-current"?: boolean | "false" | "true" | "page" | "step" | "location" | "date" | "time";
    /**
     * Identifies the element (or elements) that describes the object.
     * @see aria-labelledby
     */
    "aria-describedby"?: string;
    /**
     * Identifies the element that provides a detailed, extended description for the object.
     * @see aria-describedby.
     */
    "aria-details"?: string;
    /**
     * Indicates that the element is perceivable but disabled, so it is not editable or otherwise operable.
     * @see aria-hidden @see aria-readonly.
     */
    "aria-disabled"?: boolean | "false" | "true";
    /**
     * Indicates what functions can be performed when a dragged object is released on the drop target.
     * @deprecated in ARIA 1.1
     */
    "aria-dropeffect"?: "none" | "copy" | "execute" | "link" | "move" | "popup";
    /**
     * Identifies the element that provides an error message for the object.
     * @see aria-invalid @see aria-describedby.
     */
    "aria-errormessage"?: string;
    /** Indicates whether the element, or another grouping element it controls, is currently expanded or collapsed. */
    "aria-expanded"?: boolean | "false" | "true";
    /**
     * Identifies the next element (or elements) in an alternate reading order of content which, at the user's discretion,
     * allows assistive technology to override the general default of reading in document source order.
     */
    "aria-flowto"?: string;
    /**
     * Indicates an element's "grabbed" state in a drag-and-drop operation.
     * @deprecated in ARIA 1.1
     */
    "aria-grabbed"?: boolean | "false" | "true";
    /** Indicates the availability and type of interactive popup element, such as menu or dialog, that can be triggered by an element. */
    "aria-haspopup"?: boolean | "false" | "true" | "menu" | "listbox" | "tree" | "grid" | "dialog";
    /**
     * Indicates whether the element is exposed to an accessibility API.
     * @see aria-disabled.
     */
    "aria-hidden"?: boolean | "false" | "true";
    /**
     * Indicates the entered value does not conform to the format expected by the application.
     * @see aria-errormessage.
     */
    "aria-invalid"?: boolean | "false" | "true" | "grammar" | "spelling";
    /** Indicates keyboard shortcuts that an author has implemented to activate or give focus to an element. */
    "aria-keyshortcuts"?: string;
    /**
     * Defines a string value that labels the current element.
     * @see aria-labelledby.
     */
    "aria-label"?: string;
    /**
     * Identifies the element (or elements) that labels the current element.
     * @see aria-describedby.
     */
    "aria-labelledby"?: string;
    /** Defines the hierarchical level of an element within a structure. */
    "aria-level"?: number | string;
    /** Indicates that an element will be updated, and describes the types of updates the user agents, assistive technologies, and user can expect from the live region. */
    "aria-live"?: "off" | "assertive" | "polite";
    /** Indicates whether an element is modal when displayed. */
    "aria-modal"?: boolean | "false" | "true";
    /** Indicates whether a text box accepts multiple lines of input or only a single line. */
    "aria-multiline"?: boolean | "false" | "true";
    /** Indicates that the user may select more than one item from the current selectable descendants. */
    "aria-multiselectable"?: boolean | "false" | "true";
    /** Indicates whether the element's orientation is horizontal, vertical, or unknown/ambiguous. */
    "aria-orientation"?: "horizontal" | "vertical";
    /**
     * Identifies an element (or elements) in order to define a visual, functional, or contextual parent/child relationship
     * between DOM elements where the DOM hierarchy cannot be used to represent the relationship.
     * @see aria-controls.
     */
    "aria-owns"?: string;
    /**
     * Defines a short hint (a word or short phrase) intended to aid the user with data entry when the control has no value.
     * A hint could be a sample value or a brief description of the expected format.
     */
    "aria-placeholder"?: string;
    /**
     * Defines an element's number or position in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-setsize.
     */
    "aria-posinset"?: number | string;
    /**
     * Indicates the current "pressed" state of toggle buttons.
     * @see aria-checked @see aria-selected.
     */
    "aria-pressed"?: boolean | "false" | "mixed" | "true";
    /**
     * Indicates that the element is not editable, but is otherwise operable.
     * @see aria-disabled.
     */
    "aria-readonly"?: boolean | "false" | "true";
    /**
     * Indicates what notifications the user agent will trigger when the accessibility tree within a live region is modified.
     * @see aria-atomic.
     */
    "aria-relevant"?:
      | "additions"
      | "additions removals"
      | "additions text"
      | "all"
      | "removals"
      | "removals additions"
      | "removals text"
      | "text"
      | "text additions"
      | "text removals";
    /** Indicates that user input is required on the element before a form may be submitted. */
    "aria-required"?: boolean | "false" | "true";
    /** Defines a human-readable, author-localized description for the role of an element. */
    "aria-roledescription"?: string;
    /**
     * Defines the total number of rows in a table, grid, or treegrid.
     * @see aria-rowindex.
     */
    "aria-rowcount"?: number | string;
    /**
     * Defines an element's row index or position with respect to the total number of rows within a table, grid, or treegrid.
     * @see aria-rowcount @see aria-rowspan.
     */
    "aria-rowindex"?: number | string;
    /**
     * Defines the number of rows spanned by a cell or gridcell within a table, grid, or treegrid.
     * @see aria-rowindex @see aria-colspan.
     */
    "aria-rowspan"?: number | string;
    /**
     * Indicates the current "selected" state of various widgets.
     * @see aria-checked @see aria-pressed.
     */
    "aria-selected"?: boolean | "false" | "true";
    /**
     * Defines the number of items in the current set of listitems or treeitems. Not required if all elements in the set are present in the DOM.
     * @see aria-posinset.
     */
    "aria-setsize"?: number | string;
    /** Indicates if items in a table or grid are sorted in ascending or descending order. */
    "aria-sort"?: "none" | "ascending" | "descending" | "other";
    /** Defines the maximum allowed value for a range widget. */
    "aria-valuemax"?: number | string;
    /** Defines the minimum allowed value for a range widget. */
    "aria-valuemin"?: number | string;
    /**
     * Defines the current value for a range widget.
     * @see aria-valuetext.
     */
    "aria-valuenow"?: number | string;
    /** Defines the human readable text alternative of aria-valuenow for a range widget. */
    "aria-valuetext"?: string;
  }

  interface HTMLAttributes<T> extends AriaAttributes, DOMAttributes<T> {
    accessKey?: string;
    className?: string;
    class?: string;
    contenteditable?: boolean | "inherit";
    contextmenu?: string;
    dir?: HTMLDir;
    draggable?: boolean;
    hidden?: boolean;
    id?: string;
    lang?: string;
    spellcheck?: boolean;
    style?: CSSProperties | string;
    tabindex?: number | string;
    title?: string;
    translate?: "yes" | "no";
    about?: string;
    datatype?: string;
    inlist?: any;
    prefix?: string;
    property?: string;
    resource?: string;
    typeof?: string;
    vocab?: string;
    role?:
      | "alert"
      | "alertdialog"
      | "application"
      | "article"
      | "banner"
      | "button"
      | "cell"
      | "checkbox"
      | "columnheader"
      | "combobox"
      | "complementary"
      | "contentinfo"
      | "definition"
      | "dialog"
      | "directory"
      | "document"
      | "feed"
      | "figure"
      | "form"
      | "grid"
      | "gridcell"
      | "group"
      | "heading"
      | "img"
      | "link"
      | "list"
      | "listbox"
      | "listitem"
      | "log"
      | "main"
      | "marquee"
      | "math"
      | "menu"
      | "menubar"
      | "menuitem"
      | "menuitemcheckbox"
      | "menuitemradio"
      | "meter"
      | "navigation"
      | "none"
      | "note"
      | "option"
      | "presentation"
      | "progressbar"
      | "radio"
      | "radiogroup"
      | "region"
      | "row"
      | "rowgroup"
      | "rowheader"
      | "scrollbar"
      | "search"
      | "searchbox"
      | "separator"
      | "slider"
      | "spinbutton"
      | "status"
      | "switch"
      | "tab"
      | "table"
      | "tablist"
      | "tabpanel"
      | "term"
      | "textbox"
      | "timer"
      | "toolbar"
      | "tooltip"
      | "tree"
      | "treegrid"
      | "treeitem";
    autocapitalize?: HTMLAutocapitalize;
    slot?: string;
    color?: string;
    itemprop?: string;
    itemscope?: boolean;
    itemtype?: string;
    itemid?: string;
    itemref?: string;
    part?: string;
    exportparts?: string;
    inputmode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
    contentEditable?: boolean | "inherit";
    contextMenu?: string;
    tabIndex?: number | string;
    autoCapitalize?: HTMLAutocapitalize;
    itemProp?: string;
    itemScope?: boolean;
    itemType?: string;
    itemId?: string;
    itemRef?: string;
    exportParts?: string;
    inputMode?: "none" | "text" | "tel" | "url" | "email" | "numeric" | "decimal" | "search";
  }
  interface AnchorHTMLAttributes<T> extends HTMLAttributes<T> {
    download?: any;
    href?: string;
    hreflang?: string;
    media?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    target?: string;
    type?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface AudioHTMLAttributes<T> extends MediaHTMLAttributes<T> {}
  interface AreaHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    coords?: string;
    download?: any;
    href?: string;
    hreflang?: string;
    ping?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    shape?: "rect" | "circle" | "poly" | "default";
    target?: string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface BaseHTMLAttributes<T> extends HTMLAttributes<T> {
    href?: string;
    target?: string;
  }
  interface BlockquoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ButtonHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    name?: string;
    type?: "submit" | "reset" | "button";
    value?: string;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
  }
  interface CanvasHTMLAttributes<T> extends HTMLAttributes<T> {
    width?: number | string;
    height?: number | string;
  }
  interface ColHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
    width?: number | string;
  }
  interface ColgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    span?: number | string;
  }
  interface DataHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: string | string[] | number;
  }
  interface DetailsHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
    onToggle?: EventHandlerUnion<T, Event>;
    ontoggle?: EventHandlerUnion<T, Event>;
  }
  interface DialogHtmlAttributes<T> extends HTMLAttributes<T> {
    open?: boolean;
  }
  interface EmbedHTMLAttributes<T> extends HTMLAttributes<T> {
    height?: number | string;
    src?: string;
    type?: string;
    width?: number | string;
  }
  interface FieldsetHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    form?: string;
    name?: string;
  }
  interface FormHTMLAttributes<T> extends HTMLAttributes<T> {
    acceptcharset?: string;
    action?: string;
    autocomplete?: string;
    encoding?: HTMLFormEncType;
    enctype?: HTMLFormEncType;
    method?: HTMLFormMethod;
    name?: string;
    novalidate?: boolean;
    target?: string;
    acceptCharset?: string;
    noValidate?: boolean;
  }
  interface IframeHTMLAttributes<T> extends HTMLAttributes<T> {
    allow?: string;
    allowfullscreen?: boolean;
    height?: number | string;
    name?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    sandbox?: HTMLIframeSandbox | string;
    src?: string;
    srcdoc?: string;
    width?: number | string;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface ImgHTMLAttributes<T> extends HTMLAttributes<T> {
    alt?: string;
    crossorigin?: HTMLCrossorigin;
    decoding?: "sync" | "async" | "auto";
    height?: number | string;
    ismap?: boolean;
    isMap?: boolean;
    loading?: "eager" | "lazy";
    referrerpolicy?: HTMLReferrerPolicy;
    referrerPolicy?: HTMLReferrerPolicy;
    sizes?: string;
    src?: string;
    srcset?: string;
    srcSet?: string;
    usemap?: string;
    useMap?: string;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
  }
  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {
    accept?: string;
    alt?: string;
    autocomplete?: string;
    autofocus?: boolean;
    capture?: boolean | string;
    checked?: boolean;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    form?: string;
    formaction?: string;
    formenctype?: HTMLFormEncType;
    formmethod?: HTMLFormMethod;
    formnovalidate?: boolean;
    formtarget?: string;
    height?: number | string;
    list?: string;
    max?: number | string;
    maxlength?: number | string;
    min?: number | string;
    minlength?: number | string;
    multiple?: boolean;
    name?: string;
    pattern?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    size?: number | string;
    src?: string;
    step?: number | string;
    type?: string;
    value?: string | string[] | number;
    width?: number | string;
    crossOrigin?: HTMLCrossorigin;
    formAction?: string;
    formEnctype?: HTMLFormEncType;
    formMethod?: HTMLFormMethod;
    formNoValidate?: boolean;
    formTarget?: string;
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface InsHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
    dateTime?: string;
  }
  interface KeygenHTMLAttributes<T> extends HTMLAttributes<T> {
    autofocus?: boolean;
    challenge?: string;
    disabled?: boolean;
    form?: string;
    keytype?: string;
    keyparams?: string;
    name?: string;
  }
  interface LabelHTMLAttributes<T> extends HTMLAttributes<T> {
    htmlFor?: string;
    for?: string;
    form?: string;
  }
  interface LiHTMLAttributes<T> extends HTMLAttributes<T> {
    value?: number | string;
  }
  interface LinkHTMLAttributes<T> extends HTMLAttributes<T> {
    as?: HTMLLinkAs;
    crossorigin?: HTMLCrossorigin;
    disabled?: boolean;
    href?: string;
    hreflang?: string;
    integrity?: string;
    media?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    rel?: string;
    sizes?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface MapHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
  }
  interface MediaHTMLAttributes<T> extends HTMLAttributes<T> {
    autoplay?: boolean;
    controls?: boolean;
    crossorigin?: HTMLCrossorigin;
    loop?: boolean;
    mediagroup?: string;
    muted?: boolean;
    preload?: "none" | "metadata" | "auto" | "";
    src?: string;
    crossOrigin?: HTMLCrossorigin;
    mediaGroup?: string;
  }
  interface MenuHTMLAttributes<T> extends HTMLAttributes<T> {
    label?: string;
    type?: "context" | "toolbar";
  }
  interface MetaHTMLAttributes<T> extends HTMLAttributes<T> {
    charset?: string;
    content?: string;
    httpequiv?: string;
    name?: string;
    httpEquiv?: string;
  }
  interface MeterHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    high?: number | string;
    low?: number | string;
    max?: number | string;
    min?: number | string;
    optimum?: number | string;
    value?: string | string[] | number;
  }
  interface QuoteHTMLAttributes<T> extends HTMLAttributes<T> {
    cite?: string;
  }
  interface ObjectHTMLAttributes<T> extends HTMLAttributes<T> {
    data?: string;
    form?: string;
    height?: number | string;
    name?: string;
    type?: string;
    usemap?: string;
    width?: number | string;
    useMap?: string;
  }
  interface OlHTMLAttributes<T> extends HTMLAttributes<T> {
    reversed?: boolean;
    start?: number | string;
    type?: "1" | "a" | "A" | "i" | "I";
  }
  interface OptgroupHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
  }
  interface OptionHTMLAttributes<T> extends HTMLAttributes<T> {
    disabled?: boolean;
    label?: string;
    selected?: boolean;
    value?: string | string[] | number;
  }
  interface OutputHTMLAttributes<T> extends HTMLAttributes<T> {
    form?: string;
    htmlFor?: string;
    for?: string;
    name?: string;
  }
  interface ParamHTMLAttributes<T> extends HTMLAttributes<T> {
    name?: string;
    value?: string | string[] | number;
  }
  interface ProgressHTMLAttributes<T> extends HTMLAttributes<T> {
    max?: number | string;
    value?: string | string[] | number;
  }
  interface ScriptHTMLAttributes<T> extends HTMLAttributes<T> {
    async?: boolean;
    charset?: string;
    crossorigin?: HTMLCrossorigin;
    defer?: boolean;
    integrity?: string;
    nomodule?: boolean;
    nonce?: string;
    referrerpolicy?: HTMLReferrerPolicy;
    src?: string;
    type?: string;
    crossOrigin?: HTMLCrossorigin;
    noModule?: boolean;
    referrerPolicy?: HTMLReferrerPolicy;
  }
  interface SelectHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    disabled?: boolean;
    form?: string;
    multiple?: boolean;
    name?: string;
    required?: boolean;
    size?: number | string;
    value?: string | string[] | number;
  }
  interface HTMLSlotElementAttributes<T = HTMLSlotElement> extends HTMLAttributes<T> {
    name?: string;
  }
  interface SourceHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    sizes?: string;
    src?: string;
    srcset?: string;
    type?: string;
  }
  interface StyleHTMLAttributes<T> extends HTMLAttributes<T> {
    media?: string;
    nonce?: string;
    scoped?: boolean;
    type?: string;
  }
  interface TdHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
  }
  interface TextareaHTMLAttributes<T> extends HTMLAttributes<T> {
    autocomplete?: string;
    autofocus?: boolean;
    cols?: number | string;
    dirname?: string;
    disabled?: boolean;
    form?: string;
    maxlength?: number | string;
    minlength?: number | string;
    name?: string;
    placeholder?: string;
    readonly?: boolean;
    required?: boolean;
    rows?: number | string;
    value?: string | string[] | number;
    wrap?: "hard" | "soft" | "off";
    maxLength?: number | string;
    minLength?: number | string;
    readOnly?: boolean;
  }
  interface ThHTMLAttributes<T> extends HTMLAttributes<T> {
    colspan?: number | string;
    headers?: string;
    rowspan?: number | string;
    colSpan?: number | string;
    rowSpan?: number | string;
    scope?: 'col' | 'row' | 'rowgroup' | 'colgroup';
  }
  interface TimeHTMLAttributes<T> extends HTMLAttributes<T> {
    datetime?: string;
    dateTime?: string;
  }
  interface TrackHTMLAttributes<T> extends HTMLAttributes<T> {
    default?: boolean;
    kind?: "subtitles" | "captions" | "descriptions" | "chapters" | "metadata";
    label?: string;
    src?: string;
    srclang?: string;
  }
  interface VideoHTMLAttributes<T> extends MediaHTMLAttributes<T> {
    height?: number | string;
    playsinline?: boolean;
    poster?: string;
    width?: number | string;
  }
  type SVGPreserveAspectRatio =
    | "none"
    | "xMinYMin"
    | "xMidYMin"
    | "xMaxYMin"
    | "xMinYMid"
    | "xMidYMid"
    | "xMaxYMid"
    | "xMinYMax"
    | "xMidYMax"
    | "xMaxYMax"
    | "xMinYMin meet"
    | "xMidYMin meet"
    | "xMaxYMin meet"
    | "xMinYMid meet"
    | "xMidYMid meet"
    | "xMaxYMid meet"
    | "xMinYMax meet"
    | "xMidYMax meet"
    | "xMaxYMax meet"
    | "xMinYMin slice"
    | "xMidYMin slice"
    | "xMaxYMin slice"
    | "xMinYMid slice"
    | "xMidYMid slice"
    | "xMaxYMid slice"
    | "xMinYMax slice"
    | "xMidYMax slice"
    | "xMaxYMax slice";
  type ImagePreserveAspectRatio =
    | SVGPreserveAspectRatio
    | "defer none"
    | "defer xMinYMin"
    | "defer xMidYMin"
    | "defer xMaxYMin"
    | "defer xMinYMid"
    | "defer xMidYMid"
    | "defer xMaxYMid"
    | "defer xMinYMax"
    | "defer xMidYMax"
    | "defer xMaxYMax"
    | "defer xMinYMin meet"
    | "defer xMidYMin meet"
    | "defer xMaxYMin meet"
    | "defer xMinYMid meet"
    | "defer xMidYMid meet"
    | "defer xMaxYMid meet"
    | "defer xMinYMax meet"
    | "defer xMidYMax meet"
    | "defer xMaxYMax meet"
    | "defer xMinYMin slice"
    | "defer xMidYMin slice"
    | "defer xMaxYMin slice"
    | "defer xMinYMid slice"
    | "defer xMidYMid slice"
    | "defer xMaxYMid slice"
    | "defer xMinYMax slice"
    | "defer xMidYMax slice"
    | "defer xMaxYMax slice";
  type SVGUnits = "userSpaceOnUse" | "objectBoundingBox";
  interface CoreSVGAttributes<T> extends DOMAttributes<T> {
    id?: string;
    lang?: string;
    tabIndex?: number | string;
    tabindex?: number | string;
  }
  interface StylableSVGAttributes {
    class?: string;
    className?: string;
    style?: CSSProperties | string;
  }
  interface TransformableSVGAttributes {
    transform?: string;
  }
  interface ConditionalProcessingSVGAttributes {
    requiredExtensions?: string;
    requiredFeatures?: string;
    systemLanguage?: string;
  }
  interface ExternalResourceSVGAttributes {
    externalResourcesRequired?: "true" | "false";
  }
  interface AnimationTimingSVGAttributes {
    begin?: string;
    dur?: string;
    end?: string;
    min?: string;
    max?: string;
    restart?: "always" | "whenNotActive" | "never";
    repeatCount?: number | "indefinite";
    repeatDur?: string;
    fill?: "freeze" | "remove";
  }
  interface AnimationValueSVGAttributes {
    calcMode?: "discrete" | "linear" | "paced" | "spline";
    values?: string;
    keyTimes?: string;
    keySplines?: string;
    from?: number | string;
    to?: number | string;
    by?: number | string;
  }
  interface AnimationAdditionSVGAttributes {
    attributeName?: string;
    additive?: "replace" | "sum";
    accumulate?: "none" | "sum";
  }
  interface AnimationAttributeTargetSVGAttributes {
    attributeName?: string;
    attributeType?: "CSS" | "XML" | "auto";
  }
  interface PresentationSVGAttributes {
    "alignment-baseline"?:
      | "auto"
      | "baseline"
      | "before-edge"
      | "text-before-edge"
      | "middle"
      | "central"
      | "after-edge"
      | "text-after-edge"
      | "ideographic"
      | "alphabetic"
      | "hanging"
      | "mathematical"
      | "inherit";
    "baseline-shift"?: number | string;
    clip?: string;
    "clip-path"?: string;
    "clip-rule"?: "nonzero" | "evenodd" | "inherit";
    color?: string;
    "color-interpolation"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-interpolation-filters"?: "auto" | "sRGB" | "linearRGB" | "inherit";
    "color-profile"?: string;
    "color-rendering"?: "auto" | "optimizeSpeed" | "optimizeQuality" | "inherit";
    cursor?: string;
    direction?: "ltr" | "rtl" | "inherit";
    display?: string;
    "dominant-baseline"?:
      | "auto"
      | "text-bottom"
      | "alphabetic"
      | "ideographic"
      | "middle"
      | "central"
      | "mathematical"
      | "hanging"
      | "text-top"
      | "inherit";
    "enable-background"?: string;
    fill?: string;
    "fill-opacity"?: number | string | "inherit";
    "fill-rule"?: "nonzero" | "evenodd" | "inherit";
    filter?: string;
    "flood-color"?: string;
    "flood-opacity"?: number | string | "inherit";
    "font-family"?: string;
    "font-size"?: string;
    "font-size-adjust"?: number | string;
    "font-stretch"?: string;
    "font-style"?: "normal" | "italic" | "oblique" | "inherit";
    "font-variant"?: string;
    "font-weight"?: number | string;
    "glyph-orientation-horizontal"?: string;
    "glyph-orientation-vertical"?: string;
    "image-rendering"?: "auto" | "optimizeQuality" | "optimizeSpeed" | "inherit";
    kerning?: string;
    "letter-spacing"?: number | string;
    "lighting-color"?: string;
    "marker-end"?: string;
    "marker-mid"?: string;
    "marker-start"?: string;
    mask?: string;
    opacity?: number | string | "inherit";
    overflow?: "visible" | "hidden" | "scroll" | "auto" | "inherit";
    "pointer-events"?:
      | "bounding-box"
      | "visiblePainted"
      | "visibleFill"
      | "visibleStroke"
      | "visible"
      | "painted"
      | "color"
      | "fill"
      | "stroke"
      | "all"
      | "none"
      | "inherit";
    "shape-rendering"?: "auto" | "optimizeSpeed" | "crispEdges" | "geometricPrecision" | "inherit";
    "stop-color"?: string;
    "stop-opacity"?: number | string | "inherit";
    stroke?: string;
    "stroke-dasharray"?: string;
    "stroke-dashoffset"?: number | string;
    "stroke-linecap"?: "butt" | "round" | "square" | "inherit";
    "stroke-linejoin"?: "arcs" | "bevel" | "miter" | "miter-clip" | "round" | "inherit";
    "stroke-miterlimit"?: number | string | "inherit";
    "stroke-opacity"?: number | string | "inherit";
    "stroke-width"?: number | string;
    "text-anchor"?: "start" | "middle" | "end" | "inherit";
    "text-decoration"?: "none" | "underline" | "overline" | "line-through" | "blink" | "inherit";
    "text-rendering"?:
      | "auto"
      | "optimizeSpeed"
      | "optimizeLegibility"
      | "geometricPrecision"
      | "inherit";
    "unicode-bidi"?: string;
    visibility?: "visible" | "hidden" | "collapse" | "inherit";
    "word-spacing"?: number | string;
    "writing-mode"?: "lr-tb" | "rl-tb" | "tb-rl" | "lr" | "rl" | "tb" | "inherit";
  }
  interface AnimationElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      ConditionalProcessingSVGAttributes {}
  interface ContainerElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-path"
        | "mask"
        | "cursor"
        | "opacity"
        | "filter"
        | "enable-background"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface FilterPrimitiveElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "color-interpolation-filters"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    result?: string;
  }
  interface SingleInputFilterSVGAttributes {
    in?: string;
  }
  interface DoubleInputFilterSVGAttributes {
    in?: string;
    in2?: string;
  }
  interface FitToViewBoxSVGAttributes {
    viewBox?: string;
    preserveAspectRatio?: SVGPreserveAspectRatio;
  }
  interface GradientElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    gradientUnits?: SVGUnits;
    gradientTransform?: string;
    spreadMethod?: "pad" | "reflect" | "repeat";
  }
  interface GraphicsElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "clip-rule"
        | "mask"
        | "pointer-events"
        | "cursor"
        | "opacity"
        | "filter"
        | "display"
        | "visibility"
        | "color-interpolation"
        | "color-rendering"
      > {}
  interface LightSourceElementSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface NewViewportSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    viewBox?: string;
  }
  interface ShapeElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
        | "shape-rendering"
      > {}
  interface TextContentElementSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      Pick<
        PresentationSVGAttributes,
        | "font-family"
        | "font-style"
        | "font-variant"
        | "font-weight"
        | "font-stretch"
        | "font-size"
        | "font-size-adjust"
        | "kerning"
        | "letter-spacing"
        | "word-spacing"
        | "text-decoration"
        | "glyph-orientation-horizontal"
        | "glyph-orientation-vertical"
        | "direction"
        | "unicode-bidi"
        | "text-anchor"
        | "dominant-baseline"
        | "color"
        | "fill"
        | "fill-rule"
        | "fill-opacity"
        | "stroke"
        | "stroke-width"
        | "stroke-linecap"
        | "stroke-linejoin"
        | "stroke-miterlimit"
        | "stroke-dasharray"
        | "stroke-dashoffset"
        | "stroke-opacity"
      > {}
  interface ZoomAndPanSVGAttributes {
    zoomAndPan?: "disable" | "magnify";
  }
  interface AnimateSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes,
      Pick<PresentationSVGAttributes, "color-interpolation" | "color-rendering"> {}
  interface AnimateMotionSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    path?: string;
    keyPoints?: string;
    rotate?: number | string | "auto" | "auto-reverse";
    origin?: "default";
  }
  interface AnimateTransformSVGAttributes<T>
    extends AnimationElementSVGAttributes<T>,
      AnimationAttributeTargetSVGAttributes,
      AnimationTimingSVGAttributes,
      AnimationValueSVGAttributes,
      AnimationAdditionSVGAttributes {
    type?: "translate" | "scale" | "rotate" | "skewX" | "skewY";
  }
  interface CircleSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
  }
  interface ClipPathSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "clip-path"> {
    clipPathUnits?: SVGUnits;
  }
  interface DefsSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {}
  interface DescSVGAttributes<T> extends CoreSVGAttributes<T>, StylableSVGAttributes {}
  interface EllipseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    cx?: number | string;
    cy?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface FeBlendSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    mode?: "normal" | "multiply" | "screen" | "darken" | "lighten";
  }
  interface FeColorMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    type?: "matrix" | "saturate" | "hueRotate" | "luminanceToAlpha";
    values?: string;
  }
  interface FeComponentTransferSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeCompositeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "over" | "in" | "out" | "atop" | "xor" | "arithmetic";
    k1?: number | string;
    k2?: number | string;
    k3?: number | string;
    k4?: number | string;
  }
  interface FeConvolveMatrixSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    order?: number | string;
    kernelMatrix?: string;
    divisor?: number | string;
    bias?: number | string;
    targetX?: number | string;
    targetY?: number | string;
    edgeMode?: "duplicate" | "wrap" | "none";
    kernelUnitLength?: number | string;
    preserveAlpha?: "true" | "false";
  }
  interface FeDiffuseLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: number | string;
    diffuseConstant?: number | string;
    kernelUnitLength?: number | string;
  }
  interface FeDisplacementMapSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      DoubleInputFilterSVGAttributes,
      StylableSVGAttributes {
    scale?: number | string;
    xChannelSelector?: "R" | "G" | "B" | "A";
    yChannelSelector?: "R" | "G" | "B" | "A";
  }
  interface FeDistantLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    azimuth?: number | string;
    elevation?: number | string;
  }
  interface FeFloodSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "flood-color" | "flood-opacity"> {}
  interface FeFuncSVGAttributes<T> extends CoreSVGAttributes<T> {
    type?: "identity" | "table" | "discrete" | "linear" | "gamma";
    tableValues?: string;
    slope?: number | string;
    intercept?: number | string;
    amplitude?: number | string;
    exponent?: number | string;
    offset?: number | string;
  }
  interface FeGaussianBlurSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    stdDeviation?: number | string;
  }
  interface FeImageSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    preserveAspectRatio?: SVGPreserveAspectRatio;
    href?: string;
  }
  interface FeMergeSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {}
  interface FeMergeNodeSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      SingleInputFilterSVGAttributes {}
  interface FeMorphologySVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    operator?: "erode" | "dilate";
    radius?: number | string;
  }
  interface FeOffsetSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {
    dx?: number | string;
    dy?: number | string;
  }
  interface FePointLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
  }
  interface FeSpecularLightingSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "lighting-color"> {
    surfaceScale?: string;
    specularConstant?: string;
    specularExponent?: string;
    kernelUnitLength?: number | string;
  }
  interface FeSpotLightSVGAttributes<T> extends LightSourceElementSVGAttributes<T> {
    x?: number | string;
    y?: number | string;
    z?: number | string;
    pointsAtX?: number | string;
    pointsAtY?: number | string;
    pointsAtZ?: number | string;
    specularExponent?: number | string;
    limitingConeAngle?: number | string;
  }
  interface FeTileSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      SingleInputFilterSVGAttributes,
      StylableSVGAttributes {}
  interface FeTurbulanceSVGAttributes<T>
    extends FilterPrimitiveElementSVGAttributes<T>,
      StylableSVGAttributes {
    baseFrequency?: number | string;
    numOctaves?: number | string;
    seed?: number | string;
    stitchTiles?: "stitch" | "noStitch";
    type?: "fractalNoise" | "turbulence";
  }
  interface FilterSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    filterUnits?: SVGUnits;
    primitiveUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    filterRes?: number | string;
  }
  interface ForeignObjectSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface GSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface ImageSVGAttributes<T>
    extends NewViewportSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "color-profile" | "image-rendering"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    preserveAspectRatio?: ImagePreserveAspectRatio;
    href?: string;
  }
  interface LineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    x1?: number | string;
    y1?: number | string;
    x2?: number | string;
    y2?: number | string;
  }
  interface LinearGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    x1?: number | string;
    x2?: number | string;
    y1?: number | string;
    y2?: number | string;
  }
  interface MarkerSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    markerUnits?: "strokeWidth" | "userSpaceOnUse";
    refX?: number | string;
    refY?: number | string;
    markerWidth?: number | string;
    markerHeight?: number | string;
    orient?: string;
  }
  interface MaskSVGAttributes<T>
    extends Omit<ContainerElementSVGAttributes<T>, "opacity" | "filter">,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes {
    maskUnits?: SVGUnits;
    maskContentUnits?: SVGUnits;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
  }
  interface MetadataSVGAttributes<T> extends CoreSVGAttributes<T> {}
  interface PathSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    d?: string;
    pathLength?: number | string;
  }
  interface PatternSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      Pick<PresentationSVGAttributes, "overflow" | "clip"> {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    patternUnits?: SVGUnits;
    patternContentUnits?: SVGUnits;
    patternTransform?: string;
  }
  interface PolygonSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface PolylineSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "marker-start" | "marker-mid" | "marker-end"> {
    points?: string;
  }
  interface RadialGradientSVGAttributes<T> extends GradientElementSVGAttributes<T> {
    cx?: number | string;
    cy?: number | string;
    r?: number | string;
    fx?: number | string;
    fy?: number | string;
  }
  interface RectSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ShapeElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    rx?: number | string;
    ry?: number | string;
  }
  interface StopSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      StylableSVGAttributes,
      Pick<PresentationSVGAttributes, "color" | "stop-color" | "stop-opacity"> {
    offset?: number | string;
  }
  interface SvgSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes,
      PresentationSVGAttributes {
    version?: string;
    baseProfile?: string;
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    contentScriptType?: string;
    contentStyleType?: string;
    xmlns?: string;
  }
  interface SwitchSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "display" | "visibility"> {}
  interface SymbolSVGAttributes<T>
    extends ContainerElementSVGAttributes<T>,
      NewViewportSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      FitToViewBoxSVGAttributes {}
  interface TextSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes,
      Pick<PresentationSVGAttributes, "writing-mode" | "text-rendering"> {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface TextPathSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    startOffset?: number | string;
    method?: "align" | "stretch";
    spacing?: "auto" | "exact";
    href?: string;
  }
  interface TSpanSVGAttributes<T>
    extends TextContentElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      Pick<
        PresentationSVGAttributes,
        "alignment-baseline" | "baseline-shift" | "display" | "visibility"
      > {
    x?: number | string;
    y?: number | string;
    dx?: number | string;
    dy?: number | string;
    rotate?: number | string;
    textLength?: number | string;
    lengthAdjust?: "spacing" | "spacingAndGlyphs";
  }
  interface UseSVGAttributes<T>
    extends GraphicsElementSVGAttributes<T>,
      ConditionalProcessingSVGAttributes,
      ExternalResourceSVGAttributes,
      StylableSVGAttributes,
      TransformableSVGAttributes {
    x?: number | string;
    y?: number | string;
    width?: number | string;
    height?: number | string;
    href?: string;
  }
  interface ViewSVGAttributes<T>
    extends CoreSVGAttributes<T>,
      ExternalResourceSVGAttributes,
      FitToViewBoxSVGAttributes,
      ZoomAndPanSVGAttributes {
    viewTarget?: string;
  }
  interface IntrinsicElements {
    a: AnchorHTMLAttributes<HTMLAnchorElement>;
    abbr: HTMLAttributes<HTMLElement>;
    address: HTMLAttributes<HTMLElement>;
    area: AreaHTMLAttributes<HTMLAreaElement>;
    article: HTMLAttributes<HTMLElement>;
    aside: HTMLAttributes<HTMLElement>;
    audio: AudioHTMLAttributes<HTMLAudioElement>;
    b: HTMLAttributes<HTMLElement>;
    base: BaseHTMLAttributes<HTMLBaseElement>;
    bdi: HTMLAttributes<HTMLElement>;
    bdo: HTMLAttributes<HTMLElement>;
    big: HTMLAttributes<HTMLElement>;
    blockquote: BlockquoteHTMLAttributes<HTMLElement>;
    body: HTMLAttributes<HTMLBodyElement>;
    br: HTMLAttributes<HTMLBRElement>;
    button: ButtonHTMLAttributes<HTMLButtonElement>;
    canvas: CanvasHTMLAttributes<HTMLCanvasElement>;
    caption: HTMLAttributes<HTMLElement>;
    cite: HTMLAttributes<HTMLElement>;
    code: HTMLAttributes<HTMLElement>;
    col: ColHTMLAttributes<HTMLTableColElement>;
    colgroup: ColgroupHTMLAttributes<HTMLTableColElement>;
    data: DataHTMLAttributes<HTMLElement>;
    datalist: HTMLAttributes<HTMLDataListElement>;
    dd: HTMLAttributes<HTMLElement>;
    del: HTMLAttributes<HTMLElement>;
    details: DetailsHtmlAttributes<HTMLDetailsElement>;
    dfn: HTMLAttributes<HTMLElement>;
    dialog: DialogHtmlAttributes<HTMLElement>;
    div: HTMLAttributes<HTMLDivElement>;
    dl: HTMLAttributes<HTMLDListElement>;
    dt: HTMLAttributes<HTMLElement>;
    em: HTMLAttributes<HTMLElement>;
    embed: EmbedHTMLAttributes<HTMLEmbedElement>;
    fieldset: FieldsetHTMLAttributes<HTMLFieldSetElement>;
    figcaption: HTMLAttributes<HTMLElement>;
    figure: HTMLAttributes<HTMLElement>;
    footer: HTMLAttributes<HTMLElement>;
    form: FormHTMLAttributes<HTMLFormElement>;
    h1: HTMLAttributes<HTMLHeadingElement>;
    h2: HTMLAttributes<HTMLHeadingElement>;
    h3: HTMLAttributes<HTMLHeadingElement>;
    h4: HTMLAttributes<HTMLHeadingElement>;
    h5: HTMLAttributes<HTMLHeadingElement>;
    h6: HTMLAttributes<HTMLHeadingElement>;
    head: HTMLAttributes<HTMLHeadElement>;
    header: HTMLAttributes<HTMLElement>;
    hgroup: HTMLAttributes<HTMLElement>;
    hr: HTMLAttributes<HTMLHRElement>;
    html: HTMLAttributes<HTMLHtmlElement>;
    i: HTMLAttributes<HTMLElement>;
    iframe: IframeHTMLAttributes<HTMLIFrameElement>;
    img: ImgHTMLAttributes<HTMLImageElement>;
    input: InputHTMLAttributes<HTMLInputElement>;
    ins: InsHTMLAttributes<HTMLModElement>;
    kbd: HTMLAttributes<HTMLElement>;
    keygen: KeygenHTMLAttributes<HTMLElement>;
    label: LabelHTMLAttributes<HTMLLabelElement>;
    legend: HTMLAttributes<HTMLLegendElement>;
    li: LiHTMLAttributes<HTMLLIElement>;
    link: LinkHTMLAttributes<HTMLLinkElement>;
    main: HTMLAttributes<HTMLElement>;
    map: MapHTMLAttributes<HTMLMapElement>;
    mark: HTMLAttributes<HTMLElement>;
    menu: MenuHTMLAttributes<HTMLElement>;
    menuitem: HTMLAttributes<HTMLElement>;
    meta: MetaHTMLAttributes<HTMLMetaElement>;
    meter: MeterHTMLAttributes<HTMLElement>;
    nav: HTMLAttributes<HTMLElement>;
    noindex: HTMLAttributes<HTMLElement>;
    noscript: HTMLAttributes<HTMLElement>;
    object: ObjectHTMLAttributes<HTMLObjectElement>;
    ol: OlHTMLAttributes<HTMLOListElement>;
    optgroup: OptgroupHTMLAttributes<HTMLOptGroupElement>;
    option: OptionHTMLAttributes<HTMLOptionElement>;
    output: OutputHTMLAttributes<HTMLElement>;
    p: HTMLAttributes<HTMLParagraphElement>;
    param: ParamHTMLAttributes<HTMLParamElement>;
    picture: HTMLAttributes<HTMLElement>;
    pre: HTMLAttributes<HTMLPreElement>;
    progress: ProgressHTMLAttributes<HTMLProgressElement>;
    q: QuoteHTMLAttributes<HTMLQuoteElement>;
    rp: HTMLAttributes<HTMLElement>;
    rt: HTMLAttributes<HTMLElement>;
    ruby: HTMLAttributes<HTMLElement>;
    s: HTMLAttributes<HTMLElement>;
    samp: HTMLAttributes<HTMLElement>;
    script: ScriptHTMLAttributes<HTMLElement>;
    section: HTMLAttributes<HTMLElement>;
    select: SelectHTMLAttributes<HTMLSelectElement>;
    slot: HTMLSlotElementAttributes;
    small: HTMLAttributes<HTMLElement>;
    source: SourceHTMLAttributes<HTMLSourceElement>;
    span: HTMLAttributes<HTMLSpanElement>;
    strong: HTMLAttributes<HTMLElement>;
    style: StyleHTMLAttributes<HTMLStyleElement>;
    sub: HTMLAttributes<HTMLElement>;
    summary: HTMLAttributes<HTMLElement>;
    sup: HTMLAttributes<HTMLElement>;
    table: HTMLAttributes<HTMLTableElement>;
    tbody: HTMLAttributes<HTMLTableSectionElement>;
    td: TdHTMLAttributes<HTMLTableDataCellElement>;
    textarea: TextareaHTMLAttributes<HTMLTextAreaElement>;
    tfoot: HTMLAttributes<HTMLTableSectionElement>;
    th: ThHTMLAttributes<HTMLTableHeaderCellElement>;
    thead: HTMLAttributes<HTMLTableSectionElement>;
    time: TimeHTMLAttributes<HTMLElement>;
    title: HTMLAttributes<HTMLTitleElement>;
    tr: HTMLAttributes<HTMLTableRowElement>;
    track: TrackHTMLAttributes<HTMLTrackElement>;
    u: HTMLAttributes<HTMLElement>;
    ul: HTMLAttributes<HTMLUListElement>;
    var: HTMLAttributes<HTMLElement>;
    video: VideoHTMLAttributes<HTMLVideoElement>;
    wbr: HTMLAttributes<HTMLElement>;
    svg: SvgSVGAttributes<SVGSVGElement>;
    animate: AnimateSVGAttributes<SVGAnimateElement>;
    animateMotion: AnimateMotionSVGAttributes<SVGAnimateMotionElement>;
    animateTransform: AnimateTransformSVGAttributes<SVGAnimateTransformElement>;
    circle: CircleSVGAttributes<SVGCircleElement>;
    clipPath: ClipPathSVGAttributes<SVGClipPathElement>;
    defs: DefsSVGAttributes<SVGDefsElement>;
    desc: DescSVGAttributes<SVGDescElement>;
    ellipse: EllipseSVGAttributes<SVGEllipseElement>;
    feBlend: FeBlendSVGAttributes<SVGFEBlendElement>;
    feColorMatrix: FeColorMatrixSVGAttributes<SVGFEColorMatrixElement>;
    feComponentTransfer: FeComponentTransferSVGAttributes<SVGFEComponentTransferElement>;
    feComposite: FeCompositeSVGAttributes<SVGFECompositeElement>;
    feConvolveMatrix: FeConvolveMatrixSVGAttributes<SVGFEConvolveMatrixElement>;
    feDiffuseLighting: FeDiffuseLightingSVGAttributes<SVGFEDiffuseLightingElement>;
    feDisplacementMap: FeDisplacementMapSVGAttributes<SVGFEDisplacementMapElement>;
    feDistantLight: FeDistantLightSVGAttributes<SVGFEDistantLightElement>;
    feFlood: FeFloodSVGAttributes<SVGFEFloodElement>;
    feFuncA: FeFuncSVGAttributes<SVGFEFuncAElement>;
    feFuncB: FeFuncSVGAttributes<SVGFEFuncBElement>;
    feFuncG: FeFuncSVGAttributes<SVGFEFuncGElement>;
    feFuncR: FeFuncSVGAttributes<SVGFEFuncRElement>;
    feGaussianBlur: FeGaussianBlurSVGAttributes<SVGFEGaussianBlurElement>;
    feImage: FeImageSVGAttributes<SVGFEImageElement>;
    feMerge: FeMergeSVGAttributes<SVGFEMergeElement>;
    feMergeNode: FeMergeNodeSVGAttributes<SVGFEMergeNodeElement>;
    feMorphology: FeMorphologySVGAttributes<SVGFEMorphologyElement>;
    feOffset: FeOffsetSVGAttributes<SVGFEOffsetElement>;
    fePointLight: FePointLightSVGAttributes<SVGFEPointLightElement>;
    feSpecularLighting: FeSpecularLightingSVGAttributes<SVGFESpecularLightingElement>;
    feSpotLight: FeSpotLightSVGAttributes<SVGFESpotLightElement>;
    feTile: FeTileSVGAttributes<SVGFETileElement>;
    feTurbulence: FeTurbulanceSVGAttributes<SVGFETurbulenceElement>;
    filter: FilterSVGAttributes<SVGFilterElement>;
    foreignObject: ForeignObjectSVGAttributes<SVGForeignObjectElement>;
    g: GSVGAttributes<SVGGElement>;
    image: ImageSVGAttributes<SVGImageElement>;
    line: LineSVGAttributes<SVGLineElement>;
    linearGradient: LinearGradientSVGAttributes<SVGLinearGradientElement>;
    marker: MarkerSVGAttributes<SVGMarkerElement>;
    mask: MaskSVGAttributes<SVGMaskElement>;
    metadata: MetadataSVGAttributes<SVGMetadataElement>;
    path: PathSVGAttributes<SVGPathElement>;
    pattern: PatternSVGAttributes<SVGPatternElement>;
    polygon: PolygonSVGAttributes<SVGPolygonElement>;
    polyline: PolylineSVGAttributes<SVGPolylineElement>;
    radialGradient: RadialGradientSVGAttributes<SVGRadialGradientElement>;
    rect: RectSVGAttributes<SVGRectElement>;
    stop: StopSVGAttributes<SVGStopElement>;
    switch: SwitchSVGAttributes<SVGSwitchElement>;
    symbol: SymbolSVGAttributes<SVGSymbolElement>;
    text: TextSVGAttributes<SVGTextElement>;
    textPath: TextPathSVGAttributes<SVGTextPathElement>;
    tspan: TSpanSVGAttributes<SVGTSpanElement>;
    use: UseSVGAttributes<SVGUseElement>;
    view: ViewSVGAttributes<SVGViewElement>;
  }
}
`,"universal/package.json":`{
  "name": "solid-js/universal",
  "main": "./dist/universal.cjs",
  "module": "./dist/universal.js",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/universal.js",
      "require": "./dist/universal.cjs"
    }
  }
}
`,"web/package.json":`{
  "name": "solid-js/web",
  "main": "./dist/server.cjs",
  "module": "./dist/server.js",
  "browser": {
    "./dist/server.cjs": "./dist/web.cjs",
    "./dist/server.js": "./dist/web.js"
  },
  "unpkg": "./dist/web.cjs",
  "types": "./types/index.d.ts",
  "type": "module",
  "sideEffects": false,
  "exports": {
    ".": {
      "browser": {
        "development": {
          "import": "./dist/dev.js",
          "require": "./dist/dev.cjs"
        },
        "import": "./dist/web.js",
        "require": "./dist/web.cjs"
      },
      "node": {
        "import": "./dist/server.js",
        "require": "./dist/server.cjs"
      },
      "development": {
        "import": "./dist/dev.js",
        "require": "./dist/dev.cjs"
      },
      "import": "./dist/web.js",
      "require": "./dist/web.cjs"
    }
  }
}
`,"h/types/index.d.ts":`declare const _default: import("hyper-dom-expressions").HyperScript;
export default _default;
`,"html/types/index.d.ts":`declare const _default: import("lit-dom-expressions").HTMLTag;
export default _default;
`,"store/types/index.d.ts":`export { createStore, unwrap, $RAW } from "./store";
export type { Store, SetStoreFunction, NotWrappable, SolidStore, StoreNode, StoreSetter, StorePathRange, ArrayFilterFn, Part, DeepReadonly, DeepMutable } from "./store";
export * from "./mutable";
export * from "./modifiers";
`,"store/types/modifiers.d.ts":`import { DeepMutable } from "./store";
export declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: DeepMutable<T>) => void): (state: T) => T;
`,"store/types/mutable.d.ts":`import { StoreNode } from "./store";
export declare function createMutable<T extends StoreNode>(state: T, options?: {
    name?: string;
}): T;
`,"store/types/server.d.ts":`import type { DeepMutable, SetStoreFunction, Store } from "store";
export declare const $RAW: unique symbol;
export declare function isWrappable(obj: any): boolean;
export declare function unwrap<T>(item: any): T;
export declare function setProperty(state: any, property: PropertyKey, value: any, force?: boolean): void;
export declare function updatePath(current: any, path: any[], traversed?: PropertyKey[]): void;
export declare function createStore<T>(state: T | Store<T>): [Store<T>, SetStoreFunction<T>];
export declare function createMutable<T>(state: T | Store<T>): T;
declare type ReconcileOptions = {
    key?: string | null;
    merge?: boolean;
};
export declare function reconcile<T extends U, U>(value: T, options?: ReconcileOptions): (state: U) => T;
export declare function produce<T>(fn: (state: DeepMutable<T>) => void): (state: T) => T;
export {};
`,"store/types/store.d.ts":`import { Accessor } from "../..";
export declare const $RAW: unique symbol, $NODE: unique symbol, $NAME: unique symbol;
export declare type StoreNode = Record<PropertyKey, any>;
export declare namespace SolidStore {
    interface Unwrappable {
    }
}
export declare type NotWrappable = string | number | bigint | symbol | boolean | Function | null | undefined | SolidStore.Unwrappable[keyof SolidStore.Unwrappable];
export declare type Store<T> = DeepReadonly<T>;
export declare function isWrappable(obj: any): any;
export declare function unwrap<T extends StoreNode>(item: any, set?: Set<unknown>): T;
export declare function getDataNodes(target: StoreNode): any;
export declare function proxyDescriptor(target: StoreNode, property: PropertyKey): PropertyDescriptor | undefined;
export declare function ownKeys(target: StoreNode): (string | symbol)[];
export declare function createDataNode(): Accessor<void> & {
    $: () => void;
};
export declare function setProperty(state: StoreNode, property: PropertyKey, value: any): void;
export declare function updatePath(current: StoreNode, path: any[], traversed?: PropertyKey[]): void;
export declare type DeepReadonly<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    readonly [K in keyof T]: DeepReadonly<T[K]>;
};
export declare type DeepMutable<T> = 0 extends 1 & T ? T : T extends NotWrappable ? T : {
    -readonly [K in keyof T]: DeepMutable<T[K]>;
};
export declare type StorePathRange = {
    from?: number;
    to?: number;
    by?: number;
};
export declare type ArrayFilterFn<T> = (item: DeepReadonly<T>, index: number) => boolean;
export declare type StoreSetter<T, U extends PropertyKey[] = []> = ((prevState: DeepReadonly<T>, traversed: U) => T | Partial<T> | DeepReadonly<T> | Partial<DeepReadonly<T>> | void) | T | Partial<T> | DeepReadonly<T> | Partial<DeepReadonly<T>>;
export declare type Part<T, K extends KeyOf<T> = KeyOf<T>> = [K] extends [never] ? never : K | readonly K[] | ([T] extends [readonly unknown[]] ? ArrayFilterFn<T[number]> | StorePathRange : never);
declare type W<T> = Exclude<T, NotWrappable>;
declare type KeyOf<T> = number extends keyof T ? 0 extends 1 & T ? keyof T : [T] extends [readonly unknown[]] ? number : [T] extends [never] ? never : keyof T : keyof T;
declare type Rest<T, U extends PropertyKey[]> = [StoreSetter<T, U>] | (0 extends 1 & T ? [...Part<any>[], StoreSetter<any, PropertyKey[]>] : DistributeRest<W<T>, KeyOf<W<T>>, U>);
declare type DistributeRest<T, K, U extends PropertyKey[]> = [T] extends [never] ? never : K extends KeyOf<T> ? [Part<T, K>, ...Rest<T[K], [K, ...U]>] : never;
export interface SetStoreFunction<T> {
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>, K7 extends KeyOf<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, k7: Part<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>, K7>, ...rest: Rest<W<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6]>[K7], [K7, K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>, K6 extends KeyOf<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, k6: Part<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>, K6>, setter: StoreSetter<W<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5]>[K6], [K6, K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>, K5 extends KeyOf<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, k5: Part<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>, K5>, setter: StoreSetter<W<W<W<W<W<T>[K1]>[K2]>[K3]>[K4]>[K5], [K5, K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>, K4 extends KeyOf<W<W<W<W<T>[K1]>[K2]>[K3]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, k4: Part<W<W<W<W<T>[K1]>[K2]>[K3]>, K4>, setter: StoreSetter<W<W<W<W<T>[K1]>[K2]>[K3]>[K4], [K4, K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>, K3 extends KeyOf<W<W<W<T>[K1]>[K2]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, k3: Part<W<W<W<T>[K1]>[K2]>, K3>, setter: StoreSetter<W<W<W<T>[K1]>[K2]>[K3], [K3, K2, K1]>): void;
    <K1 extends KeyOf<W<T>>, K2 extends KeyOf<W<W<T>[K1]>>>(k1: Part<W<T>, K1>, k2: Part<W<W<T>[K1]>, K2>, setter: StoreSetter<W<W<T>[K1]>[K2], [K2, K1]>): void;
    <K1 extends KeyOf<W<T>>>(k1: Part<W<T>, K1>, setter: StoreSetter<W<T>[K1], [K1]>): void;
    (setter: StoreSetter<T, []>): void;
}
/**
 * creates a reactive store that can be read through a proxy object and written with a setter function
 *
 * @description https://www.solidjs.com/docs/latest/api#createstore
 */
export declare function createStore<T extends StoreNode>(store: T | Store<T>, options?: {
    name?: string;
}): [get: Store<T>, set: SetStoreFunction<T>];
export {};
`,"types/reactive/array.d.ts":`import { Accessor } from "./signal";
/**
 * reactively transforms an array with a callback function - underlying helper for the \`<For>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the index as accessor, transforms only values that changed and returns an accessor and reactively tracks changes to the list.
 *
 * @description https://www.solidjs.com/docs/latest/api#maparray
 */
export declare function mapArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: T, i: Accessor<number>) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
/**
 * reactively maps arrays by index instead of value - underlying helper for the \`<Index>\` control flow
 *
 * similar to \`Array.prototype.map\`, but gets the value as an accessor, transforms only changed items of the original arrays anew and returns an accessor.
 *
 * @description https://www.solidjs.com/docs/latest/api#indexarray
 */
export declare function indexArray<T, U>(list: Accessor<readonly T[] | undefined | null | false>, mapFn: (v: Accessor<T>, i: number) => U, options?: {
    fallback?: Accessor<any>;
}): () => U[];
`,"types/reactive/observable.d.ts":`import { Accessor, Setter } from "./signal";
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
/**
 * creates a simple observable from a signal's accessor to be used with the \`from\` operator of observable libraries like e.g. rxjs
 * \`\`\`typescript
 * import { from } from "rxjs";
 * const [s, set] = createSignal(0);
 * const obsv$ = from(observable(s));
 * obsv$.subscribe((v) => console.log(v));
 * \`\`\`
 * description https://www.solidjs.com/docs/latest/api#observable
 */
export declare function observable<T>(input: Accessor<T>): {
    [x: number]: () => any;
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
`,"types/reactive/scheduler.d.ts":`export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
`,"types/reactive/signal.d.ts":`import { requestCallback } from "./scheduler";
import type { JSX } from "../jsx";
export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const NOTPENDING: {};
export declare var Owner: Owner | null;
export declare let Transition: TransitionState | null;
declare let ExternalSourceFactory: ExternalSourceFactory | null;
declare global {
    var _$afterUpdate: () => void;
}
export interface SignalState<T> {
    value?: T;
    observers: Computation<any>[] | null;
    observerSlots: number[] | null;
    pending: T | {};
    tValue?: T;
    comparator?: (prev: T, next: T) => boolean;
    name?: string;
}
export interface Owner {
    owned: Computation<any>[] | null;
    cleanups: (() => void)[] | null;
    owner: Owner | null;
    context: any | null;
    sourceMap?: Record<string, {
        value: unknown;
    }>;
    name?: string;
    componentName?: string;
}
export interface Computation<Init, Next extends Init = Init> extends Owner {
    fn: EffectFunction<Init, Next>;
    state: number;
    tState?: number;
    sources: SignalState<Next>[] | null;
    sourceSlots: number[] | null;
    value?: Init;
    updatedAt: number | null;
    pure: boolean;
    user?: boolean;
    suspense?: SuspenseContextType;
}
export interface TransitionState {
    sources: Set<SignalState<any>>;
    effects: Computation<any>[];
    promises: Set<Promise<any>>;
    disposed: Set<Computation<any>>;
    queue: Set<Computation<any>>;
    scheduler?: (fn: () => void) => unknown;
    running: boolean;
    done?: Promise<void>;
    resolve?: () => void;
}
declare type ExternalSourceFactory = <Prev, Next extends Prev = Prev>(fn: EffectFunction<Prev, Next>, trigger: () => void) => ExternalSource;
export interface ExternalSource {
    track: EffectFunction<any, any>;
    dispose: () => void;
}
export declare type RootFunction<T> = (dispose: () => void) => T;
/**
 * Creates a new non-tracked reactive context that doesn't auto-dispose
 *
 * @param fn a function in which the reactive state is scoped
 * @param detachedOwner optional reactive context to bind the root to
 * @returns the output of \`fn\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#createroot
 */
export declare function createRoot<T>(fn: RootFunction<T>, detachedOwner?: Owner): T;
export declare type Accessor<T> = () => T;
export declare type Setter<T> = (undefined extends T ? (value?: undefined) => undefined : {}) & (<U extends T>(value: Exclude<U, Function> | ((prev: T) => U)) => U);
export declare type Signal<T> = [get: Accessor<T>, set: Setter<T>];
export interface SignalOptions<T> extends MemoOptions<T> {
    internal?: boolean;
}
/**
 * Creates a simple reactive state with a getter and setter
 * \`\`\`typescript
 * const [state: Accessor<T>, setState: Setter<T>] = createSignal<T>(
 *  value: T,
 *  options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * )
 * \`\`\`
 * @param value initial value of the state; if empty, the state's type will automatically extended with undefined; otherwise you need to extend the type manually if you want setting to undefined not be an error
 * @param options optional object with a name for debugging purposes and equals, a comparator function for the previous and next value to allow fine-grained control over the reactivity
 *
 * @returns \`\`\`typescript
 * [state: Accessor<T>, setState: Setter<T>]
 * \`\`\`
 * * the Accessor is merely a function that returns the current value and registers each call to the reactive root
 * * the Setter is a function that allows directly setting or mutating the value:
 * \`\`\`typescript
 * const [count, setCount] = createSignal(0);
 * setCount(count => count + 1);
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createsignal
 */
export declare function createSignal<T>(): Signal<T | undefined>;
export declare function createSignal<T>(value: T, options?: SignalOptions<T>): Signal<T>;
export interface BaseOptions {
    name?: string;
}
export declare type NoInfer<T extends any> = [T][T extends any ? 0 : never];
export interface EffectOptions extends BaseOptions {
}
export declare type EffectFunction<Prev, Next extends Prev = Prev> = (v: Prev) => Next;
/**
 * Creates a reactive computation that runs immediately before render, mainly used to write to other reactive primitives
 * \`\`\`typescript
 * export function createComputed<Next, Init = Next>(
 *   fn: (v: Init | Next) => Next,
 *   value?: Init,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createcomputed
 */
export declare function createComputed<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
export declare function createComputed<Next, Init = undefined>(..._: undefined extends Init ? [fn: EffectFunction<Init | Next, Next>, value?: Init, options?: EffectOptions] : [fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions]): void;
/**
 * Creates a reactive computation that runs during the render phase as DOM elements are created and updated but not necessarily connected
 * \`\`\`typescript
 * export function createRenderEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createrendereffect
 */
export declare function createRenderEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
export declare function createRenderEffect<Next, Init = undefined>(..._: undefined extends Init ? [fn: EffectFunction<Init | Next, Next>, value?: Init, options?: EffectOptions] : [fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions]): void;
/**
 * Creates a reactive computation that runs after the render phase
 * \`\`\`typescript
 * export function createEffect<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string }
 * ): void;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createeffect
 */
export declare function createEffect<Next, Init = Next>(fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions): void;
export declare function createEffect<Next, Init = undefined>(..._: undefined extends Init ? [fn: EffectFunction<Init | Next, Next>, value?: Init, options?: EffectOptions] : [fn: EffectFunction<Init | Next, Next>, value: Init, options?: EffectOptions]): void;
/**
 * Creates a reactive computation that runs after the render phase with flexible tracking
 * \`\`\`typescript
 * export function createReaction(
 *   onInvalidate: () => void,
 *   options?: { name?: string }
 * ): (fn: () => void) => void;
 * \`\`\`
 * @param invalidated a function that is called when tracked function is invalidated.
 * @param options allows to set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createreaction
 */
export declare function createReaction(onInvalidate: () => void, options?: EffectOptions): (tracking: () => void) => void;
interface Memo<Prev, Next = Prev> extends SignalState<Next>, Computation<Next> {
    tOwned?: Computation<Prev | Next, Next>[];
}
export interface MemoOptions<T> extends EffectOptions {
    equals?: false | ((prev: T, next: T) => boolean);
}
/**
 * Creates a readonly derived reactive memoized signal
 * \`\`\`typescript
 * export function createMemo<T>(
 *   fn: (v: T) => T,
 *   value?: T,
 *   options?: { name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T;
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param value an optional initial value for the computation; if set, fn will never receive undefined as first argument
 * @param options allows to set a name in dev mode for debugging purposes and use a custom comparison function in equals
 *
 * @description https://www.solidjs.com/docs/latest/api#creatememo
 */
export declare function createMemo<Next extends _Next, Init = Next, _Next = Next>(fn: EffectFunction<Init | _Next, Next>, value: Init, options?: MemoOptions<Next>): Accessor<Next>;
export declare function createMemo<Next extends _Next, Init = undefined, _Next = Next>(..._: undefined extends Init ? [fn: EffectFunction<Init | _Next, Next>, value?: Init, options?: MemoOptions<Next>] : [fn: EffectFunction<Init | _Next, Next>, value: Init, options?: MemoOptions<Next>]): Accessor<Next>;
export interface Resource<T> extends Accessor<T> {
    loading: boolean;
    error: any;
}
export declare type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => T | Promise<T> | undefined | null;
};
export declare type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export declare type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
/**
 * Creates a resource that wraps a repeated promise in a reactive pattern:
 * \`\`\`typescript
 * const [resource, { mutate, refetch }] = createResource(source, fetcher, options);
 * \`\`\`
 * @param source - reactive data function to toggle the request, optional
 * @param fetcher - function that receives the source (or true) and an accessor for the last or initial value and returns a value or a Promise with the value:
 * \`\`\`typescript
 * const fetcher: ResourceFetcher<S, T, > = (
 *   sourceOutput: ReturnValue<typeof source>,
 *   info: ResourceFetcherInfo<T>
 * ) => T | Promise<T>;
 * \`\`\`
 * @param options - an optional object with the initialValue and the name (for debugging purposes)
 *
 * @returns \`\`\`typescript
 * [Resource<T>, { mutate: Setter<T>, refetch: () => void }]
 * \`\`\`
 *
 * * Setting an \`initialValue\` in the options will mean that both the prev() accessor and the resource should never return undefined (if that is wanted, you need to extend the type with undefined)
 * * \`mutate\` allows to manually overwrite the resource without calling the fetcher
 * * \`refetch\` will re-run the fetcher without changing the source
 *
 * @description https://www.solidjs.com/docs/latest/api#createresource
 */
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function refetchResources(info?: unknown): Promise<any[]>;
export interface DeferredOptions<T> {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
    timeoutMs?: number;
}
/**
 * Creates a reactive computation that only runs and notifies the reactive context when the browser is idle
 * \`\`\`typescript
 * export function createDeferred<T>(
 *   fn: (v: T) => T,
 *   options?: { timeoutMs?: number, name?: string, equals?: false | ((prev: T, next: T) => boolean) }
 * ): () => T);
 * \`\`\`
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set the timeout in milliseconds, use a custom comparison function and set a name in dev mode for debugging purposes
 *
 * @description https://www.solidjs.com/docs/latest/api#createdeferred
 */
export declare function createDeferred<T>(source: Accessor<T>, options?: DeferredOptions<T>): Accessor<T>;
export declare type EqualityCheckerFunction<T, U> = (a: U, b: T) => boolean;
/**
 * Creates a conditional signal that only notifies subscribers when entering or exiting their key matching the value
 * \`\`\`typescript
 * export function createSelector<T, U>(
 *   source: () => T
 *   fn: (a: U, b: T) => boolean,
 *   options?: { name?: string }
 * ): (k: U) => boolean;
 * \`\`\`
 * @param source
 * @param fn a function that receives its previous or the initial value, if set, and returns a new value used to react on a computation
 * @param options allows to set a name in dev mode for debugging purposes, optional
 *
 * \`\`\`typescript
 * const isSelected = createSelector(selectedId);
 * <For each={list()}>
 *   {(item) => <li classList={{ active: isSelected(item.id) }}>{item.name}</li>}
 * </For>
 * \`\`\`
 *
 * This makes the operation O(2) instead of O(n).
 *
 * @description https://www.solidjs.com/docs/latest/api#createselector
 */
export declare function createSelector<T, U>(source: Accessor<T>, fn?: EqualityCheckerFunction<T, U>, options?: BaseOptions): (key: U) => boolean;
/**
 * Holds changes inside the block before the reactive context is updated
 * @param fn wraps the reactive updates that should be batched
 * @returns the return value from \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#batch
 */
export declare function batch<T>(fn: Accessor<T>): T;
/**
 * Ignores tracking context inside its scope
 * @param fn the scope that is out of the tracking context
 * @returns the return value of \`fn\`
 *
 * @description https://www.solidjs.com/docs/latest/api#untrack
 */
export declare function untrack<T>(fn: Accessor<T>): T;
export declare type ReturnTypes<T> = T extends (() => any)[] ? {
    [I in keyof T]: ReturnTypes<T[I]>;
} : T extends () => any ? ReturnType<T> : never;
export declare type OnEffectFunction<S, Prev, Next extends Prev = Prev> = (input: ReturnTypes<S>, prevInput: ReturnTypes<S>, v: Prev) => Next;
export interface OnOptions {
    defer?: boolean;
}
/**
 * on - make dependencies of a computation explicit
 * \`\`\`typescript
 * export function on<T extends Array<() => any> | (() => any), U>(
 *   deps: T | T[],
 *   fn: (input: T, prevInput: T, prevValue?: U) => U,
 *   options?: { defer?: boolean } = {}
 * ): (prevValue?: U) => U | undefined;
 * \`\`\`
 * @param deps list of reactive dependencies or a single reactive dependency
 * @param fn computation on input; the current previous content(s) of input and the previous value are given as arguments and it returns a new value
 * @param options optional, allows deferred computation until at the end of the next change
 * @returns an effect function that is passed into createEffect. For example:
 *
 * \`\`\`typescript
 * createEffect(on(a, (v) => console.log(v, b())));
 *
 * // is equivalent to:
 * createEffect(() => {
 *   const v = a();
 *   untrack(() => console.log(v, b()));
 * });
 * \`\`\`
 *
 * @description https://www.solidjs.com/docs/latest/api#on
 */
export declare function on<S extends Accessor<unknown> | Accessor<unknown>[] | [], Next, Init = unknown>(deps: S, fn: OnEffectFunction<S, Init | Next, Next>, options?: OnOptions): EffectFunction<NoInfer<Init> | NoInfer<Next>, NoInfer<Next>>;
/**
 * onMount - run an effect only after initial render on mount
 * @param fn an effect that should run only once on mount
 *
 * @description https://www.solidjs.com/docs/latest/api#onmount
 */
export declare function onMount(fn: () => void): void;
/**
 * onCleanup - run an effect once before the reactive scope is disposed
 * @param fn an effect that should run only once on cleanup
 *
 * @description https://www.solidjs.com/docs/latest/api#oncleanup
 */
export declare function onCleanup(fn: () => void): () => void;
/**
 * onError - run an effect whenever an error is thrown within the context of the child scopes
 * @param fn an error handler that receives the error
 *
 * * If the error is thrown again inside the error handler, it will trigger the next available parent handler
 *
 * @description https://www.solidjs.com/docs/latest/api#onerror
 */
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): Computation<any, any> | null;
export declare function getOwner(): Owner | null;
export declare function runWithOwner<T>(o: Owner, fn: () => T): T;
export declare function enableScheduling(scheduler?: typeof requestCallback): void;
/**
 * \`\`\`typescript
 * export function startTransition(fn: () => void) => Promise<void>
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function startTransition(fn: () => unknown): Promise<void>;
export declare type Transition = [Accessor<boolean>, (fn: () => void) => Promise<void>];
/**
 * \`\`\`typescript
 * export function useTransition(): [
 *   () => boolean,
 *   (fn: () => void, cb?: () => void) => void
 * ];
 * @returns a tuple; first value is an accessor if the transition is pending and a callback to start the transition
 *
 * @description https://www.solidjs.com/docs/latest/api#usetransition
 */
export declare function useTransition(): Transition;
export declare function resumeEffects(e: Computation<any>[]): void;
export declare function devComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export declare function hashValue(v: any): string;
export declare function registerGraph(name: string, value: {
    value: unknown;
}): string;
interface GraphRecord {
    [k: string]: GraphRecord | unknown;
}
export declare function serializeGraph(owner?: Owner | null): GraphRecord;
export declare type ContextProviderComponent<T> = (props: {
    value: T;
    children: any;
}) => any;
export interface Context<T> {
    id: symbol;
    Provider: ContextProviderComponent<T>;
    defaultValue: T;
}
/**
 * Creates a Context to handle a state scoped for the children of a component
 * \`\`\`typescript
 * interface Context<T> {
 *   id: symbol;
 *   Provider: (props: { value: T; children: any }) => any;
 *   defaultValue: T;
 * }
 * export function createContext<T>(defaultValue?: T): Context<T | undefined>;
 * \`\`\`
 * @param defaultValue optional default to inject into context
 * @returns The context that contains the Provider Component and that can be used with \`useContext\`
 *
 * @description https://www.solidjs.com/docs/latest/api#createcontext
 */
export declare function createContext<T>(): Context<T | undefined>;
export declare function createContext<T>(defaultValue: T): Context<T>;
/**
 * use a context to receive a scoped state from a parent's Context.Provider
 *
 * @param context Context object made by \`createContext\`
 * @returns the current or \`defaultValue\`, if present
 *
 * @description https://www.solidjs.com/docs/latest/api#usecontext
 */
export declare function useContext<T>(context: Context<T>): T;
export declare type ResolvedJSXElement = Exclude<JSX.Element, JSX.ArrayElement | JSX.FunctionElement>;
export declare type ResolvedChildren = ResolvedJSXElement | ResolvedJSXElement[];
/**
 * Resolves child elements to help interact with children
 *
 * @param fn an accessor for the children
 * @returns a accessor of the same children, but resolved
 *
 * @description https://www.solidjs.com/docs/latest/api#children
 */
export declare function children(fn: Accessor<JSX.Element>): Accessor<ResolvedChildren>;
export declare type SuspenseContextType = {
    increment?: () => void;
    decrement?: () => void;
    inFallback?: () => boolean;
    effects?: Computation<any>[];
    resolved?: boolean;
};
declare type SuspenseContext = Context<SuspenseContextType> & {
    active?(): boolean;
    increment?(): void;
    decrement?(): void;
};
declare let SuspenseContext: SuspenseContext;
export declare function getSuspenseContext(): SuspenseContext;
export declare function enableExternalSource(factory: ExternalSourceFactory): void;
export declare function readSignal(this: SignalState<any> | Memo<any>): any;
export declare function writeSignal(node: SignalState<any> | Memo<any>, value: any, isComp?: boolean): any;
export {};
`,"types/render/Suspense.d.ts":`import type { JSX } from "../jsx";
/**
 * **[experimental]** controls the order in which suspended content is rendered
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspenselist%3E-(experimental)
 */
export declare function SuspenseList(props: {
    children: JSX.Element;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): JSX.Element;
/**
 * tracks all resources inside a component and renders a fallback until they are all resolved
 * \`\`\`typescript
 * const AsyncComponent = lazy(() => import('./component'));
 *
 * <Suspense fallback={<LoadingIndicator />}>
 *   <AsyncComponent />
 * </Suspense>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Csuspense%3E
 */
export declare function Suspense(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): JSX.Element;
`,"types/render/component.d.ts":`import type { JSX } from "../jsx";
export declare function enableHydration(): void;
export declare type PropsWithChildren<P = {}> = P & {
    children?: JSX.Element;
};
export declare type Component<P = {}> = (props: PropsWithChildren<P>) => JSX.Element;
/**
 * Takes the props of the passed component and returns its type
 *
 * @example
 * ComponentProps<typeof Portal> // { mount?: Node; useShadow?: boolean; children: JSX.Element }
 * ComponentProps<'div'> // JSX.HTMLAttributes<HTMLDivElement>
 */
export declare type ComponentProps<T extends keyof JSX.IntrinsicElements | Component<any>> = T extends Component<infer P> ? P : T extends keyof JSX.IntrinsicElements ? JSX.IntrinsicElements[T] : {};
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
declare type UnboxLazy<T> = T extends () => infer U ? U : T;
declare type BoxedTupleTypes<T extends any[]> = {
    [P in keyof T]: [UnboxLazy<T[P]>];
}[Exclude<keyof T, keyof any[]>];
declare type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never;
declare type UnboxIntersection<T> = T extends {
    0: infer U;
} ? U : never;
declare type MergeProps<T extends any[]> = UnboxIntersection<UnionToIntersection<BoxedTupleTypes<T>>>;
export declare function mergeProps<T extends any[]>(...sources: T): MergeProps<T>;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function lazy<T extends Component<any>>(fn: () => Promise<{
    default: T;
}>): T & {
    preload: () => Promise<{
        default: T;
    }>;
};
export declare function createUniqueId(): string;
export {};
`,"types/render/flow.d.ts":`import { Accessor } from "../reactive/signal";
import type { JSX } from "../jsx";
/**
 * creates a list elements from a list
 *
 * it receives a map function as its child that receives a list element and an accessor with the index and returns a JSX-Element; if the list is empty, an optional fallback is returned:
 * \`\`\`typescript
 * <For each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index()}>{item}</div>}
 * </For>
 * \`\`\`
 * If you have a list with fixed indices and changing values, consider using \`<Index>\` instead.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cfor%3E
 */
export declare function For<T, U extends JSX.Element>(props: {
    each: readonly T[] | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: T, index: Accessor<number>) => U;
}): Accessor<U[]>;
/**
 * Non-keyed iteration over a list creating elements from its items
 *
 * To be used if you have a list with fixed indices, but changing values.
 * \`\`\`typescript
 * <Index each={items} fallback={<div>No items</div>}>
 *   {(item, index) => <div data-index={index}>{item()}</div>}
 * </Index>
 * \`\`\`
 * If you have a list with changing indices, better use \`<For>\`.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cindex%3E
 */
export declare function Index<T, U extends JSX.Element>(props: {
    each: readonly T[] | undefined | null | false;
    fallback?: JSX.Element;
    children: (item: Accessor<T>, index: number) => U;
}): Accessor<U[]>;
/**
 * Conditionally render its children or an optional fallback component
 * @description https://www.solidjs.com/docs/latest/api#%3Cshow%3E
 */
export declare function Show<T>(props: {
    when: T | undefined | null | false;
    fallback?: JSX.Element;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
}): () => JSX.Element;
/**
 * switches between content based on mutually exclusive conditions
 * \`\`\`typescript
 * <Switch fallback={<FourOhFour />}>
 *   <Match when={state.route === 'home'}>
 *     <Home />
 *   </Match>
 *   <Match when={state.route === 'settings'}>
 *     <Settings />
 *   </Match>
 * </Switch>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Switch(props: {
    fallback?: JSX.Element;
    children: JSX.Element;
}): Accessor<JSX.Element>;
export declare type MatchProps<T> = {
    when: T | undefined | null | false;
    children: JSX.Element | ((item: NonNullable<T>) => JSX.Element);
};
/**
 * selects a content based on condition when inside a \`<Switch>\` control flow
 * \`\`\`typescript
 * <Match when={condition()}>
 *   <Content/>
 * </Match>
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cswitch%3E%2F%3Cmatch%3E
 */
export declare function Match<T>(props: MatchProps<T>): JSX.Element;
export declare function resetErrorBoundaries(): void;
/**
 * catches uncaught errors inside components and renders a fallback content
 *
 * Also supports a callback form that passes the error and a reset function:
 * \`\`\`typescript
 * <ErrorBoundary fallback={
 *   (err, reset) => <div onClick={reset}>Error: {err.toString()}</div>
 * }>
 *   <MyComp />
 * </ErrorBoundary>
 * \`\`\`
 * Errors thrown from the fallback can be caught by a parent ErrorBoundary
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cerrorboundary%3E
 */
export declare function ErrorBoundary(props: {
    fallback: JSX.Element | ((err: any, reset: () => void) => JSX.Element);
    children: JSX.Element;
}): Accessor<JSX.Element>;
`,"types/render/hydration.d.ts":`export declare type HydrationContext = {
    id: string;
    count: number;
};
declare type SharedConfig = {
    context?: HydrationContext;
    resources?: {
        [key: string]: any;
    };
    load?: (id: string) => Promise<any> | undefined;
    gather?: (key: string) => void;
    registry?: Map<string, Element>;
    done?: boolean;
};
export declare const sharedConfig: SharedConfig;
export declare function setHydrateContext(context?: HydrationContext): void;
export declare function nextHydrateContext(): HydrationContext | undefined;
export {};
`,"types/render/index.d.ts":`export * from "./component";
export * from "./flow";
export * from "./Suspense";
export { sharedConfig } from "./hydration";
`,"types/server/index.d.ts":`export { createRoot, createSignal, createComputed, createRenderEffect, createEffect, createReaction, createDeferred, createSelector, createMemo, getListener, onMount, onCleanup, onError, untrack, batch, on, children, createContext, useContext, getOwner, runWithOwner, equalFn, requestCallback, mapArray, observable, from, $PROXY, $DEVCOMP, DEV, enableExternalSource } from "./reactive";
export { mergeProps, splitProps, createComponent, For, Index, Show, Switch, Match, ErrorBoundary, Suspense, SuspenseList, createResource, refetchResources, resetErrorBoundaries, enableScheduling, enableHydration, startTransition, useTransition, createUniqueId, lazy, sharedConfig } from "./rendering";
export type { Component, Resource } from "./rendering";
`,"types/server/reactive.d.ts":`export declare const equalFn: <T>(a: T, b: T) => boolean;
export declare const $PROXY: unique symbol;
export declare const $DEVCOMP: unique symbol;
export declare const DEV: {};
export declare type Accessor<T> = () => T;
export declare type Setter<T> = undefined extends T ? <U extends T>(value?: (U extends Function ? never : U) | ((prev?: T) => U)) => U : <U extends T>(value: (U extends Function ? never : U) | ((prev: T) => U)) => U;
export declare let Owner: Owner | null;
interface Owner {
    owner: Owner | null;
    context: any | null;
}
export declare function createRoot<T>(fn: (dispose: () => void) => T, detachedOwner?: Owner): T;
export declare function createSignal<T>(value: T, options?: {
    equals?: false | ((prev: T, next: T) => boolean);
    name?: string;
}): [get: () => T, set: (v: (T extends Function ? never : T) | ((prev: T) => T)) => T];
export declare function createComputed<T>(fn: (v?: T) => T, value?: T): void;
export declare const createRenderEffect: typeof createComputed;
export declare function createEffect<T>(fn: (v?: T) => T, value?: T): void;
export declare function createReaction(fn: () => void): (fn: () => void) => void;
export declare function createMemo<T>(fn: (v?: T) => T, value?: T): () => T;
export declare function createDeferred<T>(source: () => T): () => T;
export declare function createSelector<T>(source: () => T, fn?: (k: T, value: T) => boolean): (k: T) => boolean;
export declare function batch<T>(fn: () => T): T;
export declare const untrack: typeof batch;
export declare function on<T, U>(deps: Array<() => T> | (() => T), fn: (value: Array<T> | T, prev?: Array<T> | T, prevResults?: U) => U, options?: {
    defer?: boolean;
}): (prev?: U) => U | undefined;
export declare function onMount(fn: () => void): void;
export declare function onCleanup(fn: () => void): void;
export declare function onError(fn: (err: any) => void): void;
export declare function getListener(): null;
export interface Context<T> {
    id: symbol;
    Provider: (props: {
        value: T;
        children: any;
    }) => any;
    defaultValue?: T;
}
export declare function createContext<T>(defaultValue?: T): Context<T>;
export declare function useContext<T>(context: Context<T>): T;
export declare function getOwner(): Owner | null;
export declare function children(fn: () => any): () => unknown;
export declare function runWithOwner(o: Owner, fn: () => any): any;
export declare function lookup(owner: Owner | null, key: symbol | string): any;
export interface Task {
    id: number;
    fn: ((didTimeout: boolean) => void) | null;
    startTime: number;
    expirationTime: number;
}
export declare function requestCallback(fn: () => void, options?: {
    timeout: number;
}): Task;
export declare function cancelCallback(task: Task): void;
export declare function mapArray<T, U>(list: () => T[], mapFn: (v: T, i: () => number) => U, options?: {
    fallback?: () => any;
}): () => U[];
export declare type ObservableObserver<T> = ((v: T) => void) | {
    next: (v: T) => void;
    error?: (v: any) => void;
    complete?: (v: boolean) => void;
};
export declare function observable<T>(input: Accessor<T>): {
    [x: number]: () => any;
    subscribe(observer: ObservableObserver<T>): {
        unsubscribe(): void;
    };
};
export declare function from<T>(producer: ((setter: Setter<T>) => () => void) | {
    subscribe: (fn: (v: T) => void) => (() => void) | {
        unsubscribe: () => void;
    };
}): Accessor<T>;
export declare function enableExternalSource(factory: any): void;
export {};
`,"types/server/rendering.d.ts":`import { Setter } from "./reactive";
import type { JSX } from "../jsx";
declare type PropsWithChildren<P> = P & {
    children?: JSX.Element;
};
export declare type Component<P = {}> = (props: PropsWithChildren<P>) => JSX.Element;
declare type PossiblyWrapped<T> = {
    [P in keyof T]: T[P] | (() => T[P]);
};
declare type SharedConfig = {
    context?: HydrationContext;
};
export declare const sharedConfig: SharedConfig;
export declare function createUniqueId(): string;
export declare function createComponent<T>(Comp: (props: T) => JSX.Element, props: PossiblyWrapped<T>): JSX.Element;
export declare function mergeProps<T, U>(source: T, source1: U): T & U;
export declare function mergeProps<T, U, V>(source: T, source1: U, source2: V): T & U & V;
export declare function mergeProps<T, U, V, W>(source: T, source1: U, source2: V, source3: W): T & U & V & W;
export declare function splitProps<T extends object, K1 extends keyof T>(props: T, ...keys: [K1[]]): [Pick<T, K1>, Omit<T, K1>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T>(props: T, ...keys: [K1[], K2[]]): [Pick<T, K1>, Pick<T, K2>, Omit<T, K1 | K2>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Omit<T, K1 | K2 | K3>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[]]): [Pick<T, K1>, Pick<T, K2>, Pick<T, K3>, Pick<T, K4>, Omit<T, K1 | K2 | K3 | K4>];
export declare function splitProps<T extends object, K1 extends keyof T, K2 extends keyof T, K3 extends keyof T, K4 extends keyof T, K5 extends keyof T>(props: T, ...keys: [K1[], K2[], K3[], K4[], K5[]]): [
    Pick<T, K1>,
    Pick<T, K2>,
    Pick<T, K3>,
    Pick<T, K4>,
    Pick<T, K5>,
    Omit<T, K1 | K2 | K3 | K4 | K5>
];
export declare function For<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: T, index: () => number) => string;
}): string | any[] | undefined;
export declare function Index<T>(props: {
    each: T[];
    fallback?: string;
    children: (item: () => T, index: number) => string;
}): string | any[] | undefined;
export declare function Show<T>(props: {
    when: T | false;
    fallback?: string;
    children: string | ((item: T) => string);
}): string;
export declare function Switch(props: {
    fallback?: string;
    children: MatchProps<unknown> | MatchProps<unknown>[];
}): string;
declare type MatchProps<T> = {
    when: T | false;
    children: string | ((item: T) => string);
};
export declare function Match<T>(props: MatchProps<T>): MatchProps<T>;
export declare function resetErrorBoundaries(): void;
export declare function ErrorBoundary(props: {
    fallback: string | ((err: any, reset: () => void) => string);
    children: string;
}): any;
export interface Resource<T> {
    (): T | undefined;
    loading: boolean;
    error: any;
}
declare type SuspenseContextType = {
    resources: Map<string, {
        loading: boolean;
        error: any;
    }>;
    completed: () => void;
};
export declare type ResourceActions<T> = {
    mutate: Setter<T>;
    refetch: (info?: unknown) => void;
};
export declare type ResourceReturn<T> = [Resource<T>, ResourceActions<T>];
export declare type ResourceSource<S> = S | false | null | undefined | (() => S | false | null | undefined);
export declare type ResourceFetcher<S, T> = (k: S, info: ResourceFetcherInfo<T>) => T | Promise<T>;
export declare type ResourceFetcherInfo<T> = {
    value: T | undefined;
    refetching?: unknown;
};
export declare type ResourceOptions<T> = undefined extends T ? {
    initialValue?: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
} : {
    initialValue: T;
    name?: string;
    globalRefetch?: boolean;
    onHydrated?: <S, T>(k: S, info: ResourceFetcherInfo<T>) => void;
};
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S = true>(fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options?: ResourceOptions<undefined>): ResourceReturn<T | undefined>;
export declare function createResource<T, S>(source: ResourceSource<S>, fetcher: ResourceFetcher<S, T>, options: ResourceOptions<T>): ResourceReturn<T>;
export declare function refetchResources(info?: unknown): void;
export declare function lazy(fn: () => Promise<{
    default: any;
}>): (props: any) => string;
export declare function enableScheduling(): void;
export declare function enableHydration(): void;
export declare function startTransition(fn: () => any): void;
export declare function useTransition(): [() => boolean, (fn: () => any) => void];
declare type HydrationContext = {
    id: string;
    count: number;
    writeResource?: (id: string, v: Promise<any> | any, error?: boolean) => void;
    resources: Record<string, any>;
    suspense: Record<string, SuspenseContextType>;
    registerFragment: (v: string) => (v?: string, err?: any) => boolean;
    async?: boolean;
    streaming?: boolean;
    noHydrate: boolean;
};
export declare function SuspenseList(props: {
    children: string;
    revealOrder: "forwards" | "backwards" | "together";
    tail?: "collapsed" | "hidden";
}): string;
export declare function Suspense(props: {
    fallback?: string;
    children: string;
}): any;
export {};
`,"universal/types/index.d.ts":`import type { RendererOptions, Renderer } from "./universal";
export declare function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;
`,"universal/types/universal.d.ts":`export interface RendererOptions<NodeType> {
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  replaceText(textNode: NodeType, value: string): void;
  isTextNode(node: NodeType): boolean;
  setProperty<T>(node: NodeType, name: string, value: T, prev?: T): void;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  removeNode(parent: NodeType, node: NodeType): void;
  getParentNode(node: NodeType): NodeType;
  getFirstChild(node: NodeType): NodeType;
  getNextSibling(node: NodeType): NodeType;
}

export interface Renderer<NodeType> {
  render(code: () => NodeType, node: NodeType): () => void;
  effect<T>(fn: (prev?: T) => T, init?: T): void;
  memo<T>(fn: () => T, equal: boolean): () => T;
  createComponent<T>(Comp: (props: T) => NodeType, props: T): NodeType;
  createElement(tag: string): NodeType;
  createTextNode(value: string): NodeType;
  insertNode(parent: NodeType, node: NodeType, anchor?: NodeType): void;
  insert<T>(parent: any, accessor: (() => T) | T, marker?: any | null): NodeType;
  spread<T>(node: any, accessor: (() => T) | T, skipChildren?: Boolean): void;
  setProp<T>(node: NodeType, name: string, value: T, prev?: T): T;
  mergeProps(...sources: unknown[]): unknown;
}

export function createRenderer<NodeType>(options: RendererOptions<NodeType>): Renderer<NodeType>;

`,"web/types/client.d.ts":`import { JSX } from "./jsx";
export const Aliases: Record<string, string>;
export const PropAliases: Record<string, string>;
export const Properties: Set<string>;
export const ChildProperties: Set<string>;
export const DelegatedEvents: Set<string>;
export const DOMElements: Set<string>;
export const SVGElements: Set<string>;
export const SVGNamespace: Record<string, string>;

type MountableElement = Element | Document | ShadowRoot | DocumentFragment | Node;
export function render(code: () => JSX.Element, element: MountableElement): () => void;
export function template(html: string, count: number, isSVG?: boolean): Element;
export function effect<T>(fn: (prev?: T) => T, init?: T): void;
export function memo<T>(fn: () => T, equal: boolean): () => T;
export function insert<T>(
  parent: MountableElement,
  accessor: (() => T) | T,
  marker?: Node | null,
  init?: JSX.Element
): JSX.Element;
export function createComponent<T>(Comp: (props: T) => JSX.Element, props: T): JSX.Element;
export function delegateEvents(eventNames: string[], d?: Document): void;
export function clearDelegatedEvents(d?: Document): void;
export function spread<T>(
  node: Element,
  accessor: (() => T) | T,
  isSVG?: Boolean,
  skipChildren?: Boolean
): void;
export function assign(node: Element, props: any, isSVG?: Boolean, skipChildren?: Boolean): void;
export function setAttribute(node: Element, name: string, value: string): void;
export function setAttributeNS(node: Element, namespace: string, name: string, value: string): void;
export function innerHTML(node: Element, content: string): void;
export function addEventListener(
  node: Element,
  name: string,
  handler: () => void,
  delegate: boolean
): void;
export function classList(
  node: Element,
  value: { [k: string]: boolean },
  prev?: { [k: string]: boolean }
): void;
export function style(
  node: Element,
  value: { [k: string]: string },
  prev?: { [k: string]: string }
): void;
export function getOwner(): unknown;
export function mergeProps(...sources: unknown[]): unknown;
export function dynamicProperty(props: unknown, key: string): unknown;

export function hydrate(
  fn: () => JSX.Element,
  node: MountableElement,
  options?: { renderId?: string }
): () => void;
export function getHydrationKey(): string;
export function getNextElement(template?: HTMLTemplateElement): Element;
export function getNextMatch(start: Node, elementName: string): Element;
export function getNextMarker(start: Node): [Node, Array<Node>];
export function Assets(props: { children?: JSX.Element }): JSX.Element;
export function HydrationScript(): JSX.Element;
export function NoHydration(props: { children?: JSX.Element }): JSX.Element;
`,"web/types/core.d.ts":`import { createRoot, createRenderEffect, createComponent, getOwner, sharedConfig } from "../..";
declare function memo<T>(fn: () => T, equals: boolean): import("../..").Accessor<T>;
export { getOwner, createComponent, createRoot as root, createRenderEffect as effect, memo, sharedConfig };
`,"web/types/index.d.ts":`import { hydrate as hydrateCore } from "./client";
import { Component, JSX, Accessor } from "../..";
export * from "./client";
export { For, Show, Suspense, SuspenseList, Switch, Match, Index, ErrorBoundary, mergeProps } from "../..";
export * from "./server-mock";
export declare const isServer = false;
export declare const hydrate: typeof hydrateCore;
/**
 * renders components somewhere else in the DOM
 *
 * Useful for inserting modals and tooltips outside of an cropping layout. If no mount point is given, the portal is inserted in document.body; it is wrapped in a \`<div>\` unless the target is document.head or \`isSVG\` is true. setting \`useShadow\` to true places the element in a shadow root to isolate styles.
 *
 * @description https://www.solidjs.com/docs/latest/api#%3Cportal%3E
 */
export declare function Portal(props: {
    mount?: Node;
    useShadow?: boolean;
    isSVG?: boolean;
    children: JSX.Element;
}): Text;
declare type DynamicProps<T> = T & {
    children?: any;
    component?: Component<T> | string | keyof JSX.IntrinsicElements;
};
/**
 * renders an arbitrary custom or native component and passes the other props
 * \`\`\`typescript
 * <Dynamic component={multiline() ? 'textarea' : 'input'} value={value()} />
 * \`\`\`
 * @description https://www.solidjs.com/docs/latest/api#%3Cdynamic%3E
 */
export declare function Dynamic<T>(props: DynamicProps<T>): Accessor<JSX.Element>;
`,"web/types/jsx.d.ts":`export { JSX } from "../..";
`,"web/types/server-mock.d.ts":`export declare function renderToString<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
}): string;
export declare function renderToStringAsync<T>(fn: () => T, options?: {
    timeoutMs?: number;
    nonce?: string;
    renderId?: string;
}): Promise<string>;
export declare function renderToStream<T>(fn: () => T, options?: {
    nonce?: string;
    renderId?: string;
    onCompleteShell?: (info: {
        write: (v: string) => void;
    }) => void;
    onCompleteAll?: (info: {
        write: (v: string) => void;
    }) => void;
}): {
    pipe: (writable: {
        write: (v: string) => void;
    }) => void;
    pipeTo: (writable: WritableStream) => void;
};
export declare function ssr(template: string[] | string, ...nodes: any[]): {
    t: string;
};
export declare function resolveSSRNode(node: any): string;
export declare function ssrClassList(value: {
    [k: string]: boolean;
}): string;
export declare function ssrStyle(value: {
    [k: string]: string;
}): string;
export declare function ssrSpread(accessor: any): () => string;
export declare function ssrBoolean(key: string, value: boolean): string;
export declare function ssrHydrationKey(): string;
export declare function escape(html: string): string;
export declare function generateHydrationScript(): string;
export declare type LegacyResults = {
    startWriting: () => void;
};
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToWritable<T>(fn: () => T, writable: WritableStream, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
/**
 * @deprecated Replaced by renderToStream
 */
export declare function pipeToNodeWritable<T>(fn: () => T, writable: {
    write: (v: string) => void;
}, options?: {
    nonce?: string;
    onReady?: (res: LegacyResults) => void;
    onCompleteAll?: () => void;
}): void;
`}[t],"typescript",KC.parse(`file://root/node_modules/solid-js/${t}`));const e=h((t,n)=>lf.createModel(`declare module '${t}';`,"typescript",KC.parse(`file://root/${n}`)),"createEmptyModuleModel");e("@suid/*","suid-globals.d.ts"),e("@mui/*","mui-globals.d.ts"),e("react","react-globals.d.ts")}h(bde,"setupEditor");function vde(s){bde();const e=s.value!==void 0;let t=!1;const[n,i]=aj({controlled:()=>s.value,default:()=>String(s.defaultValue),name:"CodeEditor"}),o=rj(),r=tj();let a;return nj(()=>{a?.dispose()}),ij(()=>{const l=KC.parse(`file://root/${s.fileName}`);lf.getModel(l)?.dispose();const d=lf.createModel(s.value??"",s.language??"typescript",l);a=lf.create(o.ref,{model:d,theme:r.darkMode?"vs-dark":"vs-light",minimap:{enabled:!1},automaticLayout:!0}),a.onDidChangeModelContent(()=>{const c=d.getLinesContent().join(`
`);i(c),t||s.onChange?.(c)}),s.onReady?.()}),UA(()=>{a?.updateOptions({theme:r.darkMode?"vs-dark":"vs-light"})}),UA(l=>{if(e||l){const d=n();typeof d=="string"&&(t=l,a?.getModel()?.setValue(d),t=!1)}return!1},!0),oj(sj,{get sx(){return{width:"100%",height:"400px",...s.sx||{}}},ref:o})}h(vde,"CodeEditor");var whe=Object.freeze(Object.defineProperty({__proto__:null,default:vde},Symbol.toStringTag,{value:"Module"}));export{whe as C,sb as m,MV as t};
